(window["webpackJsonpreact-mindmap"]=window["webpackJsonpreact-mindmap"]||[]).push([[0],{300:function(e,t,n){e.exports=n.p+"static/media/default.4f8c4983.jpg"},301:function(e,t,n){e.exports=n.p+"static/media/theme1.2f59f00b.jpg"},302:function(e,t,n){e.exports=n.p+"static/media/theme2.b18193fb.jpg"},303:function(e,t,n){e.exports=n.p+"static/media/theme3.61c97910.jpg"},304:function(e,t,n){e.exports=n.p+"static/media/theme4.1e21408c.jpg"},354:function(e,t,n){},357:function(e,t,n){},518:function(e,t,n){},761:function(e,t,n){},847:function(e,t,n){},868:function(e,t,n){},869:function(e,t,n){},870:function(e,t,n){},871:function(e,t,n){},872:function(e,t,n){"use strict";n.r(t);var o=n(0),r=n.n(o),a=n(22),c=n.n(a),i=(n(354),n(10)),l=n(11),s=n(14),u=n(13),p=n(45),d=n(2),f=n(9),b=n.n(f),y=n(86),h=n(5),g=n(32),m=n(1),O=n(29),v=n(23),T=n(3);function j(e){return!0===(null!=(t=e)&&"object"===typeof t&&!1===Array.isArray(t))&&"[object Object]"===Object.prototype.toString.call(e);var t}var k=function(e){var t,n;return!1!==j(e)&&("function"===typeof(t=e.constructor)&&(!1!==j(n=t.prototype)&&!1!==n.hasOwnProperty("isPrototypeOf")))},E=n(31);var x,w=function(e,t){},S="L",C="R",K="M";!function(e){e[e.LEFT_TO_RIGHT=0]="LEFT_TO_RIGHT",e[e.RIGHT_TO_LEFT=1]="RIGHT_TO_LEFT",e[e.LEFT_AND_RIGHT=2]="LEFT_AND_RIGHT",e[e.TOP_TO_BOTTOM=3]="TOP_TO_BOTTOM"}(x||(x={}));var R=0,D=1,L="CONTENT",_="DESC",I="NORMAL",M="EDITING_CONTENT",A="EDITING_DESC",N="SHOW_POPUP",F="DRAGGING",P="ANCESTOR",B="DESCENDANT",z="SIBLING",V="NONE",H="TOGGLE_COLLAPSE",G="COLLAPSE_ALL",U="EXPAND_ALL",W="EXPAND_TO",J="ADD_CHILD",Z="ADD_SIBLING",Y="DELETE_TOPIC",q="FOCUS_TOPIC",X="SET_FOCUS_MODE",$="SET_STYLE",Q="SET_THEME",ee="SET_TOPIC_BLOCK",te="DELETE_TOPIC_BLOCK",ne="START_EDITING_CONTENT",oe="START_EDITING_DESC",re="DRAG_AND_DROP",ae="SET_EDITOR_ROOT",ce=function(e){Object(s.a)(n,e);var t=Object(u.a)(n);function n(){return Object(i.a)(this,n),t.apply(this,arguments)}return Object(l.a)(n,[{key:"data",get:function(){return this.get("data")}},{key:"type",get:function(){return this.get("type")}}],[{key:"create",value:function(e){return new n(e)}},{key:"createList",value:function(e){if(T.List.isList(e)||Array.isArray(e))return Object(T.List)(e.map(n.create));throw new Error("Block.createList only accepts Array or List, but you passed it: ".concat(e))}}]),n}(Object(T.Record)({type:null,key:null,data:null}));var ie={readOnly:!1,allowUndo:!0,layoutDir:x.LEFT_AND_RIGHT,theme:{name:"default",randomColor:!0,background:"rgb(57,60,65)",highlightColor:"#50C9CE",marginH:60,marginV:20,contentStyle:{lineHeight:"1.5"},linkStyle:{lineRadius:5,lineType:"curve",lineWidth:"3px"},rootTopic:{contentStyle:{fontSize:"34px",borderRadius:"35px",padding:"16px 18px 16px 18px"},subLinkStyle:{lineType:"curve",lineWidth:"3px",lineColor:"rgb(113, 203, 45)"}},primaryTopic:{contentStyle:{borderWidth:"1px",borderStyle:"solid",borderRadius:"20px",fontSize:"17px",padding:"10px 15px 10px 15px"},subLinkStyle:{lineType:"curve",lineWidth:"3px",lineColor:"rgb(113, 203, 45)"}},normalTopic:{contentStyle:{border:"1px solid #e8eaec",borderRadius:"20px",fontSize:"17px",padding:"4px 10px"},subLinkStyle:{lineType:"curve",lineWidth:"3px",lineColor:"white"}}}},le=function(e){Object(s.a)(n,e);var t=Object(u.a)(n);function n(){return Object(i.a)(this,n),t.apply(this,arguments)}return Object(l.a)(n,[{key:"layoutDir",get:function(){return this.get("layoutDir")}},{key:"readOnly",get:function(){return this.get("readOnly")}},{key:"allowUndo",get:function(){return this.get("allowUndo")}},{key:"theme",get:function(){return this.get("theme")}}],[{key:"fromJSON",value:function(e){return new n(e)}}]),n}(Object(T.Record)(ie));function se(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,(function(e){var t=16*Math.random()|0;return("x"===e?t:3&t|8).toString(16)}))}var ue=function(e){Object(s.a)(n,e);var t=Object(u.a)(n);function n(){return Object(i.a)(this,n),t.apply(this,arguments)}return Object(l.a)(n,[{key:"key",get:function(){return this.get("key")}},{key:"parentKey",get:function(){return this.get("parentKey")}},{key:"collapse",get:function(){return this.get("collapse")}},{key:"subKeys",get:function(){return this.get("subKeys")}},{key:"blocks",get:function(){return this.get("blocks")}},{key:"relations",get:function(){return this.get("relations")}},{key:"style",get:function(){return this.get("style")}},{key:"getBlock",value:function(e){var t=this.blocks.findIndex((function(t){return t.type===e}));return-1===t?{index:t,block:null}:{index:t,block:this.blocks.get(t)}}}],[{key:"fromJSON",value:function(e){var t=e.key,o=e.parentKey,r=void 0===o?null:o,a=e.blocks,c=e.subKeys,i=void 0===c?[]:c,l=e.collapse;return new n({key:t,parentKey:r,collapse:void 0!==l&&l,subKeys:Object(T.List)(i),blocks:ce.createList(a)})}},{key:"create",value:function(e){var t=e.key,o=e.parentKey,r=void 0===o?null:o,a=e.content,c=void 0===a?"":a,i=e.subKeys,l=void 0===i?[]:i,s=e.collapse,u=void 0!==s&&s,p=ce.create({type:L,data:c,key:null});return new n({key:t,parentKey:r,blocks:Object(T.List)([p]),subKeys:Object(T.List)(l),collapse:u})}}]),n}(Object(T.Record)({key:null,parentKey:null,collapse:!1,subKeys:null,blocks:null,relations:null,style:null}));function pe(e,t){var n=e.getTopic(t),o=[];if(n.subKeys.size>0){var r,a=n.subKeys.toArray();(r=o).push.apply(r,Object(v.a)(a)),o=a.reduce((function(t,n){return t.push.apply(t,Object(v.a)(pe(e,n))),t}),o)}return o}function de(e,t,n){var o=e.getTopic(t),r=e.getTopic(n);if(o&&r){if(o.parentKey==r.parentKey)return z;for(var a=o;a.parentKey;){if(a.parentKey===r.key)return B;a=e.getParentTopic(a.key)}for(a=r;a.parentKey;){if(a.parentKey===o.key)return P;a=e.getParentTopic(a.key)}}return V}var fe=b()("modifier");function be(e){var t=e.model,n=e.topicKey,o=e.focusMode;return fe("focus topic"),n!==t.focusKey&&(t=t.set("focusKey",n)),o!==t.focusMode&&(t=t.set("focusMode",o)),t}var ye={addChild:function(e){var t=e.model,n=e.topicKey;fe("addChild:",n);var o=t.getTopic(n);if(o){var r=ue.create({key:se(),parentKey:o.key});return o=o.set("collapse",!1).update("subKeys",(function(e){return e.push(r.key)})),be({model:t=t.update("topics",(function(e){return e.set(n,o).set(r.key,r)})),topicKey:r.key,focusMode:M})}return t},addSibling:function(e){var t=e.model,n=e.topicKey;if(n===t.rootTopicKey)return t;var o=t.getTopic(n);if(o){var r=t.getTopic(o.parentKey),a=r.subKeys.indexOf(n),c=ue.create({key:se(),parentKey:r.key});return be({model:t=t.update("topics",(function(e){return e.set(c.key,c)})).updateIn(["topics",r.key,"subKeys"],(function(e){return e.insert(a+1,c.key)})),topicKey:c.key,focusMode:M})}return t},toggleCollapse:function(e){var t=e.model,n=e.topicKey,o=t.getTopic(n);return o&&0!==o.subKeys.size&&(o=o.merge({collapse:!o.collapse}),t=t.updateIn(["topics",o.key,"collapse"],(function(e){return!e}))),t=be({model:t,topicKey:n,focusMode:I})},collapseAll:function(e){var t=e.model,n=pe(t,t.editorRootTopicKey);return fe(t),t=be({model:t=t.withMutations((function(e){n.forEach((function(t){e.setIn(["topics",t,"collapse"],!0)}))})),topicKey:t.editorRootTopicKey,focusMode:I})},expandAll:function(e){var t=e.model,n=pe(t,t.editorRootTopicKey);return fe(t),t=t.withMutations((function(e){n.forEach((function(t){e.setIn(["topics",t,"collapse"],!1)}))})),fe(t),t},expandTo:function(e){var t=e.model,n=e.topicKey,o=function(e,t){for(var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],o=[t],r=e.getTopic(t);r.parentKey;)n?o.push(r.parentKey):o.unshift(r.parentKey),r=e.getParentTopic(r.key);return o}(t,n).filter((function(e){return e!==n}));return de(t=t.withMutations((function(e){o.forEach((function(t){e.setIn(["topics",t,"collapse"],!1)}))})),n,t.editorRootTopicKey)!==B&&(t=t.set("editorRootTopicKey",t.rootTopicKey)),t},focusTopic:be,setFocusMode:function(e){var t=e.model,n=e.focusMode;return fe("setFocusMode"),n!==t.focusMode&&(t=t.set("focusMode",n)),t},deleteTopic:function(e){var t=e.model,n=e.topicKey;if(n===t.editorRootTopicKey)return t;var o=t.getTopic(n);return o&&(t=t.withMutations((function(e){e.update("topics",(function(e){e=e.delete(n);var o=pe(t,n);return e=e.withMutations((function(e){o.forEach((function(t){e.delete(t)}))}))})),e.updateIn(["topics",o.parentKey,"subKeys"],(function(e){return e.delete(e.indexOf(n))})),e.focusKey===n&&e.set("focusKey",null).set("focusMode",null)}))),t},setBlockData:function(e){var t=e.model,n=e.topicKey,o=e.blockType,r=e.focusMode,a=e.data,c=t.getTopic(n);if(c){var i=c.getBlock(o),l=i.index,s=i.block;-1===l?t=t.updateIn(["topics",n,"blocks"],(function(e){return e.push(ce.create({type:o,data:a}))})):s.data!==a&&(t=t.updateIn(["topics",n,"blocks",l,"data"],(function(e){return a}))),r&&(t=be({model:t,topicKey:n,focusMode:r}))}return t},deleteBlock:function(e){var t=e.model,n=e.topicKey,o=e.blockType,r=t.getTopic(n);if(r){var a=r.getBlock(o).index;-1!==a&&(t=t.updateIn(["topics",n,"blocks"],(function(e){return e.delete(a)}))),t=be({model:t,topicKey:null,focusMode:null})}return t},setStyle:function(e){var t=e.model,n=e.topicKey,o=e.style,r=t.getTopic(n);return r&&o!==r.style&&(t=t.updateIn(["topics",n,"style"],(function(e){return o}))),t},clearAllCustomStyle:function(e){var t=e.model;return t=t.withMutations((function(e){e.topics.keySeq().forEach((function(t){e.setIn(["topics",t,"style"],null)}))}))},setTheme:function(e){var t=e.model,n=e.theme;return t=t.setIn(["config","theme"],n)},setLayoutDir:function(e){var t=e.model,n=e.layoutDir;return t.config.layoutDir===n?t:t=t.setIn(["config","layoutDir"],n)},setEditorRootTopicKey:function(e){var t=e.model,n=e.topicKey;return t.editorRootTopicKey!==n&&(t=t.set("editorRootTopicKey",n)),t.getTopic(n).collapse&&(t=t.setIn(["topics",n,"collapse"],!1)),t},setZoomFactor:function(e){var t=e.model,n=e.zoomFactor;return t.zoomFactor!==n&&(t=t.set("zoomFactor",n)),t}},he={topics:Object(T.Map)(),extData:Object(T.Map)(),config:new le,rootTopicKey:null,editorRootTopicKey:null,focusKey:null,focusMode:null,formatVersion:null,zoomFactor:1};Object(T.Record)(he);function ge(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.plugins,n=void 0===t?[]:t;return Object(v.a)(n)}b()("core:controller");function me(e,t){if(Array.isArray(t))t.forEach((function(t){return me(e,t)}));else if(null!=t)for(var n in t){var o=t[n];e.middleware[n]=e.middleware[n]||[],e.middleware[n].push(o)}}function Oe(e){if(!Array.isArray(e))throw new TypeError("Middleware stack must be an array!");var t,n=Object(O.a)(e);try{for(n.s();!(t=n.n()).done;){if("function"!==typeof t.value)throw new TypeError("Middleware must be composed of functions!")}}catch(o){n.e(o)}finally{n.f()}return function(t,n){var r=-1;return function a(c){if(c<=r)throw new Error("next() called multiple times");r=c;var i=e[c];c===e.length&&(i=n);if(!i)return null;try{return i(t,a.bind(null,c+1))}catch(o){throw o}}(0)}}var ve=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};Object(i.a)(this,e);var n=t.plugins,o=void 0===n?[]:n,r=t.onChange,a=t.readOnly;this.readOnly=a,this.onChange=r,this.middleware=new Map;var c=ge({plugins:o});me(this,c)}return Object(l.a)(e,[{key:"run",value:function(e){var t=this.middleware,n=t[e]||[];w(0!==n.length,"the middleware function ".concat(e," is not found!"));for(var o=Object(E.a)(Oe)(n),r=arguments.length,a=new Array(r>1?r-1:0),c=1;c<r;c++)a[c-1]=arguments[c];return o.apply(void 0,a)}},{key:"getValue",value:function(e,t){return this.run("getValue",Object(m.a)(Object(m.a)({},t),{},{propKey:e}))}},{key:"change",value:function(e,t){this.onChange(e,t),this.currentModel=e}}]),e}();n(357),n(100);function Te(e){return!0===(null!=(t=e)&&"object"===typeof t&&!1===Array.isArray(t))&&"[object Object]"===Object.prototype.toString.call(e);var t}var je,ke=function(e){var t,n;return!1!==Te(e)&&("function"===typeof(t=e.constructor)&&(!1!==Te(n=t.prototype)&&!1!==n.hasOwnProperty("isPrototypeOf")))},Ee=n(28);!function(e){e[e.LEFT_TO_RIGHT=0]="LEFT_TO_RIGHT",e[e.RIGHT_TO_LEFT=1]="RIGHT_TO_LEFT",e[e.LEFT_AND_RIGHT=2]="LEFT_AND_RIGHT",e[e.TOP_TO_BOTTOM=3]="TOP_TO_BOTTOM"}(je||(je={}));var xe="CONTENT",we="DESC",Se="NORMAL",Ce="EDITING_CONTENT",Ke="EDITING_DESC",Re="SET_TOPIC_BLOCK",De=function(e){Object(s.a)(n,e);var t=Object(u.a)(n);function n(){return Object(i.a)(this,n),t.apply(this,arguments)}return Object(l.a)(n,[{key:"data",get:function(){return this.get("data")}},{key:"type",get:function(){return this.get("type")}}],[{key:"create",value:function(e){return new n(e)}},{key:"createList",value:function(e){if(T.List.isList(e)||Array.isArray(e))return Object(T.List)(e.map(n.create));throw new Error("Block.createList only accepts Array or List, but you passed it: ".concat(e))}}]),n}(Object(T.Record)({type:null,key:null,data:null}));var Le={readOnly:!1,allowUndo:!0,layoutDir:je.LEFT_AND_RIGHT,theme:{name:"default",randomColor:!0,background:"rgb(57,60,65)",highlightColor:"#50C9CE",marginH:60,marginV:20,contentStyle:{lineHeight:"1.5"},linkStyle:{lineRadius:5,lineType:"curve",lineWidth:"3px"},rootTopic:{contentStyle:{fontSize:"34px",borderRadius:"35px",padding:"16px 18px 16px 18px"},subLinkStyle:{lineType:"curve",lineWidth:"3px",lineColor:"rgb(113, 203, 45)"}},primaryTopic:{contentStyle:{borderWidth:"1px",borderStyle:"solid",borderRadius:"20px",fontSize:"17px",padding:"10px 15px 10px 15px"},subLinkStyle:{lineType:"curve",lineWidth:"3px",lineColor:"rgb(113, 203, 45)"}},normalTopic:{contentStyle:{border:"1px solid #e8eaec",borderRadius:"20px",fontSize:"17px",padding:"4px 10px"},subLinkStyle:{lineType:"curve",lineWidth:"3px",lineColor:"white"}}}},_e=function(e){Object(s.a)(n,e);var t=Object(u.a)(n);function n(){return Object(i.a)(this,n),t.apply(this,arguments)}return Object(l.a)(n,[{key:"layoutDir",get:function(){return this.get("layoutDir")}},{key:"readOnly",get:function(){return this.get("readOnly")}},{key:"allowUndo",get:function(){return this.get("allowUndo")}},{key:"theme",get:function(){return this.get("theme")}}],[{key:"fromJSON",value:function(e){return new n(e)}}]),n}(Object(T.Record)(Le));function Ie(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,(function(e){var t=16*Math.random()|0;return("x"===e?t:3&t|8).toString(16)}))}var Me=function(e){Object(s.a)(n,e);var t=Object(u.a)(n);function n(){return Object(i.a)(this,n),t.apply(this,arguments)}return Object(l.a)(n,[{key:"key",get:function(){return this.get("key")}},{key:"parentKey",get:function(){return this.get("parentKey")}},{key:"collapse",get:function(){return this.get("collapse")}},{key:"subKeys",get:function(){return this.get("subKeys")}},{key:"blocks",get:function(){return this.get("blocks")}},{key:"relations",get:function(){return this.get("relations")}},{key:"style",get:function(){return this.get("style")}},{key:"getBlock",value:function(e){var t=this.blocks.findIndex((function(t){return t.type===e}));return-1===t?{index:t,block:null}:{index:t,block:this.blocks.get(t)}}}],[{key:"fromJSON",value:function(e){var t=e.key,o=e.parentKey,r=void 0===o?null:o,a=e.blocks,c=e.subKeys,i=void 0===c?[]:c,l=e.collapse;return new n({key:t,parentKey:r,collapse:void 0!==l&&l,subKeys:Object(T.List)(i),blocks:De.createList(a)})}},{key:"create",value:function(e){var t=e.key,o=e.parentKey,r=void 0===o?null:o,a=e.content,c=void 0===a?"":a,i=e.subKeys,l=void 0===i?[]:i,s=e.collapse,u=void 0!==s&&s,p=De.create({type:xe,data:c,key:null});return new n({key:t,parentKey:r,blocks:Object(T.List)([p]),subKeys:Object(T.List)(l),collapse:u})}}]),n}(Object(T.Record)({key:null,parentKey:null,collapse:!1,subKeys:null,blocks:null,relations:null,style:null}));b()("modifier");var Ae={topics:Object(T.Map)(),extData:Object(T.Map)(),config:new _e,rootTopicKey:null,editorRootTopicKey:null,focusKey:null,focusMode:null,formatVersion:null,zoomFactor:1};Object(T.Record)(Ae);b()("core:controller");var Ne=n(44),Fe=n(36),Pe=function(e,t){return(Pe=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(e,t)};function Be(e,t){function n(){this.constructor=e}Pe(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}var ze=function(){return(ze=Object.assign||function(e){for(var t,n=1,o=arguments.length;n<o;n++)for(var r in t=arguments[n])Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r]);return e}).apply(this,arguments)};var Ve,He,Ge,Ue=b()("node:text-editor"),We=d.default.div(Ge||(Ve=["\n  padding: 6px;\n  background-color: ",";\n  cursor: ",";\n  min-width: 50px;\n"],He=["\n  padding: 6px;\n  background-color: ",";\n  cursor: ",";\n  min-width: 50px;\n"],Object.defineProperty?Object.defineProperty(Ve,"raw",{value:He}):Ve.raw=He,Ge=Ve),(function(e){return e.readOnly?null:"white"}),(function(e){return e.readOnly?"pointer":"text"})),Je=function(e){function t(t){var n=e.call(this,t)||this;return n.state={content:null},n.onMouseDown=function(e){e.stopPropagation()},n.onMouseMove=function(e){},n.onKeyDown=function(e){},n._handleClick=function(e){!n.root.contains(e.target)&&n.onClickOutSide(e)},n.rootRef=function(e){return function(t){e(t),n.root=t}},n.initState(),n}return Be(t,e),t.prototype.onChange=function(e){var t=e.value;Ue("onChange",t),this.setState({content:t})},t.prototype.componentDidMount=function(){this.props.readOnly||document.addEventListener("click",this._handleClick)},t.prototype.componentWillUnmount=function(){this.props.readOnly||document.removeEventListener("click",this._handleClick)},t.prototype.onClickOutSide=function(e){},t.prototype.getCustomizeProps=function(){return null},t.prototype.getContent=function(){var e=this.getCustomizeProps().block.data;return null==e?null:("string"===typeof e&&(e=Ne.a.deserialize(e)),e)},t.prototype.initState=function(){var e=this.getContent();this.state={content:e}},t.prototype.render=function(){var e=this.props,t=e.topicKey,n=e.saveRef,r=this.getCustomizeProps(),a=r.readOnly,c=r.getRefKeyFunc,i=r.placeholder,l=r.style;Ue(a);var s=c(t),u=a?this.getContent():this.state.content,p=this.onMouseDown,d=this.onMouseMove,f=this.onKeyDown,b={value:u,readOnly:a,onChange:this.onChange.bind(this),placeholder:i,style:l},y={key:s,readOnly:a,ref:this.rootRef(n(s)),onMouseDown:p,onMouseMove:d,onKeyDown:f};return Object(o.createElement)(We,ze({},y),Object(o.createElement)(Fe.Editor,ze({},b,{autoFocus:!0})))},t}(o.PureComponent),Ze=b()("node:topic-content-editor");function Ye(e){return"content-editor-"+e}var qe=function(e){function t(t){var n=e.call(this,t)||this;return n.onKeyDown=function(e){e.nativeEvent.ctrlKey&&"Enter"===e.nativeEvent.code&&n.save()},n}return Be(t,e),t.prototype.getCustomizeProps=function(){var e=this.props,t=e.model,n=e.topicKey,o=e.readOnly;return{block:t.getTopic(n).getBlock(xe).block,readOnly:o,getRefKeyFunc:Ye,placeholder:"new",style:{whiteSpace:"pre"}}},t.prototype.onClickOutSide=function(e){Ze("onClickOutSide"),this.save()},t.prototype.save=function(){var e=this.props,t=e.model,n=e.topicKey;t.editingContentKey!==n||this.props.controller.run("operation",ze(ze({},this.props),{opType:Re,blockType:xe,data:this.state.content,focusMode:Se}))},t}(Je),Xe=b()("node:topic-desc-editor");function $e(e){return"desc-editor-"+e}var Qe=function(e){function t(t){var n=e.call(this,t)||this;return Xe("constructor"),n}return Be(t,e),t.prototype.initState=function(){e.prototype.initState.call(this);var t=this.props,n=t.controller,o="topic-desc-data-"+t.topicKey,r=this.state.content;n.run("setTempValue",{key:o,value:r})},t.prototype.getCustomizeProps=function(){var e=this.props,t=e.model,n=e.topicKey;return{block:t.getTopic(n).getBlock(we).block,readOnly:t.editingDescKey!==n,getRefKeyFunc:$e,placeholder:"write topic notes here"}},t.prototype.onChange=function(e){var t=e.value;Xe("onChange");var n=this.props,o=n.controller,r=n.topicKey;if(!(n.model.editingDescKey!==r)){var a="topic-desc-data-"+r;o.run("setTempValue",{key:a,value:t}),this.setState({content:t})}},t}(Je);var et=function(){return{getTopicTitle:function(e){var t=e.model,n=e.controller,o=e.topicKey,r=e.maxLength,a=t.getTopic(o).getBlock(xe).block,c=n.run("serializeBlockData",ze(ze({},e),{block:a}));return null!=r&&(c=c.length>r?c.substr(0,r)+"...":c),c},renderTopicContentEditor:function(e){return Object(o.createElement)(qe,ze({},e))},renderTopicDescEditor:function(e){return Object(o.createElement)(Qe,ze({},e))},isBlockEmpty:function(e,t){var n=e.block,o=e.controller;return n.type===xe||n.type===we?null==n.data||""===o.run("serializeBlockData",e):t()},serializeBlockData:function(e,t){var n=e.block;return n.type===xe||n.type===we?"string"===typeof n.data?n.data:Ne.a.serialize(n.data):t()}}},tt=n(15),nt=n.n(tt),ot=n(878),rt=n(66),at=n(20),ct=function(e,t){return(ct=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(e,t)};function it(e,t){function n(){this.constructor=e}ct(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}var lt=function(){return(lt=Object.assign||function(e){for(var t,n=1,o=arguments.length;n<o;n++)for(var r in t=arguments[n])Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r]);return e}).apply(this,arguments)};function st(e,t){var n={};for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&t.indexOf(o)<0&&(n[o]=e[o]);if(null!=e&&"function"===typeof Object.getOwnPropertySymbols){var r=0;for(o=Object.getOwnPropertySymbols(e);r<o.length;r++)t.indexOf(o[r])<0&&Object.prototype.propertyIsEnumerable.call(e,o[r])&&(n[o[r]]=e[o[r]])}return n}function ut(e,t,n,o){var r,a=arguments.length,c=a<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)c=Reflect.decorate(e,t,n,o);else for(var i=e.length-1;i>=0;i--)(r=e[i])&&(c=(a<3?r(c):a>3?r(t,n,c):r(t,n))||c);return a>3&&c&&Object.defineProperty(t,n,c),c}function pt(e){var t="function"===typeof Symbol&&e[Symbol.iterator],n=0;return t?t.call(e):{next:function(){return e&&n>=e.length&&(e=void 0),{value:e&&e[n++],done:!e}}}}function dt(e,t){var n="function"===typeof Symbol&&e[Symbol.iterator];if(!n)return e;var o,r,a=n.call(e),c=[];try{for(;(void 0===t||t-- >0)&&!(o=a.next()).done;)c.push(o.value)}catch(i){r={error:i}}finally{try{o&&!o.done&&(n=a.return)&&n.call(a)}finally{if(r)throw r.error}}return c}function ft(){for(var e=[],t=0;t<arguments.length;t++)e=e.concat(dt(arguments[t]));return e}function bt(e,t){return Object.defineProperty?Object.defineProperty(e,"raw",{value:t}):e.raw=t,e}var yt,ht,gt,mt,Ot,vt,Tt,jt,kt,Et,xt,wt,St,Ct=function(e){function t(t){return e.call(this,t)||this}return it(t,e),t.prototype.operation=function(e,t){this.props.controller.run("operation",lt({opType:e},t))},t.prototype.run=function(e,t){this.props.controller.run(e,t)},Object.defineProperty(t.prototype,"topic",{get:function(){return this.props.model.getTopic(this.props.topicKey)},enumerable:!0,configurable:!0}),t}(o.PureComponent),Kt=b()("node:drag-scroll-widget"),Rt=d.default.div(yt||(yt=bt(["\n  position: relative;\n  width: 100%;\n  height: 100%;\n  overflow: scroll;\n"],["\n  position: relative;\n  width: 100%;\n  height: 100%;\n  overflow: scroll;\n"]))),Dt=d.default.div(ht||(ht=bt(["\n  position: relative;\n  width: max-content;\n"],["\n  position: relative;\n  width: max-content;\n"]))),Lt=function(e){function t(t){var n=e.call(this,t)||this;return n.contentResizeCallback=function(e,t){if(n.oldContentRect){var o={width:n.content.clientWidth+2*n.viewBox.clientWidth,height:n.content.clientHeight+2*n.viewBox.clientHeight};n.bigView.style.width=o.width+"px",n.bigView.style.height=o.height+"px"}n.oldContentRect=e[0].contentRect},n.contentResizeObserver=new p.a(n.contentResizeCallback),n.contentRef=function(e){e&&(n.content=e,n.contentResizeObserver.observe(n.content))},n.viewBoxRef=function(e){e&&(n.viewBox=e,n.props.enableMouseWheel||(Kt("addEventListener onwheel"),n.viewBox.addEventListener("wheel",(function(e){Kt("onwheel"),(e.ctrlKey||e.altKey)&&e.preventDefault()}),{passive:!1})),n.setViewBoxScroll(n.viewBox.clientWidth,n.viewBox.clientHeight))},n.bigViewRef=function(e){e&&(n.bigView=e)},n.setWidgetStyle=function(){n.content&&n.viewBox&&n.bigView&&(n.bigView.style.width=2*(n.content.clientWidth+n.viewBox.clientWidth)+"px",n.bigView.style.height=2*(n.content.clientHeight+n.viewBox.clientHeight)+"px",n.content.style.left=n.viewBox.clientWidth+"px",n.content.style.top=n.viewBox.clientHeight+"px")},n.setViewBoxScroll=function(e,t){Kt("setViewBoxScroll "+e+" "+t),n.viewBox&&(n.viewBox.scrollLeft=e,n.viewBox.scrollTop=t)},n.setViewBoxScrollDelta=function(e,t){Kt("setViewBoxScrollDelta "+e+" "+t),n.viewBox&&(n.viewBox.scrollLeft+=e,n.viewBox.scrollTop+=t)},n.onMouseDown=function(e){var t=n.props,o=t.mouseKey,r=t.needKeyPressed,a=t.canDragFunc;if((!a||a())&&(0===e.button&&"left"===o||2===e.button&&"right"===o)){if(r&&!e.ctrlKey)return;n._lastCoordX=n.viewBox.scrollLeft+e.nativeEvent.clientX,n._lastCoordY=n.viewBox.scrollTop+e.nativeEvent.clientY;var c=n.viewBox;c.addEventListener("mousemove",n.onMouseMove),c.addEventListener("mouseup",n.onMouseUp)}},n.onMouseUp=function(e){var t=n.viewBox;t.removeEventListener("mousemove",n.onMouseMove),t.removeEventListener("mouseup",n.onMouseUp)},n.onMouseMove=function(e){n.viewBox.scrollLeft=n._lastCoordX-e.clientX,n.viewBox.scrollTop=n._lastCoordY-e.clientY},n.handleContextMenu=function(e){e.preventDefault()},n.state={widgetStyle:{width:"10000px",height:"10000px"}},n}return it(t,e),t.prototype.componentDidMount=function(){this.setWidgetStyle(),document.addEventListener("contextmenu",this.handleContextMenu)},t.prototype.componentWillUnmount=function(){document.removeEventListener("contextmenu",this.handleContextMenu)},t.prototype.setZoomFactor=function(e){this.bigView.style.transform="scale("+e+")",this.bigView.style.transformOrigin="50% 50%"},t.prototype.render=function(){var e=lt({},this.state.widgetStyle);return Object(o.createElement)(Rt,{ref:this.viewBoxRef,onMouseDown:this.onMouseDown},Object(o.createElement)("div",{style:e,ref:this.bigViewRef},Object(o.createElement)(Dt,{ref:this.contentRef,style:this.state.contentStyle},this.props.children(this.setViewBoxScroll,this.setViewBoxScrollDelta))))},t.defaultProps={mouseKey:"left",needKeyPressed:!1},t}(o.Component),_t=b()("node:save-ref"),It=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.getRef=function(e){return _t(t),t[e]},t.saveRef=function(e){return function(n){n&&(t[e]=n,t.fireListener(e,n))}},t.deleteRef=function(e){_t("deleteRef:",e),delete t[e]},t.observers=new Map,t.fireListener=function(e,n){var o,r;if(t.observers.has(e)){var a=t.observers.get(e);try{for(var c=pt(a),i=c.next();!i.done;i=c.next()){(0,i.value)(e,n)}}catch(l){o={error:l}}finally{try{i&&!i.done&&(r=c.return)&&r.call(c)}finally{if(o)throw o.error}}}},t.registerRefListener=function(e,n){t.observers.has(e)?t.observers.get(e).push(n):t.observers.set(e,[n])},t}return it(t,e),t.prototype.render=function(){return this.props.children(this.saveRef,this.getRef,this.deleteRef,this.registerRefListener.bind(this))},t}(o.Component),Mt=d.default.div(gt||(gt=bt(["\n  display: flex;\n  flex-direction: ",";\n  align-items: ",";\n  justify-content: ",";\n"],["\n  display: flex;\n  flex-direction: ",";\n  align-items: ",";\n  justify-content: ",";\n"])),(function(e){return e.flexDirection?e.flexDirection:"row"}),(function(e){return e.alignItems}),(function(e){return e.justifyContent})),At=d.default.div(mt||(mt=bt(["\n  margin: ",";\n"],["\n  margin: ",";\n"])),(function(e){return e.margin})),Nt=d.default.a(Ot||(Ot=bt(["\n  font-size: 20px !important;\n"],["\n  font-size: 20px !important;\n"]))),Ft=d.default.div(vt||(vt=bt(["\n  padding: 5px;\n  cursor: pointer;\n"],["\n  padding: 5px;\n  cursor: pointer;\n"]))),Pt=d.default.div(Tt||(Tt=bt(["\n  cursor: pointer;\n  &:hover {\n    color: #1ea7fd;\n  }\n"],["\n  cursor: pointer;\n  &:hover {\n    color: #1ea7fd;\n  }\n"]))),Bt=Object(d.default)(y.e)(jt||(jt=bt(["\n  margin-bottom: 0px !important;\n"],["\n  margin-bottom: 0px !important;\n"]))),zt=Object(d.default)(Pt)(kt||(kt=bt(["\n  position: absolute;\n  right: 5px;\n  top: 5px;\n  //padding: 5px;\n"],["\n  position: absolute;\n  right: 5px;\n  top: 5px;\n  //padding: 5px;\n"]))),Vt=d.default.div(Et||(Et=bt(["\n  height: 16px;\n"],["\n  height: 16px;\n"]))),Ht=d.default.span(xt||(xt=bt(["\n  margin: 0px 10px;\n  &:hover {\n    color: palevioletred;\n  }\n"],["\n  margin: 0px 10px;\n  &:hover {\n    color: palevioletred;\n  }\n"]))),Gt=d.default.div(wt||(wt=bt(["\n  z-index: ",";\n"],["\n  z-index: ",";\n"])),(function(e){return e.zIndex})),Ut=d.default.div(St||(St=bt(["\n  min-width: 360px;\n  max-height: 470px;\n  overflow: auto;\n"],["\n  min-width: 360px;\n  max-height: 470px;\n  overflow: auto;\n"]))),Wt=b()("plugin:event");function Jt(){var e={};return{handleTopicClick:function(e){Wt("handleTopicClick");var t=e.controller,n=e.model,o=e.topicKey;Wt(n.zoomFactor),null===n.editingDescKey&&n.editingContentKey!==o&&(n.focusKey===o&&n.focusMode===M||t.run("operation",lt(lt({},e),{opType:q,focusMode:I})))},handleTopicDoubleClick:function(e){var t=e.controller;null===e.model.editingDescKey&&t.run("operation",lt(lt({},e),{opType:q,focusMode:M}))},handleTopicContextMenu:function(e){e.controller.run("operation",lt(lt({},e),{opType:q,focusMode:N}))},handleActiveModalClose:function(e){var t=e.controller,n=t.run("getActiveModalProps",e);return null==n?null:"edit-desc"===n.name?function(){t.run("operation",lt(lt({},e),{focusMode:I,opType:q}))}:void 0},addEventListener:function(t){var n=t.key,o=t.listener,r=t.once,a=t.controller;function c(){o(),a.run("removeEventListener",{key:n,listener:o})}e[n]||(e[n]=[]),r?(c.origin=o,e[n].push(c)):e[n].push(o)},removeEventListener:function(t){var n=t.key,o=t.listener;e[n]&&(e[n]=e[n].filter((function(e){return e!==o&&e.origin!==o})))},fireEvent:function(t){var n=t.key;e[n]&&e[n].forEach((function(e){return e()}))}}}var Zt="show-menu",Yt="close",qt="color-picker",Xt="notes",$t="plus",Qt="minus",en="collapse",tn="expand",nn="center",on="search";function rn(e){return"icon iconfont bm-"+e}function an(e){return Object(o.createElement)("span",{className:rn(e)})}function cn(e){return"content-"+e}function ln(e){return"content-editor-"+e}function sn(e){return"desc-editor-"+e}function un(e){return"topic-widget-"+e}function pn(e){return"topic-"+e}function dn(e){return"links-"+e}function fn(e){return"links-svg-"+e}function bn(e){return"collapse-"+e}function yn(e,t){return"dropArea-"+t+"-"+e}var hn="DIAGRAM-ROOT",gn="DragScrollWidget",mn="svg-highlight",On="focus-highlight",vn="drop-effect",Tn="CENTER_ROOT_TOPIC",jn="DIAGRAM_CUSTOMIZE_BASE_Z_INDEX",kn="TOPIC_CONTEXT_MENU_ENABLED",En="TOPIC_TITLE",xn=function(e){e.stopPropagation()};function wn(e,t){!function(e,t){var n=document.createElement("a");n.href=e,n.download=t,n.click()}("data:text/plain,"+encodeURIComponent(e),t)}function Sn(e){var t=document.createElement("input");return t.type="file",t.accept=e,new Promise((function(e,n){t.addEventListener("change",(function(t){var o=t.target.files[0],r=new FileReader;r.onload=function(t){var n=t.target.result;e(n)},r.onerror=function(e){n(e.target.error)},r.readAsText(o)})),t.click()}))}function Cn(e){var t=e.top,n=void 0===t?0:t,o=e.right,r=void 0===o?0:o,a=e.bottom,c=void 0===a?0:a,i=e.left;return n+"px "+r+"px "+c+"px "+(void 0===i?0:i)+"px"}function Kn(e){return(e.top+e.bottom)/2}function Rn(e,t){return(e.x+t.x)/2}function Dn(e,t){return(e.y+t.y)/2}function Ln(e){return[(e.left+e.right)/2,(e.top+e.bottom)/2]}function _n(e,t,n){void 0===n&&(n=1);var o=e.getBoundingClientRect(),r=Ln(t.getBoundingClientRect()),a=Ln(o);a[0]=(a[0]-r[0])/n,a[1]=(a[1]-r[1])/n;var c=o.width/n,i=o.height/n;return{left:a[0]-c/2,right:a[0]+c/2,top:a[1]-i/2,bottom:a[1]+i/2,width:c,height:i}}function In(e,t){var n=e.getBoundingClientRect(),o=Ln(t.getBoundingClientRect()),r=Ln(n);return[r[0]-o[0],r[1]-o[1]]}var Mn="ADD_CHILD",An="ADD_SIBLING",Nn="DELETE_TOPIC",Fn="EDIT_CONTENT",Pn="EDIT_NOTES",Bn="SET_EDITOR_ROOT";function zn(){return{customizeHotKeys:function(e){var t=function(t){return function(n){!function(e,t){var n=t.topicKey,o=t.model,r=t.controller;void 0===n&&(t=lt(lt({},t),{topicKey:o.focusKey})),r.run("operation",lt(lt({},t),{opType:e}))}(t,e)}};return{topicHotKeys:new Map([[Mn,{label:"add child",combo:"tab",onKeyDown:t(J)}],[An,{label:"add sibling",combo:"enter",onKeyDown:t(Z)}],[Nn,{label:"delete topic",combo:"del",onKeyDown:t(Y)}],[Fn,{label:"edit content",combo:"space",onKeyDown:t(ne)}],[Pn,{label:"edit notes",combo:"alt + d",onKeyDown:t(oe)}],[Bn,{label:"set editor root",combo:"alt + shift + f",onKeyDown:t(ae)}]]),globalHotKeys:new Map}}}}var Vn=b()("plugin:operation");function Hn(){var e=new Map([[H,ye.toggleCollapse],[G,ye.collapseAll],[U,ye.expandAll],[W,ye.expandTo],[J,ye.addChild],[Z,ye.addSibling],[Y,ye.deleteTopic],[q,ye.focusTopic],[X,ye.setFocusMode],[$,ye.setStyle],[Q,ye.setTheme],[ee,ye.setBlockData],[te,ye.deleteBlock],[ne,function(e){var t=e.model,n=e.topicKey;return ye.focusTopic({model:t,topicKey:n,focusMode:M})}],[oe,function(e){var t=e.model,n=e.topicKey,o=t.getTopic(n).getBlock(_);return null!=o.block&&null!=o.block.data||(t=ye.setBlockData({model:t,topicKey:n,blockType:_,data:""})),t=ye.focusTopic({model:t,topicKey:n,focusMode:A})}],[re,function(e){var t=e.srcKey,n=e.dstKey,o=e.dropDir,r=e.model,a=r.getTopic(t),c=r.getTopic(n),i=a.parentKey,l=r.getTopic(i).subKeys,s=l.indexOf(t);if(l=l.delete(s),"in"===o){var u=c.subKeys;u=u.push(t),r=r.withMutations((function(e){e.setIn(["topics",i,"subKeys"],l).setIn(["topics",t,"parentKey"],n).setIn(["topics",n,"subKeys"],u).setIn(["topics",n,"collapse"],!1)}))}else{var p=c.parentKey,d=r.getTopic(p).subKeys,f=d.indexOf(n);if(i===p){var b=Object(T.List)();d.forEach((function(e){e!==t&&(b=e===n?"prev"===o?b.push(t).push(e):b.push(e).push(t):b.push(e))})),r=r.withMutations((function(e){e.setIn(["topics",p,"subKeys"],b)}))}else"prev"===o?d=d.insert(f,t):"next"===o&&(d=d.insert(f+1,t)),r=r.withMutations((function(e){e.setIn(["topics",i,"subKeys"],l).setIn(["topics",t,"parentKey"],p).setIn(["topics",p,"subKeys"],d).setIn(["topics",p,"collapse"],!1)}))}return r}],[ae,ye.setEditorRootTopicKey]]),t=Object(T.Stack)(),n=Object(T.Stack)(),o=!0,r=new Set;return{isOperationEnabled:function(e){return o},enableOperation:function(){o=!0},disableOperation:function(e){var t=e.whiteList;o=!1,t?r=new Set(t):r.clear()},getOpMap:function(t){return e},getAllowUndo:function(e){var t=e.model,n=e.opType;if(n)switch(n){case q:case ne:case oe:return!1}switch(t.focusMode){case"EDITING_DESC":case"EDITING_CONTENT":return!1}return t.config.allowUndo},getUndoRedoStack:function(){return{undoStack:t,redoStack:n}},setUndoStack:function(e){Vn("setUndoStack",e.undoStack),t=e.undoStack},setRedoStack:function(e){Vn("setRedoStack",e.redoStack),n=e.redoStack},canUndo:function(e){var t=e.controller,n=t.run("getUndoRedoStack",e).undoStack,o=t.run("getAllowUndo",e);return n.size>0&&o},canRedo:function(e){var t=e.controller,n=t.run("getUndoRedoStack",e).redoStack,o=t.run("getAllowUndo",e);return n.size>0&&o},undo:function(e){var t=e.controller,n=e.model;if(t.run("getAllowUndo",e)){var o=t.run("getUndoRedoStack",e),r=o.undoStack,a=o.redoStack,c=r.peek();c&&(t.run("setUndoStack",lt(lt({},e),{undoStack:r.shift()})),t.run("setRedoStack",lt(lt({},e),{redoStack:a.push(n)})),Vn(c),t.change(c))}},redo:function(e){var t=e.controller,n=e.model;if(t.run("getAllowUndo",e)){var o=t.run("getUndoRedoStack",e),r=o.undoStack,a=o.redoStack,c=a.peek();c&&(t.run("setUndoStack",lt(lt({},e),{undoStack:r.push(n)})),t.run("setRedoStack",lt(lt({},e),{redoStack:a.shift()})),t.change(c))}},operation:function(e){var t=e.controller,n=e.opType,o=e.model,a=e.opArray,c=e.callback;if(null!=a&&!Array.isArray(a))throw new Error("operation: the type of opArray must be array!");if(null!=n&&null!=a)throw new Error("operation: opType and opArray conflict!");if(!t.run("isOperationEnabled",e)){if(0===r.size)return;if(null!=a){var i=a.filter((function(e){return!r.has(e.opType)}));if(i&&i.length>0)return}else if(!r.has(n))return}Vn("operation:",n),Vn("operation:",o),Vn("operation:",e);var l,s=t.run("getOpMap",e);if(t.run("beforeOperation",e),t.run("getAllowUndo",e)){var u=t.run("getUndoRedoStack",e).undoStack;t.run("setUndoStack",lt(lt({},e),{undoStack:u.push(o)}))}if(null!=a)l=a.reduce((function(e,n){var o=n.opType;if(!s.has(o))throw new Error("opType:"+o+" not exist!");var r=s.get(o),a=lt(lt({controller:t},n),{model:e}),c=t.run("beforeOpFunction",a);return c=r(lt(lt({},a),{model:c})),c=t.run("afterOpFunction",lt(lt({},a),{model:c}))}),o);else{if(!s.has(n))throw new Error("opType:"+n+" not exist!");var p=s.get(n);l=t.run("beforeOpFunction",e),l=p(lt(lt({},e),{model:l})),l=t.run("afterOpFunction",lt(lt({},e),{model:l}))}Vn("newModel:",l),t.change(l,c),t.run("afterOperation",e)},deleteRefKey:function(e){var t,n,o=e.model,r=e.topicKey,a=e.deleteRef,c=pe(o,r);c.push(r);try{for(var i=pt(c),l=i.next();!l.done;l=i.next()){var s=l.value;a(dn(s)),a(fn(s)),a(cn(s)),a(ln(s)),a(sn(s)),a(un(s)),a(pn(s)),a(bn(s)),a(yn(s,"next")),a(yn(s,"prev"))}}catch(u){t={error:u}}finally{try{l&&!l.done&&(n=i.return)&&n.call(i)}finally{if(t)throw t.error}}},beforeOperation:function(e){},afterOperation:function(e){},beforeOpFunction:function(e){var t=e.controller,n=e.opType,o=e.model,r=e.topicKey;return n===Y&&r!==o.editorRootTopicKey&&t.run("deleteRefKey",e),o},afterOpFunction:function(e){return e.model}}}var Gn=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return it(t,e),t.prototype.render=function(){var e=this.props.controller;return Object(o.createElement)(y.n,null,e.run("customizeTopicContextMenu",this.props))},t}(Ct),Un=[{icon:"edit",label:"edit",shortcut:"Space",rootCanUse:!0,opType:ne},{icon:"add-sibling",label:"add sibling",shortcut:"Enter",opType:Z},{icon:"add-child",label:"add child",shortcut:"Tab",rootCanUse:!0,opType:J},{icon:"notes",label:"edit notes",shortcut:"Alt + D",rootCanUse:!0,opType:oe},{icon:"delete-node",label:"delete node",shortcut:"Del",opType:Y},{icon:"root",label:"set as editor root",shortcut:"Alt + Shift + F",opType:ae}];var Wn,Jn,Zn=b()("node:topic-drop-effect"),Yn=d.default.svg(Wn||(Wn=bt(["\n  width: 100%;\n  height: 100%;\n  position: absolute;\n  left: 0;\n  top: 0;\n  z-index: 2;\n  pointer-events: none;\n"],["\n  width: 100%;\n  height: 100%;\n  position: absolute;\n  left: 0;\n  top: 0;\n  z-index: 2;\n  pointer-events: none;\n"]))),qn=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.state={content:null},t}return it(t,e),t.prototype.layout=function(){var e=this.props,t=this.props,n=t.getRef,r=t.model,a=t.zoomFactor,c=t.controller.run("getDragTargetProps",e),i=c.key,l=c.dropDir;if(Zn("layout",l),null!==i){var s=n("in"===l?cn(i):yn(i,l)),u=n("svg-drop-effect"),p=n(gn).bigView,d=_n(s,p,a),f=_n(u,p,a),b=d.left-f.left-3,y=d.top-f.top-3,h=d.width+6,g=d.height+6;this.setState({content:Object(o.createElement)("g",null,Object(o.createElement)("rect",{x:b,y:y,width:h,height:g,fill:"none",stroke:r.config.theme.highlightColor,strokeDasharray:"5,5",strokeWidth:2}))})}else this.setState({content:null})},t.prototype.render=function(){var e=this.props.saveRef;return Object(o.createElement)(Yn,{ref:e("svg-drop-effect")},this.state.content)},t}(Ct),Xn=b()("plugin:drag-and-drop"),$n=d.default.div(Jn||(Jn=bt(["\n  height: ",";\n  width: 100%;\n  margin: 5px 0px;\n"],["\n  height: ",";\n  width: 100%;\n  margin: 5px 0px;\n"])),(function(e){return e.height+"px"}));function Qn(){var e=null,t=null;return{renderTopicDropArea:function(e){var t=e.topicKey,n=e.dropDir,r=e.saveRef,a=e.controller,c=e.model,i={onDragEnter:function(o){Xn("onDragEnter",t,n),a.run("handleTopicDragEnter",lt(lt({},e),{ev:o,dropDir:n}))},onDragLeave:function(o){Xn("onDragLeave",t,n),a.run("handleTopicDragLeave",lt(lt({},e),{ev:o,dropDir:n}))},onDragOver:function(e){e.preventDefault()},onDrop:function(o){Xn("onDrop",t,n),a.run("handleTopicDrop",lt(lt({},e),{ev:o,dropDir:n}))}};return Object(o.createElement)($n,lt({height:c.config.theme.marginV/2,ref:r(yn(t,n))},i))},renderDragAndDropEffect:function(e){Xn("renderDragAndDropEffect");var t=e.saveRef;return Object(o.createElement)(qn,lt({ref:t(vn)},e))},getDragTargetProps:function(n){return{key:e,dropDir:t}},handleTopicDragStart:function(e){var t=e.controller;e.ev.stopPropagation(),t.run("operation",lt(lt({},e),{opType:q,focusMode:F}))},canDrop:function(e){var t=e.srcKey,n=e.dstKey,o=e.model,r=e.dropDir;return t!==o.editorRootTopicKey&&t!==n&&de(o,t,n)!==P&&((n!==o.editorRootTopicKey||"in"===r)&&(o.getTopic(t).parentKey!==n||"in"!==r))},handleTopicDragEnter:function(n){var o=n.dropDir,r=n.topicKey,a=n.controller,c=n.model;Xn("handleTopicDragEnter:",r,o),a.run("canDrop",lt(lt({},n),{srcKey:c.focusKey,dstKey:r}))&&(e=r,t=o,a.change(c))},handleTopicDragLeave:function(n){var o=n.controller,r=n.model,a=n.topicKey,c=n.dropDir,i=n.getRef,l=n.ev.nativeEvent.relatedTarget;Xn("handleTopicDragLeave:",a,c);var s=i(cn(a));s==l||s.contains(l)||(e=null,t=null,o.change(r))},handleTopicDrop:function(n){Xn("handleTopicDrop");var o=n.controller,r=n.topicKey,a=n.model;n=lt(lt({},n),{srcKey:a.focusKey,dstKey:r}),e=null,t=null,o.run("canDrop",n)&&o.run("operation",lt(lt({},n),{opType:re}))}}}var eo,to,no,oo,ro,ao,co,io,lo,so,uo,po=Object(d.default)(Gt)(eo||(eo=bt(["\n  position: absolute;\n  width: 20%;\n  padding: 0 5px;\n  background: white;\n  left: 30px;\n  top: 20px;\n  border-radius: 2px;\n"],["\n  position: absolute;\n  width: 20%;\n  padding: 0 5px;\n  background: white;\n  left: 30px;\n  top: 20px;\n  border-radius: 2px;\n"]))),fo=d.default.div(to||(to=bt(["\n  max-width: 600px;\n"],["\n  max-width: 600px;\n"]))),bo=d.default.span(no||(no=bt([""],[""]))),yo=function(e){function t(t){var n=e.call(this,t)||this;return n.setEditorRootTopicKey=function(e){return function(){var t=n.props,o=t.model,r=t.controller;o.editorRootTopicKey!==e&&r.change(ye.setEditorRootTopicKey({model:o,topicKey:e}))}},n.breadcrumbRenderer=function(e){var t=e.text,n=st(e,["text"]),r=t.length>8,a=r?t.substr(0,8)+"...":t,c={content:Object(o.createElement)(fo,null,t),position:y.u.BOTTOM_RIGHT},i=Object(o.createElement)(y.b,lt({},n),Object(o.createElement)(bo,null,a));return r?Object(o.createElement)(y.x,lt({},c),i):i},n.state={show:!1},n}return it(t,e),t.prototype.render=function(){var e=this.props,t=e.model,n=e.controller,r=e.zIndex,a=t.editorRootTopicKey;if(a===t.rootTopicKey)return null;for(var c=[],i=t.getTopic(a);null!=i;){var l=n.getValue(En,lt(lt({},e),{topicKey:i.key}));c.unshift({text:l,onClick:this.setEditorRootTopicKey(i.key)}),i=t.getTopic(i.parentKey)}var s={items:c,breadcrumbRenderer:this.breadcrumbRenderer};return Object(o.createElement)(po,{zIndex:r},Object(o.createElement)(y.c,lt({},s)))},t}(Ct),ho=d.default.div(oo||(oo=bt(["\n  position: relative;\n  display: flex;\n  align-items: center;\n  padding: 5px;\n"],["\n  position: relative;\n  display: flex;\n  align-items: center;\n  padding: 5px;\n"]))),go=d.default.div(ro||(ro=bt(["\n  width: 100%;\n  height: 100%;\n  background: ",";\n"],["\n  width: 100%;\n  height: 100%;\n  background: ",";\n"])),(function(e){return e.theme.background})),mo=function(e){function t(t){var n=e.call(this,t)||this;return n.setZoomFactor=function(e){n.dragScrollWidget.setZoomFactor(e)},n.onWheel=function(e){if(e.altKey||e.ctrlKey){var t=n.props.controller,o=t.run("getZoomFactor",n.props);(o-=e.nativeEvent.deltaY>0?.1:-.1)<.5&&(o=.5),o>4&&(o=4),t.run("setZoomFactor",lt(lt({},n.props),{zoomFactor:o}))}},n}return it(t,e),t.prototype.renderHotkeys=function(){var e=this.props,t=e.controller,n=e.model,r=t.run("customizeHotKeys",e);if(null===r)return null;if(!(r.topicHotKeys instanceof Map&&r.globalHotKeys instanceof Map))throw new TypeError("topicHotKeys and globalHotKeys must be a Map");var a=[];return n.focusMode!==I&&n.focusMode!==N||r.topicHotKeys.forEach((function(e,t){a.push(Object(o.createElement)(y.j,lt({key:t},e,{global:!0})))})),r.globalHotKeys.forEach((function(e,t){a.push(Object(o.createElement)(y.j,lt({key:t},e,{global:!0})))})),Object(o.createElement)(y.k,null,a)},t.prototype.componentDidMount=function(){var e=this.props,t=e.getRef,n=e.model;e.controller.run("addZoomFactorChangeEventListener",lt(lt({},this.props),{listener:this.setZoomFactor}));var o=t(pn(n.editorRootTopicKey)),r=t("node-layer"),a=o.getBoundingClientRect(),c=r.getBoundingClientRect();this.dragScrollWidget.setViewBoxScrollDelta(0,a.top-c.top-this.dragScrollWidget.viewBox.getBoundingClientRect().height/2+a.height),this.layout()},t.prototype.componentWillUnmount=function(){this.props.controller.run("removeZoomFactorChangeEventListener",lt(lt({},this.props),{listener:this.setZoomFactor}))},Object.defineProperty(t.prototype,"dragScrollWidget",{get:function(){return this.props.getRef(gn)},enumerable:!0,configurable:!0}),t.prototype.componentDidUpdate=function(){this.props.controller.run("fireEvent",lt(lt({},this.props),{key:Tn})),this.layout()},t.prototype.layout=function(){this.props.controller.run("layout",this.props)},t.prototype.render=function(){var e=this,t=this.props,n=t.saveRef,r=t.model,a=t.controller,c=r.editorRootTopicKey;return Object(o.createElement)(go,{onWheel:this.onWheel},Object(o.createElement)(Lt,lt({},this.state,{enableMouseWheel:!1,zoomFactor:r.zoomFactor,ref:n(gn)}),(function(t,r){var i=lt(lt({},e.props),{topicKey:c,setViewBoxScroll:t,setViewBoxScrollDelta:r});return Object(o.createElement)(ho,{ref:n("node-layer")},a.run("renderRootWidget",i))})))},t=ut([y.l],t)}(o.Component),Oo=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.handleClose=function(){var e=t.props.controller.run("handleActiveModalClose",t.props);e&&e()},t}return it(t,e),t.prototype.render=function(){var e=this.props.controller,t=e.run("renderModal",this.props),n=e.run("getActiveModalProps",this.props);return Object(o.createElement)(y.g,{onClose:this.handleClose,isOpen:null!==t,autoFocus:!0,enforceFocus:!0,usePortal:!0,title:n&&n.title,style:n&&n.style},Object(o.createElement)("div",{className:h.a.DIALOG_BODY,style:{minHeight:0}},t))},t}(Ct),vo=d.default.svg(ao||(ao=bt(["\n  width: 100%;\n  height: 100%;\n  position: absolute;\n  left: 0;\n  top: 0;\n  z-index: 1;\n  pointer-events: none;\n"],["\n  width: 100%;\n  height: 100%;\n  position: absolute;\n  left: 0;\n  top: 0;\n  z-index: 1;\n  pointer-events: none;\n"]))),To=b()("node:root-sub-links"),jo=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.state={curves:[]},t}return it(t,e),t.prototype.layout=function(){var e,t,n,r=this.props,a=r.model,c=r.getRef,i=r.topicKey,l=r.zoomFactor,s=r.controller,u=a.getTopic(i),p=c(cn(i)),d=c(fn(i)),f=c(gn).bigView,b=_n(p,f,l),y=_n(d,f,l);e={x:(n=b,(n.left+n.right)/2-y.left),y:Kn(b)-y.top};var h=[];u.subKeys.forEach((function(n){var a,i=s.run("getLinkStyle",lt(lt({},r),{topicKey:n})),u=i.lineType,p=_n(c(cn(n)),f,l);if(t={x:(t=p.left>b.right?{x:p.left,y:Kn(p)}:{x:p.right,y:Kn(p)}).x-y.left,y:t.y-y.top},"curve"===u)a="M "+e.x+" "+e.y+" C "+e.x+" "+Dn(e,t)+" "+Rn(e,t)+" "+t.y+" "+t.x+" "+t.y;else if("line"===u)a="M "+e.x+" "+e.y+" L "+t.x+" "+t.y;else if("round"===u){var d=t.y>e.y?1:-1,g=t.x>e.x?1:-1,m=i.lineRadius;if(null==m)throw new Error("link line type is round, but lineRadius is not provided!");a=t.y===e.y?"M "+e.x+" "+e.y+" H "+t.x:"M "+e.x+" "+e.y+"  V "+(t.y-d*m)+" A "+m+" "+m+" 0 0 "+(d*g===1?0:1)+" "+(e.x+m*g)+" "+t.y+" H "+t.x}h.push(Object(o.createElement)("path",{key:"link-"+n,d:a,strokeWidth:i.lineWidth,stroke:i.lineColor,fill:"none"}))})),this.setState({curves:h})},t.prototype.render=function(){To("render");var e=this.props,t=e.topicKey,n=e.saveRef;return Object(o.createElement)(vo,{ref:n(fn(t))},Object(o.createElement)("g",null,this.state.curves))},t}(Ct),ko=b()("RootNode"),Eo=d.default.div(co||(co=bt(["\n  display: flex;\n  position: relative;\n\n  align-items: ",";\n  flex-direction: column;\n\n  padding: ",";\n"],["\n  display: flex;\n  position: relative;\n\n  align-items: ",";\n  flex-direction: column;\n\n  padding: ",";\n"])),(function(e){return e.topicDirection===S?"flex-end":"flex-start"}),(function(e){return e.topicDirection===S?"15px 60px 15px 0px":"15px 0px 15px 60px"})),xo=d.default.div(io||(io=bt(["\n  display: flex;\n  position: relative;\n  align-items: center;\n  z-index: 3;\n"],["\n  display: flex;\n  position: relative;\n  align-items: center;\n  z-index: 3;\n"]))),wo=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return it(t,e),t.prototype.renderPartTopics=function(e,t){var n=this.props,r=n.controller,a=n.saveRef,c=r.run("createSubTopics",lt(lt({},this.props),{dir:t,isRoot:!0,topics:e}));if(!c)return null;var i=c.subTopics,l="bm-layer-"+(t===S?"left":"right");return Object(o.createElement)(Eo,{topicDirection:t,ref:a(l)},i)},t.prototype.render=function(){ko("render");var e=this.props,t=e.model,n=e.topicKey,r=e.saveRef,a=e.controller,c=a.run("getTopicContentStyle",e),i=t.config,l=a.run("renderTopicContent",lt(lt({},e),{topicStyle:c,dir:K})),s=a.run("getPartTopics",{layout:i.layoutDir,model:t,topicKey:n}),u=Object(o.createElement)(xo,{ref:r(pn(n))},l),p=a.run("renderRootWidgetOtherChildren",e);switch(i.layoutDir){case x.LEFT_AND_RIGHT:return Object(o.createElement)(o.Fragment,null,this.renderPartTopics(s.L,"L"),u,this.renderPartTopics(s.R,"R"),p);case x.LEFT_TO_RIGHT:return Object(o.createElement)(o.Fragment,null,u,this.renderPartTopics(s.R,"R"),p);case x.RIGHT_TO_LEFT:return Object(o.createElement)(o.Fragment,null,this.renderPartTopics(s.L,"L"),u,p);case x.TOP_TO_BOTTOM:return Object(o.createElement)(o.Fragment,null,u,this.renderPartTopics(s.B,"B"),p)}return null},t}(o.Component),So=d.default.div(uo||(uo=bt(["\n  position: absolute;\n  top: calc(50% - 10px);\n  ",";\n  border-radius: 50%;\n  width: 20px;\n  height: 20px;\n  text-align: center;\n  //@ts-ignore\n  background: ",";\n  cursor: pointer;\n  padding: 0;\n  font-size: 14px;\n  line-height: 20px;\n  border: 0;\n  z-index: 2;\n"],["\n  position: absolute;\n  top: calc(50% - 10px);\n  ",";\n  border-radius: 50%;\n  width: 20px;\n  height: 20px;\n  text-align: center;\n  //@ts-ignore\n  background: ",";\n  cursor: pointer;\n  padding: 0;\n  font-size: 14px;\n  line-height: 20px;\n  border: 0;\n  z-index: 2;\n"])),(function(e){var t=e.dir;return t===C?Object(d.css)(lo||(lo=bt(["\n        right: -25px;\n      "],["\n        right: -25px;\n      "]))):t===S?Object(d.css)(so||(so=bt(["\n        left: -25px;\n      "],["\n        left: -25px;\n      "]))):void 0}),(function(e){return e.background}));function Co(e){var t,n=e.model,r=e.topicKey,a=e.topicStyle,c=e.dir,i=e.saveRef,l=e.onClickCollapse,s=n.getTopic(r);return s.subKeys.size>0?Object(o.createElement)(So,{ref:i(bn(r)),onClick:l,background:a.background,dir:c,className:nt()((t={icon:!0,iconfont:!0},t["bm-"+(s.collapse?"plus":"minus")]=!0,t))}):null}var Ko,Ro,Do=b()("node:topic-content2"),Lo=d.default.div(Ko||(Ko=bt(["\n  position: relative;\n"],["\n  position: relative;\n"]))),_o=d.default.div(Ro||(Ro=bt(["\n  position: absolute;\n  left: 0;\n  top: 0;\n  width: auto;\n  z-index: 10;\n  color: black;\n"],["\n  position: absolute;\n  left: 0;\n  top: 0;\n  width: auto;\n  z-index: 10;\n  color: black;\n"]))),Io=function(e){Do("cancelEvent"),e.preventDefault(),e.stopPropagation()};function Mo(e){var t,n=e.controller,r=e.model,a=e.topicKey,c=e.getRef,i=r.editingContentKey!==a,l=n.run("renderTopicContentEditor",lt(lt({},e),{readOnly:i}));if(i)t=l;else{var s,u={width:50,height:40},d=c("content-editor-"+a);d&&(u=d.getBoundingClientRect());var f=new p.a((function(e,t){var n=e[0].contentRect;s.style.left=(u.width-n.width)/2+"px",s.style.top=(u.height-n.height)/2+"px"}));Do(u),t=Object(o.createElement)(o.Fragment,null,Object(o.createElement)("div",{style:{width:u.width,height:u.height}}),Object(o.createElement)(_o,{ref:function(e){e&&(s=e,f.observe(s))}},l))}return Object(o.createElement)(Lo,{onDragEnter:Io,onDragOver:Io},t)}var Ao,No,Fo,Po=b()("node:topic-content-widget"),Bo=d.default.div(Ao||(Ao=bt(["\n  display: flex;\n  align-items: center;\n  cursor: pointer;\n  //overflow: hidden;\n  position: relative;\n"],["\n  display: flex;\n  align-items: center;\n  cursor: pointer;\n  //overflow: hidden;\n  position: relative;\n"]))),zo=d.default.div(No||(No=bt(["\n  position: relative;\n"],["\n  position: relative;\n"]))),Vo=function(e){function t(t){var n=e.call(this,t)||this;return n.onDragStart=function(e){n.run("handleTopicDragStart",lt(lt({},n.props),{ev:e}))},n.onDragOver=function(e){e.preventDefault()},n.onDragEnter=function(e){Po("onDragEnter",n.props.topicKey),n.run("handleTopicDragEnter",lt(lt({},n.props),{ev:e,dropDir:"in"}))},n.onDragLeave=function(e){n.run("handleTopicDragLeave",lt(lt({},n.props),{ev:e,dropDir:"in"}))},n.onDrop=function(e){Po("onDrop"),n.run("handleTopicDrop",lt(lt({},n.props),{ev:e,dropDir:"in"}))},n.onClick=function(e){var t=n.props.controller;n.handleTopicClickTimeout=setTimeout((function(){t.run("handleTopicClick",lt(lt({},n.props),{ev:e}))}),200)},n.onDoubleClick=function(e){clearTimeout(n.handleTopicClickTimeout),n.props.controller.run("handleTopicDoubleClick",lt(lt({},n.props),{ev:e}))},n.needRelocation=!1,n.onClickCollapse=function(e){e.stopPropagation();var t=n.props,o=t.topicKey,r=t.getRef;n.needRelocation=!0;var a=r(bn(o)).getBoundingClientRect();Po("oldRect",a),n.oldCollapseIconVector=[a.left+a.width/2,a.top+a.height/2],Po("oldCollapseIconVector",n.oldCollapseIconVector),n.operation(H,n.props)},n.state={dragEnter:!1},n}return it(t,e),t.prototype.renderContextMenu=function(){var e=this.props.controller;if(e.getValue(kn,lt({},this.props)))return this.operation(q,lt(lt({},this.props),{focusMode:N})),e.run("renderTopicContextMenu",this.props)},t.prototype.onContextMenuClose=function(){},t.prototype.componentDidUpdate=function(){if(this.needRelocation){var e=this.props,t=e.getRef,n=e.topicKey,o=e.setViewBoxScrollDelta,r=t(bn(n)).getBoundingClientRect(),a=[r.left+r.width/2,r.top+r.height/2];Po("newVector:",a),Po("oldVector:",this.oldCollapseIconVector);var c=[a[0]-this.oldCollapseIconVector[0],a[1]-this.oldCollapseIconVector[1]];Po("vector",c),o(c[0],c[1]),this.needRelocation=!1}},t.prototype.render=function(){var e=this.props,t=e.saveRef,n=e.topicKey,r=e.model,a=e.controller,c=e.topicStyle,i=e.dir;Po("render",n,r.focusMode);var l=a.run("isOperationEnabled",e)&&r.editingContentKey!==n,s=a.run("renderTopicCollapseIcon",lt(lt({},e),{onClickCollapse:this.onClickCollapse.bind(this)})),u=a.run("renderTopicDropArea",lt(lt({},e),{dropDir:"prev"})),p=a.run("renderTopicDropArea",lt(lt({},e),{dropDir:"next"})),d={onDragEnter:this.onDragEnter,onDragLeave:this.onDragLeave,onDragOver:this.onDragOver,onDrop:this.onDrop};return Object(o.createElement)(zo,null,u,Object(o.createElement)(Bo,lt({style:c,draggable:l,ref:t(cn(n)),onDragStart:this.onDragStart,onClick:this.onClick,onDoubleClick:this.onDoubleClick},d),a.run("renderTopicBlocks",e),a.run("renderTopicContentOthers",e)),p,i!==K&&s)},t=ut([y.f],t)}(Ct),Ho=b()("node:topic-desc"),Go=d.default.div(Fo||(Fo=bt(["\n  overflow: auto;\n"],["\n  overflow: auto;\n"])));function Uo(e){var t=e.controller,n=e.model,r=e.topicKey,a=e.getRef,c=n.editingDescKey===r;Ho("isEditing",c);var i=n.getTopic(r).getBlock(_);if(!c&&t.run("isBlockEmpty",lt(lt({},e),{block:i.block})))return null;var l=t.run("renderTopicDescEditor",e),s=a(hn),u={maxWidth:"800px",maxHeight:"600px"};if(s){var p=s.getBoundingClientRect();u.maxWidth=.6*p.width+"px",u.maxHeight=.8*p.height+"px"}var d={autoFocus:!1,content:Object(o.createElement)(Go,{onClick:xn,classname:h.a.POPOVER_DISMISS,style:u},l),target:Object(o.createElement)(Ht,{onClick:function(n){n.stopPropagation(),t.run("operation",lt(lt({},e),{opType:oe}))},className:rn(Xt),tabIndex:-1}),interactionKind:y.t.HOVER,hoverOpenDelay:500};return i.block&&Object(o.createElement)(y.s,lt({},d))}var Wo,Jo,Zo,Yo,qo,Xo,$o,Qo,er,tr=d.default.svg(Wo||(Wo=bt(["\n  width: 100%;\n  height: 100%;\n  position: absolute;\n  left: 0;\n  top: 0;\n  z-index: 2;\n  pointer-events: none;\n"],["\n  width: 100%;\n  height: 100%;\n  position: absolute;\n  left: 0;\n  top: 0;\n  z-index: 2;\n  pointer-events: none;\n"]))),nr=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.state={content:null},t}return it(t,e),t.prototype.layout=function(){var e=this.props,t=e.getRef,n=e.model,r=e.zoomFactor,a=n.focusKey,c=n.focusMode;if(a&&c!==M){var i=t(cn(a)),l=t(gn).bigView,s=t(mn),u=_n(i,l,r),p=_n(s,l,r),d=u.left-p.left-3,f=u.top-p.top-3,b=u.width+6,y=u.height+6;this.setState({content:Object(o.createElement)("rect",{x:d,y:f,width:b,height:y,fill:"none",stroke:n.config.theme.highlightColor,strokeWidth:2})})}else this.setState({content:null})},t.prototype.render=function(){var e=this.props.saveRef;return Object(o.createElement)(tr,{ref:e(mn)},this.state.content)},t}(Ct),or=d.default.svg(Jo||(Jo=bt(["\n  width: 100%;\n  height: 100%;\n  position: absolute;\n  left: 0;\n  top: 0;\n  z-index: 1;\n  pointer-events: none;\n"],["\n  width: 100%;\n  height: 100%;\n  position: absolute;\n  left: 0;\n  top: 0;\n  z-index: 1;\n  pointer-events: none;\n"]))),rr=b()("node:topic-sub-links"),ar=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.state={curves:[]},t}return it(t,e),t.prototype.layout=function(){var e,t,n,r=this.props,a=r.model,c=r.getRef,i=r.topicKey,l=r.dir,s=r.controller,u=s.run("getZoomFactor",r),p=a.getTopic(i),d=c(cn(i)),f=c(fn(i)),b=c(bn(i)),y=c(gn).bigView,h=_n(f,y,u),g=_n(b,y,u),m=_n(d,y,u);rr(i),rr("svgRect",h),rr("collapseRect",g),rr("contentRect",m),l===C?(e={x:0,y:Kn(m)-h.top},t={x:g.right-h.left+10,y:e.y}):l===S&&(e={x:h.right-h.left,y:Kn(m)-h.top},t={x:g.left-h.left-10,y:e.y});var O=[];p.subKeys.forEach((function(a){var i,d=s.run("getLinkStyle",lt(lt({},r),{topicKey:a})),f=c(cn(a));if(f){var b=_n(f,y,u);l===C&&(n={x:b.left-h.left,y:Kn(b)-h.top}),l===S&&(n={x:b.right-h.left,y:Kn(b)-h.top});var g=d.lineType;if("curve"===g)i="M "+e.x+" "+e.y+" L "+t.x+" "+t.y+" C "+t.x+" "+Dn(t,n)+" "+Rn(t,n)+" "+n.y+" "+n.x+" "+n.y;else if("round"===g){var m=n.y>e.y?1:-1,v=n.x>e.x?1:-1,T=d.lineRadius;i=1===p.subKeys.size||Math.abs(n.y-e.y)<=1?"M "+e.x+" "+e.y+" L "+n.x+" "+n.y:"M "+e.x+" "+e.y+" H "+t.x+" V "+(n.y-m*T)+" A "+T+" "+T+" 0 0 "+(m*v===1?0:1)+" "+(t.x+T*v)+" "+n.y+" H "+n.x}else"line"===g&&(i="M "+e.x+" "+e.y+" H "+t.x+" L "+n.x+" "+n.y);O.push(Object(o.createElement)("path",{key:"link-"+a,d:i,strokeWidth:d.lineWidth,stroke:d.lineColor,fill:"none"}))}})),this.setState({curves:O})},t.prototype.render=function(){var e=this.props,t=e.topicKey,n=e.saveRef;return Object(o.createElement)(or,{ref:n(fn(t))},Object(o.createElement)("g",null,this.state.curves))},t}(Ct),cr=b()("node:topic-widget"),ir=d.default.div(Zo||(Zo=bt(["\n  display: flex;\n  align-items: center;\n  flex-direction: ",";\n"],["\n  display: flex;\n  align-items: center;\n  flex-direction: ",";\n"])),(function(e){return e.topicDirection===C?"row":"row-reverse"})),lr=d.default.div(Yo||(Yo=bt(["\n  position: relative;\n  padding: ",";\n"],["\n  position: relative;\n  padding: ",";\n"])),(function(e){return e.dir===C?"0 0 0 "+e.marginH+"px":"0 "+e.marginH+"px 0 0"})),sr=d.default.div(qo||(qo=bt(["\n  display: flex;\n  position: relative;\n  align-items: center;\n\n  flex-direction: ",";\n"],["\n  display: flex;\n  position: relative;\n  align-items: center;\n\n  flex-direction: ",";\n"])),(function(e){return e.topicDirection===C?"row":"row-reverse"})),ur=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return it(t,e),t.prototype.renderSubTopics=function(){var e=this.props,t=e.controller,n=e.model,r=e.topicKey,a=e.dir,c=n.getTopic(r).subKeys.toArray(),i=t.run("createSubTopics",lt(lt({},e),{topics:c}));if(!i)return null;var l=i.subTopics,s=t.run("renderSubLinks",e);return Object(o.createElement)(lr,{dir:a,marginH:n.config.theme.marginH},l," ",s)},t.prototype.layoutLinks=function(){var e=this.props,t=e.getRef,n=e.topicKey,o=e.model.getTopic(n);if(0!==o.subKeys.size&&!o.collapse){cr("layoutLinks",n);var r=t(dn(n));r&&r.layout()}},t.prototype.render=function(){var e=this.props,t=e.controller,n=e.topicKey,r=e.dir,a=e.saveRef;cr("render",n);var c=t.run("getTopicContentStyle",e),i=lt(lt({},e),{topicStyle:c}),l=t.run("renderTopicContent",i);return Object(o.createElement)(ir,{topicDirection:r},Object(o.createElement)(sr,{topicDirection:r,ref:a(pn(n))},l),this.renderSubTopics())},t}(o.Component),pr=b()("node:view-port-viewer"),dr=Object(d.default)(Gt)(Xo||(Xo=bt(["\n  position: absolute;\n  background: white;\n  right: 30px;\n  bottom: 20px;\n  border-radius: 2px;\n  display: flex;\n  flex-direction: row;\n  user-select: none;\n"],["\n  position: absolute;\n  background: white;\n  right: 30px;\n  bottom: 20px;\n  border-radius: 2px;\n  display: flex;\n  flex-direction: row;\n  user-select: none;\n"]))),fr=Object(d.default)(Pt)($o||($o=bt(["\n  margin: 10px;\n"],["\n  margin: 10px;\n"]))),br=d.default.span(Qo||(Qo=bt(["\n  display: inline-block;\n  width: 80px;\n  height: 18px;\n"],["\n  display: inline-block;\n  width: 80px;\n  height: 18px;\n"]))),yr=function(e){return Object(o.createElement)(y.x,{content:e.tooltip,position:g.a.TOP,className:h.a.ICON},Object(o.createElement)(fr,{onClick:e.onClick,tabIndex:-1},e.children))},hr=function(e){function t(t){var n=e.call(this,t)||this;return n.zoomFactorChange=function(e){pr("zoomFactorChange",e),n.setState({zoomFactor:e})},n.onClickResetZoom=function(e){var t=n.props;t.controller.run("setZoomFactor",lt(lt({},t),{zoomFactor:1}))},n.onClickAddZoom=function(e){var t=n.props,o=t.controller,r=o.run("getZoomFactor",t);o.run("setZoomFactor",lt(lt({},t),{zoomFactor:r+.1}))},n.onClickMinusZoom=function(e){var t=n.props,o=t.controller,r=o.run("getZoomFactor",t);o.run("setZoomFactor",lt(lt({},t),{zoomFactor:r-.1}))},n.onClickCollapseAll=function(e){var t=n.props,o=t.controller;o.run("addEventListener",lt(lt({},t),{key:Tn,listener:n.centerRootTopic,once:!0})),o.run("operation",lt(lt({},t),{opType:G}))},n.onClickExpandAll=function(e){var t=n.props,o=t.controller;o.run("addEventListener",lt(lt({},t),{key:Tn,listener:n.centerRootTopic,once:!0})),o.run("operation",lt(lt({},t),{opType:U}))},n.centerRootTopic=function(){var e=n.props,t=e.model;e.controller.run("moveTopicToCenter",lt(lt({},n.props),{topicKey:t.editorRootTopicKey}))},n}return it(t,e),t.prototype.componentDidMount=function(){var e=this.props;e.controller.run("addZoomFactorChangeEventListener",lt(lt({},e),{listener:this.zoomFactorChange}))},t.prototype.componentWillUnmount=function(){var e=this.props;e.controller.run("removeZoomFactorChangeEventListener",lt(lt({},e),{listener:this.zoomFactorChange}))},t.prototype.render=function(){pr("render");var e=this.props,t=e.controller,n=e.zIndex,r=t.run("getZoomFactor",e);return Object(o.createElement)(dr,{zIndex:n},Object(o.createElement)(yr,{onClick:this.onClickCollapseAll,tooltip:"collapse all"},an(en)),Object(o.createElement)(yr,{onClick:this.onClickExpandAll,tooltip:"expand all"},an(tn)),Object(o.createElement)(yr,{onClick:this.centerRootTopic,tooltip:"center root topic"},an(nn)),Object(o.createElement)(yr,{onClick:this.onClickMinusZoom,tooltip:"zoom in"},an(Qt)),Object(o.createElement)(yr,{onClick:this.onClickResetZoom,tooltip:"reset zoom"},Object(o.createElement)(br,null,"zoom:"+Math.floor(100*r)+"%")),Object(o.createElement)(yr,{onClick:this.onClickAddZoom,tooltip:"zoom out"},an($t)))},t}(Ct),gr=d.default.div(er||(er=bt(["\n  overflow: auto;\n  padding: 0px 0px 0px 20px;\n  background: #88888850;\n"],["\n  overflow: auto;\n  padding: 0px 0px 0px 20px;\n  background: #88888850;\n"])));function mr(e){var t=e.controller,n=e.model,r=e.topicKey;if(n.focusMode===A){var a=t.run("renderTopicDescEditor",e);return Object(o.createElement)(y.i,{key:"drawer",title:"Edit Notes",icon:an("note"),isOpen:!0,hasBackdrop:!0,backdropProps:{onMouseDown:xn},isCloseButtonShown:!1,onClose:function(n){n.stopPropagation();var o="topic-desc-data-"+r,a=t.run("deleteTempValue",{key:o});t.run("operation",lt(lt({},e),{opType:ee,topicKey:r,blockType:_,data:a,focusMode:I}))},size:"70%"},Object(o.createElement)(gr,null,a))}}function Or(e){var t=e.theme,n=e.children;return Object(o.createElement)(d.ThemeProvider,{theme:t},Object(o.createElement)(o.Fragment,null,n))}var vr,Tr=b()("plugin:rendering");function jr(){var e,t=d.default.div(vr||(vr=bt(["\n    width: 100%;\n    height: 100%;\n    background: ",";\n    position: relative;\n  "],["\n    width: 100%;\n    height: 100%;\n    background: ",";\n    position: relative;\n  "])),(function(e){return e.theme.background}));return{getDiagramProps:function(){return e},renderDiagram:function(n){var r=n.model,a=n.controller;return Object(o.createElement)(It,null,(function(c,i,l){return e=lt(lt({},n),{saveRef:c,getRef:i,deleteRef:l}),Tr("renderDiagram",r),Object(o.createElement)(Or,{theme:r.config.theme},Object(o.createElement)(t,{ref:c(hn)},Object(o.createElement)(mo,lt({},e)),a.run("renderDiagramCustomize",e)))}))},renderDrawer:mr,renderDiagramCustomize:function(e){var t=e.controller,n=e.model,o=t.getValue(jn),r=lt(lt({},e),{zIndex:o,topicKey:n.focusKey});return[t.run("renderEditorRootBreadcrumbs",r),t.run("renderRightTopPanel",r),t.run("renderModals",lt(lt({},r),{zIndex:o+1})),t.run("renderDrawer",lt(lt({},r),{zIndex:o+1})),t.run("renderViewPortViewer",r)]},renderEditorRootBreadcrumbs:function(e){return Object(o.createElement)(yo,lt({key:"EditorRootBreadcrumbs"},e))},renderModals:function(e){return Object(o.createElement)(Oo,lt({key:"modals"},e))},renderModal:function(e){return null},getActiveModalProps:function(e){return null},renderDoc:function(e){return e.children},renderRootWidget:function(e){return Object(o.createElement)(wo,lt({},e))},renderTopicWidget:function(e){return Object(o.createElement)(ur,lt({},e))},renderTopicContent:function(e){return Object(o.createElement)(Vo,lt({},e))},renderTopicCollapseIcon:function(e){return Object(o.createElement)(Co,lt({},e))},renderTopicContentOthers:function(e){return[]},renderTopicBlocks:function(e){var t=e.model,n=e.topicKey,r=e.controller,a=t.getTopic(n).blocks,c=[],i=0;return a.forEach((function(t){var n=r.run("renderTopicBlock",lt(lt({},e),{block:t,blockKey:"block-"+i}));n&&(c.push(Object(o.createElement)(o.Fragment,{key:"block-"+i},n)),i++)})),c},renderTopicBlock:function(e){var t=e.controller;switch(e.block.type){case L:return t.run("renderTopicBlockContent",e);case _:return t.run("renderTopicBlockDesc",e)}return null},renderTopicBlockContent:function(e){return Object(o.createElement)(Mo,lt({},e))},renderTopicBlockDesc:function(e){return Object(o.createElement)(Uo,lt({},e))},renderSubLinks:function(e){var t=e.saveRef,n=e.topicKey,r=e.model.getTopic(n);return 0===r.subKeys.size||r.collapse?null:Object(o.createElement)(ar,lt({ref:t(dn(n))},e))},renderRootSubLinks:function(e){var t=e.saveRef,n=e.topicKey;return Object(o.createElement)(jo,lt({ref:t(dn(n))},e))},renderFocusItemHighlight:function(e){var t=e.saveRef;return Object(o.createElement)(nr,lt({ref:t(On)},e))},renderRootWidgetOtherChildren:function(e){var t=e.controller,n=t.run("getZoomFactor",e);return e=lt(lt({},e),{zoomFactor:n}),Object(o.createElement)(o.Fragment,null,t.run("renderRootSubLinks",e),t.run("renderFocusItemHighlight",e),t.run("renderDragAndDropEffect",e))},renderViewPortViewer:function(e){return Object(o.createElement)(hr,lt({key:"view-port-viewer"},e))}}}var kr,Er,xr=Object(d.default)(Gt)(kr||(kr=bt(["\n  position: absolute;\n  background: white;\n  right: 30px;\n  top: 20px;\n  border-radius: 2px;\n  user-select: none;\n"],["\n  position: absolute;\n  background: white;\n  right: 30px;\n  top: 20px;\n  border-radius: 2px;\n  user-select: none;\n"]))),wr=Object(d.default)(y.w)(Er||(Er=bt(["\n  padding: 0px 10px;\n"],["\n  padding: 0px 10px;\n"])));function Sr(e){var t=e.controller,n=e.zIndex,r=e.selectedTabId,a=e.handleTabIdChange,c=dt(Object(o.useState)(!1),2),i=c[0],l=c[1];return i?Object(o.createElement)(xr,{zIndex:n},Object(o.createElement)(Vt,null,Object(o.createElement)(zt,{className:rn(Yt),onClick:function(){return l(!1)}})),Object(o.createElement)(wr,{id:r,onChange:a},t.run("renderRightTopPanelTabs",e))):Object(o.createElement)(xr,{zIndex:n},Object(o.createElement)(Ft,{onClick:function(){return l(!0)}},Object(o.createElement)(Nt,{className:rn(Zt)})))}var Cr,Kr,Rr,Dr,Lr,_r,Ir,Mr=d.default.div(Cr||(Cr=bt(["\n  margin-top: 10px;\n  margin-bottom: 5px;\n  font-weight: bold;\n"],["\n  margin-top: 10px;\n  margin-bottom: 5px;\n  font-weight: bold;\n"]))),Ar=d.default.span(Kr||(Kr=bt(["\n  margin: 0px 10px 0px 0px;\n"],["\n  margin: 0px 10px 0px 0px;\n"]))),Nr=d.default.div(Rr||(Rr=bt(["\n  padding: 10px;\n  margin: 0 0 10px 0;\n  border: rgba(16, 22, 26, 0.15) solid 1px;\n  border-radius: 5px;\n"],["\n  padding: 10px;\n  margin: 0 0 10px 0;\n  border: rgba(16, 22, 26, 0.15) solid 1px;\n  border-radius: 5px;\n"]))),Fr=Object(d.default)(Ar)(Dr||(Dr=bt([""],[""]))),Pr=d.default.div(Lr||(Lr=bt(["\n  display: flex;\n  align-items: center;\n  //justify-content: center;\n  margin: 5px 0;\n"],["\n  display: flex;\n  align-items: center;\n  //justify-content: center;\n  margin: 5px 0;\n"]))),Br=d.default.div(_r||(_r=bt(["\n  height: 3px;\n  width: 80%;\n  margin-left: 10%;\n  margin-right: 10%;\n  margin-bottom: 2px;\n  background: ",";\n"],["\n  height: 3px;\n  width: 80%;\n  margin-left: 10%;\n  margin-right: 10%;\n  margin-bottom: 2px;\n  background: ",";\n"])),(function(e){return e.color})),zr=d.default.div(Ir||(Ir=bt(["\n  border: 1px solid grey;\n  cursor: pointer;\n  font-weight: bold;\n"],["\n  border: 1px solid grey;\n  cursor: pointer;\n  font-weight: bold;\n"])));function Vr(e){return Object(o.createElement)("div",null,e.children,Object(o.createElement)(y.h,{style:{margin:"10px 0"}}))}function Hr(e){var t=e.color,n=e.handleColorChange;return Object(o.createElement)(Ar,null,Object(o.createElement)(y.s,null,Object(o.createElement)(zr,null,Object(o.createElement)("div",{className:rn(qt)}),Object(o.createElement)(Br,{color:t})),Object(o.createElement)("div",null,Object(o.createElement)(rt.a,{color:t,onChangeComplete:function(e){return n(e.hex)}}))))}function Gr(e){var t=e.title,n=e.handleClick;return Object(o.createElement)(Ar,null,Object(o.createElement)(y.d,{onClick:n},t))}function Ur(e){var t=e.layout,n=void 0===t?"h":t,r=e.title,a=st(e,["layout","title"]),c={flexDirection:"h"===n?"row":"column",alignItems:"center"};return Object(o.createElement)(Ar,null,Object(o.createElement)(Mt,lt({},c),Object(o.createElement)(At,{margin:"0 5px 0 0"},r),Object(o.createElement)(y.q,lt({},a))))}function Wr(e){var t=e.text,n=e.items,r=e.itemRenderer,a=e.onItemSelect,c=ot.a.ofType(),i={items:n,itemRenderer:r,onItemSelect:a,filterable:!1};return Object(o.createElement)(Ar,null,Object(o.createElement)(c,lt({},i),Object(o.createElement)(y.d,{text:t})))}var Jr=function(e){return function(t,n){var r=n.handleClick;return Object(o.createElement)(y.p,{text:""+t+e,key:t,onClick:r})}},Zr=(ot.a.ofType(),ft(Array(7).keys())),Yr=ft(Array(7).keys()),qr=[0,5,10,15,20,25,30,35],Xr=["none","solid","dotted","dashed","double"];function $r(e){var t=e.contentStyle,n=e.setContentStyle;return Object(o.createElement)(Vr,null,Object(o.createElement)(Mr,null,"Border"),Object(o.createElement)("div",null,Object(o.createElement)(Wr,{text:"width: "+(t.borderWidth?t.borderWidth:"0px"),items:Yr,itemRenderer:Jr("px"),onItemSelect:function(e){n({borderWidth:e+"px"})}}),Object(o.createElement)(Wr,{text:"style: "+(t.borderStyle?t.borderStyle:"none"),items:Xr,itemRenderer:Jr(""),onItemSelect:function(e){n({borderStyle:e})}}),Object(o.createElement)(Wr,{text:"radius: "+t.borderRadius,items:qr,itemRenderer:Jr("px"),onItemSelect:function(e){n({borderRadius:e+"px"})}}),Object(o.createElement)(Hr,{color:t.borderColor,handleColorChange:function(e){n({borderColor:e})}})))}var Qr=["curve","round","line"],ea=function(e,t){var n=t.handleClick;t.modifiers,t.query;return Object(o.createElement)(y.p,{text:""+e,key:e,onClick:n})};function ta(e){var t=e.showLinkStyle,n=void 0===t||t,r=e.showSubLinkStyle,a=void 0===r||r,c=e.linkStyle,i=void 0===c?{}:c,l=e.subLinkStyle,s=void 0===l?{}:l,u=e.setLinkStyle,p=e.setSubLinkStyle;return Object(o.createElement)(Vr,null,Object(o.createElement)(Mr,null,"Link"),n&&Object(o.createElement)(Pr,{alignItems:"center"},Object(o.createElement)(At,{margin:"0 5px 0 0"},"LinkToParent: "),Object(o.createElement)(Wr,{text:"width: "+(i?i.lineWidth:"0px"),items:Zr,itemRenderer:Jr("px"),onItemSelect:function(e){u({lineWidth:e+"px"})}}),Object(o.createElement)(Wr,{text:"lineType: "+i.lineType,items:Qr,itemRenderer:ea,onItemSelect:function(e){u({lineType:e})}}),Object(o.createElement)(Hr,{color:i.lineColor,handleColorChange:function(e){u({lineColor:e})}})),a&&Object(o.createElement)(Pr,{alignItems:"center"},Object(o.createElement)(At,{margin:"0 5px 0 0"},"SubLinks: "),Object(o.createElement)(Wr,{text:"width: "+(s?s.lineWidth:"0px"),items:Zr,itemRenderer:Jr("px"),onItemSelect:function(e){p({lineWidth:e+"px"})}}),Object(o.createElement)(Wr,{text:"lineType: "+s.lineType,items:Qr,itemRenderer:ea,onItemSelect:function(e){p({lineType:e})}}),Object(o.createElement)(Hr,{color:s.lineColor,handleColorChange:function(e){p({lineColor:e})}})))}function na(e){var t=e.contentStyle,n=e.setContentStyle,r={title:"FontSize:",min:12,max:100,value:parseInt(t.fontSize),style:{width:50},onValueChange:function(e){n({fontSize:e})}},a={style:{width:50},value:t.lineHeight||"",onChange:function(e){n({lineHeight:e.target.value})}};return Object(o.createElement)(Vr,null,Object(o.createElement)(Mr,null,"Text Editor"),Object(o.createElement)(Mt,null,Object(o.createElement)(Ur,lt({},r)),Object(o.createElement)(Ar,null,Object(o.createElement)(Mt,{alignItems:"center"},Object(o.createElement)(At,{margin:"0 5px 0 0"},"LineHeight: "),Object(o.createElement)(y.m,lt({},a)))),Object(o.createElement)(Hr,{color:t.color,handleColorChange:function(e){n({color:e})}})))}var oa,ra=b()("node:style-editor");function aa(e){var t=e.controller,n=e.model,r=e.topicKey,a=n.getTopic(r),c=function(n){t.run("setTopicContentStyle",lt(lt({},e),{style:n}))};if(!n.focusKey)return null;var i=t.run("getTopicContentStyle",e),l={linkStyle:t.run("getLinkStyle",e),subLinkStyle:t.run("getSubLinkStyle",e),setLinkStyle:function(n){t.run("setLinkStyle",lt(lt({},e),{linkStyle:n}))},setSubLinkStyle:function(n){t.run("setSubLinkStyle",lt(lt({},e),{subLinkStyle:n}))}},s={contentStyle:i,setContentStyle:c};return Object(o.createElement)(Ut,null,Object(o.createElement)($r,lt({},s)),Object(o.createElement)(na,lt({},s)),Object(o.createElement)(Vr,null,Object(o.createElement)(Mr,null,"Background"),Object(o.createElement)(Hr,{color:i.background,handleColorChange:function(e){c({background:e})}})),Object(o.createElement)(ta,lt({},l)),Object(o.createElement)(Vr,null,Object(o.createElement)(Gr,{title:"Clear Topic Style",handleClick:function(){a.style&&t.run("operation",lt(lt({},e),{opType:$,style:null}))}}),Object(o.createElement)(Gr,{title:"Copy Style",handleClick:function(){oa=t.run("getTopicStyle",e),ra(oa)}}),Object(o.createElement)(Gr,{title:"Paste Style",handleClick:function(){oa&&t.run("operation",lt(lt({},e),{opType:$,style:JSON.stringify(oa)}))}})),function(e){var t=e.controller;return Object(o.createElement)(Vr,null,Object(o.createElement)(Ar,null,Object(o.createElement)(y.d,{onClick:function(n){t.run("clearAllCustomStyle",e)}},"Clear All Custom Styles")))}(e))}var ca=n(109);function ia(e){var t=e.contentStyle,n=e.setContentStyle,r=ca("padding",t.padding||"0"),a={layout:"v",min:0,max:99,style:{width:38}},c=parseInt(r["padding-top"]),i=parseInt(r["padding-right"]),l=parseInt(r["padding-bottom"]),s=parseInt(r["padding-left"]),u={top:c,right:i,bottom:l,left:s},p=function(e){return function(t){var o;n({padding:Cn(lt(lt({},u),(o={},o[e]=t,o)))})}},d=lt(lt({},a),{title:"top",value:c,onValueChange:p("top")}),f=lt(lt({},a),{title:"right",value:i,onValueChange:p("right")}),b=lt(lt({},a),{title:"bottom",value:l,onValueChange:p("bottom")}),y=lt(lt({},a),{title:"left",value:s,onValueChange:p("left")});return Object(o.createElement)(Vr,null,Object(o.createElement)(Mr,null,"Padding"),Object(o.createElement)(Pr,null,Object(o.createElement)(Ur,lt({},d)),Object(o.createElement)(Ur,lt({},f)),Object(o.createElement)(Ur,lt({},b)),Object(o.createElement)(Ur,lt({},y))))}var la,sa=d.default.div(la||(la=bt(["\n  height: 250px;\n  overflow: auto;\n"],["\n  height: 250px;\n  overflow: auto;\n"])));function ua(e){var t=e.topicStyle,n=e.setTopicStyle,r=t.contentStyle,a=void 0===r?{}:r,c=t.linkStyle,i=void 0===c?{}:c,l=t.subLinkStyle,s=function(e){n({contentStyle:e})},u={contentStyle:a,setContentStyle:s},p={showLinkStyle:!1,linkStyle:i,subLinkStyle:void 0===l?{}:l,setLinkStyle:function(e){n({linkStyle:e})},setSubLinkStyle:function(e){n({subLinkStyle:e})}};return Object(o.createElement)(sa,null,Object(o.createElement)($r,lt({},u)),Object(o.createElement)(ia,lt({},u)),Object(o.createElement)(na,lt({},u)),Object(o.createElement)(Vr,null,Object(o.createElement)(Mr,null,"Background"),Object(o.createElement)(Hr,{color:a.background,handleColorChange:function(e){s({background:e})}})),Object(o.createElement)(ta,lt({},p)))}var pa="normal";function da(e){var t,n=dt(Object(o.useState)(!1),2),r=(n[0],n[1],dt(Object(o.useState)(!1),2)),a=r[0],c=r[1],i=e.model,l=e.controller,s=i.config.theme,u=s.rootTopic,p=s.primaryTopic,d=s.normalTopic,f=function(t){l.run("operation",lt(lt({},e),{opType:Q,theme:Object(at.clone)(t)}))},b=(t=function(e){f(Object(at.merge)(s,{randomColor:e}))},function(e){return t(e.target.checked)}),h={topicStyle:u,setTopicStyle:function(e){f(Object(at.merge)(s,{rootTopic:e}))}},g=Object(o.createElement)(ua,lt({},h)),m={topicStyle:p,setTopicStyle:function(e){f(Object(at.merge)(s,{primaryTopic:e}))}},O=Object(o.createElement)(ua,lt({},m)),v={topicStyle:d,setTopicStyle:function(e){f(Object(at.merge)(s,{normalTopic:e}))}},T=Object(o.createElement)(ua,lt({},v)),j={id:pa,handleTabIdChange:function(e){pa=e}},k=Object(o.createElement)(Nr,null,Object(o.createElement)(y.w,lt({},j),Object(o.createElement)(y.v,{id:"normal",title:"NormalTopic",panel:T}),Object(o.createElement)(y.v,{id:"primary",title:"PrimaryTopic",panel:O}),Object(o.createElement)(y.v,{id:"root",title:"RootTopic",panel:g}))),E={isOpen:a,onClose:function(e){c(!1)}},x=Object(o.createElement)(y.a,lt({},E),Object(o.createElement)("p",null,"File format error"));return Object(o.createElement)(Ut,null,Object(o.createElement)(Vr,null,Object(o.createElement)(Mr,null,"Global"),Object(o.createElement)(Pr,null,Object(o.createElement)(Fr,null,"Background:"),Object(o.createElement)(Hr,{color:s.background,handleColorChange:function(e){f(Object(at.merge)(s,{background:e}))}}),Object(o.createElement)(Fr,null,"Highlight:"),Object(o.createElement)(Hr,{color:s.highlightColor,handleColorChange:function(e){f(Object(at.merge)(s,{highlightColor:e}))}}),Object(o.createElement)(Fr,null,"Random Color:"),Object(o.createElement)(Bt,{checked:s.randomColor,onChange:b}))),k,Object(o.createElement)(Vr,null,Object(o.createElement)(Gr,{title:"Export Theme",handleClick:function(e){wn(JSON.stringify(s),"blink-mind-theme.json")}}),Object(o.createElement)(Gr,{title:"Import Theme",handleClick:function(e){Sn(".json,.txt").then((function(e){var t,n=JSON.parse(e);null!=(t=n).name&&null!=t.background&&null!=t.highlightColor?f(n):c(!0)}))}})),x)}function fa(){var e="topic-style",t=function(t){e=t};return{renderRightTopPanel:function(n){var r=lt(lt({},n),{key:"right-top-panel",selectedTabId:e,handleTabIdChange:t});return Object(o.createElement)(Sr,lt({},r))},renderRightTopPanelTabs:function(e){var t=e.controller;return[t.run("renderTopicStyleEditor",e),t.run("renderThemeEditor",e)]},renderTopicStyleEditor:function(e){var t={id:"topic-style",key:"topic-style",title:"TopicStyle",panel:Object(o.createElement)(aa,lt({},e))};return Object(o.createElement)(y.v,lt({},t))},renderThemeEditor:function(e){var t={id:"theme-editor",key:"theme-editor",title:"Theme",panel:Object(o.createElement)(da,lt({},e))};return Object(o.createElement)(y.v,lt({},t))}}}var ba=b()("plugin:utils");function ya(){var e=new Map,t=new Map;return{addTempValueChangeListener:function(e){var n=e.key,o=e.listener;t.has(n)||t.set(n,[]),t.get(n).push(o)},removeTempValueChangeListener:function(e){var n=e.key,o=e.listener;t.has(n)&&(t[n]=t.get(n).filter((function(e){return e!==o})))},getTempValue:function(t){var n=t.key;return ba("getTempValue",n),e.get(n)},setTempValue:function(n){var o,r,a=n.key,c=n.value;if(ba("setTempValue",a),e.set(a,c),t.has(a)){var i=t.get(a);try{for(var l=pt(i),s=l.next();!s.done;s=l.next()){(0,s.value)(c)}}catch(u){o={error:u}}finally{try{s&&!s.done&&(r=l.return)&&r.call(l)}finally{if(o)throw o.error}}}},deleteTempValue:function(t){var n=t.key;ba("deleteTempValue",n);var o=e.get(n);return e.delete(n),o}}}var ha=b()("plugin:StylePlugin");function ga(){var e=new Map,t=0;return{getTopicStyle:function(e){var t=e.controller;return{contentStyle:t.run("getTopicContentStyle",e),linkStyle:t.run("getLinkStyle",e),subLinkStyle:t.run("getSubLinkStyle",e)}},getTopicContentStyle:function(e){var t=e.topicKey,n=e.model,o=e.controller;ha("getTopicContentStyle:",t,n);var r,a=n.getTopicVisualLevel(t),c=n.config.theme;if(r=a===R?c.rootTopic:a===D?c.primaryTopic:c.normalTopic,r=lt(lt({},c.contentStyle),r.contentStyle),c.randomColor){var i=o.run("getRandomColor",e);r=lt(lt({},r),{background:i,borderColor:i,subLinkStyle:lt(lt({},r.subLinkStyle),{lineColor:i})})}var l=n.getTopic(t);if(!l.style)return r;var s=JSON.parse(l.style);return lt(lt({},r),s.contentStyle)},getLinkStyle:function(e){var t=e.topicKey,n=e.model,o=e.controller;ha("getLinkStyle",t);var r,a=n.getTopicVisualLevel(t),c=n.config.theme,i=c.linkStyle;r=a===R?c.rootTopic.linkStyle:a===D?c.primaryTopic.linkStyle:c.normalTopic.linkStyle,i=lt(lt({},i),r);var l=n.getTopic(t);if(null!=l.parentKey){var s=o.run("getSubLinkStyle",lt(lt({},e),{topicKey:l.parentKey}));i=lt(lt({},i),s)}if(!l.style)return i;var u=JSON.parse(l.style);return lt(lt({},i),u.linkStyle)},getSubLinkStyle:function(e){var t=e.topicKey,n=e.model,o=e.controller;ha("getLinkStyle",t);var r,a=n.getTopicVisualLevel(t),c=n.config.theme,i=c.linkStyle;r=a===R?c.rootTopic.subLinkStyle:a===D?c.primaryTopic.subLinkStyle:c.normalTopic.subLinkStyle,i=lt(lt({},i),r);var l=n.getTopic(t);if(c.randomColor){var s=o.run("getRandomColor",e);ha(s),i=lt(lt({},i),{lineColor:s})}if(!l.style)return i;var u=JSON.parse(l.style);return lt(lt({},i),u.subLinkStyle)},setTopicContentStyle:function(e){var t=e.topicKey,n=e.controller,o=e.style,r=e.model.getTopic(t).style,a=r?JSON.parse(r):{},c=lt(lt({},a),{contentStyle:lt(lt({},a.contentStyle),o)});if(!Object(at.isEqual)(a,c)){var i=JSON.stringify(c);n.run("operation",lt(lt({},e),{opType:$,style:i}))}},setLinkStyle:function(e){var t=e.topicKey,n=e.controller,o=e.linkStyle,r=e.model.getTopic(t).style,a=r?JSON.parse(r):{},c=lt(lt({},a),{linkStyle:lt(lt({},a.linkStyle),o)});if(!Object(at.isEqual)(a,c)){var i=JSON.stringify(c);n.run("operation",lt(lt({},e),{opType:$,style:i}))}},setSubLinkStyle:function(e){var t=e.topicKey,n=e.controller,o=e.subLinkStyle,r=e.model.getTopic(t).style,a=r?JSON.parse(r):{},c=lt(lt({},a),{subLinkStyle:lt(lt({},a.subLinkStyle),o)});if(!Object(at.isEqual)(a,c)){var i=JSON.stringify(c);n.run("operation",lt(lt({},e),{opType:$,style:i}))}},getTopicThemeStyle:function(e){var t=e.topicKey,n=e.model,o=n.getTopicVisualLevel(t),r=n.config.theme;return o===R?r.rootTopic:o===D?r.primaryTopic:r.normalTopic},getRandomColor:function(n){var o=n.topicKey;if(e.has(o))return e.get(o);var r=["#00CC99","#FFEE88","#A167A5","#E5F993","#F5C396","#DB995A","#83BCFF","#ED7B84","#739E82","#D3BCC0","#FFA0FD","#EFD3D7","#C6878F"],a=r[++t%r.length];return e.set(o,a),ha("getRandomColor",o,a),a},clearAllCustomStyle:function(e){var t=e.model,n=e.controller,o=t.withMutations((function(e){e.topics.keySeq().forEach((function(t){e.setIn(["topics",t,"style"],null)}))}));n.change(o)}}}function ma(){return[[jr(),ya(),{renderTopicContextMenu:function(e){return Object(o.createElement)(Gn,lt({},e))},customizeTopicContextMenu:function(e){var t=e.topicKey,n=e.model,r=e.controller,a=t===n.editorRootTopicKey;function c(t){return function(n){t.opType&&r.run("operation",lt(lt({},e),{opType:t.opType}))}}return Un.map((function(e){return a&&!e.rootCanUse?null:Object(o.createElement)(y.p,{key:e.label,icon:an(e.icon),text:e.label,labelElement:Object(o.createElement)("kbd",null,e.shortcut),onClick:c(e)})}))}},fa(),Qn()],{getPartTopics:function(e){var t=e.layout,n=e.model,o=e.topicKey,r=n.getTopic(o),a=r.subKeys.size,c=r.subKeys.toArray();switch(t){case x.LEFT_TO_RIGHT:return{R:c};case x.RIGHT_TO_LEFT:return{L:c};case x.LEFT_AND_RIGHT:return{L:c.slice(Math.ceil(a/2),a),R:c.slice(0,Math.ceil(a/2))};case x.TOP_TO_BOTTOM:return{B:c}}},createSubTopics:function(e){var t=e.model,n=e.topicKey,o=e.controller,r=e.topics,a=e.saveRef,c=t.getTopic(n);if(0===r.size||c.collapse)return null;var i=[];return r.forEach((function(t){var n=lt(lt({},e),{topicKey:t,key:t,ref:a(un(t))});i.push(o.run("renderTopicWidget",n))})),{subTopics:i}},layout:function(e){var t=e.getRef,n=e.model,o=t(dn(n.editorRootTopicKey)),r=t(On),a=t(vn);o&&o.layout(),r&&r.layout(),a&&a.layout(),function e(o){var r,a;if(o.key!==n.editorRootTopicKey){var c=t(un(o.key));c&&c.layoutLinks()}if(!o.collapse)try{for(var i=pt(o.subKeys),l=i.next();!l.done;l=i.next()){var s=l.value;e(n.getTopic(s))}}catch(u){r={error:u}}finally{try{l&&!l.done&&(a=i.return)&&a.call(i)}finally{if(r)throw r.error}}}(n.getTopic(n.editorRootTopicKey))},setLayoutDir:function(e){var t=e.layoutDir,n=e.model;e.controller.change(ye.setLayoutDir({model:n,layoutDir:t}))},getRelativeRect:function(e){var t=e.element,n=e.controller,o=e.getRef,r=n.run("getZoomFactor",e);return _n(t,o(gn).bigView,r)},getRelativeRectFromViewPort:function(e){var t=e.element,n=e.controller,o=e.getRef,r=n.run("getZoomFactor",e);return _n(t,o(gn).viewBox,r)},getRelativeVectorFromViewPort:function(e){return In(e.element,(0,e.getRef)(gn).viewBox)},addZoomFactorChangeEventListener:function(e){e.controller.run("addTempValueChangeListener",lt({key:"ZoomFactor"},e))},removeZoomFactorChangeEventListener:function(e){e.controller.run("removeTempValueChangeListener",lt({key:"ZoomFactor"},e))},setZoomFactor:function(e){var t=e.controller,n=e.zoomFactor;return t.run("setTempValue",{key:"ZoomFactor",value:n})},getZoomFactor:function(e){return e.controller.run("getTempValue",{key:"ZoomFactor"})||1},moveTopicToCenter:function(e){var t=e.getRef,n=e.topicKey,o=e.model;if(o.editorRootTopicKey!==n&&de(o,n,o.editorRootTopicKey)!==B)throw new Error("moveTopicToCenter error: topicKey "+n+" is not the DESCENDANT of editor root topic");var r=t(pn(n)),a=t(gn),c=a.viewBox;if(!r||!c)throw new Error("moveTopicToCenter error: topic or viewBox is null");var i=In(r,c);a.setViewBoxScrollDelta(i[0],i[1])},focusTopicAndMoveToCenter:function(e){var t=e.controller,n=e.topicKey;t.run("operation",lt(lt({},e),{opArray:[{opType:q,topicKey:n,focusMode:I},{opType:W,topicKey:n}],callback:function(){t.run("moveTopicToCenter",lt(lt({},e),{topicKey:n}))}}))}},Hn(),ga(),Jt(),zn(),{getValue:function(e,t){var n=e.propKey,o=e.controller;switch(n){case jn:return 3;case kn:return o.run("isOperationEnabled",e);case En:return o.run("getTopicTitle",e)}return t()}},et()]}b()("node:Diagram");var Oa=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.resolveController=Object(E.a)((function(e,n){void 0===e&&(e=[]);var o=n();t.controller=new ve({plugins:[e,o],construct:!1,onChange:t.props.onChange})})),t}return it(t,e),t.prototype.getDiagramProps=function(){return this.controller.run("getDiagramProps")},t.prototype.openNewModel=function(e){var t=this,n=this.getDiagramProps(),o=n.model,r=n.controller;r.run("deleteRefKey",lt(lt({},n),{topicKey:o.rootTopicKey})),r.run("operation",lt(lt({},n),{opType:W,topicKey:e.focusKey,model:e,callback:function(){var e=t.getDiagramProps(),n=e.model;r.run("moveTopicToCenter",lt(lt({},e),{topicKey:n.focusKey}))}}))},t.prototype.render=function(){var e=this.props.plugins;return this.resolveController(e,ma),this.diagramProps=lt(lt({},this.props),{controller:this.controller}),this.controller.run("renderDiagram",this.diagramProps)},t}(o.Component);function va(e){return!0===(null!=(t=e)&&"object"===typeof t&&!1===Array.isArray(t))&&"[object Object]"===Object.prototype.toString.call(e);var t}var Ta=function(e){var t,n;return!1!==va(e)&&("function"===typeof(t=e.constructor)&&(!1!==va(n=t.prototype)&&!1!==n.hasOwnProperty("isPrototypeOf")))};var ja,ka=function(e,t){},Ea="L",xa="R",wa="M";!function(e){e[e.LEFT_TO_RIGHT=0]="LEFT_TO_RIGHT",e[e.RIGHT_TO_LEFT=1]="RIGHT_TO_LEFT",e[e.LEFT_AND_RIGHT=2]="LEFT_AND_RIGHT",e[e.TOP_TO_BOTTOM=3]="TOP_TO_BOTTOM"}(ja||(ja={}));var Sa=0,Ca=1,Ka="CONTENT",Ra="DESC",Da="NORMAL",La="EDITING_CONTENT",_a="EDITING_DESC",Ia="SHOW_POPUP",Ma="DRAGGING",Aa="ANCESTOR",Na="DESCENDANT",Fa="SIBLING",Pa="NONE",Ba="TOGGLE_COLLAPSE",za="COLLAPSE_ALL",Va="EXPAND_ALL",Ha="EXPAND_TO",Ga="ADD_CHILD",Ua="ADD_SIBLING",Wa="DELETE_TOPIC",Ja="FOCUS_TOPIC",Za="SET_FOCUS_MODE",Ya="SET_STYLE",qa="CLEAR_ALL_CUSTOM_STYLE",Xa="SET_THEME",$a="SET_TOPIC_BLOCK",Qa="DELETE_TOPIC_BLOCK",ec="START_EDITING_CONTENT",tc="START_EDITING_DESC",nc="DRAG_AND_DROP",oc="SET_EDITOR_ROOT",rc="SET_LAYOUT_DIR",ac=function(e){Object(s.a)(n,e);var t=Object(u.a)(n);function n(){return Object(i.a)(this,n),t.apply(this,arguments)}return Object(l.a)(n,[{key:"data",get:function(){return this.get("data")}},{key:"type",get:function(){return this.get("type")}}],[{key:"create",value:function(e){return new n(e)}},{key:"createList",value:function(e){if(T.List.isList(e)||Array.isArray(e))return Object(T.List)(e.map(n.create));throw new Error("Block.createList only accepts Array or List, but you passed it: ".concat(e))}}]),n}(Object(T.Record)({type:null,key:null,data:null}));var cc={readOnly:!1,allowUndo:!0,layoutDir:ja.LEFT_AND_RIGHT,theme:{name:"default",randomColor:!0,background:"rgb(57,60,65)",highlightColor:"#50C9CE",marginH:60,marginV:20,contentStyle:{lineHeight:"1.5"},linkStyle:{lineRadius:5,lineType:"curve",lineWidth:"3px"},rootTopic:{contentStyle:{fontSize:"34px",borderRadius:"35px",padding:"16px 18px 16px 18px"},subLinkStyle:{lineType:"curve",lineWidth:"3px",lineColor:"rgb(113, 203, 45)"}},primaryTopic:{contentStyle:{borderWidth:"1px",borderStyle:"solid",borderRadius:"20px",fontSize:"17px",padding:"10px 15px 10px 15px"},subLinkStyle:{lineType:"curve",lineWidth:"3px",lineColor:"rgb(113, 203, 45)"}},normalTopic:{contentStyle:{border:"1px solid #e8eaec",borderRadius:"20px",fontSize:"17px",padding:"4px 10px"},subLinkStyle:{lineType:"curve",lineWidth:"3px",lineColor:"white"}}}},ic=function(e){Object(s.a)(n,e);var t=Object(u.a)(n);function n(){return Object(i.a)(this,n),t.apply(this,arguments)}return Object(l.a)(n,[{key:"layoutDir",get:function(){return this.get("layoutDir")}},{key:"readOnly",get:function(){return this.get("readOnly")}},{key:"allowUndo",get:function(){return this.get("allowUndo")}},{key:"theme",get:function(){return this.get("theme")}}],[{key:"fromJSON",value:function(e){return new n(e)}}]),n}(Object(T.Record)(cc));function lc(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,(function(e){var t=16*Math.random()|0;return("x"===e?t:3&t|8).toString(16)}))}var sc=function(e){Object(s.a)(n,e);var t=Object(u.a)(n);function n(){return Object(i.a)(this,n),t.apply(this,arguments)}return Object(l.a)(n,[{key:"key",get:function(){return this.get("key")}},{key:"parentKey",get:function(){return this.get("parentKey")}},{key:"collapse",get:function(){return this.get("collapse")}},{key:"subKeys",get:function(){return this.get("subKeys")}},{key:"blocks",get:function(){return this.get("blocks")}},{key:"relations",get:function(){return this.get("relations")}},{key:"style",get:function(){return this.get("style")}},{key:"getBlock",value:function(e){var t=this.blocks.findIndex((function(t){return t.type===e}));return-1===t?{index:t,block:null}:{index:t,block:this.blocks.get(t)}}}],[{key:"fromJSON",value:function(e){var t=e.key,o=e.parentKey,r=void 0===o?null:o,a=e.blocks,c=e.subKeys,i=void 0===c?[]:c,l=e.collapse;return new n({key:t,parentKey:r,collapse:void 0!==l&&l,subKeys:Object(T.List)(i),blocks:ac.createList(a)})}},{key:"create",value:function(e){var t=e.key,o=e.parentKey,r=void 0===o?null:o,a=e.content,c=void 0===a?"":a,i=e.subKeys,l=void 0===i?[]:i,s=e.collapse,u=void 0!==s&&s,p=ac.create({type:Ka,data:c,key:null});return new n({key:t,parentKey:r,blocks:Object(T.List)([p]),subKeys:Object(T.List)(l),collapse:u})}}]),n}(Object(T.Record)({key:null,parentKey:null,collapse:!1,subKeys:null,blocks:null,relations:null,style:null}));function uc(e,t){var n=e.getTopic(t),o=[];if(n.subKeys.size>0){var r,a=n.subKeys.toArray();(r=o).push.apply(r,Object(v.a)(a)),o=a.reduce((function(t,n){return t.push.apply(t,Object(v.a)(uc(e,n))),t}),o)}return o}function pc(e,t,n){var o=e.getTopic(t),r=e.getTopic(n);if(o&&r){if(o.parentKey==r.parentKey)return Fa;for(var a=o;a.parentKey;){if(a.parentKey===r.key)return Na;a=e.getParentTopic(a.key)}for(a=r;a.parentKey;){if(a.parentKey===o.key)return Aa;a=e.getParentTopic(a.key)}}return Pa}var dc=b()("modifier");function fc(e){var t=e.model,n=e.topicKey,o=e.focusMode;return dc("focus topic"),n!==t.focusKey&&(t=t.set("focusKey",n)),o!==t.focusMode&&(t=t.set("focusMode",o)),t}var bc={addChild:function(e){var t=e.model,n=e.topicKey;dc("addChild:",n);var o=t.getTopic(n);if(o){var r=sc.create({key:lc(),parentKey:o.key});return o=o.set("collapse",!1).update("subKeys",(function(e){return e.push(r.key)})),fc({model:t=t.update("topics",(function(e){return e.set(n,o).set(r.key,r)})),topicKey:r.key,focusMode:La})}return t},addSibling:function(e){var t=e.model,n=e.topicKey;if(n===t.rootTopicKey)return t;var o=t.getTopic(n);if(o){var r=t.getTopic(o.parentKey),a=r.subKeys.indexOf(n),c=sc.create({key:lc(),parentKey:r.key});return fc({model:t=t.update("topics",(function(e){return e.set(c.key,c)})).updateIn(["topics",r.key,"subKeys"],(function(e){return e.insert(a+1,c.key)})),topicKey:c.key,focusMode:La})}return t},toggleCollapse:function(e){var t=e.model,n=e.topicKey,o=t.getTopic(n);return o&&0!==o.subKeys.size&&(o=o.merge({collapse:!o.collapse}),t=t.updateIn(["topics",o.key,"collapse"],(function(e){return!e}))),t=fc({model:t,topicKey:n,focusMode:Da})},collapseAll:function(e){var t=e.model,n=uc(t,t.editorRootTopicKey);return dc(t),t=fc({model:t=t.withMutations((function(e){n.forEach((function(t){e.setIn(["topics",t,"collapse"],!0)}))})),topicKey:t.editorRootTopicKey,focusMode:Da})},expandAll:function(e){var t=e.model,n=uc(t,t.editorRootTopicKey);return dc(t),t=t.withMutations((function(e){n.forEach((function(t){e.setIn(["topics",t,"collapse"],!1)}))})),dc(t),t},expandTo:function(e){var t=e.model,n=e.topicKey,o=function(e,t){for(var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],o=[t],r=e.getTopic(t);r.parentKey;)n?o.push(r.parentKey):o.unshift(r.parentKey),r=e.getParentTopic(r.key);return o}(t,n).filter((function(e){return e!==n}));return pc(t=t.withMutations((function(e){o.forEach((function(t){e.setIn(["topics",t,"collapse"],!1)}))})),n,t.editorRootTopicKey)!==Na&&(t=t.set("editorRootTopicKey",t.rootTopicKey)),t},focusTopic:fc,setFocusMode:function(e){var t=e.model,n=e.focusMode;return dc("setFocusMode"),n!==t.focusMode&&(t=t.set("focusMode",n)),t},deleteTopic:function(e){var t=e.model,n=e.topicKey;if(n===t.editorRootTopicKey)return t;var o=t.getTopic(n);return o&&(t=t.withMutations((function(e){e.update("topics",(function(e){e=e.delete(n);var o=uc(t,n);return e=e.withMutations((function(e){o.forEach((function(t){e.delete(t)}))}))})),e.updateIn(["topics",o.parentKey,"subKeys"],(function(e){return e.delete(e.indexOf(n))})),e.focusKey===n&&e.set("focusKey",null).set("focusMode",null)}))),t},setBlockData:function(e){var t=e.model,n=e.topicKey,o=e.blockType,r=e.focusMode,a=e.data,c=t.getTopic(n);if(c){var i=c.getBlock(o),l=i.index,s=i.block;-1===l?t=t.updateIn(["topics",n,"blocks"],(function(e){return e.push(ac.create({type:o,data:a}))})):s.data!==a&&(t=t.updateIn(["topics",n,"blocks",l,"data"],(function(e){return a}))),r&&(t=fc({model:t,topicKey:n,focusMode:r}))}return t},deleteBlock:function(e){var t=e.model,n=e.topicKey,o=e.blockType,r=t.getTopic(n);if(r){var a=r.getBlock(o).index;-1!==a&&(t=t.updateIn(["topics",n,"blocks"],(function(e){return e.delete(a)}))),t=fc({model:t,topicKey:null,focusMode:null})}return t},setStyle:function(e){var t=e.model,n=e.topicKey,o=e.style,r=t.getTopic(n);return r&&o!==r.style&&(t=t.updateIn(["topics",n,"style"],(function(e){return o}))),t},clearAllCustomStyle:function(e){var t=e.model;return t=t.withMutations((function(e){e.topics.keySeq().forEach((function(t){e.setIn(["topics",t,"style"],null)}))}))},setTheme:function(e){var t=e.model,n=e.theme;return t=t.setIn(["config","theme"],n)},setLayoutDir:function(e){var t=e.model,n=e.layoutDir;return t.config.layoutDir===n?t:t=t.setIn(["config","layoutDir"],n)},setEditorRootTopicKey:function(e){var t=e.model,n=e.topicKey;return t.editorRootTopicKey!==n&&(t=t.set("editorRootTopicKey",n)),t.getTopic(n).collapse&&(t=t.setIn(["topics",n,"collapse"],!1)),t},setZoomFactor:function(e){var t=e.model,n=e.zoomFactor;return t.zoomFactor!==n&&(t=t.set("zoomFactor",n)),t}},yc={topics:Object(T.Map)(),extData:Object(T.Map)(),config:new ic,rootTopicKey:null,editorRootTopicKey:null,focusKey:null,focusMode:null,formatVersion:null,zoomFactor:1},hc=function(e){Object(s.a)(n,e);var t=Object(u.a)(n);function n(){return Object(i.a)(this,n),t.apply(this,arguments)}return Object(l.a)(n,[{key:"toJS",value:function(){return{rootTopicKey:this.rootTopicKey,topics:Object.values(this.topics.toJS()),config:this.config,extData:this.extData,zoomFactor:this.zoomFactor}}},{key:"extData",get:function(){return this.get("extData")}},{key:"topics",get:function(){return this.get("topics")}},{key:"config",get:function(){return this.get("config")}},{key:"formatVersion",get:function(){return this.get("formatVersion")}},{key:"rootTopicKey",get:function(){return this.get("rootTopicKey")}},{key:"editorRootTopicKey",get:function(){return this.get("editorRootTopicKey")}},{key:"focusKey",get:function(){return this.get("focusKey")}},{key:"focusMode",get:function(){return this.get("focusMode")}},{key:"editingContentKey",get:function(){return this.focusMode===La?this.focusKey:null}},{key:"editingDescKey",get:function(){return this.focusMode===_a?this.focusKey:null}},{key:"getTopic",value:function(e){return this.topics.get(e)}},{key:"getExtDataItem",value:function(e,t){return this.extData.get(e)||new t}},{key:"getParentTopic",value:function(e){var t=this.getTopic(e);return t.parentKey?this.getTopic(t.parentKey):null}},{key:"getTopicVisualLevel",value:function(e){for(var t=this.getTopic(e),n=0;t&&t.key!==this.editorRootTopicKey;)n++,t=this.getParentTopic(t.key);return n}},{key:"rootTopic",get:function(){return this.getTopic(this.rootTopicKey)}},{key:"zoomFactor",get:function(){return this.get("zoomFactor")}}],[{key:"isModel",value:function(e){return e instanceof n}},{key:"create",value:function(){var e,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;if(null==t)return n.createEmpty();if(n.isModel(t)&&(e=t),Ta(t)&&(e=n.fromJSON(t)),e)return null==e.focusKey&&(e=e.set("focusKey",e.rootTopicKey)),null==e.focusMode&&(e=e.set("focusMode",Da)),e;throw new Error("`Value.create` only accepts objects or values, but you passed it: ".concat(t))}},{key:"createEmpty",value:function(){var e=new n,t=sc.create({key:lc(),content:"RootTopic"});return e.update("topics",(function(e){return e.set(t.key,t)})).set("rootTopicKey",t.key).set("editorRootTopicKey",t.key).set("focusKey",t.key).set("focusMode",Da)}},{key:"fromJSON",value:function(e){var t=new n,o=e.topics,r=void 0===o?[]:o,a=e.config,c=void 0===a?{}:a,i=e.rootTopicKey,l=e.editorRootTopicKey;return void 0===l&&(l=i),t=(t=t.merge({rootTopicKey:i,editorRootTopicKey:l})).withMutations((function(e){r.forEach((function(t){e.update("topics",(function(e){return e.set(t.key,sc.fromJSON(t))}))})),e.set("config",ic.fromJSON(c))}))}}]),n}(Object(T.Record)(yc));function gc(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.plugins,n=void 0===t?[]:t;return Object(v.a)(n)}b()("core:controller");function mc(e,t){if(Array.isArray(t))t.forEach((function(t){return mc(e,t)}));else if(null!=t)for(var n in t){var o=t[n];e.middleware[n]=e.middleware[n]||[],e.middleware[n].push(o)}}function Oc(e){if(!Array.isArray(e))throw new TypeError("Middleware stack must be an array!");var t,n=Object(O.a)(e);try{for(n.s();!(t=n.n()).done;){if("function"!==typeof t.value)throw new TypeError("Middleware must be composed of functions!")}}catch(o){n.e(o)}finally{n.f()}return function(t,n){var r=-1;return function a(c){if(c<=r)throw new Error("next() called multiple times");r=c;var i=e[c];c===e.length&&(i=n);if(!i)return null;try{return i(t,a.bind(null,c+1))}catch(o){throw o}}(0)}}var vc,Tc,jc,kc,Ec,xc,wc,Sc,Cc,Kc,Rc,Dc,Lc,_c,Ic,Mc,Ac,Nc,Fc,Pc,Bc,zc,Vc,Hc,Gc,Uc,Wc,Jc,Zc,Yc,qc,Xc,$c,Qc,ei,ti,ni,oi,ri,ai,ci,ii,li,si,ui,pi,di,fi,bi,yi,hi,gi,mi,Oi,vi,Ti,ji,ki=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};Object(i.a)(this,e);var n=t.plugins,o=void 0===n?[]:n,r=t.onChange,a=t.readOnly;this.readOnly=a,this.onChange=r,this.middleware=new Map;var c=gc({plugins:o});mc(this,c)}return Object(l.a)(e,[{key:"run",value:function(e){var t=this.middleware,n=t[e]||[];ka(0!==n.length,"the middleware function ".concat(e," is not found!"));for(var o=Object(E.a)(Oc)(n),r=arguments.length,a=new Array(r>1?r-1:0),c=1;c<r;c++)a[c-1]=arguments[c];return o.apply(void 0,a)}},{key:"getValue",value:function(e,t){return this.run("getValue",Object(m.a)(Object(m.a)({},t),{},{propKey:e}))}},{key:"change",value:function(e,t){this.onChange(e,t),this.currentModel=e}}]),e}(),Ei=n(83),xi=n(55),wi=n(56),Si=n(60),Ci=n(41),Ki=n(65),Ri=n(6),Di=(n(518),["title"]),Li=["layout","title"],_i=["layout","title"],Ii=["controller","children","onClick"],Mi=["text"],Ai=function(e){Object(s.a)(n,e);var t=Object(u.a)(n);function n(e){return Object(i.a)(this,n),t.call(this,e)}return Object(l.a)(n,[{key:"operation",value:function(e,t){this.props.controller.run("operation",Object(m.a)({opType:e},t))}},{key:"run",value:function(e,t){this.props.controller.run(e,t)}},{key:"topic",get:function(){return this.props.model.getTopic(this.props.topicKey)}}]),n}(o.Component),Ni=b()("node:drag-scroll-widget"),Fi=d.default.div(vc||(vc=Object(Ri.a)(["\n  position: relative;\n  width: 100%;\n  height: 100%;\n  overflow: scroll;\n"]))),Pi=d.default.div(Tc||(Tc=Object(Ri.a)(["\n  position: relative;\n  width: max-content;\n"]))),Bi=function(e){Object(s.a)(n,e);var t=Object(u.a)(n);function n(e){var o;return Object(i.a)(this,n),(o=t.call(this,e)).contentResizeCallback=function(e,t){if(o.oldContentRect){var n={width:o.content.clientWidth+2*o.viewBox.clientWidth,height:o.content.clientHeight+2*o.viewBox.clientHeight};o.bigView.style.width=n.width+"px",o.bigView.style.height=n.height+"px"}o.oldContentRect=e[0].contentRect},o.contentResizeObserver=new p.a(o.contentResizeCallback),o.contentRef=function(e){e&&(o.content=e,o.contentResizeObserver.observe(o.content))},o.viewBoxRef=function(e){e&&(o.viewBox=e,o.props.enableMouseWheel||(Ni("addEventListener onwheel"),o.viewBox.addEventListener("wheel",(function(e){Ni("onwheel"),(e.ctrlKey||e.altKey)&&e.preventDefault()}),{passive:!1})),o.setViewBoxScroll(o.viewBox.clientWidth,o.viewBox.clientHeight))},o.bigViewRef=function(e){e&&(o.bigView=e)},o.setWidgetStyle=function(){o.content&&o.viewBox&&o.bigView&&(o.bigView.style.width=2*(o.content.clientWidth+o.viewBox.clientWidth)+"px",o.bigView.style.height=2*(o.content.clientHeight+o.viewBox.clientHeight)+"px",o.content.style.left=o.viewBox.clientWidth+"px",o.content.style.top=o.viewBox.clientHeight+"px")},o.setViewBoxScroll=function(e,t){Ni("setViewBoxScroll ".concat(e," ").concat(t)),o.viewBox&&(o.viewBox.scrollLeft=e,o.viewBox.scrollTop=t)},o.setViewBoxScrollDelta=function(e,t){Ni("setViewBoxScrollDelta ".concat(e," ").concat(t)),o.viewBox&&(o.viewBox.scrollLeft+=e,o.viewBox.scrollTop+=t)},o.onMouseDown=function(e){var t=o.props,n=t.mouseKey,r=t.needKeyPressed,a=t.canDragFunc;if((!a||a())&&(0===e.button&&"left"===n||2===e.button&&"right"===n)){if(r&&!e.ctrlKey)return;o._lastCoordX=o.viewBox.scrollLeft+e.nativeEvent.clientX,o._lastCoordY=o.viewBox.scrollTop+e.nativeEvent.clientY;var c=o.viewBox;c.addEventListener("mousemove",o.onMouseMove),c.addEventListener("mouseup",o.onMouseUp)}},o.onMouseUp=function(e){var t=o.viewBox;t.removeEventListener("mousemove",o.onMouseMove),t.removeEventListener("mouseup",o.onMouseUp)},o.onMouseMove=function(e){o.viewBox.scrollLeft=o._lastCoordX-e.clientX,o.viewBox.scrollTop=o._lastCoordY-e.clientY},o.handleContextMenu=function(e){e.preventDefault()},o.state={widgetStyle:{width:"10000px",height:"10000px"}},o}return Object(l.a)(n,[{key:"componentDidMount",value:function(){this.setWidgetStyle(),document.addEventListener("contextmenu",this.handleContextMenu)}},{key:"componentWillUnmount",value:function(){document.removeEventListener("contextmenu",this.handleContextMenu)}},{key:"setZoomFactor",value:function(e){this.bigView.style.transform="scale(".concat(e,")"),this.bigView.style.transformOrigin="50% 50%"}},{key:"render",value:function(){var e=Object(m.a)({},this.state.widgetStyle);return Object(o.createElement)(Fi,{ref:this.viewBoxRef,onMouseDown:this.onMouseDown},Object(o.createElement)("div",{style:e,ref:this.bigViewRef},Object(o.createElement)(Pi,{ref:this.contentRef,style:this.state.contentStyle},this.props.children(this.setViewBoxScroll,this.setViewBoxScrollDelta))))}}]),n}(o.Component);Bi.defaultProps={mouseKey:"left",needKeyPressed:!1};var zi=b()("node:save-ref"),Vi=function(e){Object(s.a)(n,e);var t=Object(u.a)(n);function n(){var e;return Object(i.a)(this,n),(e=t.apply(this,arguments)).getRef=function(t){return zi(Object(Ki.a)(e)),e[t]},e.saveRef=function(t){return function(n){n&&(e[t]=n,e.fireListener(t,n))}},e.deleteRef=function(t){zi("deleteRef:",t),delete e[t]},e.observers=new Map,e.fireListener=function(t,n){if(e.observers.has(t)){var o,r=e.observers.get(t),a=Object(O.a)(r);try{for(a.s();!(o=a.n()).done;){(0,o.value)(t,n)}}catch(c){a.e(c)}finally{a.f()}}},e.registerRefListener=function(t,n){e.observers.has(t)?e.observers.get(t).push(n):e.observers.set(t,[n])},e}return Object(l.a)(n,[{key:"render",value:function(){return this.props.children(this.saveRef,this.getRef,this.deleteRef,this.registerRefListener.bind(this))}}]),n}(o.Component),Hi=d.default.div(jc||(jc=Object(Ri.a)(["\n  display: flex;\n  flex-direction: ",";\n  align-items: ",";\n  justify-content: ",";\n"])),(function(e){return e.flexDirection?e.flexDirection:"row"}),(function(e){return e.alignItems}),(function(e){return e.justifyContent})),Gi=d.default.div(kc||(kc=Object(Ri.a)(["\n  margin: ",";\n"])),(function(e){return e.margin})),Ui=d.default.a(Ec||(Ec=Object(Ri.a)(["\n  font-size: 20px !important;\n"]))),Wi=d.default.div(xc||(xc=Object(Ri.a)(["\n  padding: 5px;\n  cursor: pointer;\n"]))),Ji=d.default.div(wc||(wc=Object(Ri.a)(["\n  cursor: pointer;\n  &:hover {\n    color: #1ea7fd;\n  }\n"]))),Zi=Object(d.default)(y.e)(Sc||(Sc=Object(Ri.a)(["\n  margin-bottom: 0px !important;\n"]))),Yi=Object(d.default)(Ji)(Cc||(Cc=Object(Ri.a)(["\n  position: absolute;\n  right: 5px;\n  top: 5px;\n  //padding: 5px;\n"]))),qi=d.default.div(Kc||(Kc=Object(Ri.a)(["\n  height: 16px;\n"]))),Xi=d.default.span(Rc||(Rc=Object(Ri.a)(["\n  margin: 0px 10px;\n  &:hover {\n    color: palevioletred;\n  }\n"]))),$i=d.default.div(Dc||(Dc=Object(Ri.a)(["\n  z-index: ",";\n"])),(function(e){return e.zIndex})),Qi=d.default.div(Lc||(Lc=Object(Ri.a)(["\n  min-width: 380px;\n  max-width: 482px;\n  max-height: 470px;\n  overflow: auto;\n"]))),el=d.default.div(_c||(_c=Object(Ri.a)(["\n  position: absolute;\n  left: 0;\n  top: 0;\n  width: 100%;\n  height: 100%;\n"]))),tl=(d.default.div(Ic||(Ic=Object(Ri.a)(["\n  max-height: ",";\n  overflow-y: auto;\n  overflow-x: hidden;\n"])),(function(e){return e.maxHeight||"300px"})),d.default.div(Mc||(Mc=Object(Ri.a)(["\n  margin-top: 10px;\n  margin-bottom: 5px;\n  font-weight: bold;\n"])))),nl=d.default.span(Ac||(Ac=Object(Ri.a)(["\n  margin: 0 10px 0 2px;\n"]))),ol=d.default.div(Nc||(Nc=Object(Ri.a)(["\n  padding: 10px;\n  margin: 0 0 10px 0;\n  border: rgba(16, 22, 26, 0.15) solid 1px;\n  border-radius: 5px;\n"]))),rl=Object(d.default)(nl)(Fc||(Fc=Object(Ri.a)([""]))),al=d.default.div(Pc||(Pc=Object(Ri.a)(["\n  display: flex;\n  align-items: center;\n  //justify-content: center;\n  margin: 5px 0;\n"]))),cl=d.default.div(Bc||(Bc=Object(Ri.a)(["\n  height: 3px;\n  width: 80%;\n  margin-left: 10%;\n  margin-right: 10%;\n  margin-bottom: 2px;\n  background: ",";\n"])),(function(e){return e.color})),il=d.default.div(zc||(zc=Object(Ri.a)(["\n  border: 1px solid grey;\n  cursor: pointer;\n  font-weight: bold;\n"]))),ll="show-menu",sl="close",ul="color-picker",pl="notes",dl="plus",fl="minus",bl="collapse",yl="expand",hl="center",gl="layout-left-and-right";function ml(e){return"icon iconfont bm-".concat(e)}function Ol(e){return Object(o.createElement)("span",{className:ml(e)})}function vl(e){return"content-".concat(e)}function Tl(e){return"content-editor-".concat(e)}function jl(e){return"desc-editor-".concat(e)}function kl(e){return"topic-widget-".concat(e)}function El(e){return"topic-".concat(e)}function xl(e){return"links-".concat(e)}function wl(e){return"links-svg-".concat(e)}function Sl(e){return"collapse-".concat(e)}function Cl(e,t){return"dropArea-".concat(t,"-").concat(e)}var Kl="DIAGRAM-ROOT",Rl="DragScrollWidget",Dl="svg-highlight",Ll="focus-highlight",_l="drop-effect",Il="CENTER_ROOT_TOPIC",Ml="DIAGRAM_CUSTOMIZE_BASE_Z_INDEX",Al="TOPIC_CONTEXT_MENU_ENABLED",Nl="TOPIC_TITLE",Fl="DRAG_DROP_STATE",Pl="RIGHT_TOP_PANEL_STATE",Bl="OPERATION_ENABLED",zl="CONFIRM",Vl="CANCEL",Hl="DEFAULT",Gl="SEARCH",Ul="LEFT_AND_RIGHT",Wl="ONLY_LEFT",Jl="ONLY_RIGHT",Zl="EDIT",Yl="ADD_SIBLING",ql="ADD_CHILD",Xl="EDIT_NOTES",$l="DELETE",Ql="SET_AS_EDITOR_ROOT",es="EDIT_TOPOLOGY_DIAGRAM",ts="SET_TOPIC_REFERENCES",ns="TOPIC_STYLE",os="STYLE",rs="TEXT_EDITOR",as="LINK",cs="LINK_TO_PARENT",is="SUB_LINKS",ls="COPY_STYLE",ss="PASTE_STYLE",us="CLEAR_TOPIC_STYLE",ps="CLEAR_ALL_CUSTOM_STYLE",ds="LINE_TYPE",fs="THEME",bs="GLOBAL",ys="HIGHLIGHT",hs="RANDOM_COLOR",gs="NORMAL_TOPIC",ms="PRIMARY_TOPIC",Os="ROOT_TOPIC",vs="EXPORT_THEME",Ts="IMPORT_THEME",js="TAGS",ks="TAGS_MANAGER",Es="TAG_NAME",xs="ADD_TAG",ws="UPDATE_TAG",Ss="ALREADY_ADDED",Cs="CAN_BE_ADDED",Ks="TOPICS_THAT_USE_THIS_TAG",Rs="BACKGROUND",Ds="COLOR",Ls="BORDER",_s="WIDTH",Is="RADIUS",Ms="FONT_SIZE",As="LINE_HEIGHT",Ns="PADDING",Fs="TOP",Ps="BOTTOM",Bs="LEFT",zs="RIGHT",Vs="NONE",Hs="SOLID",Gs="DOTTED",Us="DASHED",Ws="DOUBLE",Js="ROUND",Zs="CURVE",Ys="LINE",qs="COLLAPSE_ALL",Xs="EXPAND_ALL",$s="CENTER_ROOT_TOPIC",Qs="ZOOM",eu="ZOOM_IN",tu="ZOOM_OUT",nu="RESET",ou="RESET_ZOOM",ru="NOTE_PLACEHOLDER",au="TOPOLOGY_DIAGRAM_EDITOR",cu="BASIC",iu="FLOW_GRAPH",lu="ACTIVITY_DIAGRAM",su="SEQUENCE_DIAGRAM",uu="CLASS_DIAGRAM",pu="REFERENCE_TOPICS",du="REFERENCED_TOPICS",fu="SELECT_REF_TOPICS_TIP",bu="TAG_NAME_OVER_MAX_TIP",yu="DELETE_TAG_TIP",hu="DELETE_TOPOLOGY_TIP",gu=function(e){e.stopPropagation()};function mu(e,t){!function(e,t){var n=document.createElement("a");n.href=e,n.download=t,n.click()}("data:text/plain,".concat(encodeURIComponent(e)),t)}function Ou(e){var t=e.top,n=void 0===t?0:t,o=e.right,r=void 0===o?0:o,a=e.bottom,c=void 0===a?0:a,i=e.left,l=void 0===i?0:i;return"".concat(n,"px ").concat(r,"px ").concat(c,"px ").concat(l,"px")}function vu(e,t){return Array.isArray(t)?t.map((function(t){return e.controller.run("getI18nText",Object(m.a)(Object(m.a)({},e),{},{key:t}))})):e.controller.run("getI18nText",Object(m.a)(Object(m.a)({},e),{},{key:t.toUpperCase()}))}function Tu(e){return(e.top+e.bottom)/2}function ju(e,t){return(e.x+t.x)/2}function ku(e,t){return(e.y+t.y)/2}function Eu(e){return[(e.left+e.right)/2,(e.top+e.bottom)/2]}function xu(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,o=e.getBoundingClientRect(),r=t.getBoundingClientRect(),a=Eu(r),c=Eu(o);c[0]=(c[0]-a[0])/n,c[1]=(c[1]-a[1])/n;var i=o.width/n,l=o.height/n;return{left:c[0]-i/2,right:c[0]+i/2,top:c[1]-l/2,bottom:c[1]+l/2,width:i,height:l}}function wu(e,t){var n=e.getBoundingClientRect(),o=Eu(t.getBoundingClientRect()),r=Eu(n);return[r[0]-o[0],r[1]-o[1]]}function Su(e){return Object(o.createElement)("div",null,e.children,Object(o.createElement)(y.h,{style:{margin:"10px 0"}}))}function Cu(e){var t=e.title,n=e.layout,r=void 0===n?"h":n,a=e.color,c=e.handleColorChange,i={flexDirection:"h"===r?"row":"column",alignItems:"center"};return Object(o.createElement)(nl,null,Object(o.createElement)(Hi,Object.assign({},i),null!=t&&Object(o.createElement)(Gi,{margin:"0 5px 0 0"},t),Object(o.createElement)(y.s,null,Object(o.createElement)(il,null,Object(o.createElement)("div",{className:ml(ul)}),Object(o.createElement)(cl,{color:a})),Object(o.createElement)("div",null,Object(o.createElement)(rt.a,{color:a,onChangeComplete:function(e){return c(e.hex)}})))))}function Ku(e){var t=e.title,n=Object(Ci.a)(e,Di);return Object(o.createElement)(nl,null,Object(o.createElement)(y.d,Object.assign({},n),t))}function Ru(e){var t=e.layout,n=void 0===t?"h":t,r=e.title,a=Object(Ci.a)(e,Li),c={flexDirection:"h"===n?"row":"column",alignItems:"center"};return Object(o.createElement)(nl,null,Object(o.createElement)(Hi,Object.assign({},c),Object(o.createElement)(Gi,{margin:"0 5px 0 0"},r),Object(o.createElement)(y.q,Object.assign({},a))))}function Du(e){var t=e.layout,n=void 0===t?"h":t,r=e.title,a=Object(Ci.a)(e,_i),c={flexDirection:"h"===n?"row":"column",alignItems:"center"};return Object(o.createElement)(nl,null,Object(o.createElement)(Hi,Object.assign({},c),Object(o.createElement)(Gi,{margin:"0 5px 0 0"},r," "),Object(o.createElement)(y.m,Object.assign({},a))))}function Lu(e){var t=e.text,n=e.items,r=e.itemRenderer,a=e.onItemSelect,c=ot.a.ofType(),i={items:n,itemRenderer:r,onItemSelect:a,filterable:!1};return Object(o.createElement)(nl,null,Object(o.createElement)(c,Object.assign({},i),Object(o.createElement)(y.d,{text:t})))}var _u=function(e){return function(t,n){var r=n.handleClick;return Object(o.createElement)(y.p,{text:"".concat(t).concat(e),key:t,onClick:r})}},Iu=function(e){return function(t,n){var r=n.handleClick;return Object(o.createElement)(y.p,{text:vu(e,t),key:t,onClick:r})}},Mu=(ot.a.ofType(),Object(v.a)(Array(7).keys())),Au=d.default.div(Vc||(Vc=Object(Ri.a)(["\n  position: relative;\n  padding: 6px;\n  width: 40px;\n  height: 40px;\n  cursor: pointer;\n  color: ",";\n  font-size: 24px;\n  display: inline-block;\n  &:hover {\n    color: ",";\n  }\n"])),(function(e){return e.disabled?"grey":"black"}),(function(e){return e.disabled?"grey":"rgb(44, 184, 146)"}));function Nu(e){var t=e.controller,n=e.children,r=e.onClick,a=Object(Ci.a)(e,Ii),c=e.disabled;c=c||!t.getValue(Bl,e);var i=Object(m.a)({controller:t,disabled:c,onClick:function(e){c||r(e)}},a);return Object(o.createElement)(Au,Object.assign({},i),n)}var Fu=b()("plugin:event");function Pu(){var e={};return{handleTopicClick:function(e){Fu("handleTopicClick");var t=e.controller,n=e.model,o=e.topicKey;Fu(n.zoomFactor),null===n.editingDescKey&&n.editingContentKey!==o&&(n.focusKey===o&&n.focusMode===La||t.run("operation",Object(m.a)(Object(m.a)({},e),{},{opType:Ja,focusMode:Da})))},handleTopicDoubleClick:function(e){var t=e.controller;null===e.model.editingDescKey&&t.run("operation",Object(m.a)(Object(m.a)({},e),{},{opType:Ja,focusMode:La}))},handleTopicContextMenu:function(e){e.controller.run("operation",Object(m.a)(Object(m.a)({},e),{},{opType:Ja,focusMode:Ia}))},handleActiveModalClose:function(e){var t=e.controller,n=t.run("getActiveModalProps",e);return null==n?null:"edit-desc"===n.name?function(){t.run("operation",Object(m.a)(Object(m.a)({},e),{},{focusMode:Da,opType:Ja}))}:void 0},addEventListener:function(t){var n=t.key,o=t.listener,r=t.once,a=t.controller;function c(){o(),a.run("removeEventListener",{key:n,listener:o})}e[n]||(e[n]=[]),r?(c.origin=o,e[n].push(c)):e[n].push(o)},removeEventListener:function(t){var n=t.key,o=t.listener;e[n]&&(e[n]=e[n].filter((function(e){return e!==o&&e.origin!==o})))},fireEvent:function(t){var n=t.key;e[n]&&e[n].forEach((function(e){return e()}))}}}var Bu="ADD_CHILD",zu="ADD_SIBLING",Vu="DELETE_TOPIC",Hu="EDIT_CONTENT",Gu="EDIT_NOTES",Uu="SET_EDITOR_ROOT",Wu=0,Ju=1;function Zu(){return{customizeHotKeys:function(e){var t=function(t){return function(n){!function(e,t){var n=t,o=n.topicKey,r=n.model,a=n.controller;void 0===o&&(t=Object(m.a)(Object(m.a)({},t),{},{topicKey:r.focusKey})),a.run("operation",Object(m.a)(Object(m.a)({},t),{},{opType:e}))}(t,e)}};return{topicHotKeys:new Map([[Bu,{label:"add child",combo:"tab",onKeyDown:t(Ga)}],[zu,{label:"add sibling",combo:"enter",onKeyDown:t(Ua)}],[Vu,{label:"delete topic",combo:"del",onKeyDown:t(Wa)}],[Hu,{label:"edit content",combo:"space",onKeyDown:t(ec)}],[Gu,{label:"edit notes",combo:"alt + d",onKeyDown:t(tc)}],[Uu,{label:"set editor root",combo:"alt + shift + f",onKeyDown:t(oc)}]]),globalHotKeys:new Map}}}}function Yu(){var e=new Map([[zl,"Confirm"],[Vl,"Cancel"],[Hl,"Default"],[Gl,"Search"],[Ul,"Left And Right"],[Wl,"Only Left"],[Jl,"Only Right"],[Zl,"Edit"],[ql,"Add Child"],[Yl,"Add Sibling"],[Xl,"Edit Notes"],[$l,"Delete"],[Ql,"Set as Editor Root"],[es,"Edit Topology Diagram"],[ts,"Set Topic References"],[ns,"TopicStyle"],[os,"Style"],[rs,"Text Editor"],[as,"Link"],[cs,"LinkToParent"],[is,"SubLinks"],[ls,"Copy Style"],[ss,"Paste Style"],[us,"Clear Topic Style"],[ps,"Clear All Custom Style"],[ds,"LineType"],[fs,"Theme"],[bs,"Global"],[ys,"Highlight"],[hs,"Random Color"],[gs,"NormalTopic"],[ms,"PrimaryTopic"],[Os,"RootTopic"],[vs,"Export Theme"],[Ts,"Import Theme"],[js,"Tags"],[ks,"Tags Manager"],[Es,"Tag Name"],[xs,"Add Tag"],[ws,"Update Tag"],[Ss,"Already Added"],[Cs,"Can be Added"],[Ks,"Topics that Use this Tag"],[Rs,"Background"],[Ds,"Color"],[Ls,"Border"],[_s,"Width"],[Is,"Radius"],[Ms,"FontSize"],[As,"LineHeight"],[Ns,"Padding"],[Fs,"Top"],[Ps,"Bottom"],[Bs,"Left"],[zs,"Right"],[Vs,"None"],[Hs,"Solid"],[Gs,"Dotted"],[Us,"Dashed"],[Ws,"Double"],[Js,"Round"],[Zs,"Curve"],[Ys,"Line"],[qs,"Collapse All"],[Xs,"Expand All"],[$s,"Center Root Topic"],[Qs,"zoom"],[eu,"Zoom In"],[tu,"Zoom Out"],[nu,"Reset"],[ou,"Reset Zoom"],[ru,"Write topic notes here"],[au,"Topology Diagram Editor"],[cu,"Basic"],[iu,"Flow Graph"],[lu,"Activity Diagram"],[su,"Sequence Diagram"],[uu,"Class Diagram"],[pu,"Reference Topics"],[du,"Referenced Topics"],[fu,"Please select the topics you want to reference. After selection, click the confirm button."],[bu,"The length of tag name over the maximum length: 50!"],[yu,"All the relationship about this tag will be lost if you delete this tag! Are you confirm?"],[hu,"Are you confirm to delete this topology diagram?"]]);return{getI18nTextMap:function(){return e},getI18nText:function(e){var t=e.controller,n=e.key,o=t.run("getI18nTextMap",e);if(!o.has(n))throw new Error("i18n key ".concat(n," is not exist"));return o.get(n)}}}var qu=b()("plugin:operation");function Xu(){var e=new Map([[Ba,bc.toggleCollapse],[za,bc.collapseAll],[Va,bc.expandAll],[Ha,bc.expandTo],[Ga,bc.addChild],[Ua,bc.addSibling],[Wa,bc.deleteTopic],[Ja,bc.focusTopic],[Za,bc.setFocusMode],[Ya,bc.setStyle],[qa,bc.clearAllCustomStyle],[Xa,bc.setTheme],[$a,bc.setBlockData],[Qa,bc.deleteBlock],[ec,function(e){var t=e.model,n=e.topicKey;return bc.focusTopic({model:t,topicKey:n,focusMode:La})}],[tc,function(e){var t=e.model,n=e.topicKey,o=t.getTopic(n).getBlock(Ra);return null!=o.block&&null!=o.block.data||(t=bc.setBlockData({model:t,topicKey:n,blockType:Ra,data:""})),t=bc.focusTopic({model:t,topicKey:n,focusMode:_a})}],[nc,function(e){var t=e.srcKey,n=e.dstKey,o=e.dropDir,r=e.model,a=r.getTopic(t),c=r.getTopic(n),i=a.parentKey,l=r.getTopic(i).subKeys,s=l.indexOf(t);if(l=l.delete(s),"in"===o){var u=c.subKeys;u=u.push(t),r=r.withMutations((function(e){e.setIn(["topics",i,"subKeys"],l).setIn(["topics",t,"parentKey"],n).setIn(["topics",n,"subKeys"],u).setIn(["topics",n,"collapse"],!1)}))}else{var p=c.parentKey,d=r.getTopic(p).subKeys,f=d.indexOf(n);if(i===p){var b=Object(T.List)();d.forEach((function(e){e!==t&&(b=e===n?"prev"===o?b.push(t).push(e):b.push(e).push(t):b.push(e))})),r=r.withMutations((function(e){e.setIn(["topics",p,"subKeys"],b)}))}else"prev"===o?d=d.insert(f,t):"next"===o&&(d=d.insert(f+1,t)),r=r.withMutations((function(e){e.setIn(["topics",i,"subKeys"],l).setIn(["topics",t,"parentKey"],p).setIn(["topics",p,"subKeys"],d).setIn(["topics",p,"collapse"],!1)}))}return r}],[oc,bc.setEditorRootTopicKey],[rc,bc.setLayoutDir]]),t=Object(T.Stack)(),n=Object(T.Stack)(),o=!0,r=new Set;return{isOperationEnabled:function(e){return o},enableOperation:function(){o=!0},disableOperation:function(e){var t=e.whiteList;o=!1,t?r=new Set(t):r.clear()},getOpMap:function(t){return e},getAllowUndo:function(e){var t=e.model,n=e.opType,o=e.allowUndo;if(!1===(void 0===o||o))return!1;if(n)switch(n){case Ja:case Za:case ec:case tc:return!1}switch(t.focusMode){case"EDITING_DESC":case"EDITING_CONTENT":return!1}return t.config.allowUndo},getUndoRedoStack:function(){return{undoStack:t,redoStack:n}},setUndoStack:function(e){qu("setUndoStack",e.undoStack),t=e.undoStack},setRedoStack:function(e){qu("setRedoStack",e.redoStack),n=e.redoStack},canUndo:function(e){var t=e.controller;if(!t.run("isOperationEnabled",e))return!1;var n=t.run("getUndoRedoStack",e).undoStack,o=t.run("getAllowUndo",e);return n.size>0&&o},canRedo:function(e){var t=e.controller;if(!t.run("isOperationEnabled",e))return!1;var n=t.run("getUndoRedoStack",e).redoStack,o=t.run("getAllowUndo",e);return n.size>0&&o},undo:function(e){var t=e.controller,n=e.model;if(t.run("getAllowUndo",e)){var o=t.run("getUndoRedoStack",e),r=o.undoStack,a=o.redoStack,c=r.peek();c&&(t.run("setUndoStack",Object(m.a)(Object(m.a)({},e),{},{undoStack:r.shift()})),t.run("setRedoStack",Object(m.a)(Object(m.a)({},e),{},{redoStack:a.push(n)})),qu(c),t.change(c))}},redo:function(e){var t=e.controller,n=e.model;if(t.run("getAllowUndo",e)){var o=t.run("getUndoRedoStack",e),r=o.undoStack,a=o.redoStack,c=a.peek();c&&(t.run("setUndoStack",Object(m.a)(Object(m.a)({},e),{},{undoStack:r.push(n)})),t.run("setRedoStack",Object(m.a)(Object(m.a)({},e),{},{redoStack:a.shift()})),t.change(c))}},operation:function(e){var t=e.controller,n=e.opType,o=e.model,a=e.opArray,c=e.callback;if(null!=a&&!Array.isArray(a))throw new Error("operation: the type of opArray must be array!");if(null!=n&&null!=a)throw new Error("operation: opType and opArray conflict!");if(!t.run("isOperationEnabled",e)){if(0===r.size)return;if(null!=a){var i=a.filter((function(e){return!r.has(e.opType)}));if(i&&i.length>0)return}else if(!r.has(n))return}qu("operation:",n||a.map((function(e){return e.opType}))),qu("operation:",o),qu("operation:",e);var l,s=t.run("getOpMap",e);if(t.run("beforeOperation",e),t.run("getAllowUndo",e)){var u=t.run("getUndoRedoStack",e).undoStack;t.run("setUndoStack",Object(m.a)(Object(m.a)({},e),{},{undoStack:u.push(o)}))}if(null!=a)l=a.reduce((function(e,n){var o=n.opType;if(!s.has(o))throw new Error("opType:".concat(o," not exist!"));var r=s.get(o),a=Object(m.a)(Object(m.a)({controller:t},n),{},{model:e}),c=t.run("beforeOpFunction",a);return c=r(Object(m.a)(Object(m.a)({},a),{},{model:c})),c=t.run("afterOpFunction",Object(m.a)(Object(m.a)({},a),{},{model:c}))}),o);else{if(!s.has(n))throw new Error("opType:".concat(n," not exist!"));var p=s.get(n);l=t.run("beforeOpFunction",e),l=p(Object(m.a)(Object(m.a)({},e),{},{model:l})),l=t.run("afterOpFunction",Object(m.a)(Object(m.a)({},e),{},{model:l}))}qu("newModel:",l),t.change(l,c?c(l):null),t.run("afterOperation",e)},deleteRefKey:function(e){var t=e.model,n=e.topicKey,o=e.deleteRef,r=uc(t,n);r.push(n);var a,c=Object(O.a)(r);try{for(c.s();!(a=c.n()).done;){var i=a.value;o(xl(i)),o(wl(i)),o(vl(i)),o(Tl(i)),o(jl(i)),o(kl(i)),o(El(i)),o(Sl(i)),o(Cl(i,"next")),o(Cl(i,"prev"))}}catch(l){c.e(l)}finally{c.f()}},beforeOperation:function(e){},afterOperation:function(e){},beforeOpFunction:function(e){var t=e.controller,n=e.opType,o=e.model,r=e.topicKey;return n===Wa&&r!==o.editorRootTopicKey&&t.run("deleteRefKey",e),o},afterOpFunction:function(e){return e.model},openNewModel:function(e){var t=e.model,n=e.controller,o=e.newModel;n.run("deleteRefKey",Object(m.a)(Object(m.a)({},e),{},{topicKey:t.rootTopicKey})),n.run("operation",Object(m.a)(Object(m.a)({},e),{},{opType:Ha,topicKey:o.focusKey,model:o,callback:function(t){return function(){n.run("moveTopicToCenter",Object(m.a)(Object(m.a)({},e),{},{model:t,topicKey:t.focusKey}))}}}))}}}var $u=function(e){Object(s.a)(n,e);var t=Object(u.a)(n);function n(){return Object(i.a)(this,n),t.apply(this,arguments)}return Object(l.a)(n,[{key:"render",value:function(){var e=this.props.controller;return Object(o.createElement)(y.n,null,e.run("customizeTopicContextMenu",this.props))}}]),n}(Ai),Qu=[{icon:"edit",label:Zl,shortcut:"Space",rootCanUse:!0,opType:ec},{icon:"add-sibling",label:Yl,shortcut:"Enter",opType:Ua},{icon:"add-child",label:ql,shortcut:"Tab",rootCanUse:!0,opType:Ga},{icon:"notes",label:Xl,shortcut:"Alt + D",rootCanUse:!0,opType:tc},{icon:"delete-node",label:$l,shortcut:"Del",opType:Wa},{icon:"root",label:Ql,shortcut:"Alt + Shift + F",opType:oc}];function ep(){return{renderTopicContextMenu:function(e){return Object(o.createElement)($u,Object.assign({},e))},customizeTopicContextMenu:function(e){var t=e.topicKey,n=e.model,r=e.controller,a=t===n.editorRootTopicKey;function c(t){return function(n){t.opType&&r.run("operation",Object(m.a)(Object(m.a)({},e),{},{opType:t.opType}))}}return Qu.map((function(t){return a&&!t.rootCanUse?null:Object(o.createElement)(y.p,{key:t.label,icon:Ol(t.icon),text:vu(e,t.label),labelElement:Object(o.createElement)("kbd",null,t.shortcut),onClick:c(t)})}))}}}var tp=b()("node:topic-drop-effect"),np=d.default.svg(Hc||(Hc=Object(Ri.a)(["\n  width: 100%;\n  height: 100%;\n  position: absolute;\n  left: 0;\n  top: 0;\n  z-index: 2;\n  pointer-events: none;\n"]))),op=function(e){Object(s.a)(n,e);var t=Object(u.a)(n);function n(){var e;return Object(i.a)(this,n),(e=t.apply(this,arguments)).state={content:null},e}return Object(l.a)(n,[{key:"layout",value:function(){var e=this.props,t=e.getRef,n=e.model,r=e.zoomFactor,a=e.diagramState.dragDrop;if(null!=a){var c=a.targetKey,i=a.targetDir;if(tp("layout",i),null!=c){var l=t("in"===i?vl(c):Cl(c,i)),s=t("svg-drop-effect"),u=t(Rl).bigView,p=xu(l,u,r),d=xu(s,u,r),f=p.left-d.left-3,b=p.top-d.top-3,y=p.width+6,h=p.height+6;this.setState({content:Object(o.createElement)("g",null,Object(o.createElement)("rect",{x:f,y:b,width:y,height:h,fill:"none",stroke:n.config.theme.highlightColor,strokeDasharray:"5,5",strokeWidth:2}))})}else this.setState({content:null})}else this.setState({content:null})}},{key:"render",value:function(){var e=this.props.saveRef;return Object(o.createElement)(np,{ref:e("svg-drop-effect")},this.state.content)}}]),n}(Ai),rp=b()("plugin:drag-and-drop"),ap=d.default.div(Gc||(Gc=Object(Ri.a)(["\n  height: ",";\n  width: 100%;\n  margin: 5px 0px;\n"])),(function(e){return"".concat(e.height,"px")}));function cp(){return{renderTopicDropArea:function(e){var t=e.topicKey,n=e.dropDir,r=e.saveRef,a=e.controller,c=e.model,i={onDragEnter:function(o){rp("onDragEnter",t,n),a.run("handleTopicDragEnter",Object(m.a)(Object(m.a)({},e),{},{ev:o,dropDir:n}))},onDragLeave:function(o){rp("onDragLeave",t,n),a.run("handleTopicDragLeave",Object(m.a)(Object(m.a)({},e),{},{ev:o,dropDir:n}))},onDragOver:function(e){e.preventDefault()},onDrop:function(o){rp("onDrop",t,n),a.run("handleTopicDrop",Object(m.a)(Object(m.a)({},e),{},{ev:o,dropDir:n}))}};return Object(o.createElement)(ap,Object.assign({height:c.config.theme.marginV/2,ref:r(Cl(t,n))},i))},renderDragAndDropEffect:function(e){rp("renderDragAndDropEffect");var t=e.saveRef;return Object(o.createElement)(op,Object.assign({ref:t(_l)},e))},handleTopicDragStart:function(e){var t=e.controller;e.ev.stopPropagation(),t.run("operation",Object(m.a)(Object(m.a)({},e),{},{opType:Ja,focusMode:Ma}))},canDrop:function(e){var t=e.srcKey,n=e.dstKey,o=e.model,r=e.dropDir;return t!==o.editorRootTopicKey&&t!==n&&pc(o,t,n)!==Aa&&((n!==o.editorRootTopicKey||"in"===r)&&(o.getTopic(t).parentKey!==n||"in"!==r))},handleTopicDragEnter:function(e){var t=e.dropDir,n=e.topicKey,o=e.controller,r=e.model,a=e.diagramState,c=e.setDiagramState;rp("handleTopicDragEnter:",n,t),o.run("canDrop",Object(m.a)(Object(m.a)({},e),{},{srcKey:r.focusKey,dstKey:n}))&&c(Object(m.a)(Object(m.a)({},a),{},{dragDrop:{targetKey:n,targetDir:t}}))},handleTopicDragLeave:function(e){var t=e.topicKey,n=e.dropDir,o=e.getRef,r=e.ev,a=e.diagramState,c=e.setDiagramState,i=r.nativeEvent.relatedTarget;rp("handleTopicDragLeave:",t,n);var l=o(vl(t));l==i||l.contains(i)||c(Object(m.a)(Object(m.a)({},a),{},{dragDrop:null}))},handleTopicDrop:function(e){rp("handleTopicDrop");var t=e,n=t.controller,o=t.topicKey,r=t.model,a=t.diagramState,c=t.setDiagramState;e=Object(m.a)(Object(m.a)({},e),{},{srcKey:r.focusKey,dstKey:o}),c(Object(m.a)(Object(m.a)({},a),{},{dragDrop:null})),n.run("canDrop",e)&&n.run("operation",Object(m.a)(Object(m.a)({},e),{},{opType:nc}))}}}function ip(e,t,n,o){var r,a=arguments.length,c=a<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)c=Reflect.decorate(e,t,n,o);else for(var i=e.length-1;i>=0;i--)(r=e[i])&&(c=(a<3?r(c):a>3?r(t,n,c):r(t,n))||c);return a>3&&c&&Object.defineProperty(t,n,c),c}var lp=d.default.div(Uc||(Uc=Object(Ri.a)(["\n  position: relative;\n  display: flex;\n  align-items: center;\n  padding: 5px;\n"]))),sp=d.default.div(Wc||(Wc=Object(Ri.a)(["\n  width: 100%;\n  height: 100%;\n  background: ",";\n"])),(function(e){return e.theme.background})),up=function(e){Object(s.a)(n,e);var t=Object(u.a)(n);function n(e){var o;return Object(i.a)(this,n),(o=t.call(this,e)).setZoomFactor=function(e){o.dragScrollWidget.setZoomFactor(e)},o.onWheel=function(e){if(e.altKey||e.ctrlKey){var t=o.props.controller,n=t.run("getZoomFactor",o.props);(n-=e.nativeEvent.deltaY>0?.1:-.1)<.5&&(n=.5),n>4&&(n=4),t.run("setZoomFactor",Object(m.a)(Object(m.a)({},o.props),{},{zoomFactor:n}))}},o}return Object(l.a)(n,[{key:"renderHotkeys",value:function(){var e=this.props,t=e.controller,n=e.model,r=t.run("customizeHotKeys",e);if(null===r)return null;if(!(r.topicHotKeys instanceof Map&&r.globalHotKeys instanceof Map))throw new TypeError("topicHotKeys and globalHotKeys must be a Map");var a=[];return n.focusMode!==Da&&n.focusMode!==Ia||r.topicHotKeys.forEach((function(e,t){a.push(Object(o.createElement)(y.j,Object.assign({key:t},e,{global:!0})))})),r.globalHotKeys.forEach((function(e,t){a.push(Object(o.createElement)(y.j,Object.assign({key:t},e,{global:!0})))})),Object(o.createElement)(y.k,null,a)}},{key:"componentDidMount",value:function(){var e=this.props,t=e.getRef,n=e.model;e.controller.run("addZoomFactorChangeEventListener",Object(m.a)(Object(m.a)({},this.props),{},{listener:this.setZoomFactor}));var o=t(El(n.editorRootTopicKey)),r=t("node-layer"),a=o.getBoundingClientRect(),c=r.getBoundingClientRect();this.dragScrollWidget.setViewBoxScrollDelta(0,a.top-c.top-this.dragScrollWidget.viewBox.getBoundingClientRect().height/2+a.height),this.layout()}},{key:"componentWillUnmount",value:function(){this.props.controller.run("removeZoomFactorChangeEventListener",Object(m.a)(Object(m.a)({},this.props),{},{listener:this.setZoomFactor}))}},{key:"dragScrollWidget",get:function(){return this.props.getRef(Rl)}},{key:"componentDidUpdate",value:function(){this.props.controller.run("fireEvent",Object(m.a)(Object(m.a)({},this.props),{},{key:Il})),this.layout()}},{key:"layout",value:function(){this.props.controller.run("layout",this.props)}},{key:"render",value:function(){var e=this,t=this.props,n=t.saveRef,r=t.model,a=t.controller,c=r.editorRootTopicKey;return Object(o.createElement)(sp,{onWheel:this.onWheel},Object(o.createElement)(Bi,Object.assign({},this.state,{enableMouseWheel:!1,zoomFactor:r.zoomFactor,ref:n(Rl)}),(function(t,r){var i=Object(m.a)(Object(m.a)({},e.props),{},{topicKey:c,setViewBoxScroll:t,setViewBoxScrollDelta:r});return Object(o.createElement)(lp,{ref:n("node-layer")},a.run("renderRootWidget",i))})))}}]),n}(o.PureComponent);up=ip([y.l],up);var pp=d.default.div(Jc||(Jc=Object(Ri.a)(["\n  display: flex;\n  flex-direction: column;\n  width: 100%;\n  height: 100%;\n"]))),dp=d.default.div(Zc||(Zc=Object(Ri.a)(["\n  width: 100%;\n  //height: 100%;\n  overflow: auto;\n  flex-grow: 1;\n  background: ",";\n  position: relative;\n"])),(function(e){return e.theme.background}));function fp(e){var t=e.controller,n=e.saveRef,r=Object(o.useState)(t.run("getInitialDiagramState",e)),a=Object(Si.a)(r,2),c=a[0],i=a[1],l=Object(m.a)(Object(m.a)({},e),{},{diagramState:c,setDiagramState:i});return Object(o.createElement)(pp,null,t.run("renderToolbar",e),Object(o.createElement)(dp,{ref:n(Kl)},Object(o.createElement)(up,Object.assign({},l)),t.run("renderDiagramCustomize",l)))}var bp=Object(d.default)($i)(Yc||(Yc=Object(Ri.a)(["\n  position: absolute;\n  width: 20%;\n  padding: 0 5px;\n  background: white;\n  left: 30px;\n  top: 20px;\n  border-radius: 2px;\n"]))),yp=d.default.div(qc||(qc=Object(Ri.a)(["\n  max-width: 600px;\n"]))),hp=d.default.span(Xc||(Xc=Object(Ri.a)([""]))),gp=function(e){Object(s.a)(n,e);var t=Object(u.a)(n);function n(e){var r;return Object(i.a)(this,n),(r=t.call(this,e)).setEditorRootTopicKey=function(e){return function(){var t=r.props,n=t.model,o=t.controller;n.editorRootTopicKey!==e&&o.run("operation",Object(m.a)(Object(m.a)({},r.props),{},{opType:oc,topicKey:e}))}},r.breadcrumbRenderer=function(e){var t=e.text,n=Object(Ci.a)(e,Mi),r=t.length>8,a=r?t.substr(0,8)+"...":t,c={content:Object(o.createElement)(yp,null,t),position:y.u.BOTTOM_RIGHT},i=Object(o.createElement)(y.b,Object.assign({},n),Object(o.createElement)(hp,null,a));return r?Object(o.createElement)(y.x,Object.assign({},c),i):i},r}return Object(l.a)(n,[{key:"render",value:function(){var e=this.props,t=e.model,n=e.controller,r=e.zIndex,a=t.editorRootTopicKey;if(a===t.rootTopicKey)return null;for(var c=[],i=t.getTopic(a);null!=i;){var l=n.getValue(Nl,Object(m.a)(Object(m.a)({},e),{},{topicKey:i.key}));c.unshift({text:l,onClick:this.setEditorRootTopicKey(i.key)}),i=t.getTopic(i.parentKey)}var s={items:c,breadcrumbRenderer:this.breadcrumbRenderer};return Object(o.createElement)(bp,{zIndex:r},Object(o.createElement)(y.c,Object.assign({},s)))}}]),n}(Ai),mp=function(e){Object(s.a)(n,e);var t=Object(u.a)(n);function n(){var e;return Object(i.a)(this,n),(e=t.apply(this,arguments)).handleClose=function(){var t=e.props.controller.run("handleActiveModalClose",e.props);t&&t()},e}return Object(l.a)(n,[{key:"render",value:function(){var e=this.props.controller,t=e.run("renderModal",this.props),n=e.run("getActiveModalProps",this.props);return Object(o.createElement)(y.g,{onClose:this.handleClose,isOpen:null!==t,autoFocus:!0,enforceFocus:!0,usePortal:!0,title:n&&n.title,style:n&&n.style},Object(o.createElement)("div",{className:h.a.DIALOG_BODY,style:{minHeight:0}},t))}}]),n}(Ai),Op=d.default.svg($c||($c=Object(Ri.a)(["\n  width: 100%;\n  height: 100%;\n  position: absolute;\n  left: 0;\n  top: 0;\n  z-index: 1;\n  pointer-events: none;\n"]))),vp=b()("node:root-sub-links"),Tp=function(e){Object(s.a)(n,e);var t=Object(u.a)(n);function n(){var e;return Object(i.a)(this,n),(e=t.apply(this,arguments)).state={curves:[]},e}return Object(l.a)(n,[{key:"layout",value:function(){var e,t,n,r=this.props,a=r.model,c=r.getRef,i=r.topicKey,l=r.zoomFactor,s=r.controller,u=a.getTopic(i),p=c(vl(i)),d=c(wl(i)),f=c(Rl).bigView,b=xu(p,f,l),y=xu(d,f,l);e={x:(n=b,(n.left+n.right)/2-y.left),y:Tu(b)-y.top};var h=[];u.subKeys.forEach((function(n){var a,i=s.run("getLinkStyle",Object(m.a)(Object(m.a)({},r),{},{topicKey:n})),u=i.lineType,p=xu(c(vl(n)),f,l);if(t={x:(t=p.left>b.right?{x:p.left,y:Tu(p)}:{x:p.right,y:Tu(p)}).x-y.left,y:t.y-y.top},"curve"===u)a="M ".concat(e.x," ").concat(e.y," C ").concat(e.x," ").concat(ku(e,t)," ").concat(ju(e,t)," ").concat(t.y," ").concat(t.x," ").concat(t.y);else if("line"===u)a="M ".concat(e.x," ").concat(e.y," L ").concat(t.x," ").concat(t.y);else if("round"===u){var d=t.y>e.y?1:-1,g=t.x>e.x?1:-1,O=i.lineRadius;if(null==O)throw new Error("link line type is round, but lineRadius is not provided!");a=t.y===e.y?"M ".concat(e.x," ").concat(e.y," H ").concat(t.x):"M ".concat(e.x," ").concat(e.y,"  V ").concat(t.y-d*O," A ").concat(O," ").concat(O," 0 0 ").concat(d*g===1?0:1," ").concat(e.x+O*g," ").concat(t.y," H ").concat(t.x)}h.push(Object(o.createElement)("path",{key:"link-".concat(n),d:a,strokeWidth:i.lineWidth,stroke:i.lineColor,fill:"none"}))})),this.setState({curves:h})}},{key:"render",value:function(){vp("render");var e=this.props,t=e.topicKey,n=e.saveRef;return Object(o.createElement)(Op,{ref:n(wl(t))},Object(o.createElement)("g",null,this.state.curves))}}]),n}(Ai),jp=b()("RootNode"),kp=d.default.div(Qc||(Qc=Object(Ri.a)(["\n  display: flex;\n  position: relative;\n\n  align-items: ",";\n  flex-direction: column;\n\n  padding: ",";\n"])),(function(e){return e.topicDirection===Ea?"flex-end":"flex-start"}),(function(e){return e.topicDirection===Ea?"15px 60px 15px 0px":"15px 0px 15px 60px"})),Ep=d.default.div(ei||(ei=Object(Ri.a)(["\n  display: flex;\n  position: relative;\n  align-items: center;\n  z-index: 3;\n"]))),xp=function(e){Object(s.a)(n,e);var t=Object(u.a)(n);function n(){return Object(i.a)(this,n),t.apply(this,arguments)}return Object(l.a)(n,[{key:"renderPartTopics",value:function(e,t){var n=this.props,r=n.controller,a=n.saveRef,c=r.run("createSubTopics",Object(m.a)(Object(m.a)({},this.props),{},{dir:t,isRoot:!0,topics:e}));if(!c)return null;var i=c.subTopics,l="bm-layer-".concat(t===Ea?"left":"right");return Object(o.createElement)(kp,{topicDirection:t,ref:a(l)},i)}},{key:"render",value:function(){jp("render");var e=this.props,t=e.model,n=e.topicKey,r=e.saveRef,a=e.controller,c=a.run("getTopicContentStyle",e),i=t.config,l=a.run("renderTopicContent",Object(m.a)(Object(m.a)({},e),{},{topicStyle:c,dir:wa})),s=a.run("getPartTopics",{layout:i.layoutDir,model:t,topicKey:n}),u=Object(o.createElement)(Ep,{ref:r(El(n))},l),p=a.run("renderRootWidgetOtherChildren",e);switch(i.layoutDir){case ja.LEFT_AND_RIGHT:return Object(o.createElement)(o.Fragment,null,this.renderPartTopics(s.L,"L"),u,this.renderPartTopics(s.R,"R"),p);case ja.LEFT_TO_RIGHT:return Object(o.createElement)(o.Fragment,null,u,this.renderPartTopics(s.R,"R"),p);case ja.RIGHT_TO_LEFT:return Object(o.createElement)(o.Fragment,null,this.renderPartTopics(s.L,"L"),u,p);case ja.TOP_TO_BOTTOM:return Object(o.createElement)(o.Fragment,null,u,this.renderPartTopics(s.B,"B"),p)}return null}}]),n}(o.Component),wp=d.default.div(ti||(ti=Object(Ri.a)(["\n  position: absolute;\n  top: calc(50% - 10px);\n  ",";\n  border-radius: 50%;\n  width: 20px;\n  height: 20px;\n  text-align: center;\n  //@ts-ignore\n  background: ",";\n  cursor: pointer;\n  padding: 0;\n  font-size: 14px;\n  line-height: 20px;\n  border: 0;\n  z-index: 2;\n"])),(function(e){var t=e.dir;return t===xa?Object(d.css)(ni||(ni=Object(Ri.a)(["\n        right: -25px;\n      "]))):t===Ea?Object(d.css)(oi||(oi=Object(Ri.a)(["\n        left: -25px;\n      "]))):void 0}),(function(e){return e.background}));function Sp(e){var t=e.model,n=e.topicKey,r=e.topicStyle,a=e.dir,c=e.saveRef,i=e.onClickCollapse,l=t.getTopic(n);return l.subKeys.size>0?Object(o.createElement)(wp,{ref:c(Sl(n)),onClick:i,background:r.background,dir:a,className:nt()(Object(wi.a)({icon:!0,iconfont:!0},"bm-".concat(l.collapse?"plus":"minus"),!0))}):null}var Cp=b()("node:topic-content2"),Kp=d.default.div(ri||(ri=Object(Ri.a)(["\n  position: relative;\n"]))),Rp=d.default.div(ai||(ai=Object(Ri.a)(["\n  position: absolute;\n  left: 0;\n  top: 0;\n  width: auto;\n  z-index: 10;\n  color: black;\n"]))),Dp=function(e){Cp("cancelEvent"),e.preventDefault(),e.stopPropagation()};function Lp(e){var t,n=e.controller,r=e.model,a=e.topicKey,c=e.getRef,i=r.editingContentKey!==a,l=n.run("renderTopicContentEditor",Object(m.a)(Object(m.a)({},e),{},{readOnly:i}));if(i)t=l;else{var s,u={width:50,height:40},d=c("content-editor-".concat(a));d&&(u=d.getBoundingClientRect());var f=new p.a((function(e,t){var n=e[0].contentRect;s.style.left=(u.width-n.width)/2+"px",s.style.top=(u.height-n.height)/2+"px"}));Cp(u),t=Object(o.createElement)(o.Fragment,null,Object(o.createElement)("div",{style:{width:u.width,height:u.height}}),Object(o.createElement)(Rp,{ref:function(e){e&&(s=e,f.observe(s))}},l))}return Object(o.createElement)(Kp,{onDragEnter:Dp,onDragOver:Dp},t)}var _p=b()("node:topic-content-widget"),Ip=d.default.div(ci||(ci=Object(Ri.a)(["\n  display: flex;\n  align-items: center;\n  cursor: pointer;\n  //overflow: hidden;\n  position: relative;\n"]))),Mp=d.default.div(ii||(ii=Object(Ri.a)(["\n  position: relative;\n"]))),Ap=function(e){Object(s.a)(n,e);var t=Object(u.a)(n);function n(e){var o;return Object(i.a)(this,n),(o=t.call(this,e)).onDragStart=function(e){o.run("handleTopicDragStart",Object(m.a)(Object(m.a)({},o.props),{},{ev:e}))},o.onDragOver=function(e){e.preventDefault()},o.onDragEnter=function(e){_p("onDragEnter",o.props.topicKey),o.run("handleTopicDragEnter",Object(m.a)(Object(m.a)({},o.props),{},{ev:e,dropDir:"in"}))},o.onDragLeave=function(e){o.run("handleTopicDragLeave",Object(m.a)(Object(m.a)({},o.props),{},{ev:e,dropDir:"in"}))},o.onDrop=function(e){_p("onDrop"),o.run("handleTopicDrop",Object(m.a)(Object(m.a)({},o.props),{},{ev:e,dropDir:"in"}))},o.onClick=function(e){var t=o.props.controller;o.handleTopicClickTimeout=setTimeout((function(){t.run("handleTopicClick",Object(m.a)(Object(m.a)({},o.props),{},{ev:e}))}),200)},o.onDoubleClick=function(e){clearTimeout(o.handleTopicClickTimeout),o.props.controller.run("handleTopicDoubleClick",Object(m.a)(Object(m.a)({},o.props),{},{ev:e}))},o.needRelocation=!1,o.onClickCollapse=function(e){e.stopPropagation();var t=o.props,n=t.topicKey,r=t.getRef;o.needRelocation=!0;var a=r(Sl(n)).getBoundingClientRect();_p("oldRect",a),o.oldCollapseIconVector=[a.left+a.width/2,a.top+a.height/2],_p("oldCollapseIconVector",o.oldCollapseIconVector),o.operation(Ba,o.props)},o.state={dragEnter:!1},o}return Object(l.a)(n,[{key:"renderContextMenu",value:function(){var e=this.props.controller;if(e.getValue(Al,Object(m.a)({},this.props)))return this.operation(Ja,Object(m.a)(Object(m.a)({},this.props),{},{focusMode:Ia})),e.run("renderTopicContextMenu",this.props)}},{key:"onContextMenuClose",value:function(){}},{key:"componentDidUpdate",value:function(){if(this.needRelocation){var e=this.props,t=e.getRef,n=e.topicKey,o=e.setViewBoxScrollDelta,r=t(Sl(n)).getBoundingClientRect(),a=[r.left+r.width/2,r.top+r.height/2];_p("newVector:",a),_p("oldVector:",this.oldCollapseIconVector);var c=[a[0]-this.oldCollapseIconVector[0],a[1]-this.oldCollapseIconVector[1]];_p("vector",c),o(c[0],c[1]),this.needRelocation=!1}}},{key:"render",value:function(){var e=this.props,t=e.saveRef,n=e.topicKey,r=e.model,a=e.controller,c=e.topicStyle,i=e.dir;_p("render",n,r.focusMode);var l=a.run("isOperationEnabled",e)&&r.editingContentKey!==n,s=a.run("renderTopicCollapseIcon",Object(m.a)(Object(m.a)({},e),{},{onClickCollapse:this.onClickCollapse.bind(this)})),u=a.run("renderTopicDropArea",Object(m.a)(Object(m.a)({},e),{},{dropDir:"prev"})),p=a.run("renderTopicDropArea",Object(m.a)(Object(m.a)({},e),{},{dropDir:"next"})),d={onDragEnter:this.onDragEnter,onDragLeave:this.onDragLeave,onDragOver:this.onDragOver,onDrop:this.onDrop};return Object(o.createElement)(Mp,null,u,Object(o.createElement)(Ip,Object.assign({style:c,draggable:l,ref:t(vl(n)),onDragStart:this.onDragStart,onClick:this.onClick,onDoubleClick:this.onDoubleClick},d),a.run("renderTopicBlocks",e),a.run("renderTopicContentOthers",e)),p,i!==wa&&s)}}]),n}(Ai);Ap=ip([y.f],Ap);var Np=b()("node:topic-desc"),Fp=d.default.div(li||(li=Object(Ri.a)(["\n  overflow: auto;\n"])));function Pp(e){var t=e.controller,n=e.model,r=e.topicKey,a=e.getRef,c=n.editingDescKey===r;Np("isEditing",c);var i=n.getTopic(r).getBlock(Ra);if(!c&&t.run("isBlockEmpty",Object(m.a)(Object(m.a)({},e),{},{block:i.block})))return null;var l=t.run("renderTopicDescEditor",e),s=a(Kl),u={maxWidth:"800px",maxHeight:"600px"};if(s){var p=s.getBoundingClientRect();u.maxWidth="".concat(.6*p.width,"px"),u.maxHeight="".concat(.8*p.height,"px")}var d={autoFocus:!1,content:Object(o.createElement)(Fp,{onClick:gu,classname:h.a.POPOVER_DISMISS,style:u},l),target:Object(o.createElement)(Xi,{onClick:function(n){n.stopPropagation(),t.run("operation",Object(m.a)(Object(m.a)({},e),{},{opType:tc}))},className:ml(pl),tabIndex:-1}),interactionKind:y.t.HOVER,hoverOpenDelay:500};return i.block&&Object(o.createElement)(y.s,Object.assign({},d))}var Bp=d.default.svg(si||(si=Object(Ri.a)(["\n  width: 100%;\n  height: 100%;\n  position: absolute;\n  left: 0;\n  top: 0;\n  z-index: 2;\n  pointer-events: none;\n"]))),zp=function(e){Object(s.a)(n,e);var t=Object(u.a)(n);function n(){var e;return Object(i.a)(this,n),(e=t.apply(this,arguments)).state={content:null},e}return Object(l.a)(n,[{key:"layout",value:function(){var e=this.props,t=e.getRef,n=e.model,r=e.zoomFactor,a=n.focusKey,c=n.focusMode;if(a&&c!==La){var i=t(vl(a)),l=t(Rl).bigView,s=t(Dl),u=xu(i,l,r),p=xu(s,l,r),d=u.left-p.left-3,f=u.top-p.top-3,b=u.width+6,y=u.height+6;this.setState({content:Object(o.createElement)("rect",{x:d,y:f,width:b,height:y,fill:"none",stroke:n.config.theme.highlightColor,strokeWidth:2})})}else this.setState({content:null})}},{key:"render",value:function(){var e=this.props.saveRef;return Object(o.createElement)(Bp,{ref:e(Dl)},this.state.content)}}]),n}(Ai),Vp=d.default.svg(ui||(ui=Object(Ri.a)(["\n  width: 100%;\n  height: 100%;\n  position: absolute;\n  left: 0;\n  top: 0;\n  z-index: 1;\n  pointer-events: none;\n"]))),Hp=b()("node:topic-sub-links"),Gp=function(e){Object(s.a)(n,e);var t=Object(u.a)(n);function n(){var e;return Object(i.a)(this,n),(e=t.apply(this,arguments)).state={curves:[]},e}return Object(l.a)(n,[{key:"layout",value:function(){var e,t,n,r=this.props,a=r.model,c=r.getRef,i=r.topicKey,l=r.dir,s=r.controller,u=s.run("getZoomFactor",r),p=a.getTopic(i),d=c(vl(i)),f=c(wl(i)),b=c(Sl(i)),y=c(Rl).bigView,h=xu(f,y,u),g=xu(b,y,u),O=xu(d,y,u);Hp(i),Hp("svgRect",h),Hp("collapseRect",g),Hp("contentRect",O),l===xa?(e={x:0,y:Tu(O)-h.top},t={x:g.right-h.left+10,y:e.y}):l===Ea&&(e={x:h.right-h.left,y:Tu(O)-h.top},t={x:g.left-h.left-10,y:e.y});var v=[];p.subKeys.forEach((function(a){var i,d=s.run("getLinkStyle",Object(m.a)(Object(m.a)({},r),{},{topicKey:a})),f=c(vl(a));if(f){var b=xu(f,y,u);l===xa&&(n={x:b.left-h.left,y:Tu(b)-h.top}),l===Ea&&(n={x:b.right-h.left,y:Tu(b)-h.top});var g=d.lineType;if("curve"===g)i="M ".concat(e.x," ").concat(e.y," L ").concat(t.x," ").concat(t.y," C ").concat(t.x," ").concat(ku(t,n)," ").concat(ju(t,n)," ").concat(n.y," ").concat(n.x," ").concat(n.y);else if("round"===g){var O=n.y>e.y?1:-1,T=n.x>e.x?1:-1,j=d.lineRadius;i=1===p.subKeys.size||Math.abs(n.y-e.y)<=1?"M ".concat(e.x," ").concat(e.y," L ").concat(n.x," ").concat(n.y):"M ".concat(e.x," ").concat(e.y," H ").concat(t.x," V ").concat(n.y-O*j," A ").concat(j," ").concat(j," 0 0 ").concat(O*T===1?0:1," ").concat(t.x+j*T," ").concat(n.y," H ").concat(n.x)}else"line"===g&&(i="M ".concat(e.x," ").concat(e.y," H ").concat(t.x," L ").concat(n.x," ").concat(n.y));v.push(Object(o.createElement)("path",{key:"link-".concat(a),d:i,strokeWidth:d.lineWidth,stroke:d.lineColor,fill:"none"}))}})),this.setState({curves:v})}},{key:"render",value:function(){var e=this.props,t=e.topicKey,n=e.saveRef;return Object(o.createElement)(Vp,{ref:n(wl(t))},Object(o.createElement)("g",null,this.state.curves))}}]),n}(Ai),Up=b()("node:topic-widget"),Wp=d.default.div(pi||(pi=Object(Ri.a)(["\n  display: flex;\n  align-items: center;\n  flex-direction: ",";\n"])),(function(e){return e.topicDirection===xa?"row":"row-reverse"})),Jp=d.default.div(di||(di=Object(Ri.a)(["\n  position: relative;\n  padding: ",";\n"])),(function(e){return e.dir===xa?"0 0 0 ".concat(e.marginH,"px"):"0 ".concat(e.marginH,"px 0 0")})),Zp=d.default.div(fi||(fi=Object(Ri.a)(["\n  display: flex;\n  position: relative;\n  align-items: center;\n\n  flex-direction: ",";\n"])),(function(e){return e.topicDirection===xa?"row":"row-reverse"})),Yp=function(e){Object(s.a)(n,e);var t=Object(u.a)(n);function n(){return Object(i.a)(this,n),t.apply(this,arguments)}return Object(l.a)(n,[{key:"renderSubTopics",value:function(){var e=this.props,t=e.controller,n=e.model,r=e.topicKey,a=e.dir,c=n.getTopic(r).subKeys.toArray(),i=t.run("createSubTopics",Object(m.a)(Object(m.a)({},e),{},{topics:c}));if(!i)return null;var l=i.subTopics,s=t.run("renderSubLinks",e);return Object(o.createElement)(Jp,{dir:a,marginH:n.config.theme.marginH},l," ",s)}},{key:"layoutLinks",value:function(){var e=this.props,t=e.getRef,n=e.topicKey,o=e.model.getTopic(n);if(0!==o.subKeys.size&&!o.collapse){Up("layoutLinks",n);var r=t(xl(n));r&&r.layout()}}},{key:"render",value:function(){var e=this.props,t=e.controller,n=e.topicKey,r=e.dir,a=e.saveRef;Up("render",n);var c=t.run("getTopicContentStyle",e),i=Object(m.a)(Object(m.a)({},e),{},{topicStyle:c}),l=t.run("renderTopicContent",i);return Object(o.createElement)(Wp,{topicDirection:r},Object(o.createElement)(Zp,{topicDirection:r,ref:a(El(n))},l),this.renderSubTopics())}}]),n}(o.Component),qp=b()("node:view-port-viewer"),Xp=Object(d.default)($i)(bi||(bi=Object(Ri.a)(["\n  position: absolute;\n  background: white;\n  right: 30px;\n  bottom: 20px;\n  border-radius: 2px;\n  display: flex;\n  flex-direction: row;\n  user-select: none;\n"]))),$p=Object(d.default)(Ji)(yi||(yi=Object(Ri.a)(["\n  margin: 10px;\n"]))),Qp=d.default.span(hi||(hi=Object(Ri.a)(["\n  display: inline-block;\n  width: 80px;\n  height: 18px;\n"]))),ed=function(e){return Object(o.createElement)(y.x,{content:e.tooltip,position:g.a.TOP,className:h.a.ICON},Object(o.createElement)($p,{onClick:e.onClick,tabIndex:-1},e.children))},td=function(e){Object(s.a)(n,e);var t=Object(u.a)(n);function n(e){var o;return Object(i.a)(this,n),(o=t.call(this,e)).zoomFactorChange=function(e){qp("zoomFactorChange",e),o.setState({zoomFactor:e})},o.onClickResetZoom=function(e){var t=o.props;t.controller.run("setZoomFactor",Object(m.a)(Object(m.a)({},t),{},{zoomFactor:1}))},o.onClickAddZoom=function(e){var t=o.props,n=t.controller,r=n.run("getZoomFactor",t);n.run("setZoomFactor",Object(m.a)(Object(m.a)({},t),{},{zoomFactor:r+.1}))},o.onClickMinusZoom=function(e){var t=o.props,n=t.controller,r=n.run("getZoomFactor",t);n.run("setZoomFactor",Object(m.a)(Object(m.a)({},t),{},{zoomFactor:r-.1}))},o.onClickCollapseAll=function(e){var t=o.props,n=t.controller;n.run("addEventListener",Object(m.a)(Object(m.a)({},t),{},{key:Il,listener:o.centerRootTopic,once:!0})),n.run("operation",Object(m.a)(Object(m.a)({},t),{},{opType:za}))},o.onClickExpandAll=function(e){var t=o.props,n=t.controller;n.run("addEventListener",Object(m.a)(Object(m.a)({},t),{},{key:Il,listener:o.centerRootTopic,once:!0})),n.run("operation",Object(m.a)(Object(m.a)({},t),{},{opType:Va}))},o.centerRootTopic=function(){var e=o.props,t=e.model;e.controller.run("moveTopicToCenter",Object(m.a)(Object(m.a)({},o.props),{},{topicKey:t.editorRootTopicKey}))},o}return Object(l.a)(n,[{key:"componentDidMount",value:function(){var e=this.props;e.controller.run("addZoomFactorChangeEventListener",Object(m.a)(Object(m.a)({},e),{},{listener:this.zoomFactorChange}))}},{key:"componentWillUnmount",value:function(){var e=this.props;e.controller.run("removeZoomFactorChangeEventListener",Object(m.a)(Object(m.a)({},e),{},{listener:this.zoomFactorChange}))}},{key:"render",value:function(){qp("render");var e=this.props,t=e.controller,n=e.zIndex,r=t.run("getZoomFactor",e);return Object(o.createElement)(Xp,{zIndex:n},Object(o.createElement)(ed,{onClick:this.onClickCollapseAll,tooltip:vu(e,qs)},Ol(bl)),Object(o.createElement)(ed,{onClick:this.onClickExpandAll,tooltip:vu(e,Xs)},Ol(yl)),Object(o.createElement)(ed,{onClick:this.centerRootTopic,tooltip:vu(e,$s)},Ol(hl)),Object(o.createElement)(ed,{onClick:this.onClickMinusZoom,tooltip:vu(e,eu)},Ol(fl)),Object(o.createElement)(ed,{onClick:this.onClickResetZoom,tooltip:vu(e,nu)},Object(o.createElement)(Qp,null,"".concat(vu(e,Qs),":").concat(Math.floor(100*r),"%"))),Object(o.createElement)(ed,{onClick:this.onClickAddZoom,tooltip:vu(e,tu)},Ol(dl)))}}]),n}(Ai),nd=d.default.div(gi||(gi=Object(Ri.a)(["\n  overflow: auto;\n  padding: 0px 0px 0px 20px;\n  background: #88888850;\n"])));function od(e){var t=e.controller,n=e.model,r=e.topicKey;if(n.focusMode===_a){var a=t.run("renderTopicDescEditor",e);return Object(o.createElement)(y.i,{key:"drawer",title:vu(e,Xl),icon:Ol("note"),isOpen:!0,hasBackdrop:!0,backdropProps:{onMouseDown:gu},isCloseButtonShown:!1,onClose:function(n){n.stopPropagation();var o="topic-desc-data-".concat(r),a=t.run("deleteTempValue",{key:o});t.run("operation",Object(m.a)(Object(m.a)({},e),{},{opType:$a,topicKey:r,blockType:Ra,data:a,focusMode:Da}))},size:"70%"},Object(o.createElement)(nd,null,a))}}function rd(e){var t=e.theme,n=e.children;return Object(o.createElement)(d.ThemeProvider,{theme:t},Object(o.createElement)(o.Fragment,null,n))}var ad=b()("plugin:rendering");function cd(){var e;return{getDiagramProps:function(){return e},renderDiagram:function(t){var n=t.model;return Object(o.createElement)(Vi,null,(function(r,a,c){return e=Object(m.a)(Object(m.a)({},t),{},{saveRef:r,getRef:a,deleteRef:c}),ad("renderDiagram",n),Object(o.createElement)(rd,{theme:n.config.theme},Object(o.createElement)(fp,e))}))},renderDrawer:od,getInitialDiagramState:function(e){return{rightTopPanel:{isOpen:!1,selectedTabId:"topic-style"}}},renderDiagramCustomize:function(e){var t=e.controller,n=e.model,o=t.getValue(Ml),r=Object(m.a)(Object(m.a)({},e),{},{zIndex:o,topicKey:n.focusKey});return[t.run("renderEditorRootBreadcrumbs",r),t.run("renderRightTopPanel",r),t.run("renderModals",Object(m.a)(Object(m.a)({},r),{},{zIndex:o+1})),t.run("renderDrawer",Object(m.a)(Object(m.a)({},r),{},{zIndex:o+1})),t.run("renderViewPortViewer",r)]},renderEditorRootBreadcrumbs:function(e){return Object(o.createElement)(gp,Object.assign({key:"EditorRootBreadcrumbs"},e))},renderModals:function(e){return Object(o.createElement)(mp,Object.assign({key:"modals"},e))},renderModal:function(e){return null},getActiveModalProps:function(e){return null},renderDoc:function(e){return e.children},renderRootWidget:function(e){return Object(o.createElement)(xp,Object.assign({},e))},renderTopicWidget:function(e){return Object(o.createElement)(Yp,Object.assign({},e))},renderTopicContent:function(e){return Object(o.createElement)(Ap,Object.assign({},e))},renderTopicCollapseIcon:function(e){return Object(o.createElement)(Sp,Object.assign({},e))},renderTopicContentOthers:function(e){return[]},renderTopicBlocks:function(e){var t=e.model,n=e.topicKey,r=e.controller,a=t.getTopic(n).blocks,c=[],i=0;return a.forEach((function(t){var n=r.run("renderTopicBlock",Object(m.a)(Object(m.a)({},e),{},{block:t,blockKey:"block-".concat(i)}));n&&(c.push(Object(o.createElement)(o.Fragment,{key:"block-".concat(i)},n)),i++)})),c},renderTopicBlock:function(e){var t=e.controller;switch(e.block.type){case Ka:return t.run("renderTopicBlockContent",e);case Ra:return t.run("renderTopicBlockDesc",e)}return null},renderTopicBlockContent:function(e){return Object(o.createElement)(Lp,Object.assign({},e))},renderTopicBlockDesc:function(e){return Object(o.createElement)(Pp,Object.assign({},e))},renderSubLinks:function(e){var t=e.saveRef,n=e.topicKey,r=e.model.getTopic(n);return 0===r.subKeys.size||r.collapse?null:Object(o.createElement)(Gp,Object.assign({ref:t(xl(n))},e))},renderRootSubLinks:function(e){var t=e.saveRef,n=e.topicKey;return Object(o.createElement)(Tp,Object.assign({ref:t(xl(n))},e))},renderFocusItemHighlight:function(e){var t=e.saveRef;return Object(o.createElement)(zp,Object.assign({ref:t(Ll)},e))},renderRootWidgetOtherChildren:function(e){var t=e.controller,n=t.run("getZoomFactor",e);return e=Object(m.a)(Object(m.a)({},e),{},{zoomFactor:n}),Object(o.createElement)(o.Fragment,null,t.run("renderRootSubLinks",e),t.run("renderFocusItemHighlight",e),t.run("renderDragAndDropEffect",e))},renderViewPortViewer:function(e){return Object(o.createElement)(td,Object.assign({key:"view-port-viewer"},e))}}}var id=Object(d.default)($i)(mi||(mi=Object(Ri.a)(["\n  position: absolute;\n  background: white;\n  right: 30px;\n  top: 20px;\n  border-radius: 2px;\n  user-select: none;\n"]))),ld=Object(d.default)(y.w)(Oi||(Oi=Object(Ri.a)(["\n  padding: 0px 10px;\n"])));function sd(e){var t=e.controller,n=e.zIndex,r=e.diagramState,a=e.setDiagramState,c=r.rightTopPanel,i=c.isOpen,l=c.selectedTabId,s=function(e){a(Object(m.a)(Object(m.a)({},r),{},{rightTopPanel:Object(m.a)(Object(m.a)({},c),e)}))};if(!i)return Object(o.createElement)(id,{zIndex:n},Object(o.createElement)(Wi,{onClick:function(){s({isOpen:!0})}},Object(o.createElement)(Ui,{className:ml(ll)})));return Object(o.createElement)(id,{zIndex:n},Object(o.createElement)(qi,null,Object(o.createElement)(Yi,{className:ml(sl),onClick:function(){s({isOpen:!1})}})),Object(o.createElement)(ld,{id:"tabs",selectedTabId:l,onChange:function(e){s({selectedTabId:e})}},t.run("renderRightTopPanelTabs",e)))}var ud=Object(v.a)(Array(7).keys()),pd=[0,5,10,15,20,25,30,35],dd=["none","solid","dotted","dashed","double"];function fd(e){var t=e.contentStyle,n=e.setContentStyle;return Object(o.createElement)(Su,null,Object(o.createElement)(tl,null,vu(e,Ls)),Object(o.createElement)(al,null,Object(o.createElement)(Lu,{text:"".concat(vu(e,_s),": ").concat(t.borderWidth?t.borderWidth:vu(e,Hl)),items:ud,itemRenderer:_u("px"),onItemSelect:function(e){n({borderWidth:"".concat(e,"px")})}}),Object(o.createElement)(Lu,{text:"".concat(vu(e,os),": ").concat(t.borderStyle?vu(e,t.borderStyle):vu(e,Vs)),items:dd,itemRenderer:Iu(e),onItemSelect:function(e){n({borderStyle:e})}}),Object(o.createElement)(Lu,{text:"".concat(vu(e,Is),": ").concat(t.borderRadius),items:pd,itemRenderer:_u("px"),onItemSelect:function(e){n({borderRadius:"".concat(e,"px")})}}),Object(o.createElement)(Cu,{color:t.borderColor,handleColorChange:function(e){n({borderColor:e})}})))}var bd=["curve","round","line"];function yd(e){var t=e.showLinkStyle,n=void 0===t||t,r=e.showSubLinkStyle,a=void 0===r||r,c=e.linkStyle,i=void 0===c?{}:c,l=e.subLinkStyle,s=void 0===l?{}:l,u=e.setLinkStyle,p=e.setSubLinkStyle;return Object(o.createElement)(Su,null,Object(o.createElement)(tl,null,vu(e,as)),n&&Object(o.createElement)(al,{alignItems:"center"},Object(o.createElement)(Gi,{margin:"0 5px 0 0"},vu(e,cs)+":"," "),Object(o.createElement)(Lu,{text:"".concat(vu(e,_s),": ").concat(i?i.lineWidth:"0px"),items:Mu,itemRenderer:_u("px"),onItemSelect:function(e){u({lineWidth:"".concat(e,"px")})}}),Object(o.createElement)(Lu,{text:"".concat(vu(e,ds),": ").concat(vu(e,i.lineType)),items:bd,itemRenderer:Iu(e),onItemSelect:function(e){u({lineType:e})}}),Object(o.createElement)(Cu,{color:i.lineColor,handleColorChange:function(e){u({lineColor:e})}})),a&&Object(o.createElement)(al,{alignItems:"center"},Object(o.createElement)(Gi,{margin:"0 5px 0 0"},vu(e,is)+": "),Object(o.createElement)(Lu,{text:"".concat(vu(e,_s),": ").concat(s?s.lineWidth:"0px"),items:Mu,itemRenderer:_u("px"),onItemSelect:function(e){p({lineWidth:"".concat(e,"px")})}}),Object(o.createElement)(Lu,{text:"".concat(vu(e,ds),": ").concat(vu(e,s.lineType)),items:bd,itemRenderer:Iu(e),onItemSelect:function(e){p({lineType:e})}}),Object(o.createElement)(Cu,{color:s.lineColor,handleColorChange:function(e){p({lineColor:e})}})))}function hd(e){var t=e.contentStyle,n=e.setContentStyle,r={title:"".concat(vu(e,Ms),":"),min:12,max:100,value:parseInt(t.fontSize),style:{width:50},onValueChange:function(e){n({fontSize:e})}},a={title:"".concat(vu(e,As),":"),style:{width:50},value:t.lineHeight||"",onChange:function(e){n({lineHeight:e.target.value})}};return Object(o.createElement)(Su,null,Object(o.createElement)(tl,null,vu(e,rs)),Object(o.createElement)(Hi,null,Object(o.createElement)(Ru,Object.assign({},r)),Object(o.createElement)(Du,Object.assign({},a)),Object(o.createElement)(Cu,{color:t.color,handleColorChange:function(e){n({color:e})}})))}var gd,md=b()("node:style-editor");function Od(e){var t=e.controller,n=e.model,r=e.topicKey,a=n.getTopic(r),c=function(n){t.run("setTopicContentStyle",Object(m.a)(Object(m.a)({},e),{},{style:n}))};if(!n.focusKey)return null;var i=t.run("getTopicContentStyle",e),l=t.run("getLinkStyle",e),s=t.run("getSubLinkStyle",e),u=Object(m.a)(Object(m.a)({},e),{},{linkStyle:l,subLinkStyle:s,setLinkStyle:function(n){t.run("setLinkStyle",Object(m.a)(Object(m.a)({},e),{},{linkStyle:n}))},setSubLinkStyle:function(n){t.run("setSubLinkStyle",Object(m.a)(Object(m.a)({},e),{},{subLinkStyle:n}))}}),p=Object(m.a)(Object(m.a)({},e),{},{contentStyle:i,setContentStyle:c});return Object(o.createElement)(Qi,null,Object(o.createElement)(fd,Object.assign({},p)),Object(o.createElement)(hd,Object.assign({},p)),Object(o.createElement)(Su,null,Object(o.createElement)(tl,null,vu(e,Rs)),Object(o.createElement)(Cu,{color:i.background,handleColorChange:function(e){c({background:e})}})),Object(o.createElement)(yd,Object.assign({},u)),Object(o.createElement)(Su,null,Object(o.createElement)(Ku,{title:vu(e,us),onClick:function(){a.style&&t.run("operation",Object(m.a)(Object(m.a)({},e),{},{opType:Ya,style:null}))}}),Object(o.createElement)(Ku,{title:vu(e,ls),onClick:function(){gd=t.run("getTopicStyle",e),md(gd)}}),Object(o.createElement)(Ku,{title:vu(e,ss),onClick:function(){gd&&t.run("operation",Object(m.a)(Object(m.a)({},e),{},{opType:Ya,style:JSON.stringify(gd)}))}})),function(e){var t=e.controller;return Object(o.createElement)(Su,null,Object(o.createElement)(nl,null,Object(o.createElement)(y.d,{onClick:function(n){t.run("operation",Object(m.a)(Object(m.a)({},e),{},{opType:qa}))}},vu(e,ps))))}(e))}var vd=n(109);function Td(e){var t=e.contentStyle,n=e.setContentStyle,r=vd("padding",t.padding||"0"),a={layout:"v",min:0,max:99,style:{width:38}},c=parseInt(r["padding-top"]),i=parseInt(r["padding-right"]),l=parseInt(r["padding-bottom"]),s=parseInt(r["padding-left"]),u={top:c,right:i,bottom:l,left:s},p=function(e){return function(t){n({padding:Ou(Object(m.a)(Object(m.a)({},u),{},Object(wi.a)({},e,t)))})}},d=Object(m.a)(Object(m.a)({},a),{},{title:vu(e,Fs),value:c,onValueChange:p("top")}),f=Object(m.a)(Object(m.a)({},a),{},{title:vu(e,zs),value:i,onValueChange:p("right")}),b=Object(m.a)(Object(m.a)({},a),{},{title:vu(e,Ps),value:l,onValueChange:p("bottom")}),y=Object(m.a)(Object(m.a)({},a),{},{title:vu(e,Bs),value:s,onValueChange:p("left")});return Object(o.createElement)(Su,null,Object(o.createElement)(tl,null,vu(e,Ns)),Object(o.createElement)(al,null,Object(o.createElement)(Ru,Object.assign({},d)),Object(o.createElement)(Ru,Object.assign({},f)),Object(o.createElement)(Ru,Object.assign({},b)),Object(o.createElement)(Ru,Object.assign({},y))))}var jd=d.default.div(vi||(vi=Object(Ri.a)(["\n  height: 250px;\n  overflow: auto;\n"])));function kd(e){var t=e.topicStyle,n=e.setTopicStyle,r=t.contentStyle,a=void 0===r?{}:r,c=t.linkStyle,i=void 0===c?{}:c,l=t.subLinkStyle,s=void 0===l?{}:l,u=function(e){n({contentStyle:e})},p=Object(m.a)(Object(m.a)({},e),{},{contentStyle:a,setContentStyle:u}),d=Object(m.a)(Object(m.a)({},e),{},{showLinkStyle:!1,linkStyle:i,subLinkStyle:s,setLinkStyle:function(e){n({linkStyle:e})},setSubLinkStyle:function(e){n({subLinkStyle:e})}});return Object(o.createElement)(jd,null,Object(o.createElement)(fd,Object.assign({},p)),Object(o.createElement)(Td,Object.assign({},p)),Object(o.createElement)(hd,Object.assign({},p)),Object(o.createElement)(Su,null,Object(o.createElement)(tl,null,vu(e,Rs)),Object(o.createElement)(Cu,{color:a.background,handleColorChange:function(e){u({background:e})}})),Object(o.createElement)(yd,Object.assign({},d)))}b()("node:theme-editor");var Ed="normal";function xd(e){var t,n=Object(o.useState)(!1),r=Object(Si.a)(n,2),a=r[0],c=r[1],i=e.model,l=e.controller,s=Object(at.cloneDeep)(i.config.theme),u=l.run("getThemeOfTopic",Object(m.a)(Object(m.a)({},e),{},{isClone:!0})),p=u.rootTopic,d=u.primaryTopic,f=u.normalTopic,b=function(t){l.run("operation",Object(m.a)(Object(m.a)({},e),{},{opType:Xa,theme:t}))},h=(t=function(e){b(Object(at.merge)(s,{randomColor:e}))},function(e){return t(e.target.checked)}),g=Object(m.a)(Object(m.a)({},e),{},{topicStyle:p,setTopicStyle:function(e){b(Object(at.merge)(s,{rootTopic:e}))}}),O=Object(o.createElement)(kd,Object.assign({},g)),v=Object(m.a)(Object(m.a)({},e),{},{topicStyle:d,setTopicStyle:function(e){b(Object(at.merge)(s,{primaryTopic:e}))}}),T=Object(o.createElement)(kd,Object.assign({},v)),j=Object(m.a)(Object(m.a)({},e),{},{topicStyle:f,setTopicStyle:function(e){b(Object(at.merge)(s,{normalTopic:e}))}}),k=Object(o.createElement)(kd,Object.assign({},j)),E={id:Ed,handleTabIdChange:function(e){Ed=e}},x=Object(o.createElement)(ol,null,Object(o.createElement)(y.w,Object.assign({},E),Object(o.createElement)(y.v,{id:"normal",title:vu(e,gs),panel:k}),Object(o.createElement)(y.v,{id:"primary",title:vu(e,ms),panel:T}),Object(o.createElement)(y.v,{id:"root",title:vu(e,Os),panel:O}))),w={isOpen:a,onClose:function(e){c(!1)}},S=Object(o.createElement)(y.a,Object.assign({},w),Object(o.createElement)("p",null,"File format error"));return Object(o.createElement)(Qi,null,Object(o.createElement)(Su,null,Object(o.createElement)(tl,null,vu(e,bs)),Object(o.createElement)(al,null,Object(o.createElement)(rl,null,vu(e,Rs)+":"),Object(o.createElement)(Cu,{color:s.background,handleColorChange:function(e){b(Object(at.merge)(s,{background:e}))}}),Object(o.createElement)(rl,null,vu(e,ys)+":"),Object(o.createElement)(Cu,{color:s.highlightColor,handleColorChange:function(e){b(Object(at.merge)(s,{highlightColor:e}))}}),Object(o.createElement)(rl,null,vu(e,hs)+":"),Object(o.createElement)(Zi,{checked:s.randomColor,onChange:h}))),x,Object(o.createElement)(Su,null,Object(o.createElement)(Ku,{title:vu(e,vs),onClick:function(e){mu(JSON.stringify(s),"blink-mind-theme.json")}}),Object(o.createElement)(Ku,{title:vu(e,Ts),onClick:function(e){(function(e){var t=document.createElement("input");return t.type="file",t.accept=e,new Promise((function(e,n){t.addEventListener("change",(function(t){var o=t.target.files[0],r=new FileReader;r.onload=function(t){var n=t.target.result;e(n)},r.onerror=function(e){n(e.target.error)},r.readAsText(o)})),t.click()}))})(".json,.txt").then((function(e){var t,n=JSON.parse(e);null!=(t=n).name&&null!=t.background&&null!=t.highlightColor?b(n):c(!0)}))}})),S)}function wd(){return{renderRightTopPanel:function(e){var t=Object(m.a)(Object(m.a)({},e),{},{key:"right-top-panel"});return Object(o.createElement)(sd,Object.assign({},t))},renderRightTopPanelTabs:function(e){var t=e.controller;return[t.run("renderTopicStyleEditor",e),t.run("renderThemeEditor",e)]},renderTopicStyleEditor:function(e){var t={id:"topic-style",key:"topic-style",title:vu(e,ns),panel:Object(o.createElement)(Od,Object.assign({},e))};return Object(o.createElement)(y.v,Object.assign({},t))},renderThemeEditor:function(e){var t={id:"theme-editor",key:"theme-editor",title:vu(e,fs),panel:Object(o.createElement)(xd,Object.assign({},e))};return Object(o.createElement)(y.v,Object.assign({},t))}}}var Sd=d.default.div(Ti||(Ti=Object(Ri.a)(["\n  box-shadow: rgb(170, 170, 170) 0 0 2px;\n  background: white;\n  .iconfont {\n    font-size: 28px !important;\n  }\n"])));function Cd(e){var t=e.controller;return Object(o.createElement)(Sd,null,t.run("renderToolbarItems",e))}function Kd(e){var t=[[ja.LEFT_AND_RIGHT,vu(e,Ul),"layout-left-and-right"],[ja.LEFT_TO_RIGHT,vu(e,Jl),"layout-right"],[ja.RIGHT_TO_LEFT,vu(e,Wl),"layout-left"]];return Object(o.createElement)(Nu,Object.assign({className:ml(gl)},e),Object(o.createElement)(y.s,{enforceFocus:!1},Object(o.createElement)(el,null),Object(o.createElement)(y.n,null,t.map((function(t){return Object(o.createElement)(y.p,{key:t[1],icon:Ol(t[2]),text:t[1],onClick:(n=t[0],function(t){e.controller.run("operation",Object(m.a)(Object(m.a)({},e),{},{opType:rc,layoutDir:n}))})});var n})))))}function Rd(){return{renderToolbar:function(e){return Object(o.createElement)(Cd,Object.assign({},e))},renderToolbarItems:function(e){var t=e.controller.run("customizeToolbar",e);return t.sort((function(e,t){return e.order-t.order})),t.map((function(t){return Object(o.createElement)(t.element,Object(m.a)(Object(m.a)({},e),{},{key:t.order.toString()}))}))},customizeToolbar:function(e){return[{order:100,element:Kd}]}}}var Dd=b()("plugin:utils");function Ld(){var e=new Map,t=new Map;return{addTempValueChangeListener:function(e){var n=e.key,o=e.listener;t.has(n)||t.set(n,[]),t.get(n).push(o)},removeTempValueChangeListener:function(e){var n=e.key,o=e.listener;t.has(n)&&(t[n]=t.get(n).filter((function(e){return e!==o})))},getTempValue:function(t){var n=t.key;return Dd("getTempValue",n),e.get(n)},setTempValue:function(n){var o=n.key,r=n.value;if(Dd("setTempValue",o),e.set(o,r),t.has(o)){var a,c=t.get(o),i=Object(O.a)(c);try{for(i.s();!(a=i.n()).done;){(0,a.value)(r)}}catch(l){i.e(l)}finally{i.f()}}},deleteTempValue:function(t){var n=t.key;Dd("deleteTempValue",n);var o=e.get(n);return e.delete(n),o}}}function _d(){return[cd(),Ld(),ep(),wd(),Rd(),cp()]}var Id=b()("node:text-editor"),Md=d.default.div(ji||(ji=Object(Ri.a)(["\n  padding: 6px;\n  background-color: ",";\n  cursor: ",";\n  min-width: 50px;\n"])),(function(e){return e.readOnly?null:"white"}),(function(e){return e.readOnly?"pointer":"text"})),Ad=function(e){Object(s.a)(n,e);var t=Object(u.a)(n);function n(e){var o;return Object(i.a)(this,n),(o=t.call(this,e)).state={content:null},o.onMouseDown=function(e){e.stopPropagation()},o.onMouseMove=function(e){},o.onKeyDown=function(e){},o._handleClick=function(e){!o.root.contains(e.target)&&o.onClickOutSide(e)},o.rootRef=function(e){return function(t){e(t),o.root=t}},o.initState(),o}return Object(l.a)(n,[{key:"onChange",value:function(e){var t=e.value;Id("onChange",t),this.setState({content:t})}},{key:"componentDidMount",value:function(){this.props.readOnly||document.addEventListener("click",this._handleClick)}},{key:"componentWillUnmount",value:function(){this.props.readOnly||document.removeEventListener("click",this._handleClick)}},{key:"onClickOutSide",value:function(e){}},{key:"getCustomizeProps",value:function(){return null}},{key:"getContent",value:function(){var e=this.getCustomizeProps().block.data;return null==e?null:("string"===typeof e&&(e=Ne.a.deserialize(e)),e)}},{key:"initState",value:function(){var e=this.getContent();this.state={content:e}}},{key:"render",value:function(){var e=this.props,t=e.topicKey,n=e.saveRef,r=this.getCustomizeProps(),a=r.readOnly,c=r.getRefKeyFunc,i=r.placeholder,l=r.style;Id(a);var s=c(t),u=a?this.getContent():this.state.content,p=this.onMouseDown,d=this.onMouseMove,f=this.onKeyDown,b={value:u,readOnly:a,onChange:this.onChange.bind(this),placeholder:i,style:l},y={key:s,readOnly:a,ref:this.rootRef(n(s)),onMouseDown:p,onMouseMove:d,onKeyDown:f};return Object(o.createElement)(Md,Object.assign({},y),Object(o.createElement)(Fe.Editor,Object.assign({},b,{autoFocus:!0})))}}]),n}(o.PureComponent),Nd=b()("node:topic-content-editor");function Fd(e){return"content-editor-".concat(e)}var Pd=function(e){Object(s.a)(n,e);var t=Object(u.a)(n);function n(e){var o;return Object(i.a)(this,n),(o=t.call(this,e)).onKeyDown=function(e){e.nativeEvent.ctrlKey&&"Enter"===e.nativeEvent.code&&o.save()},o}return Object(l.a)(n,[{key:"getCustomizeProps",value:function(){var e=this.props,t=e.model,n=e.topicKey,o=e.readOnly;return{block:t.getTopic(n).getBlock(Ka).block,readOnly:o,getRefKeyFunc:Fd,placeholder:"new",style:{whiteSpace:"pre"}}}},{key:"onClickOutSide",value:function(e){Nd("onClickOutSide"),this.save()}},{key:"save",value:function(){var e=this.props,t=e.model,n=e.topicKey;t.editingContentKey!==n||this.props.controller.run("operation",Object(m.a)(Object(m.a)({},this.props),{},{opType:$a,blockType:Ka,data:this.state.content,focusMode:Da}))}}]),n}(Ad),Bd=b()("node:topic-desc-editor");function zd(e){return"desc-editor-".concat(e)}var Vd=function(e){Object(s.a)(n,e);var t=Object(u.a)(n);function n(e){var o;return Object(i.a)(this,n),o=t.call(this,e),Bd("constructor"),o}return Object(l.a)(n,[{key:"initState",value:function(){Object(Ei.a)(Object(xi.a)(n.prototype),"initState",this).call(this);var e=this.props,t=e.controller,o=e.topicKey,r="topic-desc-data-".concat(o),a=this.state.content;t.run("setTempValue",{key:r,value:a})}},{key:"getCustomizeProps",value:function(){var e=this.props,t=e.model,n=e.topicKey;return{block:t.getTopic(n).getBlock(Ra).block,readOnly:t.editingDescKey!==n,getRefKeyFunc:zd,placeholder:"write topic notes here"}}},{key:"onChange",value:function(e){var t=e.value;Bd("onChange");var n=this.props,o=n.controller,r=n.topicKey;if(!(n.model.editingDescKey!==r)){var a="topic-desc-data-".concat(r);o.run("setTempValue",{key:a,value:t}),this.setState({content:t})}}}]),n}(Ad);var Hd=b()("plugin:StylePlugin");function Gd(){var e=new Map,t=0;return{getTopicStyle:function(e){var t=e.controller;return{contentStyle:t.run("getTopicContentStyle",e),linkStyle:t.run("getLinkStyle",e),subLinkStyle:t.run("getSubLinkStyle",e)}},getTopicContentStyle:function(e){var t=e.topicKey,n=e.model,o=e.controller;Hd("getTopicContentStyle:",t,n);var r,a=n.getTopicVisualLevel(t),c=n.config.theme;if(r=a===Sa?c.rootTopic:a===Ca?c.primaryTopic:c.normalTopic,r=Object(m.a)(Object(m.a)({},c.contentStyle),r.contentStyle),c.randomColor){var i=o.run("getRandomColor",e);r=Object(m.a)(Object(m.a)({},r),{},{background:i,borderColor:i,subLinkStyle:Object(m.a)(Object(m.a)({},r.subLinkStyle),{},{lineColor:i})})}var l=n.getTopic(t);if(!l.style)return r;var s=JSON.parse(l.style);return Object(m.a)(Object(m.a)({},r),s.contentStyle)},getLinkStyle:function(e){var t=e.topicKey,n=e.model,o=e.controller;Hd("getLinkStyle",t);var r,a=n.getTopicVisualLevel(t),c=n.config.theme,i=c.linkStyle;r=a===Sa?c.rootTopic.linkStyle:a===Ca?c.primaryTopic.linkStyle:c.normalTopic.linkStyle,i=Object(m.a)(Object(m.a)({},i),r);var l=n.getTopic(t);if(null!=l.parentKey){var s=o.run("getSubLinkStyle",Object(m.a)(Object(m.a)({},e),{},{topicKey:l.parentKey}));i=Object(m.a)(Object(m.a)({},i),s)}if(!l.style)return i;var u=JSON.parse(l.style);return Object(m.a)(Object(m.a)({},i),u.linkStyle)},getSubLinkStyle:function(e){var t=e.topicKey,n=e.model,o=e.controller;Hd("getLinkStyle",t);var r,a=n.getTopicVisualLevel(t),c=n.config.theme,i=c.linkStyle;r=a===Sa?c.rootTopic.subLinkStyle:a===Ca?c.primaryTopic.subLinkStyle:c.normalTopic.subLinkStyle,i=Object(m.a)(Object(m.a)({},i),r);var l=n.getTopic(t);if(c.randomColor){var s=o.run("getRandomColor",e);Hd(s),i=Object(m.a)(Object(m.a)({},i),{},{lineColor:s})}if(!l.style)return i;var u=JSON.parse(l.style);return Object(m.a)(Object(m.a)({},i),u.subLinkStyle)},setTopicContentStyle:function(e){var t=e.topicKey,n=e.controller,o=e.style,r=e.model.getTopic(t).style,a=r?JSON.parse(r):{},c=Object(m.a)(Object(m.a)({},a),{},{contentStyle:Object(m.a)(Object(m.a)({},a.contentStyle),o)});if(!Object(at.isEqual)(a,c)){var i=JSON.stringify(c);n.run("operation",Object(m.a)(Object(m.a)({},e),{},{opType:Ya,style:i}))}},setLinkStyle:function(e){var t=e.topicKey,n=e.controller,o=e.linkStyle,r=e.model.getTopic(t).style,a=r?JSON.parse(r):{},c=Object(m.a)(Object(m.a)({},a),{},{linkStyle:Object(m.a)(Object(m.a)({},a.linkStyle),o)});if(!Object(at.isEqual)(a,c)){var i=JSON.stringify(c);n.run("operation",Object(m.a)(Object(m.a)({},e),{},{opType:Ya,style:i}))}},setSubLinkStyle:function(e){var t=e.topicKey,n=e.controller,o=e.subLinkStyle,r=e.model.getTopic(t).style,a=r?JSON.parse(r):{},c=Object(m.a)(Object(m.a)({},a),{},{subLinkStyle:Object(m.a)(Object(m.a)({},a.subLinkStyle),o)});if(!Object(at.isEqual)(a,c)){var i=JSON.stringify(c);n.run("operation",Object(m.a)(Object(m.a)({},e),{},{opType:Ya,style:i}))}},getTopicThemeStyle:function(e){var t=e.topicKey,n=e.model,o=n.getTopicVisualLevel(t),r=n.config.theme;return o===Sa?r.rootTopic:o===Ca?r.primaryTopic:r.normalTopic},getRandomColor:function(n){var o=n.topicKey;if(e.has(o))return e.get(o);var r=["#00CC99","#FFEE88","#A167A5","#E5F993","#F5C396","#DB995A","#83BCFF","#ED7B84","#739E82","#D3BCC0","#FFA0FD","#EFD3D7","#C6878F"],a=r[++t%r.length];return e.set(o,a),Hd("getRandomColor",o,a),a}}}function Ud(){return[_d(),{getPartTopics:function(e){var t=e.layout,n=e.model,o=e.topicKey,r=n.getTopic(o),a=r.subKeys.size,c=r.subKeys.toArray();switch(t){case ja.LEFT_TO_RIGHT:return{R:c};case ja.RIGHT_TO_LEFT:return{L:c};case ja.LEFT_AND_RIGHT:return{L:c.slice(Math.ceil(a/2),a),R:c.slice(0,Math.ceil(a/2))};case ja.TOP_TO_BOTTOM:return{B:c}}},createSubTopics:function(e){var t=e.model,n=e.topicKey,o=e.controller,r=e.topics,a=e.saveRef,c=t.getTopic(n);if(0===r.size||c.collapse)return null;var i=[];return r.forEach((function(t){var n=Object(m.a)(Object(m.a)({},e),{},{topicKey:t,key:t,ref:a(kl(t))});i.push(o.run("renderTopicWidget",n))})),{subTopics:i}},layout:function(e){var t=e.getRef,n=e.model,o=t(xl(n.editorRootTopicKey)),r=t(Ll),a=t(_l);o&&o.layout(),r&&r.layout(),a&&a.layout(),function e(o){if(o.key!==n.editorRootTopicKey){var r=t(kl(o.key));r&&r.layoutLinks()}if(!o.collapse){var a,c=Object(O.a)(o.subKeys);try{for(c.s();!(a=c.n()).done;){var i=a.value;e(n.getTopic(i))}}catch(l){c.e(l)}finally{c.f()}}}(n.getTopic(n.editorRootTopicKey))},getRelativeRect:function(e){var t=e.element,n=e.controller,o=e.getRef,r=n.run("getZoomFactor",e);return xu(t,o(Rl).bigView,r)},getRelativeRectFromViewPort:function(e){var t=e.element,n=e.controller,o=e.getRef,r=n.run("getZoomFactor",e);return xu(t,o(Rl).viewBox,r)},getRelativeVectorFromViewPort:function(e){return wu(e.element,(0,e.getRef)(Rl).viewBox)},addZoomFactorChangeEventListener:function(e){e.controller.run("addTempValueChangeListener",Object(m.a)({key:"ZoomFactor"},e))},removeZoomFactorChangeEventListener:function(e){e.controller.run("removeTempValueChangeListener",Object(m.a)({key:"ZoomFactor"},e))},setZoomFactor:function(e){var t=e.controller,n=e.zoomFactor;return t.run("setTempValue",{key:"ZoomFactor",value:n})},getZoomFactor:function(e){return e.controller.run("getTempValue",{key:"ZoomFactor"})||1},moveTopicToCenter:function(e){var t=e.getRef,n=e.topicKey,o=e.model,r=e.moveDir,a=void 0===r?Ju:r;if(o.editorRootTopicKey!==n&&pc(o,n,o.editorRootTopicKey)!==Na)throw new Error("moveTopicToCenter error: topicKey ".concat(n," is not the DESCENDANT of editor root topic"));var c=t(El(n)),i=t(Rl),l=i.viewBox;if(!c||!l)throw new Error("moveTopicToCenter error: topic or viewBox is null");var s=wu(c,l);if(a===Wu)i.setViewBoxScrollDelta(s[0],s[1]);else if(a===Ju){var u=l.getBoundingClientRect(),p=c.getBoundingClientRect(),d=(u.width-p.width)/2;i.setViewBoxScrollDelta(s[0]+d-200,s[1])}},focusTopicAndMoveToCenter:function(e){var t=e.controller,n=e.topicKey;t.run("operation",Object(m.a)(Object(m.a)({},e),{},{opArray:[{opType:Ja,topicKey:n,focusMode:Da},{opType:Ha,topicKey:n}],allowUndo:!1,callback:function(o){return function(){t.run("moveTopicToCenter",Object(m.a)(Object(m.a)({},e),{},{model:o,topicKey:n}))}}}))}},Xu(),Gd(),Pu(),Zu(),{getValue:function(e,t){var n=e.propKey,o=e.controller,r=e.diagramState;switch(n){case Ml:return 3;case Al:case Bl:return o.run("isOperationEnabled",e);case Nl:return o.run("getTopicTitle",e);case Fl:return r.dragDrop;case Pl:return r.rightTopPanel}return t()}},{getTopicTitle:function(e){var t=e.model,n=e.controller,o=e.topicKey,r=e.maxLength,a=t.getTopic(o).getBlock(Ka).block,c=n.run("serializeBlockData",Object(m.a)(Object(m.a)({},e),{},{block:a}));return null!=r&&(c=c.length>r?c.substr(0,r)+"...":c),c},renderTopicContentEditor:function(e){return Object(o.createElement)(Pd,Object.assign({},e))},renderTopicDescEditor:function(e){return Object(o.createElement)(Vd,Object.assign({},e))},isBlockEmpty:function(e,t){var n=e.block,o=e.controller;return n.type===Ka||n.type===Ra?null==n.data||""===o.run("serializeBlockData",e):t()},serializeBlockData:function(e,t){var n=e.block;return n.type===Ka||n.type===Ra?"string"===typeof n.data?n.data:Ne.a.serialize(n.data):t()}},{createNewModel:function(e){return hc.createEmpty()}},{getThemeOfTopic:function(e){var t=e.model.config.theme,n=t.contentStyle,o=t.rootTopic,r=t.primaryTopic,a=t.normalTopic;return{rootTopic:Object(m.a)(Object(m.a)({},o),{},{contentStyle:Object(m.a)(Object(m.a)({},n),o.contentStyle)}),primaryTopic:Object(m.a)(Object(m.a)({},r),{},{contentStyle:Object(m.a)(Object(m.a)({},n),r.contentStyle)}),normalTopic:Object(m.a)(Object(m.a)({},a),{},{contentStyle:Object(m.a)(Object(m.a)({},n),a.contentStyle)})}}},Yu()]}b()("node:Diagram"),o.Component;var Wd=n(293),Jd=n.n(Wd),Zd=n(166),Yd=n.n(Zd),qd=function(e,t){return(qd=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(e,t)};function Xd(e,t){function n(){this.constructor=e}qd(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}var $d=function(){return($d=Object.assign||function(e){for(var t,n=1,o=arguments.length;n<o;n++)for(var r in t=arguments[n])Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r]);return e}).apply(this,arguments)};var Qd,ef=b()("node:topic-content-editor"),tf=d.default.div(Qd||(Qd=function(e,t){return Object.defineProperty?Object.defineProperty(e,"raw",{value:t}):e.raw=t,e}(["\n  ",";\n"],["\n  ",";\n"])),(function(e){return!e.readOnly&&"\n    // padding: 75px\n    // min-width: 150px\n    // min-height: 150px\n  "})),nf=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Xd(t,e),t.prototype.initState=function(){e.prototype.initState.call(this);var t=this.props,n=t.controller,o="topic-desc-data-"+t.topicKey,r=this.state.content;n.run("setTempValue",{key:o,value:r})},t.prototype.getCustomizeProps=function(){var e=this.props,t=e.model,n=e.topicKey;return{block:t.getTopic(n).getBlock(Ra).block,readOnly:t.editingDescKey!==n,getRefKeyFunc:jl,placeholder:"write topic notes here"}},t.prototype.onChange=function(e){var t=this.props,n=t.controller,o="topic-desc-data-"+t.topicKey;n.run("setTempValue",{key:o,value:e}),this.setState({content:e})},t}(function(e){function t(t){var n=e.call(this,t)||this;return n.onMouseDown=function(e){e.stopPropagation()},n.onMouseMove=function(e){e.stopPropagation()},n.rootRef=function(e){return function(t){e(t),n.root=t}},n._handleClick=function(e){!n.root.contains(e.target)&&n.onClickOutSide(e)},n.initState(),n}return Xd(t,e),t.prototype.initState=function(){this.state={content:this.getContent()}},t.prototype.getContent=function(){return this.getCustomizeProps().block.data},t.prototype.onChange=function(e){this.setState({content:e})},t.prototype.getCustomizeProps=function(){return null},t.prototype.componentDidMount=function(){document.addEventListener("click",this._handleClick)},t.prototype.componentWillUnmount=function(){document.removeEventListener("click",this._handleClick)},t.prototype.onClickOutSide=function(e){},t.prototype.render=function(){var e=this.props,t=e.topicKey,n=e.saveRef,r=this.getCustomizeProps(),a=r.readOnly,c=r.getRefKeyFunc,i=r.placeholder;ef("readOnly:",a);var l=a?this.getContent():this.state.content;if(null==l)return null;var s=c(t),u=this.onMouseDown,p=this.onMouseMove,d={editorValue:l,readOnly:a,onChange:this.onChange.bind(this),placeholder:i},f={key:s,ref:this.rootRef(n(s)),readOnly:a,onMouseDown:u,onMouseMove:p};return Object(o.createElement)(tf,$d({},f),Object(o.createElement)(Jd.a,$d({},d)))},t}(Ai)),of=new Yd.a;var rf=function(){return{renderTopicDescEditor:function(e){return Object(o.createElement)(nf,$d({},e))},isBlockEmpty:function(e,t){var n=e.block,o=e.controller;return n.type===Ka||n.type===Ra?null==n.data||""===o.run("serializeBlockData",e):t()},serializeBlockData:function(e,t){var n=e.block;return n.type===Ra?"string"===typeof n.data?n.data:of.serialize(n.data):t()}}};function af(e){return!0===(null!=(t=e)&&"object"===typeof t&&!1===Array.isArray(t))&&"[object Object]"===Object.prototype.toString.call(e);var t}var cf,lf=function(e){var t,n;return!1!==af(e)&&("function"===typeof(t=e.constructor)&&(!1!==af(n=t.prototype)&&!1!==n.hasOwnProperty("isPrototypeOf")))};!function(e){e[e.LEFT_TO_RIGHT=0]="LEFT_TO_RIGHT",e[e.RIGHT_TO_LEFT=1]="RIGHT_TO_LEFT",e[e.LEFT_AND_RIGHT=2]="LEFT_AND_RIGHT",e[e.TOP_TO_BOTTOM=3]="TOP_TO_BOTTOM"}(cf||(cf={}));var sf="CONTENT",uf="NORMAL",pf="EDITING_CONTENT",df="EDITING_DESC",ff=function(e){Object(s.a)(n,e);var t=Object(u.a)(n);function n(){return Object(i.a)(this,n),t.apply(this,arguments)}return Object(l.a)(n,[{key:"data",get:function(){return this.get("data")}},{key:"type",get:function(){return this.get("type")}}],[{key:"create",value:function(e){return new n(e)}},{key:"createList",value:function(e){if(T.List.isList(e)||Array.isArray(e))return Object(T.List)(e.map(n.create));throw new Error("Block.createList only accepts Array or List, but you passed it: ".concat(e))}}]),n}(Object(T.Record)({type:null,key:null,data:null}));var bf={readOnly:!1,allowUndo:!0,layoutDir:cf.LEFT_AND_RIGHT,theme:{name:"default",randomColor:!0,background:"rgb(57,60,65)",highlightColor:"#50C9CE",marginH:60,marginV:20,contentStyle:{lineHeight:"1.5"},linkStyle:{lineRadius:5,lineType:"curve",lineWidth:"3px"},rootTopic:{contentStyle:{fontSize:"34px",borderRadius:"35px",padding:"16px 18px 16px 18px"},subLinkStyle:{lineType:"curve",lineWidth:"3px",lineColor:"rgb(113, 203, 45)"}},primaryTopic:{contentStyle:{borderWidth:"1px",borderStyle:"solid",borderRadius:"20px",fontSize:"17px",padding:"10px 15px 10px 15px"},subLinkStyle:{lineType:"curve",lineWidth:"3px",lineColor:"rgb(113, 203, 45)"}},normalTopic:{contentStyle:{border:"1px solid #e8eaec",borderRadius:"20px",fontSize:"17px",padding:"4px 10px"},subLinkStyle:{lineType:"curve",lineWidth:"3px",lineColor:"white"}}}},yf=function(e){Object(s.a)(n,e);var t=Object(u.a)(n);function n(){return Object(i.a)(this,n),t.apply(this,arguments)}return Object(l.a)(n,[{key:"layoutDir",get:function(){return this.get("layoutDir")}},{key:"readOnly",get:function(){return this.get("readOnly")}},{key:"allowUndo",get:function(){return this.get("allowUndo")}},{key:"theme",get:function(){return this.get("theme")}}],[{key:"fromJSON",value:function(e){return new n(e)}}]),n}(Object(T.Record)(bf));function hf(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,(function(e){var t=16*Math.random()|0;return("x"===e?t:3&t|8).toString(16)}))}var gf=function(e){Object(s.a)(n,e);var t=Object(u.a)(n);function n(){return Object(i.a)(this,n),t.apply(this,arguments)}return Object(l.a)(n,[{key:"key",get:function(){return this.get("key")}},{key:"parentKey",get:function(){return this.get("parentKey")}},{key:"collapse",get:function(){return this.get("collapse")}},{key:"subKeys",get:function(){return this.get("subKeys")}},{key:"blocks",get:function(){return this.get("blocks")}},{key:"relations",get:function(){return this.get("relations")}},{key:"style",get:function(){return this.get("style")}},{key:"getBlock",value:function(e){var t=this.blocks.findIndex((function(t){return t.type===e}));return-1===t?{index:t,block:null}:{index:t,block:this.blocks.get(t)}}}],[{key:"fromJSON",value:function(e){var t=e.key,o=e.parentKey,r=void 0===o?null:o,a=e.blocks,c=e.subKeys,i=void 0===c?[]:c,l=e.collapse;return new n({key:t,parentKey:r,collapse:void 0!==l&&l,subKeys:Object(T.List)(i),blocks:ff.createList(a)})}},{key:"create",value:function(e){var t=e.key,o=e.parentKey,r=void 0===o?null:o,a=e.content,c=void 0===a?"":a,i=e.subKeys,l=void 0===i?[]:i,s=e.collapse,u=void 0!==s&&s,p=ff.create({type:sf,data:c,key:null});return new n({key:t,parentKey:r,blocks:Object(T.List)([p]),subKeys:Object(T.List)(l),collapse:u})}}]),n}(Object(T.Record)({key:null,parentKey:null,collapse:!1,subKeys:null,blocks:null,relations:null,style:null}));b()("modifier");var mf={topics:Object(T.Map)(),extData:Object(T.Map)(),config:new yf,rootTopicKey:null,editorRootTopicKey:null,focusKey:null,focusMode:null,formatVersion:null,zoomFactor:1},Of=function(e){Object(s.a)(n,e);var t=Object(u.a)(n);function n(){return Object(i.a)(this,n),t.apply(this,arguments)}return Object(l.a)(n,[{key:"toJS",value:function(){return{rootTopicKey:this.rootTopicKey,topics:Object.values(this.topics.toJS()),config:this.config,extData:this.extData,zoomFactor:this.zoomFactor}}},{key:"extData",get:function(){return this.get("extData")}},{key:"topics",get:function(){return this.get("topics")}},{key:"config",get:function(){return this.get("config")}},{key:"formatVersion",get:function(){return this.get("formatVersion")}},{key:"rootTopicKey",get:function(){return this.get("rootTopicKey")}},{key:"editorRootTopicKey",get:function(){return this.get("editorRootTopicKey")}},{key:"focusKey",get:function(){return this.get("focusKey")}},{key:"focusMode",get:function(){return this.get("focusMode")}},{key:"editingContentKey",get:function(){return this.focusMode===pf?this.focusKey:null}},{key:"editingDescKey",get:function(){return this.focusMode===df?this.focusKey:null}},{key:"getTopic",value:function(e){return this.topics.get(e)}},{key:"getExtDataItem",value:function(e,t){return this.extData.get(e)||new t}},{key:"getParentTopic",value:function(e){var t=this.getTopic(e);return t.parentKey?this.getTopic(t.parentKey):null}},{key:"getTopicVisualLevel",value:function(e){for(var t=this.getTopic(e),n=0;t&&t.key!==this.editorRootTopicKey;)n++,t=this.getParentTopic(t.key);return n}},{key:"rootTopic",get:function(){return this.getTopic(this.rootTopicKey)}},{key:"zoomFactor",get:function(){return this.get("zoomFactor")}}],[{key:"isModel",value:function(e){return e instanceof n}},{key:"create",value:function(){var e,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;if(null==t)return n.createEmpty();if(n.isModel(t)&&(e=t),lf(t)&&(e=n.fromJSON(t)),e)return null==e.focusKey&&(e=e.set("focusKey",e.rootTopicKey)),null==e.focusMode&&(e=e.set("focusMode",uf)),e;throw new Error("`Value.create` only accepts objects or values, but you passed it: ".concat(t))}},{key:"createEmpty",value:function(){var e=new n,t=gf.create({key:hf(),content:"RootTopic"});return e.update("topics",(function(e){return e.set(t.key,t)})).set("rootTopicKey",t.key).set("editorRootTopicKey",t.key).set("focusKey",t.key).set("focusMode",uf)}},{key:"fromJSON",value:function(e){var t=new n,o=e.topics,r=void 0===o?[]:o,a=e.config,c=void 0===a?{}:a,i=e.rootTopicKey,l=e.editorRootTopicKey;return void 0===l&&(l=i),t=(t=t.merge({rootTopicKey:i,editorRootTopicKey:l})).withMutations((function(e){r.forEach((function(t){e.update("topics",(function(e){return e.set(t.key,gf.fromJSON(t))}))})),e.set("config",yf.fromJSON(c))}))}}]),n}(Object(T.Record)(mf));b()("core:controller");var vf=function(){return(vf=Object.assign||function(e){for(var t,n=1,o=arguments.length;n<o;n++)for(var r in t=arguments[n])Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r]);return e}).apply(this,arguments)},Tf=b()("plugin:json-serializer");function jf(e){return!0===(null!=(t=e)&&"object"===typeof t&&!1===Array.isArray(t))&&"[object Object]"===Object.prototype.toString.call(e);var t}var kf=function(e){var t,n;return!1!==jf(e)&&("function"===typeof(t=e.constructor)&&(!1!==jf(n=t.prototype)&&!1!==n.hasOwnProperty("isPrototypeOf")))};var Ef;!function(e){e[e.LEFT_TO_RIGHT=0]="LEFT_TO_RIGHT",e[e.RIGHT_TO_LEFT=1]="RIGHT_TO_LEFT",e[e.LEFT_AND_RIGHT=2]="LEFT_AND_RIGHT",e[e.TOP_TO_BOTTOM=3]="TOP_TO_BOTTOM"}(Ef||(Ef={}));var xf="CONTENT",wf="NORMAL",Sf="EDITING_CONTENT",Cf="EDITING_DESC",Kf="ANCESTOR",Rf="DESCENDANT",Df="SIBLING",Lf="NONE",_f=function(e){Object(s.a)(n,e);var t=Object(u.a)(n);function n(){return Object(i.a)(this,n),t.apply(this,arguments)}return Object(l.a)(n,[{key:"data",get:function(){return this.get("data")}},{key:"type",get:function(){return this.get("type")}}],[{key:"create",value:function(e){return new n(e)}},{key:"createList",value:function(e){if(T.List.isList(e)||Array.isArray(e))return Object(T.List)(e.map(n.create));throw new Error("Block.createList only accepts Array or List, but you passed it: ".concat(e))}}]),n}(Object(T.Record)({type:null,key:null,data:null}));var If={name:"default",randomColor:!0,background:"rgb(57,60,65)",highlightColor:"#50C9CE",marginH:60,marginV:20,contentStyle:{lineHeight:"1.5"},linkStyle:{lineRadius:5,lineType:"curve",lineWidth:"3px"},rootTopic:{contentStyle:{fontSize:"34px",borderRadius:"35px",padding:"16px 18px 16px 18px"},subLinkStyle:{lineType:"curve",lineWidth:"3px",lineColor:"rgb(113, 203, 45)"}},primaryTopic:{contentStyle:{borderWidth:"1px",borderStyle:"solid",borderRadius:"20px",fontSize:"17px",padding:"10px 15px 10px 15px"},subLinkStyle:{lineType:"curve",lineWidth:"3px",lineColor:"rgb(113, 203, 45)"}},normalTopic:{contentStyle:{border:"1px solid #e8eaec",borderRadius:"20px",fontSize:"17px",padding:"4px 10px"},subLinkStyle:{lineType:"curve",lineWidth:"3px",lineColor:"white"}}},Mf={readOnly:!1,allowUndo:!0,layoutDir:Ef.LEFT_AND_RIGHT,theme:If},Af=function(e){Object(s.a)(n,e);var t=Object(u.a)(n);function n(){return Object(i.a)(this,n),t.apply(this,arguments)}return Object(l.a)(n,[{key:"layoutDir",get:function(){return this.get("layoutDir")}},{key:"readOnly",get:function(){return this.get("readOnly")}},{key:"allowUndo",get:function(){return this.get("allowUndo")}},{key:"theme",get:function(){return this.get("theme")}}],[{key:"fromJSON",value:function(e){return new n(e)}}]),n}(Object(T.Record)(Mf));function Nf(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,(function(e){var t=16*Math.random()|0;return("x"===e?t:3&t|8).toString(16)}))}var Ff=function(e){Object(s.a)(n,e);var t=Object(u.a)(n);function n(){return Object(i.a)(this,n),t.apply(this,arguments)}return Object(l.a)(n,[{key:"key",get:function(){return this.get("key")}},{key:"parentKey",get:function(){return this.get("parentKey")}},{key:"collapse",get:function(){return this.get("collapse")}},{key:"subKeys",get:function(){return this.get("subKeys")}},{key:"blocks",get:function(){return this.get("blocks")}},{key:"relations",get:function(){return this.get("relations")}},{key:"style",get:function(){return this.get("style")}},{key:"getBlock",value:function(e){var t=this.blocks.findIndex((function(t){return t.type===e}));return-1===t?{index:t,block:null}:{index:t,block:this.blocks.get(t)}}}],[{key:"fromJSON",value:function(e){var t=e.key,o=e.parentKey,r=void 0===o?null:o,a=e.blocks,c=e.subKeys,i=void 0===c?[]:c,l=e.collapse;return new n({key:t,parentKey:r,collapse:void 0!==l&&l,subKeys:Object(T.List)(i),blocks:_f.createList(a)})}},{key:"create",value:function(e){var t=e.key,o=e.parentKey,r=void 0===o?null:o,a=e.content,c=void 0===a?"":a,i=e.subKeys,l=void 0===i?[]:i,s=e.collapse,u=void 0!==s&&s,p=_f.create({type:xf,data:c,key:null});return new n({key:t,parentKey:r,blocks:Object(T.List)([p]),subKeys:Object(T.List)(l),collapse:u})}}]),n}(Object(T.Record)({key:null,parentKey:null,collapse:!1,subKeys:null,blocks:null,relations:null,style:null}));function Pf(e,t){var n=e.getTopic(t),o=[];if(n.subKeys.size>0){var r,a=n.subKeys.toArray();(r=o).push.apply(r,Object(v.a)(a)),o=a.reduce((function(t,n){return t.push.apply(t,Object(v.a)(Pf(e,n))),t}),o)}return o}var Bf=b()("modifier");function zf(e){var t=e.model,n=e.topicKey,o=e.focusMode;return Bf("focus topic"),n!==t.focusKey&&(t=t.set("focusKey",n)),o!==t.focusMode&&(t=t.set("focusMode",o)),t}var Vf={addChild:function(e){var t=e.model,n=e.topicKey;Bf("addChild:",n);var o=t.getTopic(n);if(o){var r=Ff.create({key:Nf(),parentKey:o.key});return o=o.set("collapse",!1).update("subKeys",(function(e){return e.push(r.key)})),zf({model:t=t.update("topics",(function(e){return e.set(n,o).set(r.key,r)})),topicKey:r.key,focusMode:Sf})}return t},addSibling:function(e){var t=e.model,n=e.topicKey;if(n===t.rootTopicKey)return t;var o=t.getTopic(n);if(o){var r=t.getTopic(o.parentKey),a=r.subKeys.indexOf(n),c=Ff.create({key:Nf(),parentKey:r.key});return zf({model:t=t.update("topics",(function(e){return e.set(c.key,c)})).updateIn(["topics",r.key,"subKeys"],(function(e){return e.insert(a+1,c.key)})),topicKey:c.key,focusMode:Sf})}return t},toggleCollapse:function(e){var t=e.model,n=e.topicKey,o=t.getTopic(n);return o&&0!==o.subKeys.size&&(o=o.merge({collapse:!o.collapse}),t=t.updateIn(["topics",o.key,"collapse"],(function(e){return!e}))),t=zf({model:t,topicKey:n,focusMode:wf})},collapseAll:function(e){var t=e.model,n=Pf(t,t.editorRootTopicKey);return Bf(t),t=zf({model:t=t.withMutations((function(e){n.forEach((function(t){e.setIn(["topics",t,"collapse"],!0)}))})),topicKey:t.editorRootTopicKey,focusMode:wf})},expandAll:function(e){var t=e.model,n=Pf(t,t.editorRootTopicKey);return Bf(t),t=t.withMutations((function(e){n.forEach((function(t){e.setIn(["topics",t,"collapse"],!1)}))})),Bf(t),t},expandTo:function(e){var t=e.model,n=e.topicKey,o=function(e,t){for(var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],o=[t],r=e.getTopic(t);r.parentKey;)n?o.push(r.parentKey):o.unshift(r.parentKey),r=e.getParentTopic(r.key);return o}(t,n).filter((function(e){return e!==n}));return function(e,t,n){var o=e.getTopic(t),r=e.getTopic(n);if(o&&r){if(o.parentKey==r.parentKey)return Df;for(var a=o;a.parentKey;){if(a.parentKey===r.key)return Rf;a=e.getParentTopic(a.key)}for(a=r;a.parentKey;){if(a.parentKey===o.key)return Kf;a=e.getParentTopic(a.key)}}return Lf}(t=t.withMutations((function(e){o.forEach((function(t){e.setIn(["topics",t,"collapse"],!1)}))})),n,t.editorRootTopicKey)!==Rf&&(t=t.set("editorRootTopicKey",t.rootTopicKey)),t},focusTopic:zf,setFocusMode:function(e){var t=e.model,n=e.focusMode;return Bf("setFocusMode"),n!==t.focusMode&&(t=t.set("focusMode",n)),t},deleteTopic:function(e){var t=e.model,n=e.topicKey;if(n===t.editorRootTopicKey)return t;var o=t.getTopic(n);return o&&(t=t.withMutations((function(e){e.update("topics",(function(e){e=e.delete(n);var o=Pf(t,n);return e=e.withMutations((function(e){o.forEach((function(t){e.delete(t)}))}))})),e.updateIn(["topics",o.parentKey,"subKeys"],(function(e){return e.delete(e.indexOf(n))})),e.focusKey===n&&e.set("focusKey",null).set("focusMode",null)}))),t},setBlockData:function(e){var t=e.model,n=e.topicKey,o=e.blockType,r=e.focusMode,a=e.data,c=t.getTopic(n);if(c){var i=c.getBlock(o),l=i.index,s=i.block;-1===l?t=t.updateIn(["topics",n,"blocks"],(function(e){return e.push(_f.create({type:o,data:a}))})):s.data!==a&&(t=t.updateIn(["topics",n,"blocks",l,"data"],(function(e){return a}))),r&&(t=zf({model:t,topicKey:n,focusMode:r}))}return t},deleteBlock:function(e){var t=e.model,n=e.topicKey,o=e.blockType,r=t.getTopic(n);if(r){var a=r.getBlock(o).index;-1!==a&&(t=t.updateIn(["topics",n,"blocks"],(function(e){return e.delete(a)}))),t=zf({model:t,topicKey:null,focusMode:null})}return t},setStyle:function(e){var t=e.model,n=e.topicKey,o=e.style,r=t.getTopic(n);return r&&o!==r.style&&(t=t.updateIn(["topics",n,"style"],(function(e){return o}))),t},clearAllCustomStyle:function(e){var t=e.model;return t=t.withMutations((function(e){e.topics.keySeq().forEach((function(t){e.setIn(["topics",t,"style"],null)}))}))},setTheme:function(e){var t=e.model,n=e.theme;return t=t.setIn(["config","theme"],n)},setLayoutDir:function(e){var t=e.model,n=e.layoutDir;return t.config.layoutDir===n?t:t=t.setIn(["config","layoutDir"],n)},setEditorRootTopicKey:function(e){var t=e.model,n=e.topicKey;return t.editorRootTopicKey!==n&&(t=t.set("editorRootTopicKey",n)),t.getTopic(n).collapse&&(t=t.setIn(["topics",n,"collapse"],!1)),t},setZoomFactor:function(e){var t=e.model,n=e.zoomFactor;return t.zoomFactor!==n&&(t=t.set("zoomFactor",n)),t}},Hf={topics:Object(T.Map)(),extData:Object(T.Map)(),config:new Af,rootTopicKey:null,editorRootTopicKey:null,focusKey:null,focusMode:null,formatVersion:null,zoomFactor:1};Object(T.Record)(Hf);b()("core:controller");var Gf={name:"default",randomColor:!0,background:"rgb(57,60,65)",highlightColor:"#50C9CE",marginH:60,marginV:20,contentStyle:{lineHeight:"1.5",fontSize:"16px"},linkStyle:{lineRadius:5,lineType:"curve",lineWidth:"3px"},rootTopic:{contentStyle:{fontSize:"36px"},subLinkStyle:{lineType:"curve",lineWidth:"3px"}},primaryTopic:{contentStyle:{fontSize:"24px"},subLinkStyle:{lineType:"curve",lineWidth:"3px"}},normalTopic:{subLinkStyle:{lineType:"curve",lineWidth:"3px"}}},Uf={name:"theme1",randomColor:!1,background:"rgb(250,245,205)",highlightColor:"#50C9CE",marginH:50,marginV:30,contentStyle:{lineHeight:"1.5"},linkStyle:{lineRadius:5},rootTopic:{contentStyle:{background:"rgb(221, 170, 68)",color:"#fff",fontSize:"34px",borderRadius:"5px",padding:"16px 18px 16px 18px"},subLinkStyle:{lineType:"curve",lineWidth:"2px",lineColor:"rgb(221, 170, 68)"}},primaryTopic:{contentStyle:{background:"#e8eaec",borderWidth:"2px",borderStyle:"solid",borderColor:"rgb(221, 170, 68)",borderRadius:"5px",fontSize:"17px",padding:"10px 15px 10px 15px"},subLinkStyle:{lineType:"curve",lineWidth:"2px",lineColor:"rgb(221, 170, 68)"}},normalTopic:{contentStyle:{background:"#fff",border:"1px solid #e8eaec",borderRadius:"20px",color:"rgb(187, 136, 34)",fontSize:"13px",padding:"4px 10px"},subLinkStyle:{lineType:"round",lineRadius:5,lineWidth:"1px",lineColor:"rgb(187, 136, 34)"}}},Wf={name:"theme2",randomColor:!1,background:"#f8f8f8",highlightColor:"#50C9CE",marginH:45,marginV:10,contentStyle:{lineHeight:"1.5"},linkStyle:{lineRadius:5},rootTopic:{contentStyle:{background:"#50C18A",color:"#fff",fontSize:"34px",borderRadius:"5px",padding:"16px 18px 16px 18px"},subLinkStyle:{lineType:"curve",lineWidth:"2px",lineColor:"#43a9ff"}},primaryTopic:{contentStyle:{background:"#ffffff",borderWidth:"1px",borderStyle:"solid",borderColor:"rgb(221, 170, 68)",borderRadius:"5px",color:"rgb(103,103,103)",fontSize:"14px",padding:"6px 10px 5px 10px"},subLinkStyle:{lineType:"round",lineRadius:5,lineWidth:"2px",lineColor:"#43a9ff"}},normalTopic:{contentStyle:{background:"#fff",borderRadius:"5px",color:"rgb(103,103,103)",fontSize:"13px",padding:"3px 9px 4px",boxShadow:"1px 1px 1px #ccc"},subLinkStyle:{lineType:"round",lineRadius:5,lineWidth:"1px",lineColor:"#43a9ff"}}},Jf={name:"theme3",randomColor:!1,background:"#A9DEF9",highlightColor:"#50C9CE",marginH:50,marginV:20,contentStyle:{lineHeight:"1.5"},linkStyle:{lineRadius:5},rootTopic:{contentStyle:{background:"#FF99C8",color:"#fff",fontSize:"34px",borderRadius:"5px",padding:"16px 18px 16px 18px"},subLinkStyle:{lineType:"curve",lineWidth:"2px",lineColor:"#43a9ff"}},primaryTopic:{contentStyle:{background:"#FCF6BD",borderWidth:"1px",borderStyle:"solid",borderColor:"#E4C1F9",borderRadius:"5px",color:"rgb(103,103,103)",fontSize:"14px",padding:"6px 10px 5px 10px"},subLinkStyle:{lineType:"curve",lineWidth:"2px",lineColor:"#43a9ff"}},normalTopic:{contentStyle:{background:"#E4FDE1",borderRadius:"5px",color:"rgb(103,103,103)",fontSize:"13px",padding:"3px 9px 4px",boxShadow:"1px 1px 1px #ccc"},subLinkStyle:{lineType:"round",lineRadius:5,lineWidth:"1px",lineColor:"#43a9ff"}}},Zf={name:"theme3",randomColor:!1,background:"#CCFBFE",highlightColor:"#50C9CE",marginH:50,marginV:20,contentStyle:{lineHeight:"1.5"},linkStyle:{lineRadius:5},rootTopic:{contentStyle:{background:"#CD8987",color:"#fff",fontSize:"34px",borderRadius:"5px",padding:"16px 18px 16px 18px"},subLinkStyle:{lineType:"curve",lineWidth:"2px",lineColor:"#43a9ff"}},primaryTopic:{contentStyle:{background:"#CDACA1",borderWidth:"1px",borderStyle:"solid",borderColor:"#E4C1F9",borderRadius:"5px",color:"rgb(103,103,103)",fontSize:"14px",padding:"6px 10px 5px 10px"},subLinkStyle:{lineType:"line",lineWidth:"2px",lineColor:"#43a9ff"}},normalTopic:{contentStyle:{background:"#CDCACC",borderRadius:"5px",color:"rgb(103,103,103)",fontSize:"13px",padding:"3px 9px 4px",boxShadow:"1px 1px 1px #ccc"},subLinkStyle:{lineType:"line",lineRadius:5,lineWidth:"1px",lineColor:"#43a9ff"}}};function Yf(e){return!0===(null!=(t=e)&&"object"===typeof t&&!1===Array.isArray(t))&&"[object Object]"===Object.prototype.toString.call(e);var t}var qf=function(e){var t,n;return!1!==Yf(e)&&("function"===typeof(t=e.constructor)&&(!1!==Yf(n=t.prototype)&&!1!==n.hasOwnProperty("isPrototypeOf")))};var Xf,$f=function(e,t){},Qf="L",eb="R",tb="M";!function(e){e[e.LEFT_TO_RIGHT=0]="LEFT_TO_RIGHT",e[e.RIGHT_TO_LEFT=1]="RIGHT_TO_LEFT",e[e.LEFT_AND_RIGHT=2]="LEFT_AND_RIGHT",e[e.TOP_TO_BOTTOM=3]="TOP_TO_BOTTOM"}(Xf||(Xf={}));var nb=0,ob=1,rb="CONTENT",ab="DESC",cb="NORMAL",ib="EDITING_CONTENT",lb="EDITING_DESC",sb="SHOW_POPUP",ub="DRAGGING",pb="ANCESTOR",db="DESCENDANT",fb="SIBLING",bb="NONE",yb="TOGGLE_COLLAPSE",hb="COLLAPSE_ALL",gb="EXPAND_ALL",mb="EXPAND_TO",Ob="ADD_CHILD",vb="ADD_SIBLING",Tb="DELETE_TOPIC",jb="FOCUS_TOPIC",kb="SET_FOCUS_MODE",Eb="SET_STYLE",xb="CLEAR_ALL_CUSTOM_STYLE",wb="SET_THEME",Sb="SET_TOPIC_BLOCK",Cb="DELETE_TOPIC_BLOCK",Kb="START_EDITING_CONTENT",Rb="START_EDITING_DESC",Db="DRAG_AND_DROP",Lb="SET_EDITOR_ROOT",_b="SET_LAYOUT_DIR",Ib=function(e){Object(s.a)(n,e);var t=Object(u.a)(n);function n(){return Object(i.a)(this,n),t.apply(this,arguments)}return Object(l.a)(n,[{key:"data",get:function(){return this.get("data")}},{key:"type",get:function(){return this.get("type")}}],[{key:"create",value:function(e){return new n(e)}},{key:"createList",value:function(e){if(T.List.isList(e)||Array.isArray(e))return Object(T.List)(e.map(n.create));throw new Error("Block.createList only accepts Array or List, but you passed it: ".concat(e))}}]),n}(Object(T.Record)({type:null,key:null,data:null}));var Mb={readOnly:!1,allowUndo:!0,layoutDir:Xf.LEFT_AND_RIGHT,theme:{name:"default",randomColor:!0,background:"rgb(57,60,65)",highlightColor:"#50C9CE",marginH:60,marginV:20,contentStyle:{lineHeight:"1.5"},linkStyle:{lineRadius:5,lineType:"curve",lineWidth:"3px"},rootTopic:{contentStyle:{fontSize:"34px",borderRadius:"35px",padding:"16px 18px 16px 18px"},subLinkStyle:{lineType:"curve",lineWidth:"3px",lineColor:"rgb(113, 203, 45)"}},primaryTopic:{contentStyle:{borderWidth:"1px",borderStyle:"solid",borderRadius:"20px",fontSize:"17px",padding:"10px 15px 10px 15px"},subLinkStyle:{lineType:"curve",lineWidth:"3px",lineColor:"rgb(113, 203, 45)"}},normalTopic:{contentStyle:{border:"1px solid #e8eaec",borderRadius:"20px",fontSize:"17px",padding:"4px 10px"},subLinkStyle:{lineType:"curve",lineWidth:"3px",lineColor:"white"}}}},Ab=function(e){Object(s.a)(n,e);var t=Object(u.a)(n);function n(){return Object(i.a)(this,n),t.apply(this,arguments)}return Object(l.a)(n,[{key:"layoutDir",get:function(){return this.get("layoutDir")}},{key:"readOnly",get:function(){return this.get("readOnly")}},{key:"allowUndo",get:function(){return this.get("allowUndo")}},{key:"theme",get:function(){return this.get("theme")}}],[{key:"fromJSON",value:function(e){return new n(e)}}]),n}(Object(T.Record)(Mb));function Nb(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,(function(e){var t=16*Math.random()|0;return("x"===e?t:3&t|8).toString(16)}))}var Fb=function(e){Object(s.a)(n,e);var t=Object(u.a)(n);function n(){return Object(i.a)(this,n),t.apply(this,arguments)}return Object(l.a)(n,[{key:"key",get:function(){return this.get("key")}},{key:"parentKey",get:function(){return this.get("parentKey")}},{key:"collapse",get:function(){return this.get("collapse")}},{key:"subKeys",get:function(){return this.get("subKeys")}},{key:"blocks",get:function(){return this.get("blocks")}},{key:"relations",get:function(){return this.get("relations")}},{key:"style",get:function(){return this.get("style")}},{key:"getBlock",value:function(e){var t=this.blocks.findIndex((function(t){return t.type===e}));return-1===t?{index:t,block:null}:{index:t,block:this.blocks.get(t)}}}],[{key:"fromJSON",value:function(e){var t=e.key,o=e.parentKey,r=void 0===o?null:o,a=e.blocks,c=e.subKeys,i=void 0===c?[]:c,l=e.collapse;return new n({key:t,parentKey:r,collapse:void 0!==l&&l,subKeys:Object(T.List)(i),blocks:Ib.createList(a)})}},{key:"create",value:function(e){var t=e.key,o=e.parentKey,r=void 0===o?null:o,a=e.content,c=void 0===a?"":a,i=e.subKeys,l=void 0===i?[]:i,s=e.collapse,u=void 0!==s&&s,p=Ib.create({type:rb,data:c,key:null});return new n({key:t,parentKey:r,blocks:Object(T.List)([p]),subKeys:Object(T.List)(l),collapse:u})}}]),n}(Object(T.Record)({key:null,parentKey:null,collapse:!1,subKeys:null,blocks:null,relations:null,style:null}));function Pb(e,t){var n=e.getTopic(t),o=[];if(n.subKeys.size>0){var r,a=n.subKeys.toArray();(r=o).push.apply(r,Object(v.a)(a)),o=a.reduce((function(t,n){return t.push.apply(t,Object(v.a)(Pb(e,n))),t}),o)}return o}function Bb(e,t,n){var o=e.getTopic(t),r=e.getTopic(n);if(o&&r){if(o.parentKey==r.parentKey)return fb;for(var a=o;a.parentKey;){if(a.parentKey===r.key)return db;a=e.getParentTopic(a.key)}for(a=r;a.parentKey;){if(a.parentKey===o.key)return pb;a=e.getParentTopic(a.key)}}return bb}var zb=b()("modifier");function Vb(e){var t=e.model,n=e.topicKey,o=e.focusMode;return zb("focus topic"),n!==t.focusKey&&(t=t.set("focusKey",n)),o!==t.focusMode&&(t=t.set("focusMode",o)),t}var Hb={addChild:function(e){var t=e.model,n=e.topicKey;zb("addChild:",n);var o=t.getTopic(n);if(o){var r=Fb.create({key:Nb(),parentKey:o.key});return o=o.set("collapse",!1).update("subKeys",(function(e){return e.push(r.key)})),Vb({model:t=t.update("topics",(function(e){return e.set(n,o).set(r.key,r)})),topicKey:r.key,focusMode:ib})}return t},addSibling:function(e){var t=e.model,n=e.topicKey;if(n===t.rootTopicKey)return t;var o=t.getTopic(n);if(o){var r=t.getTopic(o.parentKey),a=r.subKeys.indexOf(n),c=Fb.create({key:Nb(),parentKey:r.key});return Vb({model:t=t.update("topics",(function(e){return e.set(c.key,c)})).updateIn(["topics",r.key,"subKeys"],(function(e){return e.insert(a+1,c.key)})),topicKey:c.key,focusMode:ib})}return t},toggleCollapse:function(e){var t=e.model,n=e.topicKey,o=t.getTopic(n);return o&&0!==o.subKeys.size&&(o=o.merge({collapse:!o.collapse}),t=t.updateIn(["topics",o.key,"collapse"],(function(e){return!e}))),t=Vb({model:t,topicKey:n,focusMode:cb})},collapseAll:function(e){var t=e.model,n=Pb(t,t.editorRootTopicKey);return zb(t),t=Vb({model:t=t.withMutations((function(e){n.forEach((function(t){e.setIn(["topics",t,"collapse"],!0)}))})),topicKey:t.editorRootTopicKey,focusMode:cb})},expandAll:function(e){var t=e.model,n=Pb(t,t.editorRootTopicKey);return zb(t),t=t.withMutations((function(e){n.forEach((function(t){e.setIn(["topics",t,"collapse"],!1)}))})),zb(t),t},expandTo:function(e){var t=e.model,n=e.topicKey,o=function(e,t){for(var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],o=[t],r=e.getTopic(t);r.parentKey;)n?o.push(r.parentKey):o.unshift(r.parentKey),r=e.getParentTopic(r.key);return o}(t,n).filter((function(e){return e!==n}));return Bb(t=t.withMutations((function(e){o.forEach((function(t){e.setIn(["topics",t,"collapse"],!1)}))})),n,t.editorRootTopicKey)!==db&&(t=t.set("editorRootTopicKey",t.rootTopicKey)),t},focusTopic:Vb,setFocusMode:function(e){var t=e.model,n=e.focusMode;return zb("setFocusMode"),n!==t.focusMode&&(t=t.set("focusMode",n)),t},deleteTopic:function(e){var t=e.model,n=e.topicKey;if(n===t.editorRootTopicKey)return t;var o=t.getTopic(n);return o&&(t=t.withMutations((function(e){e.update("topics",(function(e){e=e.delete(n);var o=Pb(t,n);return e=e.withMutations((function(e){o.forEach((function(t){e.delete(t)}))}))})),e.updateIn(["topics",o.parentKey,"subKeys"],(function(e){return e.delete(e.indexOf(n))})),e.focusKey===n&&e.set("focusKey",null).set("focusMode",null)}))),t},setBlockData:function(e){var t=e.model,n=e.topicKey,o=e.blockType,r=e.focusMode,a=e.data,c=t.getTopic(n);if(c){var i=c.getBlock(o),l=i.index,s=i.block;-1===l?t=t.updateIn(["topics",n,"blocks"],(function(e){return e.push(Ib.create({type:o,data:a}))})):s.data!==a&&(t=t.updateIn(["topics",n,"blocks",l,"data"],(function(e){return a}))),r&&(t=Vb({model:t,topicKey:n,focusMode:r}))}return t},deleteBlock:function(e){var t=e.model,n=e.topicKey,o=e.blockType,r=t.getTopic(n);if(r){var a=r.getBlock(o).index;-1!==a&&(t=t.updateIn(["topics",n,"blocks"],(function(e){return e.delete(a)}))),t=Vb({model:t,topicKey:null,focusMode:null})}return t},setStyle:function(e){var t=e.model,n=e.topicKey,o=e.style,r=t.getTopic(n);return r&&o!==r.style&&(t=t.updateIn(["topics",n,"style"],(function(e){return o}))),t},clearAllCustomStyle:function(e){var t=e.model;return t=t.withMutations((function(e){e.topics.keySeq().forEach((function(t){e.setIn(["topics",t,"style"],null)}))}))},setTheme:function(e){var t=e.model,n=e.theme;return t=t.setIn(["config","theme"],n)},setLayoutDir:function(e){var t=e.model,n=e.layoutDir;return t.config.layoutDir===n?t:t=t.setIn(["config","layoutDir"],n)},setEditorRootTopicKey:function(e){var t=e.model,n=e.topicKey;return t.editorRootTopicKey!==n&&(t=t.set("editorRootTopicKey",n)),t.getTopic(n).collapse&&(t=t.setIn(["topics",n,"collapse"],!1)),t},setZoomFactor:function(e){var t=e.model,n=e.zoomFactor;return t.zoomFactor!==n&&(t=t.set("zoomFactor",n)),t}},Gb={topics:Object(T.Map)(),extData:Object(T.Map)(),config:new Ab,rootTopicKey:null,editorRootTopicKey:null,focusKey:null,focusMode:null,formatVersion:null,zoomFactor:1},Ub=function(e){Object(s.a)(n,e);var t=Object(u.a)(n);function n(){return Object(i.a)(this,n),t.apply(this,arguments)}return Object(l.a)(n,[{key:"toJS",value:function(){return{rootTopicKey:this.rootTopicKey,topics:Object.values(this.topics.toJS()),config:this.config,extData:this.extData,zoomFactor:this.zoomFactor}}},{key:"extData",get:function(){return this.get("extData")}},{key:"topics",get:function(){return this.get("topics")}},{key:"config",get:function(){return this.get("config")}},{key:"formatVersion",get:function(){return this.get("formatVersion")}},{key:"rootTopicKey",get:function(){return this.get("rootTopicKey")}},{key:"editorRootTopicKey",get:function(){return this.get("editorRootTopicKey")}},{key:"focusKey",get:function(){return this.get("focusKey")}},{key:"focusMode",get:function(){return this.get("focusMode")}},{key:"editingContentKey",get:function(){return this.focusMode===ib?this.focusKey:null}},{key:"editingDescKey",get:function(){return this.focusMode===lb?this.focusKey:null}},{key:"getTopic",value:function(e){return this.topics.get(e)}},{key:"getExtDataItem",value:function(e,t){return this.extData.get(e)||new t}},{key:"getParentTopic",value:function(e){var t=this.getTopic(e);return t.parentKey?this.getTopic(t.parentKey):null}},{key:"getTopicVisualLevel",value:function(e){for(var t=this.getTopic(e),n=0;t&&t.key!==this.editorRootTopicKey;)n++,t=this.getParentTopic(t.key);return n}},{key:"rootTopic",get:function(){return this.getTopic(this.rootTopicKey)}},{key:"zoomFactor",get:function(){return this.get("zoomFactor")}}],[{key:"isModel",value:function(e){return e instanceof n}},{key:"create",value:function(){var e,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;if(null==t)return n.createEmpty();if(n.isModel(t)&&(e=t),qf(t)&&(e=n.fromJSON(t)),e)return null==e.focusKey&&(e=e.set("focusKey",e.rootTopicKey)),null==e.focusMode&&(e=e.set("focusMode",cb)),e;throw new Error("`Value.create` only accepts objects or values, but you passed it: ".concat(t))}},{key:"createEmpty",value:function(){var e=new n,t=Fb.create({key:Nb(),content:"RootTopic"});return e.update("topics",(function(e){return e.set(t.key,t)})).set("rootTopicKey",t.key).set("editorRootTopicKey",t.key).set("focusKey",t.key).set("focusMode",cb)}},{key:"fromJSON",value:function(e){var t=new n,o=e.topics,r=void 0===o?[]:o,a=e.config,c=void 0===a?{}:a,i=e.rootTopicKey,l=e.editorRootTopicKey;return void 0===l&&(l=i),t=(t=t.merge({rootTopicKey:i,editorRootTopicKey:l})).withMutations((function(e){r.forEach((function(t){e.update("topics",(function(e){return e.set(t.key,Fb.fromJSON(t))}))})),e.set("config",Ab.fromJSON(c))}))}}]),n}(Object(T.Record)(Gb));function Wb(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.plugins,n=void 0===t?[]:t;return Object(v.a)(n)}b()("core:controller");function Jb(e,t){if(Array.isArray(t))t.forEach((function(t){return Jb(e,t)}));else if(null!=t)for(var n in t){var o=t[n];e.middleware[n]=e.middleware[n]||[],e.middleware[n].push(o)}}function Zb(e){if(!Array.isArray(e))throw new TypeError("Middleware stack must be an array!");var t,n=Object(O.a)(e);try{for(n.s();!(t=n.n()).done;){if("function"!==typeof t.value)throw new TypeError("Middleware must be composed of functions!")}}catch(o){n.e(o)}finally{n.f()}return function(t,n){var r=-1;return function a(c){if(c<=r)throw new Error("next() called multiple times");r=c;var i=e[c];c===e.length&&(i=n);if(!i)return null;try{return i(t,a.bind(null,c+1))}catch(o){throw o}}(0)}}var Yb,qb,Xb,$b,Qb,ey,ty,ny,oy,ry,ay,cy,iy,ly,sy,uy,py,dy,fy,by,yy,hy,gy,my,Oy,vy,Ty,jy,ky,Ey,xy,wy,Sy,Cy,Ky,Ry,Dy,Ly,_y,Iy,My,Ay,Ny,Fy,Py,By,zy,Vy,Hy,Gy,Uy,Wy,Jy,Zy,Yy,qy,Xy,$y=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};Object(i.a)(this,e);var n=t.plugins,o=void 0===n?[]:n,r=t.onChange,a=t.readOnly;this.readOnly=a,this.onChange=r,this.middleware=new Map;var c=Wb({plugins:o});Jb(this,c)}return Object(l.a)(e,[{key:"run",value:function(e){var t=this.middleware,n=t[e]||[];$f(0!==n.length,"the middleware function ".concat(e," is not found!"));for(var o=Object(E.a)(Zb)(n),r=arguments.length,a=new Array(r>1?r-1:0),c=1;c<r;c++)a[c-1]=arguments[c];return o.apply(void 0,a)}},{key:"getValue",value:function(e,t){return this.run("getValue",Object(m.a)(Object(m.a)({},t),{},{propKey:e}))}},{key:"change",value:function(e,t){this.onChange(e,t),this.currentModel=e}}]),e}(),Qy=(n(761),["title"]),eh=["layout","title"],th=["layout","title"],nh=["controller","children","onClick"],oh=["text"],rh=function(e){Object(s.a)(n,e);var t=Object(u.a)(n);function n(e){return Object(i.a)(this,n),t.call(this,e)}return Object(l.a)(n,[{key:"operation",value:function(e,t){this.props.controller.run("operation",Object(m.a)({opType:e},t))}},{key:"run",value:function(e,t){this.props.controller.run(e,t)}},{key:"topic",get:function(){return this.props.model.getTopic(this.props.topicKey)}}]),n}(o.Component),ah=b()("node:drag-scroll-widget"),ch=d.default.div(Yb||(Yb=Object(Ri.a)(["\n  position: relative;\n  width: 100%;\n  height: 100%;\n  overflow: scroll;\n"]))),ih=d.default.div(qb||(qb=Object(Ri.a)(["\n  position: relative;\n  width: max-content;\n"]))),lh=function(e){Object(s.a)(n,e);var t=Object(u.a)(n);function n(e){var o;return Object(i.a)(this,n),(o=t.call(this,e)).contentResizeCallback=function(e,t){if(o.oldContentRect){var n={width:o.content.clientWidth+2*o.viewBox.clientWidth,height:o.content.clientHeight+2*o.viewBox.clientHeight};o.bigView.style.width=n.width+"px",o.bigView.style.height=n.height+"px"}o.oldContentRect=e[0].contentRect},o.contentResizeObserver=new p.a(o.contentResizeCallback),o.contentRef=function(e){e&&(o.content=e,o.contentResizeObserver.observe(o.content))},o.viewBoxRef=function(e){e&&(o.viewBox=e,o.props.enableMouseWheel||(ah("addEventListener onwheel"),o.viewBox.addEventListener("wheel",(function(e){ah("onwheel"),(e.ctrlKey||e.altKey)&&e.preventDefault()}),{passive:!1})),o.setViewBoxScroll(o.viewBox.clientWidth,o.viewBox.clientHeight))},o.bigViewRef=function(e){e&&(o.bigView=e)},o.setWidgetStyle=function(){o.content&&o.viewBox&&o.bigView&&(o.bigView.style.width=2*(o.content.clientWidth+o.viewBox.clientWidth)+"px",o.bigView.style.height=2*(o.content.clientHeight+o.viewBox.clientHeight)+"px",o.content.style.left=o.viewBox.clientWidth+"px",o.content.style.top=o.viewBox.clientHeight+"px")},o.setViewBoxScroll=function(e,t){ah("setViewBoxScroll ".concat(e," ").concat(t)),o.viewBox&&(o.viewBox.scrollLeft=e,o.viewBox.scrollTop=t)},o.setViewBoxScrollDelta=function(e,t){ah("setViewBoxScrollDelta ".concat(e," ").concat(t)),o.viewBox&&(o.viewBox.scrollLeft+=e,o.viewBox.scrollTop+=t)},o.onMouseDown=function(e){var t=o.props,n=t.mouseKey,r=t.needKeyPressed,a=t.canDragFunc;if((!a||a())&&(0===e.button&&"left"===n||2===e.button&&"right"===n)){if(r&&!e.ctrlKey)return;o._lastCoordX=o.viewBox.scrollLeft+e.nativeEvent.clientX,o._lastCoordY=o.viewBox.scrollTop+e.nativeEvent.clientY;var c=o.viewBox;c.addEventListener("mousemove",o.onMouseMove),c.addEventListener("mouseup",o.onMouseUp)}},o.onMouseUp=function(e){var t=o.viewBox;t.removeEventListener("mousemove",o.onMouseMove),t.removeEventListener("mouseup",o.onMouseUp)},o.onMouseMove=function(e){o.viewBox.scrollLeft=o._lastCoordX-e.clientX,o.viewBox.scrollTop=o._lastCoordY-e.clientY},o.handleContextMenu=function(e){e.preventDefault()},o.state={widgetStyle:{width:"10000px",height:"10000px"}},o}return Object(l.a)(n,[{key:"componentDidMount",value:function(){this.setWidgetStyle(),document.addEventListener("contextmenu",this.handleContextMenu)}},{key:"componentWillUnmount",value:function(){document.removeEventListener("contextmenu",this.handleContextMenu)}},{key:"setZoomFactor",value:function(e){this.bigView.style.transform="scale(".concat(e,")"),this.bigView.style.transformOrigin="50% 50%"}},{key:"render",value:function(){var e=Object(m.a)({},this.state.widgetStyle);return Object(o.createElement)(ch,{ref:this.viewBoxRef,onMouseDown:this.onMouseDown},Object(o.createElement)("div",{style:e,ref:this.bigViewRef},Object(o.createElement)(ih,{ref:this.contentRef,style:this.state.contentStyle},this.props.children(this.setViewBoxScroll,this.setViewBoxScrollDelta))))}}]),n}(o.Component);lh.defaultProps={mouseKey:"left",needKeyPressed:!1};var sh=b()("node:save-ref"),uh=function(e){Object(s.a)(n,e);var t=Object(u.a)(n);function n(){var e;return Object(i.a)(this,n),(e=t.apply(this,arguments)).getRef=function(t){return sh(Object(Ki.a)(e)),e[t]},e.saveRef=function(t){return function(n){n&&(e[t]=n,e.fireListener(t,n))}},e.deleteRef=function(t){sh("deleteRef:",t),delete e[t]},e.observers=new Map,e.fireListener=function(t,n){if(e.observers.has(t)){var o,r=e.observers.get(t),a=Object(O.a)(r);try{for(a.s();!(o=a.n()).done;){(0,o.value)(t,n)}}catch(c){a.e(c)}finally{a.f()}}},e.registerRefListener=function(t,n){e.observers.has(t)?e.observers.get(t).push(n):e.observers.set(t,[n])},e}return Object(l.a)(n,[{key:"render",value:function(){return this.props.children(this.saveRef,this.getRef,this.deleteRef,this.registerRefListener.bind(this))}}]),n}(o.Component),ph=d.default.div(Xb||(Xb=Object(Ri.a)(["\n  display: flex;\n  flex-direction: ",";\n  align-items: ",";\n  justify-content: ",";\n"])),(function(e){return e.flexDirection?e.flexDirection:"row"}),(function(e){return e.alignItems}),(function(e){return e.justifyContent})),dh=d.default.div($b||($b=Object(Ri.a)(["\n  margin: ",";\n"])),(function(e){return e.margin})),fh=d.default.a(Qb||(Qb=Object(Ri.a)(["\n  font-size: 20px !important;\n"]))),bh=d.default.div(ey||(ey=Object(Ri.a)(["\n  padding: 5px;\n  cursor: pointer;\n"]))),yh=d.default.div(ty||(ty=Object(Ri.a)(["\n  cursor: pointer;\n  &:hover {\n    color: #1ea7fd;\n  }\n"]))),hh=Object(d.default)(y.e)(ny||(ny=Object(Ri.a)(["\n  margin-bottom: 0px !important;\n"]))),gh=Object(d.default)(yh)(oy||(oy=Object(Ri.a)(["\n  position: absolute;\n  right: 5px;\n  top: 5px;\n  //padding: 5px;\n"]))),mh=d.default.div(ry||(ry=Object(Ri.a)(["\n  height: 16px;\n"]))),Oh=d.default.span(ay||(ay=Object(Ri.a)(["\n  margin: 0px 10px;\n  &:hover {\n    color: palevioletred;\n  }\n"]))),vh=d.default.div(cy||(cy=Object(Ri.a)(["\n  z-index: ",";\n"])),(function(e){return e.zIndex})),Th=d.default.div(iy||(iy=Object(Ri.a)(["\n  min-width: 380px;\n  max-width: 482px;\n  max-height: 470px;\n  overflow: auto;\n"]))),jh=d.default.div(ly||(ly=Object(Ri.a)(["\n  position: absolute;\n  left: 0;\n  top: 0;\n  width: 100%;\n  height: 100%;\n"]))),kh=(d.default.div(sy||(sy=Object(Ri.a)(["\n  max-height: ",";\n  overflow-y: auto;\n  overflow-x: hidden;\n"])),(function(e){return e.maxHeight||"300px"})),d.default.div(uy||(uy=Object(Ri.a)(["\n  margin-top: 10px;\n  margin-bottom: 5px;\n  font-weight: bold;\n"])))),Eh=d.default.span(py||(py=Object(Ri.a)(["\n  margin: 0 10px 0 2px;\n"]))),xh=d.default.div(dy||(dy=Object(Ri.a)(["\n  padding: 10px;\n  margin: 0 0 10px 0;\n  border: rgba(16, 22, 26, 0.15) solid 1px;\n  border-radius: 5px;\n"]))),wh=Object(d.default)(Eh)(fy||(fy=Object(Ri.a)([""]))),Sh=d.default.div(by||(by=Object(Ri.a)(["\n  display: flex;\n  align-items: center;\n  //justify-content: center;\n  margin: 5px 0;\n"]))),Ch=d.default.div(yy||(yy=Object(Ri.a)(["\n  height: 3px;\n  width: 80%;\n  margin-left: 10%;\n  margin-right: 10%;\n  margin-bottom: 2px;\n  background: ",";\n"])),(function(e){return e.color})),Kh=d.default.div(hy||(hy=Object(Ri.a)(["\n  border: 1px solid grey;\n  cursor: pointer;\n  font-weight: bold;\n"]))),Rh="show-menu",Dh="close",Lh="color-picker",_h="notes",Ih="plus",Mh="minus",Ah="collapse",Nh="expand",Fh="center",Ph="trash",Bh="layout-left-and-right";function zh(e){return"icon iconfont bm-".concat(e)}function Vh(e){return Object(o.createElement)("span",{className:zh(e)})}function Hh(e){return"content-".concat(e)}function Gh(e){return"content-editor-".concat(e)}function Uh(e){return"desc-editor-".concat(e)}function Wh(e){return"topic-widget-".concat(e)}function Jh(e){return"topic-".concat(e)}function Zh(e){return"links-".concat(e)}function Yh(e){return"links-svg-".concat(e)}function qh(e){return"collapse-".concat(e)}function Xh(e,t){return"dropArea-".concat(t,"-").concat(e)}var $h="DIAGRAM-ROOT",Qh="DragScrollWidget",eg="svg-highlight",tg="focus-highlight",ng="drop-effect",og="CENTER_ROOT_TOPIC",rg="DIAGRAM_CUSTOMIZE_BASE_Z_INDEX",ag="TOPIC_CONTEXT_MENU_ENABLED",cg="TOPIC_TITLE",ig="DRAG_DROP_STATE",lg="RIGHT_TOP_PANEL_STATE",sg="OPERATION_ENABLED",ug="CONFIRM",pg="CANCEL",dg="DEFAULT",fg="SEARCH",bg="LEFT_AND_RIGHT",yg="ONLY_LEFT",hg="ONLY_RIGHT",gg="EDIT",mg="ADD_SIBLING",Og="ADD_CHILD",vg="EDIT_NOTES",Tg="DELETE",jg="SET_AS_EDITOR_ROOT",kg="EDIT_TOPOLOGY_DIAGRAM",Eg="SET_TOPIC_REFERENCES",xg="TOPIC_STYLE",wg="STYLE",Sg="TEXT_EDITOR",Cg="LINK",Kg="LINK_TO_PARENT",Rg="SUB_LINKS",Dg="COPY_STYLE",Lg="PASTE_STYLE",_g="CLEAR_TOPIC_STYLE",Ig="CLEAR_ALL_CUSTOM_STYLE",Mg="LINE_TYPE",Ag="THEME",Ng="GLOBAL",Fg="HIGHLIGHT",Pg="RANDOM_COLOR",Bg="NORMAL_TOPIC",zg="PRIMARY_TOPIC",Vg="ROOT_TOPIC",Hg="EXPORT_THEME",Gg="IMPORT_THEME",Ug="TAGS",Wg="TAGS_MANAGER",Jg="TAG_NAME",Zg="ADD_TAG",Yg="UPDATE_TAG",qg="ALREADY_ADDED",Xg="CAN_BE_ADDED",$g="TOPICS_THAT_USE_THIS_TAG",Qg="BACKGROUND",em="COLOR",tm="BORDER",nm="WIDTH",om="RADIUS",rm="FONT_SIZE",am="LINE_HEIGHT",cm="PADDING",im="TOP",lm="BOTTOM",sm="LEFT",um="RIGHT",pm="NONE",dm="SOLID",fm="DOTTED",bm="DASHED",ym="DOUBLE",hm="ROUND",gm="CURVE",mm="LINE",Om="COLLAPSE_ALL",vm="EXPAND_ALL",Tm="CENTER_ROOT_TOPIC",jm="ZOOM",km="ZOOM_IN",Em="ZOOM_OUT",xm="RESET",wm="RESET_ZOOM",Sm="NOTE_PLACEHOLDER",Cm="TOPOLOGY_DIAGRAM_EDITOR",Km="BASIC",Rm="FLOW_GRAPH",Dm="ACTIVITY_DIAGRAM",Lm="SEQUENCE_DIAGRAM",_m="CLASS_DIAGRAM",Im="REFERENCE_TOPICS",Mm="REFERENCED_TOPICS",Am="SELECT_REF_TOPICS_TIP",Nm="TAG_NAME_OVER_MAX_TIP",Fm="DELETE_TAG_TIP",Pm="DELETE_TOPOLOGY_TIP",Bm=function(e){e.stopPropagation()};function zm(e,t){!function(e,t){var n=document.createElement("a");n.href=e,n.download=t,n.click()}("data:text/plain,".concat(encodeURIComponent(e)),t)}function Vm(e){var t=e.top,n=void 0===t?0:t,o=e.right,r=void 0===o?0:o,a=e.bottom,c=void 0===a?0:a,i=e.left,l=void 0===i?0:i;return"".concat(n,"px ").concat(r,"px ").concat(c,"px ").concat(l,"px")}function Hm(e,t){return Array.isArray(t)?t.map((function(t){return e.controller.run("getI18nText",Object(m.a)(Object(m.a)({},e),{},{key:t}))})):e.controller.run("getI18nText",Object(m.a)(Object(m.a)({},e),{},{key:t.toUpperCase()}))}function Gm(e){return(e.top+e.bottom)/2}function Um(e,t){return(e.x+t.x)/2}function Wm(e,t){return(e.y+t.y)/2}function Jm(e){return[(e.left+e.right)/2,(e.top+e.bottom)/2]}function Zm(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,o=e.getBoundingClientRect(),r=t.getBoundingClientRect(),a=Jm(r),c=Jm(o);c[0]=(c[0]-a[0])/n,c[1]=(c[1]-a[1])/n;var i=o.width/n,l=o.height/n;return{left:c[0]-i/2,right:c[0]+i/2,top:c[1]-l/2,bottom:c[1]+l/2,width:i,height:l}}function Ym(e,t){var n=e.getBoundingClientRect(),o=Jm(t.getBoundingClientRect()),r=Jm(n);return[r[0]-o[0],r[1]-o[1]]}function qm(e){return Object(o.createElement)("div",null,e.children,Object(o.createElement)(y.h,{style:{margin:"10px 0"}}))}function Xm(e){var t=e.title,n=e.layout,r=void 0===n?"h":n,a=e.color,c=e.handleColorChange,i={flexDirection:"h"===r?"row":"column",alignItems:"center"};return Object(o.createElement)(Eh,null,Object(o.createElement)(ph,Object.assign({},i),null!=t&&Object(o.createElement)(dh,{margin:"0 5px 0 0"},t),Object(o.createElement)(y.s,null,Object(o.createElement)(Kh,null,Object(o.createElement)("div",{className:zh(Lh)}),Object(o.createElement)(Ch,{color:a})),Object(o.createElement)("div",null,Object(o.createElement)(rt.a,{color:a,onChangeComplete:function(e){return c(e.hex)}})))))}function $m(e){var t=e.title,n=Object(Ci.a)(e,Qy);return Object(o.createElement)(Eh,null,Object(o.createElement)(y.d,Object.assign({},n),t))}function Qm(e){var t=e.layout,n=void 0===t?"h":t,r=e.title,a=Object(Ci.a)(e,eh),c={flexDirection:"h"===n?"row":"column",alignItems:"center"};return Object(o.createElement)(Eh,null,Object(o.createElement)(ph,Object.assign({},c),Object(o.createElement)(dh,{margin:"0 5px 0 0"},r),Object(o.createElement)(y.q,Object.assign({},a))))}function eO(e){var t=e.layout,n=void 0===t?"h":t,r=e.title,a=Object(Ci.a)(e,th),c={flexDirection:"h"===n?"row":"column",alignItems:"center"};return Object(o.createElement)(Eh,null,Object(o.createElement)(ph,Object.assign({},c),Object(o.createElement)(dh,{margin:"0 5px 0 0"},r," "),Object(o.createElement)(y.m,Object.assign({},a))))}function tO(e){var t=e.text,n=e.items,r=e.itemRenderer,a=e.onItemSelect,c=ot.a.ofType(),i={items:n,itemRenderer:r,onItemSelect:a,filterable:!1};return Object(o.createElement)(Eh,null,Object(o.createElement)(c,Object.assign({},i),Object(o.createElement)(y.d,{text:t})))}var nO=function(e){return function(t,n){var r=n.handleClick;return Object(o.createElement)(y.p,{text:"".concat(t).concat(e),key:t,onClick:r})}},oO=function(e){return function(t,n){var r=n.handleClick;return Object(o.createElement)(y.p,{text:Hm(e,t),key:t,onClick:r})}},rO=(ot.a.ofType(),Object(v.a)(Array(7).keys())),aO=d.default.div(gy||(gy=Object(Ri.a)(["\n  position: relative;\n  padding: 6px;\n  width: 40px;\n  height: 40px;\n  cursor: pointer;\n  color: ",";\n  font-size: 24px;\n  display: inline-block;\n  &:hover {\n    color: ",";\n  }\n"])),(function(e){return e.disabled?"grey":"black"}),(function(e){return e.disabled?"grey":"rgb(44, 184, 146)"}));function cO(e){var t=e.controller,n=e.children,r=e.onClick,a=Object(Ci.a)(e,nh),c=e.disabled;c=c||!t.getValue(sg,e);var i=Object(m.a)({controller:t,disabled:c,onClick:function(e){c||r(e)}},a);return Object(o.createElement)(aO,Object.assign({},i),n)}var iO=b()("plugin:event");function lO(){var e={};return{handleTopicClick:function(e){iO("handleTopicClick");var t=e.controller,n=e.model,o=e.topicKey;iO(n.zoomFactor),null===n.editingDescKey&&n.editingContentKey!==o&&(n.focusKey===o&&n.focusMode===ib||t.run("operation",Object(m.a)(Object(m.a)({},e),{},{opType:jb,focusMode:cb})))},handleTopicDoubleClick:function(e){var t=e.controller;null===e.model.editingDescKey&&t.run("operation",Object(m.a)(Object(m.a)({},e),{},{opType:jb,focusMode:ib}))},handleTopicContextMenu:function(e){e.controller.run("operation",Object(m.a)(Object(m.a)({},e),{},{opType:jb,focusMode:sb}))},handleActiveModalClose:function(e){var t=e.controller,n=t.run("getActiveModalProps",e);return null==n?null:"edit-desc"===n.name?function(){t.run("operation",Object(m.a)(Object(m.a)({},e),{},{focusMode:cb,opType:jb}))}:void 0},addEventListener:function(t){var n=t.key,o=t.listener,r=t.once,a=t.controller;function c(){o(),a.run("removeEventListener",{key:n,listener:o})}e[n]||(e[n]=[]),r?(c.origin=o,e[n].push(c)):e[n].push(o)},removeEventListener:function(t){var n=t.key,o=t.listener;e[n]&&(e[n]=e[n].filter((function(e){return e!==o&&e.origin!==o})))},fireEvent:function(t){var n=t.key;e[n]&&e[n].forEach((function(e){return e()}))}}}var sO="ADD_CHILD",uO="ADD_SIBLING",pO="DELETE_TOPIC",dO="EDIT_CONTENT",fO="EDIT_NOTES",bO="SET_EDITOR_ROOT",yO=0,hO=1;function gO(){return{customizeHotKeys:function(e){var t=function(t){return function(n){!function(e,t){var n=t,o=n.topicKey,r=n.model,a=n.controller;void 0===o&&(t=Object(m.a)(Object(m.a)({},t),{},{topicKey:r.focusKey})),a.run("operation",Object(m.a)(Object(m.a)({},t),{},{opType:e}))}(t,e)}};return{topicHotKeys:new Map([[sO,{label:"add child",combo:"tab",onKeyDown:t(Ob)}],[uO,{label:"add sibling",combo:"enter",onKeyDown:t(vb)}],[pO,{label:"delete topic",combo:"del",onKeyDown:t(Tb)}],[dO,{label:"edit content",combo:"space",onKeyDown:t(Kb)}],[fO,{label:"edit notes",combo:"alt + d",onKeyDown:t(Rb)}],[bO,{label:"set editor root",combo:"alt + shift + f",onKeyDown:t(Lb)}]]),globalHotKeys:new Map}}}}function mO(){var e=new Map([[ug,"Confirm"],[pg,"Cancel"],[dg,"Default"],[fg,"Search"],[bg,"Left And Right"],[yg,"Only Left"],[hg,"Only Right"],[gg,"Edit"],[Og,"Add Child"],[mg,"Add Sibling"],[vg,"Edit Notes"],[Tg,"Delete"],[jg,"Set as Editor Root"],[kg,"Edit Topology Diagram"],[Eg,"Set Topic References"],[xg,"TopicStyle"],[wg,"Style"],[Sg,"Text Editor"],[Cg,"Link"],[Kg,"LinkToParent"],[Rg,"SubLinks"],[Dg,"Copy Style"],[Lg,"Paste Style"],[_g,"Clear Topic Style"],[Ig,"Clear All Custom Style"],[Mg,"LineType"],[Ag,"Theme"],[Ng,"Global"],[Fg,"Highlight"],[Pg,"Random Color"],[Bg,"NormalTopic"],[zg,"PrimaryTopic"],[Vg,"RootTopic"],[Hg,"Export Theme"],[Gg,"Import Theme"],[Ug,"Tags"],[Wg,"Tags Manager"],[Jg,"Tag Name"],[Zg,"Add Tag"],[Yg,"Update Tag"],[qg,"Already Added"],[Xg,"Can be Added"],[$g,"Topics that Use this Tag"],[Qg,"Background"],[em,"Color"],[tm,"Border"],[nm,"Width"],[om,"Radius"],[rm,"FontSize"],[am,"LineHeight"],[cm,"Padding"],[im,"Top"],[lm,"Bottom"],[sm,"Left"],[um,"Right"],[pm,"None"],[dm,"Solid"],[fm,"Dotted"],[bm,"Dashed"],[ym,"Double"],[hm,"Round"],[gm,"Curve"],[mm,"Line"],[Om,"Collapse All"],[vm,"Expand All"],[Tm,"Center Root Topic"],[jm,"zoom"],[km,"Zoom In"],[Em,"Zoom Out"],[xm,"Reset"],[wm,"Reset Zoom"],[Sm,"Write topic notes here"],[Cm,"Topology Diagram Editor"],[Km,"Basic"],[Rm,"Flow Graph"],[Dm,"Activity Diagram"],[Lm,"Sequence Diagram"],[_m,"Class Diagram"],[Im,"Reference Topics"],[Mm,"Referenced Topics"],[Am,"Please select the topics you want to reference. After selection, click the confirm button."],[Nm,"The length of tag name over the maximum length: 50!"],[Fm,"All the relationship about this tag will be lost if you delete this tag! Are you confirm?"],[Pm,"Are you confirm to delete this topology diagram?"]]);return{getI18nTextMap:function(){return e},getI18nText:function(e){var t=e.controller,n=e.key,o=t.run("getI18nTextMap",e);if(!o.has(n))throw new Error("i18n key ".concat(n," is not exist"));return o.get(n)}}}var OO=b()("plugin:operation");function vO(){var e=new Map([[yb,Hb.toggleCollapse],[hb,Hb.collapseAll],[gb,Hb.expandAll],[mb,Hb.expandTo],[Ob,Hb.addChild],[vb,Hb.addSibling],[Tb,Hb.deleteTopic],[jb,Hb.focusTopic],[kb,Hb.setFocusMode],[Eb,Hb.setStyle],[xb,Hb.clearAllCustomStyle],[wb,Hb.setTheme],[Sb,Hb.setBlockData],[Cb,Hb.deleteBlock],[Kb,function(e){var t=e.model,n=e.topicKey;return Hb.focusTopic({model:t,topicKey:n,focusMode:ib})}],[Rb,function(e){var t=e.model,n=e.topicKey,o=t.getTopic(n).getBlock(ab);return null!=o.block&&null!=o.block.data||(t=Hb.setBlockData({model:t,topicKey:n,blockType:ab,data:""})),t=Hb.focusTopic({model:t,topicKey:n,focusMode:lb})}],[Db,function(e){var t=e.srcKey,n=e.dstKey,o=e.dropDir,r=e.model,a=r.getTopic(t),c=r.getTopic(n),i=a.parentKey,l=r.getTopic(i).subKeys,s=l.indexOf(t);if(l=l.delete(s),"in"===o){var u=c.subKeys;u=u.push(t),r=r.withMutations((function(e){e.setIn(["topics",i,"subKeys"],l).setIn(["topics",t,"parentKey"],n).setIn(["topics",n,"subKeys"],u).setIn(["topics",n,"collapse"],!1)}))}else{var p=c.parentKey,d=r.getTopic(p).subKeys,f=d.indexOf(n);if(i===p){var b=Object(T.List)();d.forEach((function(e){e!==t&&(b=e===n?"prev"===o?b.push(t).push(e):b.push(e).push(t):b.push(e))})),r=r.withMutations((function(e){e.setIn(["topics",p,"subKeys"],b)}))}else"prev"===o?d=d.insert(f,t):"next"===o&&(d=d.insert(f+1,t)),r=r.withMutations((function(e){e.setIn(["topics",i,"subKeys"],l).setIn(["topics",t,"parentKey"],p).setIn(["topics",p,"subKeys"],d).setIn(["topics",p,"collapse"],!1)}))}return r}],[Lb,Hb.setEditorRootTopicKey],[_b,Hb.setLayoutDir]]),t=Object(T.Stack)(),n=Object(T.Stack)(),o=!0,r=new Set;return{isOperationEnabled:function(e){return o},enableOperation:function(){o=!0},disableOperation:function(e){var t=e.whiteList;o=!1,t?r=new Set(t):r.clear()},getOpMap:function(t){return e},getAllowUndo:function(e){var t=e.model,n=e.opType,o=e.allowUndo;if(!1===(void 0===o||o))return!1;if(n)switch(n){case jb:case kb:case Kb:case Rb:return!1}switch(t.focusMode){case"EDITING_DESC":case"EDITING_CONTENT":return!1}return t.config.allowUndo},getUndoRedoStack:function(){return{undoStack:t,redoStack:n}},setUndoStack:function(e){OO("setUndoStack",e.undoStack),t=e.undoStack},setRedoStack:function(e){OO("setRedoStack",e.redoStack),n=e.redoStack},canUndo:function(e){var t=e.controller;if(!t.run("isOperationEnabled",e))return!1;var n=t.run("getUndoRedoStack",e).undoStack,o=t.run("getAllowUndo",e);return n.size>0&&o},canRedo:function(e){var t=e.controller;if(!t.run("isOperationEnabled",e))return!1;var n=t.run("getUndoRedoStack",e).redoStack,o=t.run("getAllowUndo",e);return n.size>0&&o},undo:function(e){var t=e.controller,n=e.model;if(t.run("getAllowUndo",e)){var o=t.run("getUndoRedoStack",e),r=o.undoStack,a=o.redoStack,c=r.peek();c&&(t.run("setUndoStack",Object(m.a)(Object(m.a)({},e),{},{undoStack:r.shift()})),t.run("setRedoStack",Object(m.a)(Object(m.a)({},e),{},{redoStack:a.push(n)})),OO(c),t.change(c))}},redo:function(e){var t=e.controller,n=e.model;if(t.run("getAllowUndo",e)){var o=t.run("getUndoRedoStack",e),r=o.undoStack,a=o.redoStack,c=a.peek();c&&(t.run("setUndoStack",Object(m.a)(Object(m.a)({},e),{},{undoStack:r.push(n)})),t.run("setRedoStack",Object(m.a)(Object(m.a)({},e),{},{redoStack:a.shift()})),t.change(c))}},operation:function(e){var t=e.controller,n=e.opType,o=e.model,a=e.opArray,c=e.callback;if(null!=a&&!Array.isArray(a))throw new Error("operation: the type of opArray must be array!");if(null!=n&&null!=a)throw new Error("operation: opType and opArray conflict!");if(!t.run("isOperationEnabled",e)){if(0===r.size)return;if(null!=a){var i=a.filter((function(e){return!r.has(e.opType)}));if(i&&i.length>0)return}else if(!r.has(n))return}OO("operation:",n||a.map((function(e){return e.opType}))),OO("operation:",o),OO("operation:",e);var l,s=t.run("getOpMap",e);if(t.run("beforeOperation",e),t.run("getAllowUndo",e)){var u=t.run("getUndoRedoStack",e).undoStack;t.run("setUndoStack",Object(m.a)(Object(m.a)({},e),{},{undoStack:u.push(o)}))}if(null!=a)l=a.reduce((function(e,n){var o=n.opType;if(!s.has(o))throw new Error("opType:".concat(o," not exist!"));var r=s.get(o),a=Object(m.a)(Object(m.a)({controller:t},n),{},{model:e}),c=t.run("beforeOpFunction",a);return c=r(Object(m.a)(Object(m.a)({},a),{},{model:c})),c=t.run("afterOpFunction",Object(m.a)(Object(m.a)({},a),{},{model:c}))}),o);else{if(!s.has(n))throw new Error("opType:".concat(n," not exist!"));var p=s.get(n);l=t.run("beforeOpFunction",e),l=p(Object(m.a)(Object(m.a)({},e),{},{model:l})),l=t.run("afterOpFunction",Object(m.a)(Object(m.a)({},e),{},{model:l}))}OO("newModel:",l),t.change(l,c?c(l):null),t.run("afterOperation",e)},deleteRefKey:function(e){var t=e.model,n=e.topicKey,o=e.deleteRef,r=Pb(t,n);r.push(n);var a,c=Object(O.a)(r);try{for(c.s();!(a=c.n()).done;){var i=a.value;o(Zh(i)),o(Yh(i)),o(Hh(i)),o(Gh(i)),o(Uh(i)),o(Wh(i)),o(Jh(i)),o(qh(i)),o(Xh(i,"next")),o(Xh(i,"prev"))}}catch(l){c.e(l)}finally{c.f()}},beforeOperation:function(e){},afterOperation:function(e){},beforeOpFunction:function(e){var t=e.controller,n=e.opType,o=e.model,r=e.topicKey;return n===Tb&&r!==o.editorRootTopicKey&&t.run("deleteRefKey",e),o},afterOpFunction:function(e){return e.model},openNewModel:function(e){var t=e.model,n=e.controller,o=e.newModel;n.run("deleteRefKey",Object(m.a)(Object(m.a)({},e),{},{topicKey:t.rootTopicKey})),n.run("operation",Object(m.a)(Object(m.a)({},e),{},{opType:mb,topicKey:o.focusKey,model:o,callback:function(t){return function(){n.run("moveTopicToCenter",Object(m.a)(Object(m.a)({},e),{},{model:t,topicKey:t.focusKey}))}}}))}}}var TO=function(e){Object(s.a)(n,e);var t=Object(u.a)(n);function n(){return Object(i.a)(this,n),t.apply(this,arguments)}return Object(l.a)(n,[{key:"render",value:function(){var e=this.props.controller;return Object(o.createElement)(y.n,null,e.run("customizeTopicContextMenu",this.props))}}]),n}(rh),jO=[{icon:"edit",label:gg,shortcut:"Space",rootCanUse:!0,opType:Kb},{icon:"add-sibling",label:mg,shortcut:"Enter",opType:vb},{icon:"add-child",label:Og,shortcut:"Tab",rootCanUse:!0,opType:Ob},{icon:"notes",label:vg,shortcut:"Alt + D",rootCanUse:!0,opType:Rb},{icon:"delete-node",label:Tg,shortcut:"Del",opType:Tb},{icon:"root",label:jg,shortcut:"Alt + Shift + F",opType:Lb}];function kO(){return{renderTopicContextMenu:function(e){return Object(o.createElement)(TO,Object.assign({},e))},customizeTopicContextMenu:function(e){var t=e.topicKey,n=e.model,r=e.controller,a=t===n.editorRootTopicKey;function c(t){return function(n){t.opType&&r.run("operation",Object(m.a)(Object(m.a)({},e),{},{opType:t.opType}))}}return jO.map((function(t){return a&&!t.rootCanUse?null:Object(o.createElement)(y.p,{key:t.label,icon:Vh(t.icon),text:Hm(e,t.label),labelElement:Object(o.createElement)("kbd",null,t.shortcut),onClick:c(t)})}))}}}var EO=b()("node:topic-drop-effect"),xO=d.default.svg(my||(my=Object(Ri.a)(["\n  width: 100%;\n  height: 100%;\n  position: absolute;\n  left: 0;\n  top: 0;\n  z-index: 2;\n  pointer-events: none;\n"]))),wO=function(e){Object(s.a)(n,e);var t=Object(u.a)(n);function n(){var e;return Object(i.a)(this,n),(e=t.apply(this,arguments)).state={content:null},e}return Object(l.a)(n,[{key:"layout",value:function(){var e=this.props,t=e.getRef,n=e.model,r=e.zoomFactor,a=e.diagramState.dragDrop;if(null!=a){var c=a.targetKey,i=a.targetDir;if(EO("layout",i),null!=c){var l=t("in"===i?Hh(c):Xh(c,i)),s=t("svg-drop-effect"),u=t(Qh).bigView,p=Zm(l,u,r),d=Zm(s,u,r),f=p.left-d.left-3,b=p.top-d.top-3,y=p.width+6,h=p.height+6;this.setState({content:Object(o.createElement)("g",null,Object(o.createElement)("rect",{x:f,y:b,width:y,height:h,fill:"none",stroke:n.config.theme.highlightColor,strokeDasharray:"5,5",strokeWidth:2}))})}else this.setState({content:null})}else this.setState({content:null})}},{key:"render",value:function(){var e=this.props.saveRef;return Object(o.createElement)(xO,{ref:e("svg-drop-effect")},this.state.content)}}]),n}(rh),SO=b()("plugin:drag-and-drop"),CO=d.default.div(Oy||(Oy=Object(Ri.a)(["\n  height: ",";\n  width: 100%;\n  margin: 5px 0px;\n"])),(function(e){return"".concat(e.height,"px")}));function KO(){return{renderTopicDropArea:function(e){var t=e.topicKey,n=e.dropDir,r=e.saveRef,a=e.controller,c=e.model,i={onDragEnter:function(o){SO("onDragEnter",t,n),a.run("handleTopicDragEnter",Object(m.a)(Object(m.a)({},e),{},{ev:o,dropDir:n}))},onDragLeave:function(o){SO("onDragLeave",t,n),a.run("handleTopicDragLeave",Object(m.a)(Object(m.a)({},e),{},{ev:o,dropDir:n}))},onDragOver:function(e){e.preventDefault()},onDrop:function(o){SO("onDrop",t,n),a.run("handleTopicDrop",Object(m.a)(Object(m.a)({},e),{},{ev:o,dropDir:n}))}};return Object(o.createElement)(CO,Object.assign({height:c.config.theme.marginV/2,ref:r(Xh(t,n))},i))},renderDragAndDropEffect:function(e){SO("renderDragAndDropEffect");var t=e.saveRef;return Object(o.createElement)(wO,Object.assign({ref:t(ng)},e))},handleTopicDragStart:function(e){var t=e.controller;e.ev.stopPropagation(),t.run("operation",Object(m.a)(Object(m.a)({},e),{},{opType:jb,focusMode:ub}))},canDrop:function(e){var t=e.srcKey,n=e.dstKey,o=e.model,r=e.dropDir;return t!==o.editorRootTopicKey&&t!==n&&Bb(o,t,n)!==pb&&((n!==o.editorRootTopicKey||"in"===r)&&(o.getTopic(t).parentKey!==n||"in"!==r))},handleTopicDragEnter:function(e){var t=e.dropDir,n=e.topicKey,o=e.controller,r=e.model,a=e.diagramState,c=e.setDiagramState;SO("handleTopicDragEnter:",n,t),o.run("canDrop",Object(m.a)(Object(m.a)({},e),{},{srcKey:r.focusKey,dstKey:n}))&&c(Object(m.a)(Object(m.a)({},a),{},{dragDrop:{targetKey:n,targetDir:t}}))},handleTopicDragLeave:function(e){var t=e.topicKey,n=e.dropDir,o=e.getRef,r=e.ev,a=e.diagramState,c=e.setDiagramState,i=r.nativeEvent.relatedTarget;SO("handleTopicDragLeave:",t,n);var l=o(Hh(t));l==i||l.contains(i)||c(Object(m.a)(Object(m.a)({},a),{},{dragDrop:null}))},handleTopicDrop:function(e){SO("handleTopicDrop");var t=e,n=t.controller,o=t.topicKey,r=t.model,a=t.diagramState,c=t.setDiagramState;e=Object(m.a)(Object(m.a)({},e),{},{srcKey:r.focusKey,dstKey:o}),c(Object(m.a)(Object(m.a)({},a),{},{dragDrop:null})),n.run("canDrop",e)&&n.run("operation",Object(m.a)(Object(m.a)({},e),{},{opType:Db}))}}}function RO(e,t,n,o){var r,a=arguments.length,c=a<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)c=Reflect.decorate(e,t,n,o);else for(var i=e.length-1;i>=0;i--)(r=e[i])&&(c=(a<3?r(c):a>3?r(t,n,c):r(t,n))||c);return a>3&&c&&Object.defineProperty(t,n,c),c}var DO=d.default.div(vy||(vy=Object(Ri.a)(["\n  position: relative;\n  display: flex;\n  align-items: center;\n  padding: 5px;\n"]))),LO=d.default.div(Ty||(Ty=Object(Ri.a)(["\n  width: 100%;\n  height: 100%;\n  background: ",";\n"])),(function(e){return e.theme.background})),_O=function(e){Object(s.a)(n,e);var t=Object(u.a)(n);function n(e){var o;return Object(i.a)(this,n),(o=t.call(this,e)).setZoomFactor=function(e){o.dragScrollWidget.setZoomFactor(e)},o.onWheel=function(e){if(e.altKey||e.ctrlKey){var t=o.props.controller,n=t.run("getZoomFactor",o.props);(n-=e.nativeEvent.deltaY>0?.1:-.1)<.5&&(n=.5),n>4&&(n=4),t.run("setZoomFactor",Object(m.a)(Object(m.a)({},o.props),{},{zoomFactor:n}))}},o}return Object(l.a)(n,[{key:"renderHotkeys",value:function(){var e=this.props,t=e.controller,n=e.model,r=t.run("customizeHotKeys",e);if(null===r)return null;if(!(r.topicHotKeys instanceof Map&&r.globalHotKeys instanceof Map))throw new TypeError("topicHotKeys and globalHotKeys must be a Map");var a=[];return n.focusMode!==cb&&n.focusMode!==sb||r.topicHotKeys.forEach((function(e,t){a.push(Object(o.createElement)(y.j,Object.assign({key:t},e,{global:!0})))})),r.globalHotKeys.forEach((function(e,t){a.push(Object(o.createElement)(y.j,Object.assign({key:t},e,{global:!0})))})),Object(o.createElement)(y.k,null,a)}},{key:"componentDidMount",value:function(){var e=this.props,t=e.getRef,n=e.model;e.controller.run("addZoomFactorChangeEventListener",Object(m.a)(Object(m.a)({},this.props),{},{listener:this.setZoomFactor}));var o=t(Jh(n.editorRootTopicKey)),r=t("node-layer"),a=o.getBoundingClientRect(),c=r.getBoundingClientRect();this.dragScrollWidget.setViewBoxScrollDelta(0,a.top-c.top-this.dragScrollWidget.viewBox.getBoundingClientRect().height/2+a.height),this.layout()}},{key:"componentWillUnmount",value:function(){this.props.controller.run("removeZoomFactorChangeEventListener",Object(m.a)(Object(m.a)({},this.props),{},{listener:this.setZoomFactor}))}},{key:"dragScrollWidget",get:function(){return this.props.getRef(Qh)}},{key:"componentDidUpdate",value:function(){this.props.controller.run("fireEvent",Object(m.a)(Object(m.a)({},this.props),{},{key:og})),this.layout()}},{key:"layout",value:function(){this.props.controller.run("layout",this.props)}},{key:"render",value:function(){var e=this,t=this.props,n=t.saveRef,r=t.model,a=t.controller,c=r.editorRootTopicKey;return Object(o.createElement)(LO,{onWheel:this.onWheel},Object(o.createElement)(lh,Object.assign({},this.state,{enableMouseWheel:!1,zoomFactor:r.zoomFactor,ref:n(Qh)}),(function(t,r){var i=Object(m.a)(Object(m.a)({},e.props),{},{topicKey:c,setViewBoxScroll:t,setViewBoxScrollDelta:r});return Object(o.createElement)(DO,{ref:n("node-layer")},a.run("renderRootWidget",i))})))}}]),n}(o.PureComponent);_O=RO([y.l],_O);var IO=d.default.div(jy||(jy=Object(Ri.a)(["\n  display: flex;\n  flex-direction: column;\n  width: 100%;\n  height: 100%;\n"]))),MO=d.default.div(ky||(ky=Object(Ri.a)(["\n  width: 100%;\n  //height: 100%;\n  overflow: auto;\n  flex-grow: 1;\n  background: ",";\n  position: relative;\n"])),(function(e){return e.theme.background}));function AO(e){var t=e.controller,n=e.saveRef,r=Object(o.useState)(t.run("getInitialDiagramState",e)),a=Object(Si.a)(r,2),c=a[0],i=a[1],l=Object(m.a)(Object(m.a)({},e),{},{diagramState:c,setDiagramState:i});return Object(o.createElement)(IO,null,t.run("renderToolbar",e),Object(o.createElement)(MO,{ref:n($h)},Object(o.createElement)(_O,Object.assign({},l)),t.run("renderDiagramCustomize",l)))}var NO=Object(d.default)(vh)(Ey||(Ey=Object(Ri.a)(["\n  position: absolute;\n  width: 20%;\n  padding: 0 5px;\n  background: white;\n  left: 30px;\n  top: 20px;\n  border-radius: 2px;\n"]))),FO=d.default.div(xy||(xy=Object(Ri.a)(["\n  max-width: 600px;\n"]))),PO=d.default.span(wy||(wy=Object(Ri.a)([""]))),BO=function(e){Object(s.a)(n,e);var t=Object(u.a)(n);function n(e){var r;return Object(i.a)(this,n),(r=t.call(this,e)).setEditorRootTopicKey=function(e){return function(){var t=r.props,n=t.model,o=t.controller;n.editorRootTopicKey!==e&&o.run("operation",Object(m.a)(Object(m.a)({},r.props),{},{opType:Lb,topicKey:e}))}},r.breadcrumbRenderer=function(e){var t=e.text,n=Object(Ci.a)(e,oh),r=t.length>8,a=r?t.substr(0,8)+"...":t,c={content:Object(o.createElement)(FO,null,t),position:y.u.BOTTOM_RIGHT},i=Object(o.createElement)(y.b,Object.assign({},n),Object(o.createElement)(PO,null,a));return r?Object(o.createElement)(y.x,Object.assign({},c),i):i},r}return Object(l.a)(n,[{key:"render",value:function(){var e=this.props,t=e.model,n=e.controller,r=e.zIndex,a=t.editorRootTopicKey;if(a===t.rootTopicKey)return null;for(var c=[],i=t.getTopic(a);null!=i;){var l=n.getValue(cg,Object(m.a)(Object(m.a)({},e),{},{topicKey:i.key}));c.unshift({text:l,onClick:this.setEditorRootTopicKey(i.key)}),i=t.getTopic(i.parentKey)}var s={items:c,breadcrumbRenderer:this.breadcrumbRenderer};return Object(o.createElement)(NO,{zIndex:r},Object(o.createElement)(y.c,Object.assign({},s)))}}]),n}(rh),zO=function(e){Object(s.a)(n,e);var t=Object(u.a)(n);function n(){var e;return Object(i.a)(this,n),(e=t.apply(this,arguments)).handleClose=function(){var t=e.props.controller.run("handleActiveModalClose",e.props);t&&t()},e}return Object(l.a)(n,[{key:"render",value:function(){var e=this.props.controller,t=e.run("renderModal",this.props),n=e.run("getActiveModalProps",this.props);return Object(o.createElement)(y.g,{onClose:this.handleClose,isOpen:null!==t,autoFocus:!0,enforceFocus:!0,usePortal:!0,title:n&&n.title,style:n&&n.style},Object(o.createElement)("div",{className:h.a.DIALOG_BODY,style:{minHeight:0}},t))}}]),n}(rh),VO=d.default.svg(Sy||(Sy=Object(Ri.a)(["\n  width: 100%;\n  height: 100%;\n  position: absolute;\n  left: 0;\n  top: 0;\n  z-index: 1;\n  pointer-events: none;\n"]))),HO=b()("node:root-sub-links"),GO=function(e){Object(s.a)(n,e);var t=Object(u.a)(n);function n(){var e;return Object(i.a)(this,n),(e=t.apply(this,arguments)).state={curves:[]},e}return Object(l.a)(n,[{key:"layout",value:function(){var e,t,n,r=this.props,a=r.model,c=r.getRef,i=r.topicKey,l=r.zoomFactor,s=r.controller,u=a.getTopic(i),p=c(Hh(i)),d=c(Yh(i)),f=c(Qh).bigView,b=Zm(p,f,l),y=Zm(d,f,l);e={x:(n=b,(n.left+n.right)/2-y.left),y:Gm(b)-y.top};var h=[];u.subKeys.forEach((function(n){var a,i=s.run("getLinkStyle",Object(m.a)(Object(m.a)({},r),{},{topicKey:n})),u=i.lineType,p=Zm(c(Hh(n)),f,l);if(t={x:(t=p.left>b.right?{x:p.left,y:Gm(p)}:{x:p.right,y:Gm(p)}).x-y.left,y:t.y-y.top},"curve"===u)a="M ".concat(e.x," ").concat(e.y," C ").concat(e.x," ").concat(Wm(e,t)," ").concat(Um(e,t)," ").concat(t.y," ").concat(t.x," ").concat(t.y);else if("line"===u)a="M ".concat(e.x," ").concat(e.y," L ").concat(t.x," ").concat(t.y);else if("round"===u){var d=t.y>e.y?1:-1,g=t.x>e.x?1:-1,O=i.lineRadius;if(null==O)throw new Error("link line type is round, but lineRadius is not provided!");a=t.y===e.y?"M ".concat(e.x," ").concat(e.y," H ").concat(t.x):"M ".concat(e.x," ").concat(e.y,"  V ").concat(t.y-d*O," A ").concat(O," ").concat(O," 0 0 ").concat(d*g===1?0:1," ").concat(e.x+O*g," ").concat(t.y," H ").concat(t.x)}h.push(Object(o.createElement)("path",{key:"link-".concat(n),d:a,strokeWidth:i.lineWidth,stroke:i.lineColor,fill:"none"}))})),this.setState({curves:h})}},{key:"render",value:function(){HO("render");var e=this.props,t=e.topicKey,n=e.saveRef;return Object(o.createElement)(VO,{ref:n(Yh(t))},Object(o.createElement)("g",null,this.state.curves))}}]),n}(rh),UO=b()("RootNode"),WO=d.default.div(Cy||(Cy=Object(Ri.a)(["\n  display: flex;\n  position: relative;\n\n  align-items: ",";\n  flex-direction: column;\n\n  padding: ",";\n"])),(function(e){return e.topicDirection===Qf?"flex-end":"flex-start"}),(function(e){return e.topicDirection===Qf?"15px 60px 15px 0px":"15px 0px 15px 60px"})),JO=d.default.div(Ky||(Ky=Object(Ri.a)(["\n  display: flex;\n  position: relative;\n  align-items: center;\n  z-index: 3;\n"]))),ZO=function(e){Object(s.a)(n,e);var t=Object(u.a)(n);function n(){return Object(i.a)(this,n),t.apply(this,arguments)}return Object(l.a)(n,[{key:"renderPartTopics",value:function(e,t){var n=this.props,r=n.controller,a=n.saveRef,c=r.run("createSubTopics",Object(m.a)(Object(m.a)({},this.props),{},{dir:t,isRoot:!0,topics:e}));if(!c)return null;var i=c.subTopics,l="bm-layer-".concat(t===Qf?"left":"right");return Object(o.createElement)(WO,{topicDirection:t,ref:a(l)},i)}},{key:"render",value:function(){UO("render");var e=this.props,t=e.model,n=e.topicKey,r=e.saveRef,a=e.controller,c=a.run("getTopicContentStyle",e),i=t.config,l=a.run("renderTopicContent",Object(m.a)(Object(m.a)({},e),{},{topicStyle:c,dir:tb})),s=a.run("getPartTopics",{layout:i.layoutDir,model:t,topicKey:n}),u=Object(o.createElement)(JO,{ref:r(Jh(n))},l),p=a.run("renderRootWidgetOtherChildren",e);switch(i.layoutDir){case Xf.LEFT_AND_RIGHT:return Object(o.createElement)(o.Fragment,null,this.renderPartTopics(s.L,"L"),u,this.renderPartTopics(s.R,"R"),p);case Xf.LEFT_TO_RIGHT:return Object(o.createElement)(o.Fragment,null,u,this.renderPartTopics(s.R,"R"),p);case Xf.RIGHT_TO_LEFT:return Object(o.createElement)(o.Fragment,null,this.renderPartTopics(s.L,"L"),u,p);case Xf.TOP_TO_BOTTOM:return Object(o.createElement)(o.Fragment,null,u,this.renderPartTopics(s.B,"B"),p)}return null}}]),n}(o.Component),YO=d.default.div(Ry||(Ry=Object(Ri.a)(["\n  position: absolute;\n  top: calc(50% - 10px);\n  ",";\n  border-radius: 50%;\n  width: 20px;\n  height: 20px;\n  text-align: center;\n  //@ts-ignore\n  background: ",";\n  cursor: pointer;\n  padding: 0;\n  font-size: 14px;\n  line-height: 20px;\n  border: 0;\n  z-index: 2;\n"])),(function(e){var t=e.dir;return t===eb?Object(d.css)(Dy||(Dy=Object(Ri.a)(["\n        right: -25px;\n      "]))):t===Qf?Object(d.css)(Ly||(Ly=Object(Ri.a)(["\n        left: -25px;\n      "]))):void 0}),(function(e){return e.background}));function qO(e){var t=e.model,n=e.topicKey,r=e.topicStyle,a=e.dir,c=e.saveRef,i=e.onClickCollapse,l=t.getTopic(n);return l.subKeys.size>0?Object(o.createElement)(YO,{ref:c(qh(n)),onClick:i,background:r.background,dir:a,className:nt()(Object(wi.a)({icon:!0,iconfont:!0},"bm-".concat(l.collapse?"plus":"minus"),!0))}):null}var XO=b()("node:topic-content2"),$O=d.default.div(_y||(_y=Object(Ri.a)(["\n  position: relative;\n"]))),QO=d.default.div(Iy||(Iy=Object(Ri.a)(["\n  position: absolute;\n  left: 0;\n  top: 0;\n  width: auto;\n  z-index: 10;\n  color: black;\n"]))),ev=function(e){XO("cancelEvent"),e.preventDefault(),e.stopPropagation()};function tv(e){var t,n=e.controller,r=e.model,a=e.topicKey,c=e.getRef,i=r.editingContentKey!==a,l=n.run("renderTopicContentEditor",Object(m.a)(Object(m.a)({},e),{},{readOnly:i}));if(i)t=l;else{var s,u={width:50,height:40},d=c("content-editor-".concat(a));d&&(u=d.getBoundingClientRect());var f=new p.a((function(e,t){var n=e[0].contentRect;s.style.left=(u.width-n.width)/2+"px",s.style.top=(u.height-n.height)/2+"px"}));XO(u),t=Object(o.createElement)(o.Fragment,null,Object(o.createElement)("div",{style:{width:u.width,height:u.height}}),Object(o.createElement)(QO,{ref:function(e){e&&(s=e,f.observe(s))}},l))}return Object(o.createElement)($O,{onDragEnter:ev,onDragOver:ev},t)}var nv=b()("node:topic-content-widget"),ov=d.default.div(My||(My=Object(Ri.a)(["\n  display: flex;\n  align-items: center;\n  cursor: pointer;\n  //overflow: hidden;\n  position: relative;\n"]))),rv=d.default.div(Ay||(Ay=Object(Ri.a)(["\n  position: relative;\n"]))),av=function(e){Object(s.a)(n,e);var t=Object(u.a)(n);function n(e){var o;return Object(i.a)(this,n),(o=t.call(this,e)).onDragStart=function(e){o.run("handleTopicDragStart",Object(m.a)(Object(m.a)({},o.props),{},{ev:e}))},o.onDragOver=function(e){e.preventDefault()},o.onDragEnter=function(e){nv("onDragEnter",o.props.topicKey),o.run("handleTopicDragEnter",Object(m.a)(Object(m.a)({},o.props),{},{ev:e,dropDir:"in"}))},o.onDragLeave=function(e){o.run("handleTopicDragLeave",Object(m.a)(Object(m.a)({},o.props),{},{ev:e,dropDir:"in"}))},o.onDrop=function(e){nv("onDrop"),o.run("handleTopicDrop",Object(m.a)(Object(m.a)({},o.props),{},{ev:e,dropDir:"in"}))},o.onClick=function(e){var t=o.props.controller;o.handleTopicClickTimeout=setTimeout((function(){t.run("handleTopicClick",Object(m.a)(Object(m.a)({},o.props),{},{ev:e}))}),200)},o.onDoubleClick=function(e){clearTimeout(o.handleTopicClickTimeout),o.props.controller.run("handleTopicDoubleClick",Object(m.a)(Object(m.a)({},o.props),{},{ev:e}))},o.needRelocation=!1,o.onClickCollapse=function(e){e.stopPropagation();var t=o.props,n=t.topicKey,r=t.getRef;o.needRelocation=!0;var a=r(qh(n)).getBoundingClientRect();nv("oldRect",a),o.oldCollapseIconVector=[a.left+a.width/2,a.top+a.height/2],nv("oldCollapseIconVector",o.oldCollapseIconVector),o.operation(yb,o.props)},o.state={dragEnter:!1},o}return Object(l.a)(n,[{key:"renderContextMenu",value:function(){var e=this.props.controller;if(e.getValue(ag,Object(m.a)({},this.props)))return this.operation(jb,Object(m.a)(Object(m.a)({},this.props),{},{focusMode:sb})),e.run("renderTopicContextMenu",this.props)}},{key:"onContextMenuClose",value:function(){}},{key:"componentDidUpdate",value:function(){if(this.needRelocation){var e=this.props,t=e.getRef,n=e.topicKey,o=e.setViewBoxScrollDelta,r=t(qh(n)).getBoundingClientRect(),a=[r.left+r.width/2,r.top+r.height/2];nv("newVector:",a),nv("oldVector:",this.oldCollapseIconVector);var c=[a[0]-this.oldCollapseIconVector[0],a[1]-this.oldCollapseIconVector[1]];nv("vector",c),o(c[0],c[1]),this.needRelocation=!1}}},{key:"render",value:function(){var e=this.props,t=e.saveRef,n=e.topicKey,r=e.model,a=e.controller,c=e.topicStyle,i=e.dir;nv("render",n,r.focusMode);var l=a.run("isOperationEnabled",e)&&r.editingContentKey!==n,s=a.run("renderTopicCollapseIcon",Object(m.a)(Object(m.a)({},e),{},{onClickCollapse:this.onClickCollapse.bind(this)})),u=a.run("renderTopicDropArea",Object(m.a)(Object(m.a)({},e),{},{dropDir:"prev"})),p=a.run("renderTopicDropArea",Object(m.a)(Object(m.a)({},e),{},{dropDir:"next"})),d={onDragEnter:this.onDragEnter,onDragLeave:this.onDragLeave,onDragOver:this.onDragOver,onDrop:this.onDrop};return Object(o.createElement)(rv,null,u,Object(o.createElement)(ov,Object.assign({style:c,draggable:l,ref:t(Hh(n)),onDragStart:this.onDragStart,onClick:this.onClick,onDoubleClick:this.onDoubleClick},d),a.run("renderTopicBlocks",e),a.run("renderTopicContentOthers",e)),p,i!==tb&&s)}}]),n}(rh);av=RO([y.f],av);var cv=b()("node:topic-desc"),iv=d.default.div(Ny||(Ny=Object(Ri.a)(["\n  overflow: auto;\n"])));function lv(e){var t=e.controller,n=e.model,r=e.topicKey,a=e.getRef,c=n.editingDescKey===r;cv("isEditing",c);var i=n.getTopic(r).getBlock(ab);if(!c&&t.run("isBlockEmpty",Object(m.a)(Object(m.a)({},e),{},{block:i.block})))return null;var l=t.run("renderTopicDescEditor",e),s=a($h),u={maxWidth:"800px",maxHeight:"600px"};if(s){var p=s.getBoundingClientRect();u.maxWidth="".concat(.6*p.width,"px"),u.maxHeight="".concat(.8*p.height,"px")}var d={autoFocus:!1,content:Object(o.createElement)(iv,{onClick:Bm,classname:h.a.POPOVER_DISMISS,style:u},l),target:Object(o.createElement)(Oh,{onClick:function(n){n.stopPropagation(),t.run("operation",Object(m.a)(Object(m.a)({},e),{},{opType:Rb}))},className:zh(_h),tabIndex:-1}),interactionKind:y.t.HOVER,hoverOpenDelay:500};return i.block&&Object(o.createElement)(y.s,Object.assign({},d))}var sv=d.default.svg(Fy||(Fy=Object(Ri.a)(["\n  width: 100%;\n  height: 100%;\n  position: absolute;\n  left: 0;\n  top: 0;\n  z-index: 2;\n  pointer-events: none;\n"]))),uv=function(e){Object(s.a)(n,e);var t=Object(u.a)(n);function n(){var e;return Object(i.a)(this,n),(e=t.apply(this,arguments)).state={content:null},e}return Object(l.a)(n,[{key:"layout",value:function(){var e=this.props,t=e.getRef,n=e.model,r=e.zoomFactor,a=n.focusKey,c=n.focusMode;if(a&&c!==ib){var i=t(Hh(a)),l=t(Qh).bigView,s=t(eg),u=Zm(i,l,r),p=Zm(s,l,r),d=u.left-p.left-3,f=u.top-p.top-3,b=u.width+6,y=u.height+6;this.setState({content:Object(o.createElement)("rect",{x:d,y:f,width:b,height:y,fill:"none",stroke:n.config.theme.highlightColor,strokeWidth:2})})}else this.setState({content:null})}},{key:"render",value:function(){var e=this.props.saveRef;return Object(o.createElement)(sv,{ref:e(eg)},this.state.content)}}]),n}(rh),pv=d.default.svg(Py||(Py=Object(Ri.a)(["\n  width: 100%;\n  height: 100%;\n  position: absolute;\n  left: 0;\n  top: 0;\n  z-index: 1;\n  pointer-events: none;\n"]))),dv=b()("node:topic-sub-links"),fv=function(e){Object(s.a)(n,e);var t=Object(u.a)(n);function n(){var e;return Object(i.a)(this,n),(e=t.apply(this,arguments)).state={curves:[]},e}return Object(l.a)(n,[{key:"layout",value:function(){var e,t,n,r=this.props,a=r.model,c=r.getRef,i=r.topicKey,l=r.dir,s=r.controller,u=s.run("getZoomFactor",r),p=a.getTopic(i),d=c(Hh(i)),f=c(Yh(i)),b=c(qh(i)),y=c(Qh).bigView,h=Zm(f,y,u),g=Zm(b,y,u),O=Zm(d,y,u);dv(i),dv("svgRect",h),dv("collapseRect",g),dv("contentRect",O),l===eb?(e={x:0,y:Gm(O)-h.top},t={x:g.right-h.left+10,y:e.y}):l===Qf&&(e={x:h.right-h.left,y:Gm(O)-h.top},t={x:g.left-h.left-10,y:e.y});var v=[];p.subKeys.forEach((function(a){var i,d=s.run("getLinkStyle",Object(m.a)(Object(m.a)({},r),{},{topicKey:a})),f=c(Hh(a));if(f){var b=Zm(f,y,u);l===eb&&(n={x:b.left-h.left,y:Gm(b)-h.top}),l===Qf&&(n={x:b.right-h.left,y:Gm(b)-h.top});var g=d.lineType;if("curve"===g)i="M ".concat(e.x," ").concat(e.y," L ").concat(t.x," ").concat(t.y," C ").concat(t.x," ").concat(Wm(t,n)," ").concat(Um(t,n)," ").concat(n.y," ").concat(n.x," ").concat(n.y);else if("round"===g){var O=n.y>e.y?1:-1,T=n.x>e.x?1:-1,j=d.lineRadius;i=1===p.subKeys.size||Math.abs(n.y-e.y)<=1?"M ".concat(e.x," ").concat(e.y," L ").concat(n.x," ").concat(n.y):"M ".concat(e.x," ").concat(e.y," H ").concat(t.x," V ").concat(n.y-O*j," A ").concat(j," ").concat(j," 0 0 ").concat(O*T===1?0:1," ").concat(t.x+j*T," ").concat(n.y," H ").concat(n.x)}else"line"===g&&(i="M ".concat(e.x," ").concat(e.y," H ").concat(t.x," L ").concat(n.x," ").concat(n.y));v.push(Object(o.createElement)("path",{key:"link-".concat(a),d:i,strokeWidth:d.lineWidth,stroke:d.lineColor,fill:"none"}))}})),this.setState({curves:v})}},{key:"render",value:function(){var e=this.props,t=e.topicKey,n=e.saveRef;return Object(o.createElement)(pv,{ref:n(Yh(t))},Object(o.createElement)("g",null,this.state.curves))}}]),n}(rh),bv=b()("node:topic-widget"),yv=d.default.div(By||(By=Object(Ri.a)(["\n  display: flex;\n  align-items: center;\n  flex-direction: ",";\n"])),(function(e){return e.topicDirection===eb?"row":"row-reverse"})),hv=d.default.div(zy||(zy=Object(Ri.a)(["\n  position: relative;\n  padding: ",";\n"])),(function(e){return e.dir===eb?"0 0 0 ".concat(e.marginH,"px"):"0 ".concat(e.marginH,"px 0 0")})),gv=d.default.div(Vy||(Vy=Object(Ri.a)(["\n  display: flex;\n  position: relative;\n  align-items: center;\n\n  flex-direction: ",";\n"])),(function(e){return e.topicDirection===eb?"row":"row-reverse"})),mv=function(e){Object(s.a)(n,e);var t=Object(u.a)(n);function n(){return Object(i.a)(this,n),t.apply(this,arguments)}return Object(l.a)(n,[{key:"renderSubTopics",value:function(){var e=this.props,t=e.controller,n=e.model,r=e.topicKey,a=e.dir,c=n.getTopic(r).subKeys.toArray(),i=t.run("createSubTopics",Object(m.a)(Object(m.a)({},e),{},{topics:c}));if(!i)return null;var l=i.subTopics,s=t.run("renderSubLinks",e);return Object(o.createElement)(hv,{dir:a,marginH:n.config.theme.marginH},l," ",s)}},{key:"layoutLinks",value:function(){var e=this.props,t=e.getRef,n=e.topicKey,o=e.model.getTopic(n);if(0!==o.subKeys.size&&!o.collapse){bv("layoutLinks",n);var r=t(Zh(n));r&&r.layout()}}},{key:"render",value:function(){var e=this.props,t=e.controller,n=e.topicKey,r=e.dir,a=e.saveRef;bv("render",n);var c=t.run("getTopicContentStyle",e),i=Object(m.a)(Object(m.a)({},e),{},{topicStyle:c}),l=t.run("renderTopicContent",i);return Object(o.createElement)(yv,{topicDirection:r},Object(o.createElement)(gv,{topicDirection:r,ref:a(Jh(n))},l),this.renderSubTopics())}}]),n}(o.Component),Ov=b()("node:view-port-viewer"),vv=Object(d.default)(vh)(Hy||(Hy=Object(Ri.a)(["\n  position: absolute;\n  background: white;\n  right: 30px;\n  bottom: 20px;\n  border-radius: 2px;\n  display: flex;\n  flex-direction: row;\n  user-select: none;\n"]))),Tv=Object(d.default)(yh)(Gy||(Gy=Object(Ri.a)(["\n  margin: 10px;\n"]))),jv=d.default.span(Uy||(Uy=Object(Ri.a)(["\n  display: inline-block;\n  width: 80px;\n  height: 18px;\n"]))),kv=function(e){return Object(o.createElement)(y.x,{content:e.tooltip,position:g.a.TOP,className:h.a.ICON},Object(o.createElement)(Tv,{onClick:e.onClick,tabIndex:-1},e.children))},Ev=function(e){Object(s.a)(n,e);var t=Object(u.a)(n);function n(e){var o;return Object(i.a)(this,n),(o=t.call(this,e)).zoomFactorChange=function(e){Ov("zoomFactorChange",e),o.setState({zoomFactor:e})},o.onClickResetZoom=function(e){var t=o.props;t.controller.run("setZoomFactor",Object(m.a)(Object(m.a)({},t),{},{zoomFactor:1}))},o.onClickAddZoom=function(e){var t=o.props,n=t.controller,r=n.run("getZoomFactor",t);n.run("setZoomFactor",Object(m.a)(Object(m.a)({},t),{},{zoomFactor:r+.1}))},o.onClickMinusZoom=function(e){var t=o.props,n=t.controller,r=n.run("getZoomFactor",t);n.run("setZoomFactor",Object(m.a)(Object(m.a)({},t),{},{zoomFactor:r-.1}))},o.onClickCollapseAll=function(e){var t=o.props,n=t.controller;n.run("addEventListener",Object(m.a)(Object(m.a)({},t),{},{key:og,listener:o.centerRootTopic,once:!0})),n.run("operation",Object(m.a)(Object(m.a)({},t),{},{opType:hb}))},o.onClickExpandAll=function(e){var t=o.props,n=t.controller;n.run("addEventListener",Object(m.a)(Object(m.a)({},t),{},{key:og,listener:o.centerRootTopic,once:!0})),n.run("operation",Object(m.a)(Object(m.a)({},t),{},{opType:gb}))},o.centerRootTopic=function(){var e=o.props,t=e.model;e.controller.run("moveTopicToCenter",Object(m.a)(Object(m.a)({},o.props),{},{topicKey:t.editorRootTopicKey}))},o}return Object(l.a)(n,[{key:"componentDidMount",value:function(){var e=this.props;e.controller.run("addZoomFactorChangeEventListener",Object(m.a)(Object(m.a)({},e),{},{listener:this.zoomFactorChange}))}},{key:"componentWillUnmount",value:function(){var e=this.props;e.controller.run("removeZoomFactorChangeEventListener",Object(m.a)(Object(m.a)({},e),{},{listener:this.zoomFactorChange}))}},{key:"render",value:function(){Ov("render");var e=this.props,t=e.controller,n=e.zIndex,r=t.run("getZoomFactor",e);return Object(o.createElement)(vv,{zIndex:n},Object(o.createElement)(kv,{onClick:this.onClickCollapseAll,tooltip:Hm(e,Om)},Vh(Ah)),Object(o.createElement)(kv,{onClick:this.onClickExpandAll,tooltip:Hm(e,vm)},Vh(Nh)),Object(o.createElement)(kv,{onClick:this.centerRootTopic,tooltip:Hm(e,Tm)},Vh(Fh)),Object(o.createElement)(kv,{onClick:this.onClickMinusZoom,tooltip:Hm(e,km)},Vh(Mh)),Object(o.createElement)(kv,{onClick:this.onClickResetZoom,tooltip:Hm(e,xm)},Object(o.createElement)(jv,null,"".concat(Hm(e,jm),":").concat(Math.floor(100*r),"%"))),Object(o.createElement)(kv,{onClick:this.onClickAddZoom,tooltip:Hm(e,Em)},Vh(Ih)))}}]),n}(rh),xv=d.default.div(Wy||(Wy=Object(Ri.a)(["\n  overflow: auto;\n  padding: 0px 0px 0px 20px;\n  background: #88888850;\n"])));function wv(e){var t=e.controller,n=e.model,r=e.topicKey;if(n.focusMode===lb){var a=t.run("renderTopicDescEditor",e);return Object(o.createElement)(y.i,{key:"drawer",title:Hm(e,vg),icon:Vh("note"),isOpen:!0,hasBackdrop:!0,backdropProps:{onMouseDown:Bm},isCloseButtonShown:!1,onClose:function(n){n.stopPropagation();var o="topic-desc-data-".concat(r),a=t.run("deleteTempValue",{key:o});t.run("operation",Object(m.a)(Object(m.a)({},e),{},{opType:Sb,topicKey:r,blockType:ab,data:a,focusMode:cb}))},size:"70%"},Object(o.createElement)(xv,null,a))}}function Sv(e){var t=e.theme,n=e.children;return Object(o.createElement)(d.ThemeProvider,{theme:t},Object(o.createElement)(o.Fragment,null,n))}var Cv=b()("plugin:rendering");function Kv(){var e;return{getDiagramProps:function(){return e},renderDiagram:function(t){var n=t.model;return Object(o.createElement)(uh,null,(function(r,a,c){return e=Object(m.a)(Object(m.a)({},t),{},{saveRef:r,getRef:a,deleteRef:c}),Cv("renderDiagram",n),Object(o.createElement)(Sv,{theme:n.config.theme},Object(o.createElement)(AO,e))}))},renderDrawer:wv,getInitialDiagramState:function(e){return{rightTopPanel:{isOpen:!1,selectedTabId:"topic-style"}}},renderDiagramCustomize:function(e){var t=e.controller,n=e.model,o=t.getValue(rg),r=Object(m.a)(Object(m.a)({},e),{},{zIndex:o,topicKey:n.focusKey});return[t.run("renderEditorRootBreadcrumbs",r),t.run("renderRightTopPanel",r),t.run("renderModals",Object(m.a)(Object(m.a)({},r),{},{zIndex:o+1})),t.run("renderDrawer",Object(m.a)(Object(m.a)({},r),{},{zIndex:o+1})),t.run("renderViewPortViewer",r)]},renderEditorRootBreadcrumbs:function(e){return Object(o.createElement)(BO,Object.assign({key:"EditorRootBreadcrumbs"},e))},renderModals:function(e){return Object(o.createElement)(zO,Object.assign({key:"modals"},e))},renderModal:function(e){return null},getActiveModalProps:function(e){return null},renderDoc:function(e){return e.children},renderRootWidget:function(e){return Object(o.createElement)(ZO,Object.assign({},e))},renderTopicWidget:function(e){return Object(o.createElement)(mv,Object.assign({},e))},renderTopicContent:function(e){return Object(o.createElement)(av,Object.assign({},e))},renderTopicCollapseIcon:function(e){return Object(o.createElement)(qO,Object.assign({},e))},renderTopicContentOthers:function(e){return[]},renderTopicBlocks:function(e){var t=e.model,n=e.topicKey,r=e.controller,a=t.getTopic(n).blocks,c=[],i=0;return a.forEach((function(t){var n=r.run("renderTopicBlock",Object(m.a)(Object(m.a)({},e),{},{block:t,blockKey:"block-".concat(i)}));n&&(c.push(Object(o.createElement)(o.Fragment,{key:"block-".concat(i)},n)),i++)})),c},renderTopicBlock:function(e){var t=e.controller;switch(e.block.type){case rb:return t.run("renderTopicBlockContent",e);case ab:return t.run("renderTopicBlockDesc",e)}return null},renderTopicBlockContent:function(e){return Object(o.createElement)(tv,Object.assign({},e))},renderTopicBlockDesc:function(e){return Object(o.createElement)(lv,Object.assign({},e))},renderSubLinks:function(e){var t=e.saveRef,n=e.topicKey,r=e.model.getTopic(n);return 0===r.subKeys.size||r.collapse?null:Object(o.createElement)(fv,Object.assign({ref:t(Zh(n))},e))},renderRootSubLinks:function(e){var t=e.saveRef,n=e.topicKey;return Object(o.createElement)(GO,Object.assign({ref:t(Zh(n))},e))},renderFocusItemHighlight:function(e){var t=e.saveRef;return Object(o.createElement)(uv,Object.assign({ref:t(tg)},e))},renderRootWidgetOtherChildren:function(e){var t=e.controller,n=t.run("getZoomFactor",e);return e=Object(m.a)(Object(m.a)({},e),{},{zoomFactor:n}),Object(o.createElement)(o.Fragment,null,t.run("renderRootSubLinks",e),t.run("renderFocusItemHighlight",e),t.run("renderDragAndDropEffect",e))},renderViewPortViewer:function(e){return Object(o.createElement)(Ev,Object.assign({key:"view-port-viewer"},e))}}}var Rv=Object(d.default)(vh)(Jy||(Jy=Object(Ri.a)(["\n  position: absolute;\n  background: white;\n  right: 30px;\n  top: 20px;\n  border-radius: 2px;\n  user-select: none;\n"]))),Dv=Object(d.default)(y.w)(Zy||(Zy=Object(Ri.a)(["\n  padding: 0px 10px;\n"])));function Lv(e){var t=e.controller,n=e.zIndex,r=e.diagramState,a=e.setDiagramState,c=r.rightTopPanel,i=c.isOpen,l=c.selectedTabId,s=function(e){a(Object(m.a)(Object(m.a)({},r),{},{rightTopPanel:Object(m.a)(Object(m.a)({},c),e)}))};if(!i)return Object(o.createElement)(Rv,{zIndex:n},Object(o.createElement)(bh,{onClick:function(){s({isOpen:!0})}},Object(o.createElement)(fh,{className:zh(Rh)})));return Object(o.createElement)(Rv,{zIndex:n},Object(o.createElement)(mh,null,Object(o.createElement)(gh,{className:zh(Dh),onClick:function(){s({isOpen:!1})}})),Object(o.createElement)(Dv,{id:"tabs",selectedTabId:l,onChange:function(e){s({selectedTabId:e})}},t.run("renderRightTopPanelTabs",e)))}var _v=Object(v.a)(Array(7).keys()),Iv=[0,5,10,15,20,25,30,35],Mv=["none","solid","dotted","dashed","double"];function Av(e){var t=e.contentStyle,n=e.setContentStyle;return Object(o.createElement)(qm,null,Object(o.createElement)(kh,null,Hm(e,tm)),Object(o.createElement)(Sh,null,Object(o.createElement)(tO,{text:"".concat(Hm(e,nm),": ").concat(t.borderWidth?t.borderWidth:Hm(e,dg)),items:_v,itemRenderer:nO("px"),onItemSelect:function(e){n({borderWidth:"".concat(e,"px")})}}),Object(o.createElement)(tO,{text:"".concat(Hm(e,wg),": ").concat(t.borderStyle?Hm(e,t.borderStyle):Hm(e,pm)),items:Mv,itemRenderer:oO(e),onItemSelect:function(e){n({borderStyle:e})}}),Object(o.createElement)(tO,{text:"".concat(Hm(e,om),": ").concat(t.borderRadius),items:Iv,itemRenderer:nO("px"),onItemSelect:function(e){n({borderRadius:"".concat(e,"px")})}}),Object(o.createElement)(Xm,{color:t.borderColor,handleColorChange:function(e){n({borderColor:e})}})))}var Nv=["curve","round","line"];function Fv(e){var t=e.showLinkStyle,n=void 0===t||t,r=e.showSubLinkStyle,a=void 0===r||r,c=e.linkStyle,i=void 0===c?{}:c,l=e.subLinkStyle,s=void 0===l?{}:l,u=e.setLinkStyle,p=e.setSubLinkStyle;return Object(o.createElement)(qm,null,Object(o.createElement)(kh,null,Hm(e,Cg)),n&&Object(o.createElement)(Sh,{alignItems:"center"},Object(o.createElement)(dh,{margin:"0 5px 0 0"},Hm(e,Kg)+":"," "),Object(o.createElement)(tO,{text:"".concat(Hm(e,nm),": ").concat(i?i.lineWidth:"0px"),items:rO,itemRenderer:nO("px"),onItemSelect:function(e){u({lineWidth:"".concat(e,"px")})}}),Object(o.createElement)(tO,{text:"".concat(Hm(e,Mg),": ").concat(Hm(e,i.lineType)),items:Nv,itemRenderer:oO(e),onItemSelect:function(e){u({lineType:e})}}),Object(o.createElement)(Xm,{color:i.lineColor,handleColorChange:function(e){u({lineColor:e})}})),a&&Object(o.createElement)(Sh,{alignItems:"center"},Object(o.createElement)(dh,{margin:"0 5px 0 0"},Hm(e,Rg)+": "),Object(o.createElement)(tO,{text:"".concat(Hm(e,nm),": ").concat(s?s.lineWidth:"0px"),items:rO,itemRenderer:nO("px"),onItemSelect:function(e){p({lineWidth:"".concat(e,"px")})}}),Object(o.createElement)(tO,{text:"".concat(Hm(e,Mg),": ").concat(Hm(e,s.lineType)),items:Nv,itemRenderer:oO(e),onItemSelect:function(e){p({lineType:e})}}),Object(o.createElement)(Xm,{color:s.lineColor,handleColorChange:function(e){p({lineColor:e})}})))}function Pv(e){var t=e.contentStyle,n=e.setContentStyle,r={title:"".concat(Hm(e,rm),":"),min:12,max:100,value:parseInt(t.fontSize),style:{width:50},onValueChange:function(e){n({fontSize:e})}},a={title:"".concat(Hm(e,am),":"),style:{width:50},value:t.lineHeight||"",onChange:function(e){n({lineHeight:e.target.value})}};return Object(o.createElement)(qm,null,Object(o.createElement)(kh,null,Hm(e,Sg)),Object(o.createElement)(ph,null,Object(o.createElement)(Qm,Object.assign({},r)),Object(o.createElement)(eO,Object.assign({},a)),Object(o.createElement)(Xm,{color:t.color,handleColorChange:function(e){n({color:e})}})))}var Bv,zv=b()("node:style-editor");function Vv(e){var t=e.controller,n=e.model,r=e.topicKey,a=n.getTopic(r),c=function(n){t.run("setTopicContentStyle",Object(m.a)(Object(m.a)({},e),{},{style:n}))};if(!n.focusKey)return null;var i=t.run("getTopicContentStyle",e),l=t.run("getLinkStyle",e),s=t.run("getSubLinkStyle",e),u=Object(m.a)(Object(m.a)({},e),{},{linkStyle:l,subLinkStyle:s,setLinkStyle:function(n){t.run("setLinkStyle",Object(m.a)(Object(m.a)({},e),{},{linkStyle:n}))},setSubLinkStyle:function(n){t.run("setSubLinkStyle",Object(m.a)(Object(m.a)({},e),{},{subLinkStyle:n}))}}),p=Object(m.a)(Object(m.a)({},e),{},{contentStyle:i,setContentStyle:c});return Object(o.createElement)(Th,null,Object(o.createElement)(Av,Object.assign({},p)),Object(o.createElement)(Pv,Object.assign({},p)),Object(o.createElement)(qm,null,Object(o.createElement)(kh,null,Hm(e,Qg)),Object(o.createElement)(Xm,{color:i.background,handleColorChange:function(e){c({background:e})}})),Object(o.createElement)(Fv,Object.assign({},u)),Object(o.createElement)(qm,null,Object(o.createElement)($m,{title:Hm(e,_g),onClick:function(){a.style&&t.run("operation",Object(m.a)(Object(m.a)({},e),{},{opType:Eb,style:null}))}}),Object(o.createElement)($m,{title:Hm(e,Dg),onClick:function(){Bv=t.run("getTopicStyle",e),zv(Bv)}}),Object(o.createElement)($m,{title:Hm(e,Lg),onClick:function(){Bv&&t.run("operation",Object(m.a)(Object(m.a)({},e),{},{opType:Eb,style:JSON.stringify(Bv)}))}})),function(e){var t=e.controller;return Object(o.createElement)(qm,null,Object(o.createElement)(Eh,null,Object(o.createElement)(y.d,{onClick:function(n){t.run("operation",Object(m.a)(Object(m.a)({},e),{},{opType:xb}))}},Hm(e,Ig))))}(e))}var Hv=n(109);function Gv(e){var t=e.contentStyle,n=e.setContentStyle,r=Hv("padding",t.padding||"0"),a={layout:"v",min:0,max:99,style:{width:38}},c=parseInt(r["padding-top"]),i=parseInt(r["padding-right"]),l=parseInt(r["padding-bottom"]),s=parseInt(r["padding-left"]),u={top:c,right:i,bottom:l,left:s},p=function(e){return function(t){n({padding:Vm(Object(m.a)(Object(m.a)({},u),{},Object(wi.a)({},e,t)))})}},d=Object(m.a)(Object(m.a)({},a),{},{title:Hm(e,im),value:c,onValueChange:p("top")}),f=Object(m.a)(Object(m.a)({},a),{},{title:Hm(e,um),value:i,onValueChange:p("right")}),b=Object(m.a)(Object(m.a)({},a),{},{title:Hm(e,lm),value:l,onValueChange:p("bottom")}),y=Object(m.a)(Object(m.a)({},a),{},{title:Hm(e,sm),value:s,onValueChange:p("left")});return Object(o.createElement)(qm,null,Object(o.createElement)(kh,null,Hm(e,cm)),Object(o.createElement)(Sh,null,Object(o.createElement)(Qm,Object.assign({},d)),Object(o.createElement)(Qm,Object.assign({},f)),Object(o.createElement)(Qm,Object.assign({},b)),Object(o.createElement)(Qm,Object.assign({},y))))}var Uv=d.default.div(Yy||(Yy=Object(Ri.a)(["\n  height: 250px;\n  overflow: auto;\n"])));function Wv(e){var t=e.topicStyle,n=e.setTopicStyle,r=t.contentStyle,a=void 0===r?{}:r,c=t.linkStyle,i=void 0===c?{}:c,l=t.subLinkStyle,s=void 0===l?{}:l,u=function(e){n({contentStyle:e})},p=Object(m.a)(Object(m.a)({},e),{},{contentStyle:a,setContentStyle:u}),d=Object(m.a)(Object(m.a)({},e),{},{showLinkStyle:!1,linkStyle:i,subLinkStyle:s,setLinkStyle:function(e){n({linkStyle:e})},setSubLinkStyle:function(e){n({subLinkStyle:e})}});return Object(o.createElement)(Uv,null,Object(o.createElement)(Av,Object.assign({},p)),Object(o.createElement)(Gv,Object.assign({},p)),Object(o.createElement)(Pv,Object.assign({},p)),Object(o.createElement)(qm,null,Object(o.createElement)(kh,null,Hm(e,Qg)),Object(o.createElement)(Xm,{color:a.background,handleColorChange:function(e){u({background:e})}})),Object(o.createElement)(Fv,Object.assign({},d)))}b()("node:theme-editor");var Jv="normal";function Zv(e){var t,n=Object(o.useState)(!1),r=Object(Si.a)(n,2),a=r[0],c=r[1],i=e.model,l=e.controller,s=Object(at.cloneDeep)(i.config.theme),u=l.run("getThemeOfTopic",Object(m.a)(Object(m.a)({},e),{},{isClone:!0})),p=u.rootTopic,d=u.primaryTopic,f=u.normalTopic,b=function(t){l.run("operation",Object(m.a)(Object(m.a)({},e),{},{opType:wb,theme:t}))},h=(t=function(e){b(Object(at.merge)(s,{randomColor:e}))},function(e){return t(e.target.checked)}),g=Object(m.a)(Object(m.a)({},e),{},{topicStyle:p,setTopicStyle:function(e){b(Object(at.merge)(s,{rootTopic:e}))}}),O=Object(o.createElement)(Wv,Object.assign({},g)),v=Object(m.a)(Object(m.a)({},e),{},{topicStyle:d,setTopicStyle:function(e){b(Object(at.merge)(s,{primaryTopic:e}))}}),T=Object(o.createElement)(Wv,Object.assign({},v)),j=Object(m.a)(Object(m.a)({},e),{},{topicStyle:f,setTopicStyle:function(e){b(Object(at.merge)(s,{normalTopic:e}))}}),k=Object(o.createElement)(Wv,Object.assign({},j)),E={id:Jv,handleTabIdChange:function(e){Jv=e}},x=Object(o.createElement)(xh,null,Object(o.createElement)(y.w,Object.assign({},E),Object(o.createElement)(y.v,{id:"normal",title:Hm(e,Bg),panel:k}),Object(o.createElement)(y.v,{id:"primary",title:Hm(e,zg),panel:T}),Object(o.createElement)(y.v,{id:"root",title:Hm(e,Vg),panel:O}))),w={isOpen:a,onClose:function(e){c(!1)}},S=Object(o.createElement)(y.a,Object.assign({},w),Object(o.createElement)("p",null,"File format error"));return Object(o.createElement)(Th,null,Object(o.createElement)(qm,null,Object(o.createElement)(kh,null,Hm(e,Ng)),Object(o.createElement)(Sh,null,Object(o.createElement)(wh,null,Hm(e,Qg)+":"),Object(o.createElement)(Xm,{color:s.background,handleColorChange:function(e){b(Object(at.merge)(s,{background:e}))}}),Object(o.createElement)(wh,null,Hm(e,Fg)+":"),Object(o.createElement)(Xm,{color:s.highlightColor,handleColorChange:function(e){b(Object(at.merge)(s,{highlightColor:e}))}}),Object(o.createElement)(wh,null,Hm(e,Pg)+":"),Object(o.createElement)(hh,{checked:s.randomColor,onChange:h}))),x,Object(o.createElement)(qm,null,Object(o.createElement)($m,{title:Hm(e,Hg),onClick:function(e){zm(JSON.stringify(s),"blink-mind-theme.json")}}),Object(o.createElement)($m,{title:Hm(e,Gg),onClick:function(e){(function(e){var t=document.createElement("input");return t.type="file",t.accept=e,new Promise((function(e,n){t.addEventListener("change",(function(t){var o=t.target.files[0],r=new FileReader;r.onload=function(t){var n=t.target.result;e(n)},r.onerror=function(e){n(e.target.error)},r.readAsText(o)})),t.click()}))})(".json,.txt").then((function(e){var t,n=JSON.parse(e);null!=(t=n).name&&null!=t.background&&null!=t.highlightColor?b(n):c(!0)}))}})),S)}function Yv(){return{renderRightTopPanel:function(e){var t=Object(m.a)(Object(m.a)({},e),{},{key:"right-top-panel"});return Object(o.createElement)(Lv,Object.assign({},t))},renderRightTopPanelTabs:function(e){var t=e.controller;return[t.run("renderTopicStyleEditor",e),t.run("renderThemeEditor",e)]},renderTopicStyleEditor:function(e){var t={id:"topic-style",key:"topic-style",title:Hm(e,xg),panel:Object(o.createElement)(Vv,Object.assign({},e))};return Object(o.createElement)(y.v,Object.assign({},t))},renderThemeEditor:function(e){var t={id:"theme-editor",key:"theme-editor",title:Hm(e,Ag),panel:Object(o.createElement)(Zv,Object.assign({},e))};return Object(o.createElement)(y.v,Object.assign({},t))}}}var qv=d.default.div(qy||(qy=Object(Ri.a)(["\n  box-shadow: rgb(170, 170, 170) 0 0 2px;\n  background: white;\n  .iconfont {\n    font-size: 28px !important;\n  }\n"])));function Xv(e){var t=e.controller;return Object(o.createElement)(qv,null,t.run("renderToolbarItems",e))}function $v(e){var t=[[Xf.LEFT_AND_RIGHT,Hm(e,bg),"layout-left-and-right"],[Xf.LEFT_TO_RIGHT,Hm(e,hg),"layout-right"],[Xf.RIGHT_TO_LEFT,Hm(e,yg),"layout-left"]];return Object(o.createElement)(cO,Object.assign({className:zh(Bh)},e),Object(o.createElement)(y.s,{enforceFocus:!1},Object(o.createElement)(jh,null),Object(o.createElement)(y.n,null,t.map((function(t){return Object(o.createElement)(y.p,{key:t[1],icon:Vh(t[2]),text:t[1],onClick:(n=t[0],function(t){e.controller.run("operation",Object(m.a)(Object(m.a)({},e),{},{opType:_b,layoutDir:n}))})});var n})))))}function Qv(){return{renderToolbar:function(e){return Object(o.createElement)(Xv,Object.assign({},e))},renderToolbarItems:function(e){var t=e.controller.run("customizeToolbar",e);return t.sort((function(e,t){return e.order-t.order})),t.map((function(t){return Object(o.createElement)(t.element,Object(m.a)(Object(m.a)({},e),{},{key:t.order.toString()}))}))},customizeToolbar:function(e){return[{order:100,element:$v}]}}}var eT=b()("plugin:utils");function tT(){var e=new Map,t=new Map;return{addTempValueChangeListener:function(e){var n=e.key,o=e.listener;t.has(n)||t.set(n,[]),t.get(n).push(o)},removeTempValueChangeListener:function(e){var n=e.key,o=e.listener;t.has(n)&&(t[n]=t.get(n).filter((function(e){return e!==o})))},getTempValue:function(t){var n=t.key;return eT("getTempValue",n),e.get(n)},setTempValue:function(n){var o=n.key,r=n.value;if(eT("setTempValue",o),e.set(o,r),t.has(o)){var a,c=t.get(o),i=Object(O.a)(c);try{for(i.s();!(a=i.n()).done;){(0,a.value)(r)}}catch(l){i.e(l)}finally{i.f()}}},deleteTempValue:function(t){var n=t.key;eT("deleteTempValue",n);var o=e.get(n);return e.delete(n),o}}}function nT(){return[Kv(),tT(),kO(),Yv(),Qv(),KO()]}var oT=b()("node:text-editor"),rT=d.default.div(Xy||(Xy=Object(Ri.a)(["\n  padding: 6px;\n  background-color: ",";\n  cursor: ",";\n  min-width: 50px;\n"])),(function(e){return e.readOnly?null:"white"}),(function(e){return e.readOnly?"pointer":"text"})),aT=function(e){Object(s.a)(n,e);var t=Object(u.a)(n);function n(e){var o;return Object(i.a)(this,n),(o=t.call(this,e)).state={content:null},o.onMouseDown=function(e){e.stopPropagation()},o.onMouseMove=function(e){},o.onKeyDown=function(e){},o._handleClick=function(e){!o.root.contains(e.target)&&o.onClickOutSide(e)},o.rootRef=function(e){return function(t){e(t),o.root=t}},o.initState(),o}return Object(l.a)(n,[{key:"onChange",value:function(e){var t=e.value;oT("onChange",t),this.setState({content:t})}},{key:"componentDidMount",value:function(){this.props.readOnly||document.addEventListener("click",this._handleClick)}},{key:"componentWillUnmount",value:function(){this.props.readOnly||document.removeEventListener("click",this._handleClick)}},{key:"onClickOutSide",value:function(e){}},{key:"getCustomizeProps",value:function(){return null}},{key:"getContent",value:function(){var e=this.getCustomizeProps().block.data;return null==e?null:("string"===typeof e&&(e=Ne.a.deserialize(e)),e)}},{key:"initState",value:function(){var e=this.getContent();this.state={content:e}}},{key:"render",value:function(){var e=this.props,t=e.topicKey,n=e.saveRef,r=this.getCustomizeProps(),a=r.readOnly,c=r.getRefKeyFunc,i=r.placeholder,l=r.style;oT(a);var s=c(t),u=a?this.getContent():this.state.content,p=this.onMouseDown,d=this.onMouseMove,f=this.onKeyDown,b={value:u,readOnly:a,onChange:this.onChange.bind(this),placeholder:i,style:l},y={key:s,readOnly:a,ref:this.rootRef(n(s)),onMouseDown:p,onMouseMove:d,onKeyDown:f};return Object(o.createElement)(rT,Object.assign({},y),Object(o.createElement)(Fe.Editor,Object.assign({},b,{autoFocus:!0})))}}]),n}(o.PureComponent),cT=b()("node:topic-content-editor");function iT(e){return"content-editor-".concat(e)}var lT=function(e){Object(s.a)(n,e);var t=Object(u.a)(n);function n(e){var o;return Object(i.a)(this,n),(o=t.call(this,e)).onKeyDown=function(e){e.nativeEvent.ctrlKey&&"Enter"===e.nativeEvent.code&&o.save()},o}return Object(l.a)(n,[{key:"getCustomizeProps",value:function(){var e=this.props,t=e.model,n=e.topicKey,o=e.readOnly;return{block:t.getTopic(n).getBlock(rb).block,readOnly:o,getRefKeyFunc:iT,placeholder:"new",style:{whiteSpace:"pre"}}}},{key:"onClickOutSide",value:function(e){cT("onClickOutSide"),this.save()}},{key:"save",value:function(){var e=this.props,t=e.model,n=e.topicKey;t.editingContentKey!==n||this.props.controller.run("operation",Object(m.a)(Object(m.a)({},this.props),{},{opType:Sb,blockType:rb,data:this.state.content,focusMode:cb}))}}]),n}(aT),sT=b()("node:topic-desc-editor");function uT(e){return"desc-editor-".concat(e)}var pT=function(e){Object(s.a)(n,e);var t=Object(u.a)(n);function n(e){var o;return Object(i.a)(this,n),o=t.call(this,e),sT("constructor"),o}return Object(l.a)(n,[{key:"initState",value:function(){Object(Ei.a)(Object(xi.a)(n.prototype),"initState",this).call(this);var e=this.props,t=e.controller,o=e.topicKey,r="topic-desc-data-".concat(o),a=this.state.content;t.run("setTempValue",{key:r,value:a})}},{key:"getCustomizeProps",value:function(){var e=this.props,t=e.model,n=e.topicKey;return{block:t.getTopic(n).getBlock(ab).block,readOnly:t.editingDescKey!==n,getRefKeyFunc:uT,placeholder:"write topic notes here"}}},{key:"onChange",value:function(e){var t=e.value;sT("onChange");var n=this.props,o=n.controller,r=n.topicKey;if(!(n.model.editingDescKey!==r)){var a="topic-desc-data-".concat(r);o.run("setTempValue",{key:a,value:t}),this.setState({content:t})}}}]),n}(aT);var dT=b()("plugin:StylePlugin");function fT(){var e=new Map,t=0;return{getTopicStyle:function(e){var t=e.controller;return{contentStyle:t.run("getTopicContentStyle",e),linkStyle:t.run("getLinkStyle",e),subLinkStyle:t.run("getSubLinkStyle",e)}},getTopicContentStyle:function(e){var t=e.topicKey,n=e.model,o=e.controller;dT("getTopicContentStyle:",t,n);var r,a=n.getTopicVisualLevel(t),c=n.config.theme;if(r=a===nb?c.rootTopic:a===ob?c.primaryTopic:c.normalTopic,r=Object(m.a)(Object(m.a)({},c.contentStyle),r.contentStyle),c.randomColor){var i=o.run("getRandomColor",e);r=Object(m.a)(Object(m.a)({},r),{},{background:i,borderColor:i,subLinkStyle:Object(m.a)(Object(m.a)({},r.subLinkStyle),{},{lineColor:i})})}var l=n.getTopic(t);if(!l.style)return r;var s=JSON.parse(l.style);return Object(m.a)(Object(m.a)({},r),s.contentStyle)},getLinkStyle:function(e){var t=e.topicKey,n=e.model,o=e.controller;dT("getLinkStyle",t);var r,a=n.getTopicVisualLevel(t),c=n.config.theme,i=c.linkStyle;r=a===nb?c.rootTopic.linkStyle:a===ob?c.primaryTopic.linkStyle:c.normalTopic.linkStyle,i=Object(m.a)(Object(m.a)({},i),r);var l=n.getTopic(t);if(null!=l.parentKey){var s=o.run("getSubLinkStyle",Object(m.a)(Object(m.a)({},e),{},{topicKey:l.parentKey}));i=Object(m.a)(Object(m.a)({},i),s)}if(!l.style)return i;var u=JSON.parse(l.style);return Object(m.a)(Object(m.a)({},i),u.linkStyle)},getSubLinkStyle:function(e){var t=e.topicKey,n=e.model,o=e.controller;dT("getLinkStyle",t);var r,a=n.getTopicVisualLevel(t),c=n.config.theme,i=c.linkStyle;r=a===nb?c.rootTopic.subLinkStyle:a===ob?c.primaryTopic.subLinkStyle:c.normalTopic.subLinkStyle,i=Object(m.a)(Object(m.a)({},i),r);var l=n.getTopic(t);if(c.randomColor){var s=o.run("getRandomColor",e);dT(s),i=Object(m.a)(Object(m.a)({},i),{},{lineColor:s})}if(!l.style)return i;var u=JSON.parse(l.style);return Object(m.a)(Object(m.a)({},i),u.subLinkStyle)},setTopicContentStyle:function(e){var t=e.topicKey,n=e.controller,o=e.style,r=e.model.getTopic(t).style,a=r?JSON.parse(r):{},c=Object(m.a)(Object(m.a)({},a),{},{contentStyle:Object(m.a)(Object(m.a)({},a.contentStyle),o)});if(!Object(at.isEqual)(a,c)){var i=JSON.stringify(c);n.run("operation",Object(m.a)(Object(m.a)({},e),{},{opType:Eb,style:i}))}},setLinkStyle:function(e){var t=e.topicKey,n=e.controller,o=e.linkStyle,r=e.model.getTopic(t).style,a=r?JSON.parse(r):{},c=Object(m.a)(Object(m.a)({},a),{},{linkStyle:Object(m.a)(Object(m.a)({},a.linkStyle),o)});if(!Object(at.isEqual)(a,c)){var i=JSON.stringify(c);n.run("operation",Object(m.a)(Object(m.a)({},e),{},{opType:Eb,style:i}))}},setSubLinkStyle:function(e){var t=e.topicKey,n=e.controller,o=e.subLinkStyle,r=e.model.getTopic(t).style,a=r?JSON.parse(r):{},c=Object(m.a)(Object(m.a)({},a),{},{subLinkStyle:Object(m.a)(Object(m.a)({},a.subLinkStyle),o)});if(!Object(at.isEqual)(a,c)){var i=JSON.stringify(c);n.run("operation",Object(m.a)(Object(m.a)({},e),{},{opType:Eb,style:i}))}},getTopicThemeStyle:function(e){var t=e.topicKey,n=e.model,o=n.getTopicVisualLevel(t),r=n.config.theme;return o===nb?r.rootTopic:o===ob?r.primaryTopic:r.normalTopic},getRandomColor:function(n){var o=n.topicKey;if(e.has(o))return e.get(o);var r=["#00CC99","#FFEE88","#A167A5","#E5F993","#F5C396","#DB995A","#83BCFF","#ED7B84","#739E82","#D3BCC0","#FFA0FD","#EFD3D7","#C6878F"],a=r[++t%r.length];return e.set(o,a),dT("getRandomColor",o,a),a}}}function bT(){return[nT(),{getPartTopics:function(e){var t=e.layout,n=e.model,o=e.topicKey,r=n.getTopic(o),a=r.subKeys.size,c=r.subKeys.toArray();switch(t){case Xf.LEFT_TO_RIGHT:return{R:c};case Xf.RIGHT_TO_LEFT:return{L:c};case Xf.LEFT_AND_RIGHT:return{L:c.slice(Math.ceil(a/2),a),R:c.slice(0,Math.ceil(a/2))};case Xf.TOP_TO_BOTTOM:return{B:c}}},createSubTopics:function(e){var t=e.model,n=e.topicKey,o=e.controller,r=e.topics,a=e.saveRef,c=t.getTopic(n);if(0===r.size||c.collapse)return null;var i=[];return r.forEach((function(t){var n=Object(m.a)(Object(m.a)({},e),{},{topicKey:t,key:t,ref:a(Wh(t))});i.push(o.run("renderTopicWidget",n))})),{subTopics:i}},layout:function(e){var t=e.getRef,n=e.model,o=t(Zh(n.editorRootTopicKey)),r=t(tg),a=t(ng);o&&o.layout(),r&&r.layout(),a&&a.layout(),function e(o){if(o.key!==n.editorRootTopicKey){var r=t(Wh(o.key));r&&r.layoutLinks()}if(!o.collapse){var a,c=Object(O.a)(o.subKeys);try{for(c.s();!(a=c.n()).done;){var i=a.value;e(n.getTopic(i))}}catch(l){c.e(l)}finally{c.f()}}}(n.getTopic(n.editorRootTopicKey))},getRelativeRect:function(e){var t=e.element,n=e.controller,o=e.getRef,r=n.run("getZoomFactor",e);return Zm(t,o(Qh).bigView,r)},getRelativeRectFromViewPort:function(e){var t=e.element,n=e.controller,o=e.getRef,r=n.run("getZoomFactor",e);return Zm(t,o(Qh).viewBox,r)},getRelativeVectorFromViewPort:function(e){return Ym(e.element,(0,e.getRef)(Qh).viewBox)},addZoomFactorChangeEventListener:function(e){e.controller.run("addTempValueChangeListener",Object(m.a)({key:"ZoomFactor"},e))},removeZoomFactorChangeEventListener:function(e){e.controller.run("removeTempValueChangeListener",Object(m.a)({key:"ZoomFactor"},e))},setZoomFactor:function(e){var t=e.controller,n=e.zoomFactor;return t.run("setTempValue",{key:"ZoomFactor",value:n})},getZoomFactor:function(e){return e.controller.run("getTempValue",{key:"ZoomFactor"})||1},moveTopicToCenter:function(e){var t=e.getRef,n=e.topicKey,o=e.model,r=e.moveDir,a=void 0===r?hO:r;if(o.editorRootTopicKey!==n&&Bb(o,n,o.editorRootTopicKey)!==db)throw new Error("moveTopicToCenter error: topicKey ".concat(n," is not the DESCENDANT of editor root topic"));var c=t(Jh(n)),i=t(Qh),l=i.viewBox;if(!c||!l)throw new Error("moveTopicToCenter error: topic or viewBox is null");var s=Ym(c,l);if(a===yO)i.setViewBoxScrollDelta(s[0],s[1]);else if(a===hO){var u=l.getBoundingClientRect(),p=c.getBoundingClientRect(),d=(u.width-p.width)/2;i.setViewBoxScrollDelta(s[0]+d-200,s[1])}},focusTopicAndMoveToCenter:function(e){var t=e.controller,n=e.topicKey;t.run("operation",Object(m.a)(Object(m.a)({},e),{},{opArray:[{opType:jb,topicKey:n,focusMode:cb},{opType:mb,topicKey:n}],allowUndo:!1,callback:function(o){return function(){t.run("moveTopicToCenter",Object(m.a)(Object(m.a)({},e),{},{model:o,topicKey:n}))}}}))}},vO(),fT(),lO(),gO(),{getValue:function(e,t){var n=e.propKey,o=e.controller,r=e.diagramState;switch(n){case rg:return 3;case ag:case sg:return o.run("isOperationEnabled",e);case cg:return o.run("getTopicTitle",e);case ig:return r.dragDrop;case lg:return r.rightTopPanel}return t()}},{getTopicTitle:function(e){var t=e.model,n=e.controller,o=e.topicKey,r=e.maxLength,a=t.getTopic(o).getBlock(rb).block,c=n.run("serializeBlockData",Object(m.a)(Object(m.a)({},e),{},{block:a}));return null!=r&&(c=c.length>r?c.substr(0,r)+"...":c),c},renderTopicContentEditor:function(e){return Object(o.createElement)(lT,Object.assign({},e))},renderTopicDescEditor:function(e){return Object(o.createElement)(pT,Object.assign({},e))},isBlockEmpty:function(e,t){var n=e.block,o=e.controller;return n.type===rb||n.type===ab?null==n.data||""===o.run("serializeBlockData",e):t()},serializeBlockData:function(e,t){var n=e.block;return n.type===rb||n.type===ab?"string"===typeof n.data?n.data:Ne.a.serialize(n.data):t()}},{createNewModel:function(e){return Ub.createEmpty()}},{getThemeOfTopic:function(e){var t=e.model.config.theme,n=t.contentStyle,o=t.rootTopic,r=t.primaryTopic,a=t.normalTopic;return{rootTopic:Object(m.a)(Object(m.a)({},o),{},{contentStyle:Object(m.a)(Object(m.a)({},n),o.contentStyle)}),primaryTopic:Object(m.a)(Object(m.a)({},r),{},{contentStyle:Object(m.a)(Object(m.a)({},n),r.contentStyle)}),normalTopic:Object(m.a)(Object(m.a)({},a),{},{contentStyle:Object(m.a)(Object(m.a)({},n),a.contentStyle)})}}},mO()]}b()("node:Diagram"),o.Component;var yT=n(299),hT=n(30),gT=n(24),mT=(n(847),n(42)),OT=n(76),vT=n(62),TT=function(e,t){return(TT=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(e,t)};function jT(e,t){function n(){this.constructor=e}TT(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}var kT=function(){return(kT=Object.assign||function(e){for(var t,n=1,o=arguments.length;n<o;n++)for(var r in t=arguments[n])Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r]);return e}).apply(this,arguments)};function ET(e,t){return Object.defineProperty?Object.defineProperty(e,"raw",{value:t}):e.raw=t,e}function xT(e){var t=e.controller,n=e.model,r=e.topicKey,a=n.focusKey===r&&"FOCUS_MODE_EDITING_TOPOLOGY"===n.focusMode,c=n.getTopic(r).getBlock("TOPOLOGY").block;if(!a&&!c)return null;var i={className:zh("topology"),onClick:function(n){n.stopPropagation(),t.run("operation",kT(kT({},e),{opType:"OP_TYPE_START_EDITING_TOPOLOGY"}))},tabIndex:-1};return Object(o.createElement)(Oh,kT({},i))}var wT,ST,CT,KT,RT,DT,LT,_T,IT,MT,AT=[{group:"Basic",children:[{name:"rectangle",icon:"icon-rect",data:{text:"Topology",rect:{width:100,height:100},paddingLeft:10,paddingRight:10,paddingTop:10,paddingBottom:10,name:"rectangle",icon:"\ue64d",iconFamily:"topology",iconColor:"#2f54eb"}},{name:"rectangle",icon:"icon-rectangle",data:{text:"rectangle",rect:{width:200,height:50},paddingLeft:10,paddingRight:10,paddingTop:10,paddingBottom:10,borderRadius:.1,name:"rectangle"}},{name:"circle",icon:"icon-circle",data:{text:"circle",rect:{width:100,height:100},name:"circle",textMaxLine:1}},{name:"triangle",icon:"icon-triangle",data:{text:"triangle",rect:{width:100,height:100},name:"triangle"}},{name:"diamond",icon:"icon-diamond",data:{text:"diamond",rect:{width:100,height:100},name:"diamond"}},{name:"pentagon",icon:"icon-pentagon",data:{text:"pentagon",rect:{width:100,height:100},name:"pentagon"}},{name:"hexagon",icon:"icon-hexagon",data:{text:"hexagon",rect:{width:100,height:100},paddingTop:10,paddingBottom:10,name:"hexagon"}},{name:"pentagram",icon:"icon-pentagram",data:{text:"pentagram",rect:{width:100,height:100},name:"pentagram"}},{name:"left arrow",icon:"icon-arrow-left",data:{text:"",rect:{width:200,height:100},name:"leftArrow"}},{name:"right arrow",icon:"icon-arrow-right",data:{text:"",rect:{width:200,height:100},name:"rightArrow"}},{name:"bidirectional arrow",icon:"icon-twoway-arrow",data:{text:"",rect:{width:200,height:100},name:"twowayArrow"}},{name:"line",icon:"icon-line",data:{text:"line",rect:{width:100,height:100},name:"line"}},{name:"cloud",icon:"icon-cloud",data:{text:"cloud",rect:{width:100,height:100},name:"cloud"}},{name:"message",icon:"icon-msg",data:{text:"message",rect:{width:100,height:100},paddingLeft:10,paddingRight:10,paddingTop:10,paddingBottom:10,name:"message"}},{name:"file",icon:"icon-file",data:{text:"file",rect:{width:80,height:100},paddingLeft:10,paddingRight:10,paddingTop:10,paddingBottom:10,name:"file"}},{name:"text",icon:"icon-text",data:{text:"text",rect:{width:160,height:30},name:"text"}},{name:"image",icon:"icon-image",data:{text:"",rect:{width:100,height:100},name:"image",image:"/assets/img/logo.png"}},{name:"cube",icon:"icon-cube",data:{rect:{width:50,height:70},is3D:!0,z:10,zRotate:15,fillStyle:"#ddd",name:"cube",icon:"\ue63c",iconFamily:"topology",iconColor:"#777",iconSize:30}},{name:"people",icon:"icon-people",data:{rect:{width:70,height:100},name:"people"}},{name:"multi media",icon:"icon-pc",data:{text:"multi media",rect:{width:200,height:200},paddingLeft:10,paddingRight:10,paddingTop:10,paddingBottom:10,name:"div"}}]},{group:"Flow Graph",children:[{name:"start/end",icon:"icon-flow-start",data:{text:"start",rect:{width:120,height:40},borderRadius:.5,name:"rectangle"}},{name:"flow",icon:"icon-rectangle",data:{text:"flow",rect:{width:120,height:40},name:"rectangle"}},{name:"judgement",icon:"icon-diamond",data:{text:"judgement",rect:{width:120,height:60},name:"diamond"}},{name:"data",icon:"icon-flow-data",data:{text:"data",rect:{width:120,height:50},name:"flowData"}},{name:"prepare",icon:"icon-flow-ready",data:{text:"prepare",rect:{width:120,height:50},name:"hexagon"}},{name:"sub flow",icon:"icon-flow-subprocess",data:{text:"sub flow",rect:{width:120,height:50},name:"flowSubprocess"}},{name:"database",icon:"icon-db",data:{text:"database",rect:{width:80,height:120},name:"flowDb"}},{name:"document",icon:"icon-flow-document",data:{text:"document",rect:{width:120,height:100},name:"flowDocument"}},{name:"internal storage",icon:"icon-internal-storage",data:{text:"internal storage",rect:{width:120,height:80},name:"flowInternalStorage"}},{name:"external storage",icon:"icon-extern-storage",data:{text:"external storage",rect:{width:120,height:80},name:"flowExternStorage"}},{name:"queue",icon:"icon-flow-queue",data:{text:"queue",rect:{width:100,height:100},name:"flowQueue"}},{name:"input manually",icon:"icon-flow-manually",data:{text:"input manually",rect:{width:120,height:80},name:"flowManually"}},{name:"display",icon:"icon-flow-display",data:{text:"display",rect:{width:120,height:80},name:"flowDisplay"}},{name:"parallel",icon:"icon-flow-parallel",data:{text:"parallel",rect:{width:120,height:50},name:"flowParallel"}},{name:"comment",icon:"icon-flow-comment",data:{text:"comment",rect:{width:100,height:100},name:"flowComment"}}]},{group:"Activity Diagram",children:[{name:"start",icon:"icon-inital",data:{text:"",rect:{width:30,height:30},name:"circle",fillStyle:"#555",strokeStyle:"transparent"}},{name:"end",icon:"icon-final",data:{text:"",rect:{width:30,height:30},name:"activityFinal"}},{name:"action",icon:"icon-action",data:{text:"action",rect:{width:120,height:50},borderRadius:.25,name:"rectangle"}},{name:"decision/merge",icon:"icon-diamond",data:{text:"\u51b3\u7b56",rect:{width:120,height:50},name:"diamond"}},{name:"vertical swimming lane",icon:"icon-swimlane-v",data:{text:"vertical swimming lane",rect:{width:200,height:500},name:"swimlaneV"}},{name:"horizontal swimming lane",icon:"icon-swimlane-h",data:{text:"horizontal swimming lane",rect:{width:500,height:200},name:"swimlaneH"}},{name:"vertical fork/merge",icon:"icon-fork-v",data:{text:"",rect:{width:10,height:150},name:"forkV",fillStyle:"#555",strokeStyle:"transparent"}},{name:"horizontal fork/merge",icon:"icon-fork",data:{text:"",rect:{width:150,height:10},name:"forkH",fillStyle:"#555",strokeStyle:"transparent"}}]},{group:"Sequence Diagram && Class Diagram",children:[{name:"lifeline",icon:"icon-lifeline",data:{text:"lifeline",rect:{width:150,height:400},name:"lifeline"}},{name:"activation",icon:"icon-focus",data:{text:"",rect:{width:12,height:200},name:"sequenceFocus"}},{name:"simple class",icon:"icon-simple-class",data:{text:"Topolgoy",rect:{width:270,height:200},paddingTop:40,font:{fontFamily:"Arial",color:"#222",fontWeight:"bold"},fillStyle:"#ffffba",strokeStyle:"#7e1212",name:"simpleClass",children:[{text:"- name: string\n+ setName(name: string): void",name:"text",paddingLeft:10,paddingRight:10,paddingTop:10,paddingBottom:10,rectInParent:{x:0,y:0,width:"100%",height:"100%",rotate:0},font:{fontFamily:"Arial",color:"#222",textAlign:"left",textBaseline:"top"}}]}},{name:"class",icon:"icon-class",data:{text:"Topolgoy",rect:{width:270,height:200},paddingTop:40,font:{fontFamily:"Arial",color:"#222",fontWeight:"bold"},fillStyle:"#ffffba",strokeStyle:"#7e1212",name:"interfaceClass",children:[{text:"- name: string",name:"text",paddingLeft:10,paddingRight:10,paddingTop:10,paddingBottom:10,rectInParent:{x:0,y:0,width:"100%",height:"50%",rotate:0},font:{fontFamily:"Arial",color:"#222",textAlign:"left",textBaseline:"top"}},{text:"+ setName(name: string): void",name:"text",paddingLeft:10,paddingRight:10,paddingTop:10,paddingBottom:10,rectInParent:{x:0,y:"50%",width:"100%",height:"50%",rotate:0},font:{fontFamily:"Arial",color:"#222",textAlign:"left",textBaseline:"top"}}]}}]}],NT=d.default.div(wT||(wT=ET(["\n  position: relative;\n  display: flex;\n  width: 100%;\n  height: 100%;\n"],["\n  position: relative;\n  display: flex;\n  width: 100%;\n  height: 100%;\n"]))),FT=d.default.div(ST||(ST=ET(["\n  flex: 1;\n  width: initial;\n  position: relative;\n  overflow: auto;\n  background: #fff;\n"],["\n  flex: 1;\n  width: initial;\n  position: relative;\n  overflow: auto;\n  background: #fff;\n"]))),PT=d.default.div(CT||(CT=ET(["\n  flex-shrink: 0;\n  width: 1.75rem;\n  background-color: #f8f8f8;\n  border-right: 1px solid #d9d9d9;\n  overflow-y: auto;\n"],["\n  flex-shrink: 0;\n  width: 1.75rem;\n  background-color: #f8f8f8;\n  border-right: 1px solid #d9d9d9;\n  overflow-y: auto;\n"]))),BT=d.default.div(KT||(KT=ET(["\n  color: #0d1a26;\n  font-weight: 600;\n  font-size: 0.12rem;\n  padding: 0.05rem 0.1rem;\n  margin-top: 0.08rem;\n  border-bottom: 1px solid #ddd;\n\n  &:first-child {\n    border-top: none;\n  }\n"],["\n  color: #0d1a26;\n  font-weight: 600;\n  font-size: 0.12rem;\n  padding: 0.05rem 0.1rem;\n  margin-top: 0.08rem;\n  border-bottom: 1px solid #ddd;\n\n  &:first-child {\n    border-top: none;\n  }\n"]))),zT=d.default.div(RT||(RT=ET(["\n  padding: 0.1rem 0;\n  a {\n    display: inline-block;\n    color: @text-color;\n    line-height: 1;\n    width: 0.4rem;\n    height: 0.4rem;\n    text-align: center;\n    text-decoration: none !important;\n\n    .iconfont {\n      font-size: 0.24rem;\n    }\n  }\n"],["\n  padding: 0.1rem 0;\n  a {\n    display: inline-block;\n    color: @text-color;\n    line-height: 1;\n    width: 0.4rem;\n    height: 0.4rem;\n    text-align: center;\n    text-decoration: none !important;\n\n    .iconfont {\n      font-size: 0.24rem;\n    }\n  }\n"]))),VT=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.state={id:"",data:null,toolsConfig:AT,iconfont:{fontSize:"0.24rem"}},t.canvasOptions={},t.handleContextMenu=function(e){e.preventDefault(),e.stopPropagation()},t.onMessage=function(e,n){var o=(0,t.props.getRef)("TOPOLOGY_DIAGRAM_UTIL");switch(e){case"resize":case"scale":case"locked":t.topology&&o&&o.setCanvasData(t.topology.data)}},t}return jT(t,e),t.prototype.canvasRegister=function(){Object(hT.registerNode)("flowData",gT.flowData,gT.flowDataAnchors,gT.flowDataIconRect,gT.flowDataTextRect),Object(hT.registerNode)("flowSubprocess",gT.flowSubprocess,null,gT.flowSubprocessIconRect,gT.flowSubprocessTextRect),Object(hT.registerNode)("flowDb",gT.flowDb,null,gT.flowDbIconRect,gT.flowDbTextRect),Object(hT.registerNode)("flowDocument",gT.flowDocument,gT.flowDocumentAnchors,gT.flowDocumentIconRect,gT.flowDocumentTextRect),Object(hT.registerNode)("flowInternalStorage",gT.flowInternalStorage,null,gT.flowInternalStorageIconRect,gT.flowInternalStorageTextRect),Object(hT.registerNode)("flowExternStorage",gT.flowExternStorage,gT.flowExternStorageAnchors,gT.flowExternStorageIconRect,gT.flowExternStorageTextRect),Object(hT.registerNode)("flowQueue",gT.flowQueue,null,gT.flowQueueIconRect,gT.flowQueueTextRect),Object(hT.registerNode)("flowManually",gT.flowManually,gT.flowManuallyAnchors,gT.flowManuallyIconRect,gT.flowManuallyTextRect),Object(hT.registerNode)("flowDisplay",gT.flowDisplay,gT.flowDisplayAnchors,gT.flowDisplayIconRect,gT.flowDisplayTextRect),Object(hT.registerNode)("flowParallel",gT.flowParallel,gT.flowParallelAnchors,null,null),Object(hT.registerNode)("flowComment",gT.flowComment,gT.flowCommentAnchors,null,null),Object(hT.registerNode)("activityFinal",mT.activityFinal,null,mT.activityFinalIconRect,mT.activityFinalTextRect),Object(hT.registerNode)("swimlaneV",mT.swimlaneV,null,mT.swimlaneVIconRect,mT.swimlaneVTextRect),Object(hT.registerNode)("swimlaneH",mT.swimlaneH,null,mT.swimlaneHIconRect,mT.swimlaneHTextRect),Object(hT.registerNode)("forkH",mT.fork,mT.forkHAnchors,mT.forkIconRect,mT.forkTextRect),Object(hT.registerNode)("forkV",mT.fork,mT.forkVAnchors,mT.forkIconRect,mT.forkTextRect),Object(hT.registerNode)("simpleClass",OT.simpleClass,null,OT.simpleClassIconRect,OT.simpleClassTextRect),Object(hT.registerNode)("interfaceClass",OT.interfaceClass,null,OT.interfaceClassIconRect,OT.interfaceClassTextRect),Object(hT.registerNode)("lifeline",vT.lifeline,vT.lifelineAnchors,vT.lifelineIconRect,vT.lifelineTextRect),Object(hT.registerNode)("sequenceFocus",vT.sequenceFocus,vT.sequenceFocusAnchors,vT.sequenceFocusIconRect,vT.sequenceFocusTextRect)},t.prototype.componentDidMount=function(){this.canvasRegister(),this.canvasOptions.on=this.onMessage,this.topology=new yT.Topology("topology-canvas",this.canvasOptions),this.openData()},t.prototype.componentDidUpdate=function(){this.openData()},t.prototype.openData=function(){var e=this.props,t=e.model,n=e.topicKey,o=t.getTopic(n).getBlock("TOPOLOGY").block;o&&o.data&&""!==o.data&&(this.setState({data:o.data}),this.topology.open(o.data))},t.prototype.onDrag=function(e,t){e.dataTransfer.setData("Text",JSON.stringify(t.data))},t.prototype.renderTools=function(){var e=this;return Object(o.createElement)(PT,null,this.state.toolsConfig.map((function(t,n){return Object(o.createElement)("div",{key:n},Object(o.createElement)(BT,null,t.group),Object(o.createElement)(zT,null,t.children.map((function(t,n){return Object(o.createElement)("a",{key:n,title:t.name,draggable:!0,onDragStart:function(n){e.onDrag(n,t)}},Object(o.createElement)("i",{className:"iconfont "+t.icon,style:e.state.iconfont}))}))))})))},t.prototype.render=function(){return Object(o.createElement)(NT,null,this.renderTools(),Object(o.createElement)(FT,{id:"topology-canvas",onContextMenu:this.handleContextMenu}))},t}(rh),HT=d.default.div(DT||(DT=ET(["\n  position: absolute;\n  background: white;\n  right: 30px;\n  bottom: 20px;\n  border-radius: 2px;\n  z-index: 3;\n  display: flex;\n  flex-direction: row;\n  user-select: none;\n"],["\n  position: absolute;\n  background: white;\n  right: 30px;\n  bottom: 20px;\n  border-radius: 2px;\n  z-index: 3;\n  display: flex;\n  flex-direction: row;\n  user-select: none;\n"]))),GT=Object(d.default)(yh)(LT||(LT=ET(["\n  margin: 10px;\n"],["\n  margin: 10px;\n"]))),UT=function(e){return Object(o.createElement)(y.x,{content:e.tooltip,position:g.a.TOP,className:h.a.ICON},Object(o.createElement)(GT,{onClick:e.onClick},e.children))},WT=d.default.span(_T||(_T=ET(["\n  display: inline-block;\n  width: 80px;\n  height: 18px;\n"],["\n  display: inline-block;\n  width: 80px;\n  height: 18px;\n"]))),JT=function(e){function t(t){var n=e.call(this,t)||this;return n.setCanvasData=function(e){n.setState({canvasData:e})},n.onClickResetZoom=function(e){n.getTopology().scaleTo(1)},n.state={deleteConfirm:!1,canvasData:null},n}return jT(t,e),t.prototype.getTopology=function(){return(0,this.props.getRef)("TOPOLOGY_DIAGRAM").topology},t.prototype.render=function(){var e=this,t=this.props,n=t.controller,r={isOpen:this.state.deleteConfirm,cancelButtonText:"cancel",onConfirm:function(e){n.run("operation",kT(kT({},t),{opType:Cb,blockType:"TOPOLOGY"}))},onCancel:function(t){e.setState({deleteConfirm:!1})},onClose:function(t){e.setState({deleteConfirm:!1})}},a=this.state.canvasData,c=a?a.scale:1;return Object(o.createElement)(HT,null,Object(o.createElement)(UT,{onClick:this.onClickResetZoom,tooltip:"reset zoom"},Object(o.createElement)(WT,null,"zoom:"+Math.floor(100*c)+"%")),Object(o.createElement)(UT,{onClick:function(t){e.setState({deleteConfirm:!0})},tooltip:"delete this diagram"},Vh(Ph)),Object(o.createElement)(y.a,kT({},r),Object(o.createElement)("p",null,"Are you confirm to delete this topology diagram?")))},t}(o.Component),ZT=d.default.div(IT||(IT=ET(["\n  position: relative;\n  overflow: auto;\n  padding: 0px 0px 0px 5px;\n  background: #88888850;\n  height: 100%;\n"],["\n  position: relative;\n  overflow: auto;\n  padding: 0px 0px 0px 5px;\n  background: #88888850;\n  height: 100%;\n"]))),YT=d.default.span(MT||(MT=ET(["\n  padding: 0px 20px;\n"],["\n  padding: 0px 20px;\n"])));function qT(e){var t=e.controller,n=e.topicKey,r=e.getRef,a=e.saveRef,c=kT(kT({},e),{ref:a("TOPOLOGY_DIAGRAM")}),i=kT(kT({},e),{ref:a("TOPOLOGY_DIAGRAM_UTIL")});return Object(o.createElement)(y.i,{title:Object(o.createElement)(YT,null,"Topology Diagram Editor"),icon:Vh("topology"),isOpen:!0,hasBackdrop:!0,backdropClassName:"backdrop",backdropProps:{onMouseDown:Bm},canOutsideClickClose:!1,isCloseButtonShown:!0,onClose:function(o){o.stopPropagation();var a=r("TOPOLOGY_DIAGRAM").topology.data;t.run("operation",kT(kT({},e),{opType:Sb,topicKey:n,blockType:"TOPOLOGY",data:a,focusMode:cb}))},size:"100%"},Object(o.createElement)(ZT,{onClick:Bm,onDoubleClick:Bm},Object(o.createElement)(VT,kT({},c)),Object(o.createElement)(JT,kT({},i))))}function XT(e){var t=e.model,n=e.topicKey,o=t.getTopic(n).getBlock("TOPOLOGY").block;return null!=o&&null!=o.data||(t=Hb.setBlockData({model:t,topicKey:n,blockType:"TOPOLOGY",data:""})),t=Hb.focusTopic({model:t,topicKey:n,focusMode:"FOCUS_MODE_EDITING_TOPOLOGY"})}var $T=function(){return{renderTopicBlock:function(e,t){var n=e.controller;return"TOPOLOGY"===e.block.type?n.run("renderTopicBlockTopology",e):t()},renderTopicBlockTopology:function(e){return Object(o.createElement)(xT,kT({},e))},renderDrawer:function(e,t){var n=e.model;if("FOCUS_MODE_EDITING_TOPOLOGY"===n.focusMode){var r=kT(kT({},e),{topicKey:n.focusKey,key:"topology-drawer"});return Object(o.createElement)(qT,kT({},r))}return t()},customizeTopicContextMenu:function(e,t){var n=e.controller;return Object(o.createElement)(o.Fragment,null,t(),Object(o.createElement)(y.o,null),Object(o.createElement)(y.p,{icon:Vh("topology"),text:"Edit Topology Diagram",onClick:function(t){n.run("operation",kT(kT({},e),{opType:"OP_TYPE_START_EDITING_TOPOLOGY"}))}}))},getOpMap:function(e,t){var n=t();return n.set("OP_TYPE_START_EDITING_TOPOLOGY",XT),n}}};function QT(e){return!0===(null!=(t=e)&&"object"===typeof t&&!1===Array.isArray(t))&&"[object Object]"===Object.prototype.toString.call(e);var t}var ej=function(e){var t,n;return!1!==QT(e)&&("function"===typeof(t=e.constructor)&&(!1!==QT(n=t.prototype)&&!1!==n.hasOwnProperty("isPrototypeOf")))};var tj,nj=function(e,t){},oj="L",rj="R",aj="M";!function(e){e[e.LEFT_TO_RIGHT=0]="LEFT_TO_RIGHT",e[e.RIGHT_TO_LEFT=1]="RIGHT_TO_LEFT",e[e.LEFT_AND_RIGHT=2]="LEFT_AND_RIGHT",e[e.TOP_TO_BOTTOM=3]="TOP_TO_BOTTOM"}(tj||(tj={}));var cj=0,ij=1,lj="CONTENT",sj="DESC",uj="NORMAL",pj="EDITING_CONTENT",dj="EDITING_DESC",fj="SHOW_POPUP",bj="DRAGGING",yj="ANCESTOR",hj="DESCENDANT",gj="SIBLING",mj="NONE",Oj="TOGGLE_COLLAPSE",vj="COLLAPSE_ALL",Tj="EXPAND_ALL",jj="EXPAND_TO",kj="ADD_CHILD",Ej="ADD_SIBLING",xj="DELETE_TOPIC",wj="FOCUS_TOPIC",Sj="SET_FOCUS_MODE",Cj="SET_STYLE",Kj="CLEAR_ALL_CUSTOM_STYLE",Rj="SET_THEME",Dj="SET_TOPIC_BLOCK",Lj="DELETE_TOPIC_BLOCK",_j="START_EDITING_CONTENT",Ij="START_EDITING_DESC",Mj="DRAG_AND_DROP",Aj="SET_EDITOR_ROOT",Nj="SET_LAYOUT_DIR",Fj=function(e){Object(s.a)(n,e);var t=Object(u.a)(n);function n(){return Object(i.a)(this,n),t.apply(this,arguments)}return Object(l.a)(n,[{key:"data",get:function(){return this.get("data")}},{key:"type",get:function(){return this.get("type")}}],[{key:"create",value:function(e){return new n(e)}},{key:"createList",value:function(e){if(T.List.isList(e)||Array.isArray(e))return Object(T.List)(e.map(n.create));throw new Error("Block.createList only accepts Array or List, but you passed it: ".concat(e))}}]),n}(Object(T.Record)({type:null,key:null,data:null}));var Pj={readOnly:!1,allowUndo:!0,layoutDir:tj.LEFT_AND_RIGHT,theme:{name:"default",randomColor:!0,background:"rgb(57,60,65)",highlightColor:"#50C9CE",marginH:60,marginV:20,contentStyle:{lineHeight:"1.5"},linkStyle:{lineRadius:5,lineType:"curve",lineWidth:"3px"},rootTopic:{contentStyle:{fontSize:"34px",borderRadius:"35px",padding:"16px 18px 16px 18px"},subLinkStyle:{lineType:"curve",lineWidth:"3px",lineColor:"rgb(113, 203, 45)"}},primaryTopic:{contentStyle:{borderWidth:"1px",borderStyle:"solid",borderRadius:"20px",fontSize:"17px",padding:"10px 15px 10px 15px"},subLinkStyle:{lineType:"curve",lineWidth:"3px",lineColor:"rgb(113, 203, 45)"}},normalTopic:{contentStyle:{border:"1px solid #e8eaec",borderRadius:"20px",fontSize:"17px",padding:"4px 10px"},subLinkStyle:{lineType:"curve",lineWidth:"3px",lineColor:"white"}}}},Bj=function(e){Object(s.a)(n,e);var t=Object(u.a)(n);function n(){return Object(i.a)(this,n),t.apply(this,arguments)}return Object(l.a)(n,[{key:"layoutDir",get:function(){return this.get("layoutDir")}},{key:"readOnly",get:function(){return this.get("readOnly")}},{key:"allowUndo",get:function(){return this.get("allowUndo")}},{key:"theme",get:function(){return this.get("theme")}}],[{key:"fromJSON",value:function(e){return new n(e)}}]),n}(Object(T.Record)(Pj));function zj(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,(function(e){var t=16*Math.random()|0;return("x"===e?t:3&t|8).toString(16)}))}var Vj=function(e){Object(s.a)(n,e);var t=Object(u.a)(n);function n(){return Object(i.a)(this,n),t.apply(this,arguments)}return Object(l.a)(n,[{key:"key",get:function(){return this.get("key")}},{key:"parentKey",get:function(){return this.get("parentKey")}},{key:"collapse",get:function(){return this.get("collapse")}},{key:"subKeys",get:function(){return this.get("subKeys")}},{key:"blocks",get:function(){return this.get("blocks")}},{key:"relations",get:function(){return this.get("relations")}},{key:"style",get:function(){return this.get("style")}},{key:"getBlock",value:function(e){var t=this.blocks.findIndex((function(t){return t.type===e}));return-1===t?{index:t,block:null}:{index:t,block:this.blocks.get(t)}}}],[{key:"fromJSON",value:function(e){var t=e.key,o=e.parentKey,r=void 0===o?null:o,a=e.blocks,c=e.subKeys,i=void 0===c?[]:c,l=e.collapse;return new n({key:t,parentKey:r,collapse:void 0!==l&&l,subKeys:Object(T.List)(i),blocks:Fj.createList(a)})}},{key:"create",value:function(e){var t=e.key,o=e.parentKey,r=void 0===o?null:o,a=e.content,c=void 0===a?"":a,i=e.subKeys,l=void 0===i?[]:i,s=e.collapse,u=void 0!==s&&s,p=Fj.create({type:lj,data:c,key:null});return new n({key:t,parentKey:r,blocks:Object(T.List)([p]),subKeys:Object(T.List)(l),collapse:u})}}]),n}(Object(T.Record)({key:null,parentKey:null,collapse:!1,subKeys:null,blocks:null,relations:null,style:null}));function Hj(e,t){var n=e.getTopic(t),o=[];if(n.subKeys.size>0){var r,a=n.subKeys.toArray();(r=o).push.apply(r,Object(v.a)(a)),o=a.reduce((function(t,n){return t.push.apply(t,Object(v.a)(Hj(e,n))),t}),o)}return o}function Gj(e,t,n){var o=e.getTopic(t),r=e.getTopic(n);if(o&&r){if(o.parentKey==r.parentKey)return gj;for(var a=o;a.parentKey;){if(a.parentKey===r.key)return hj;a=e.getParentTopic(a.key)}for(a=r;a.parentKey;){if(a.parentKey===o.key)return yj;a=e.getParentTopic(a.key)}}return mj}var Uj=b()("modifier");function Wj(e){var t=e.model,n=e.topicKey,o=e.focusMode;return Uj("focus topic"),n!==t.focusKey&&(t=t.set("focusKey",n)),o!==t.focusMode&&(t=t.set("focusMode",o)),t}var Jj={addChild:function(e){var t=e.model,n=e.topicKey;Uj("addChild:",n);var o=t.getTopic(n);if(o){var r=Vj.create({key:zj(),parentKey:o.key});return o=o.set("collapse",!1).update("subKeys",(function(e){return e.push(r.key)})),Wj({model:t=t.update("topics",(function(e){return e.set(n,o).set(r.key,r)})),topicKey:r.key,focusMode:pj})}return t},addSibling:function(e){var t=e.model,n=e.topicKey;if(n===t.rootTopicKey)return t;var o=t.getTopic(n);if(o){var r=t.getTopic(o.parentKey),a=r.subKeys.indexOf(n),c=Vj.create({key:zj(),parentKey:r.key});return Wj({model:t=t.update("topics",(function(e){return e.set(c.key,c)})).updateIn(["topics",r.key,"subKeys"],(function(e){return e.insert(a+1,c.key)})),topicKey:c.key,focusMode:pj})}return t},toggleCollapse:function(e){var t=e.model,n=e.topicKey,o=t.getTopic(n);return o&&0!==o.subKeys.size&&(o=o.merge({collapse:!o.collapse}),t=t.updateIn(["topics",o.key,"collapse"],(function(e){return!e}))),t=Wj({model:t,topicKey:n,focusMode:uj})},collapseAll:function(e){var t=e.model,n=Hj(t,t.editorRootTopicKey);return Uj(t),t=Wj({model:t=t.withMutations((function(e){n.forEach((function(t){e.setIn(["topics",t,"collapse"],!0)}))})),topicKey:t.editorRootTopicKey,focusMode:uj})},expandAll:function(e){var t=e.model,n=Hj(t,t.editorRootTopicKey);return Uj(t),t=t.withMutations((function(e){n.forEach((function(t){e.setIn(["topics",t,"collapse"],!1)}))})),Uj(t),t},expandTo:function(e){var t=e.model,n=e.topicKey,o=function(e,t){for(var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],o=[t],r=e.getTopic(t);r.parentKey;)n?o.push(r.parentKey):o.unshift(r.parentKey),r=e.getParentTopic(r.key);return o}(t,n).filter((function(e){return e!==n}));return Gj(t=t.withMutations((function(e){o.forEach((function(t){e.setIn(["topics",t,"collapse"],!1)}))})),n,t.editorRootTopicKey)!==hj&&(t=t.set("editorRootTopicKey",t.rootTopicKey)),t},focusTopic:Wj,setFocusMode:function(e){var t=e.model,n=e.focusMode;return Uj("setFocusMode"),n!==t.focusMode&&(t=t.set("focusMode",n)),t},deleteTopic:function(e){var t=e.model,n=e.topicKey;if(n===t.editorRootTopicKey)return t;var o=t.getTopic(n);return o&&(t=t.withMutations((function(e){e.update("topics",(function(e){e=e.delete(n);var o=Hj(t,n);return e=e.withMutations((function(e){o.forEach((function(t){e.delete(t)}))}))})),e.updateIn(["topics",o.parentKey,"subKeys"],(function(e){return e.delete(e.indexOf(n))})),e.focusKey===n&&e.set("focusKey",null).set("focusMode",null)}))),t},setBlockData:function(e){var t=e.model,n=e.topicKey,o=e.blockType,r=e.focusMode,a=e.data,c=t.getTopic(n);if(c){var i=c.getBlock(o),l=i.index,s=i.block;-1===l?t=t.updateIn(["topics",n,"blocks"],(function(e){return e.push(Fj.create({type:o,data:a}))})):s.data!==a&&(t=t.updateIn(["topics",n,"blocks",l,"data"],(function(e){return a}))),r&&(t=Wj({model:t,topicKey:n,focusMode:r}))}return t},deleteBlock:function(e){var t=e.model,n=e.topicKey,o=e.blockType,r=t.getTopic(n);if(r){var a=r.getBlock(o).index;-1!==a&&(t=t.updateIn(["topics",n,"blocks"],(function(e){return e.delete(a)}))),t=Wj({model:t,topicKey:null,focusMode:null})}return t},setStyle:function(e){var t=e.model,n=e.topicKey,o=e.style,r=t.getTopic(n);return r&&o!==r.style&&(t=t.updateIn(["topics",n,"style"],(function(e){return o}))),t},clearAllCustomStyle:function(e){var t=e.model;return t=t.withMutations((function(e){e.topics.keySeq().forEach((function(t){e.setIn(["topics",t,"style"],null)}))}))},setTheme:function(e){var t=e.model,n=e.theme;return t=t.setIn(["config","theme"],n)},setLayoutDir:function(e){var t=e.model,n=e.layoutDir;return t.config.layoutDir===n?t:t=t.setIn(["config","layoutDir"],n)},setEditorRootTopicKey:function(e){var t=e.model,n=e.topicKey;return t.editorRootTopicKey!==n&&(t=t.set("editorRootTopicKey",n)),t.getTopic(n).collapse&&(t=t.setIn(["topics",n,"collapse"],!1)),t},setZoomFactor:function(e){var t=e.model,n=e.zoomFactor;return t.zoomFactor!==n&&(t=t.set("zoomFactor",n)),t}},Zj={topics:Object(T.Map)(),extData:Object(T.Map)(),config:new Bj,rootTopicKey:null,editorRootTopicKey:null,focusKey:null,focusMode:null,formatVersion:null,zoomFactor:1},Yj=function(e){Object(s.a)(n,e);var t=Object(u.a)(n);function n(){return Object(i.a)(this,n),t.apply(this,arguments)}return Object(l.a)(n,[{key:"toJS",value:function(){return{rootTopicKey:this.rootTopicKey,topics:Object.values(this.topics.toJS()),config:this.config,extData:this.extData,zoomFactor:this.zoomFactor}}},{key:"extData",get:function(){return this.get("extData")}},{key:"topics",get:function(){return this.get("topics")}},{key:"config",get:function(){return this.get("config")}},{key:"formatVersion",get:function(){return this.get("formatVersion")}},{key:"rootTopicKey",get:function(){return this.get("rootTopicKey")}},{key:"editorRootTopicKey",get:function(){return this.get("editorRootTopicKey")}},{key:"focusKey",get:function(){return this.get("focusKey")}},{key:"focusMode",get:function(){return this.get("focusMode")}},{key:"editingContentKey",get:function(){return this.focusMode===pj?this.focusKey:null}},{key:"editingDescKey",get:function(){return this.focusMode===dj?this.focusKey:null}},{key:"getTopic",value:function(e){return this.topics.get(e)}},{key:"getExtDataItem",value:function(e,t){return this.extData.get(e)||new t}},{key:"getParentTopic",value:function(e){var t=this.getTopic(e);return t.parentKey?this.getTopic(t.parentKey):null}},{key:"getTopicVisualLevel",value:function(e){for(var t=this.getTopic(e),n=0;t&&t.key!==this.editorRootTopicKey;)n++,t=this.getParentTopic(t.key);return n}},{key:"rootTopic",get:function(){return this.getTopic(this.rootTopicKey)}},{key:"zoomFactor",get:function(){return this.get("zoomFactor")}}],[{key:"isModel",value:function(e){return e instanceof n}},{key:"create",value:function(){var e,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;if(null==t)return n.createEmpty();if(n.isModel(t)&&(e=t),ej(t)&&(e=n.fromJSON(t)),e)return null==e.focusKey&&(e=e.set("focusKey",e.rootTopicKey)),null==e.focusMode&&(e=e.set("focusMode",uj)),e;throw new Error("`Value.create` only accepts objects or values, but you passed it: ".concat(t))}},{key:"createEmpty",value:function(){var e=new n,t=Vj.create({key:zj(),content:"RootTopic"});return e.update("topics",(function(e){return e.set(t.key,t)})).set("rootTopicKey",t.key).set("editorRootTopicKey",t.key).set("focusKey",t.key).set("focusMode",uj)}},{key:"fromJSON",value:function(e){var t=new n,o=e.topics,r=void 0===o?[]:o,a=e.config,c=void 0===a?{}:a,i=e.rootTopicKey,l=e.editorRootTopicKey;return void 0===l&&(l=i),t=(t=t.merge({rootTopicKey:i,editorRootTopicKey:l})).withMutations((function(e){r.forEach((function(t){e.update("topics",(function(e){return e.set(t.key,Vj.fromJSON(t))}))})),e.set("config",Bj.fromJSON(c))}))}}]),n}(Object(T.Record)(Zj));function qj(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.plugins,n=void 0===t?[]:t;return Object(v.a)(n)}b()("core:controller");function Xj(e,t){if(Array.isArray(t))t.forEach((function(t){return Xj(e,t)}));else if(null!=t)for(var n in t){var o=t[n];e.middleware[n]=e.middleware[n]||[],e.middleware[n].push(o)}}function $j(e){if(!Array.isArray(e))throw new TypeError("Middleware stack must be an array!");var t,n=Object(O.a)(e);try{for(n.s();!(t=n.n()).done;){if("function"!==typeof t.value)throw new TypeError("Middleware must be composed of functions!")}}catch(o){n.e(o)}finally{n.f()}return function(t,n){var r=-1;return function a(c){if(c<=r)throw new Error("next() called multiple times");r=c;var i=e[c];c===e.length&&(i=n);if(!i)return null;try{return i(t,a.bind(null,c+1))}catch(o){throw o}}(0)}}var Qj,ek,tk,nk,ok,rk,ak,ck,ik,lk,sk,uk,pk,dk,fk,bk,yk,hk,gk,mk,Ok,vk,Tk,jk,kk,Ek,xk,wk,Sk,Ck,Kk,Rk,Dk,Lk,_k,Ik,Mk,Ak,Nk,Fk,Pk,Bk,zk,Vk,Hk,Gk,Uk,Wk,Jk,Zk,Yk,qk,Xk,$k,Qk,eE,tE,nE=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};Object(i.a)(this,e);var n=t.plugins,o=void 0===n?[]:n,r=t.onChange,a=t.readOnly;this.readOnly=a,this.onChange=r,this.middleware=new Map;var c=qj({plugins:o});Xj(this,c)}return Object(l.a)(e,[{key:"run",value:function(e){var t=this.middleware,n=t[e]||[];nj(0!==n.length,"the middleware function ".concat(e," is not found!"));for(var o=Object(E.a)($j)(n),r=arguments.length,a=new Array(r>1?r-1:0),c=1;c<r;c++)a[c-1]=arguments[c];return o.apply(void 0,a)}},{key:"getValue",value:function(e,t){return this.run("getValue",Object(m.a)(Object(m.a)({},t),{},{propKey:e}))}},{key:"change",value:function(e,t){this.onChange(e,t),this.currentModel=e}}]),e}(),oE=(n(868),["title"]),rE=["layout","title"],aE=["layout","title"],cE=["controller","children","onClick"],iE=["text"],lE=function(e){Object(s.a)(n,e);var t=Object(u.a)(n);function n(e){return Object(i.a)(this,n),t.call(this,e)}return Object(l.a)(n,[{key:"operation",value:function(e,t){this.props.controller.run("operation",Object(m.a)({opType:e},t))}},{key:"run",value:function(e,t){this.props.controller.run(e,t)}},{key:"topic",get:function(){return this.props.model.getTopic(this.props.topicKey)}}]),n}(o.Component),sE=b()("node:drag-scroll-widget"),uE=d.default.div(Qj||(Qj=Object(Ri.a)(["\n  position: relative;\n  width: 100%;\n  height: 100%;\n  overflow: scroll;\n"]))),pE=d.default.div(ek||(ek=Object(Ri.a)(["\n  position: relative;\n  width: max-content;\n"]))),dE=function(e){Object(s.a)(n,e);var t=Object(u.a)(n);function n(e){var o;return Object(i.a)(this,n),(o=t.call(this,e)).contentResizeCallback=function(e,t){if(o.oldContentRect){var n={width:o.content.clientWidth+2*o.viewBox.clientWidth,height:o.content.clientHeight+2*o.viewBox.clientHeight};o.bigView.style.width=n.width+"px",o.bigView.style.height=n.height+"px"}o.oldContentRect=e[0].contentRect},o.contentResizeObserver=new p.a(o.contentResizeCallback),o.contentRef=function(e){e&&(o.content=e,o.contentResizeObserver.observe(o.content))},o.viewBoxRef=function(e){e&&(o.viewBox=e,o.props.enableMouseWheel||(sE("addEventListener onwheel"),o.viewBox.addEventListener("wheel",(function(e){sE("onwheel"),(e.ctrlKey||e.altKey)&&e.preventDefault()}),{passive:!1})),o.setViewBoxScroll(o.viewBox.clientWidth,o.viewBox.clientHeight))},o.bigViewRef=function(e){e&&(o.bigView=e)},o.setWidgetStyle=function(){o.content&&o.viewBox&&o.bigView&&(o.bigView.style.width=2*(o.content.clientWidth+o.viewBox.clientWidth)+"px",o.bigView.style.height=2*(o.content.clientHeight+o.viewBox.clientHeight)+"px",o.content.style.left=o.viewBox.clientWidth+"px",o.content.style.top=o.viewBox.clientHeight+"px")},o.setViewBoxScroll=function(e,t){sE("setViewBoxScroll ".concat(e," ").concat(t)),o.viewBox&&(o.viewBox.scrollLeft=e,o.viewBox.scrollTop=t)},o.setViewBoxScrollDelta=function(e,t){sE("setViewBoxScrollDelta ".concat(e," ").concat(t)),o.viewBox&&(o.viewBox.scrollLeft+=e,o.viewBox.scrollTop+=t)},o.onMouseDown=function(e){var t=o.props,n=t.mouseKey,r=t.needKeyPressed,a=t.canDragFunc;if((!a||a())&&(0===e.button&&"left"===n||2===e.button&&"right"===n)){if(r&&!e.ctrlKey)return;o._lastCoordX=o.viewBox.scrollLeft+e.nativeEvent.clientX,o._lastCoordY=o.viewBox.scrollTop+e.nativeEvent.clientY;var c=o.viewBox;c.addEventListener("mousemove",o.onMouseMove),c.addEventListener("mouseup",o.onMouseUp)}},o.onMouseUp=function(e){var t=o.viewBox;t.removeEventListener("mousemove",o.onMouseMove),t.removeEventListener("mouseup",o.onMouseUp)},o.onMouseMove=function(e){o.viewBox.scrollLeft=o._lastCoordX-e.clientX,o.viewBox.scrollTop=o._lastCoordY-e.clientY},o.handleContextMenu=function(e){e.preventDefault()},o.state={widgetStyle:{width:"10000px",height:"10000px"}},o}return Object(l.a)(n,[{key:"componentDidMount",value:function(){this.setWidgetStyle(),document.addEventListener("contextmenu",this.handleContextMenu)}},{key:"componentWillUnmount",value:function(){document.removeEventListener("contextmenu",this.handleContextMenu)}},{key:"setZoomFactor",value:function(e){this.bigView.style.transform="scale(".concat(e,")"),this.bigView.style.transformOrigin="50% 50%"}},{key:"render",value:function(){var e=Object(m.a)({},this.state.widgetStyle);return Object(o.createElement)(uE,{ref:this.viewBoxRef,onMouseDown:this.onMouseDown},Object(o.createElement)("div",{style:e,ref:this.bigViewRef},Object(o.createElement)(pE,{ref:this.contentRef,style:this.state.contentStyle},this.props.children(this.setViewBoxScroll,this.setViewBoxScrollDelta))))}}]),n}(o.Component);dE.defaultProps={mouseKey:"left",needKeyPressed:!1};var fE=b()("node:save-ref"),bE=function(e){Object(s.a)(n,e);var t=Object(u.a)(n);function n(){var e;return Object(i.a)(this,n),(e=t.apply(this,arguments)).getRef=function(t){return fE(Object(Ki.a)(e)),e[t]},e.saveRef=function(t){return function(n){n&&(e[t]=n,e.fireListener(t,n))}},e.deleteRef=function(t){fE("deleteRef:",t),delete e[t]},e.observers=new Map,e.fireListener=function(t,n){if(e.observers.has(t)){var o,r=e.observers.get(t),a=Object(O.a)(r);try{for(a.s();!(o=a.n()).done;){(0,o.value)(t,n)}}catch(c){a.e(c)}finally{a.f()}}},e.registerRefListener=function(t,n){e.observers.has(t)?e.observers.get(t).push(n):e.observers.set(t,[n])},e}return Object(l.a)(n,[{key:"render",value:function(){return this.props.children(this.saveRef,this.getRef,this.deleteRef,this.registerRefListener.bind(this))}}]),n}(o.Component),yE=d.default.div(tk||(tk=Object(Ri.a)(["\n  display: flex;\n  flex-direction: ",";\n  align-items: ",";\n  justify-content: ",";\n"])),(function(e){return e.flexDirection?e.flexDirection:"row"}),(function(e){return e.alignItems}),(function(e){return e.justifyContent})),hE=d.default.div(nk||(nk=Object(Ri.a)(["\n  margin: ",";\n"])),(function(e){return e.margin})),gE=d.default.a(ok||(ok=Object(Ri.a)(["\n  font-size: 20px !important;\n"]))),mE=d.default.div(rk||(rk=Object(Ri.a)(["\n  padding: 5px;\n  cursor: pointer;\n"]))),OE=d.default.div(ak||(ak=Object(Ri.a)(["\n  cursor: pointer;\n  &:hover {\n    color: #1ea7fd;\n  }\n"]))),vE=Object(d.default)(y.e)(ck||(ck=Object(Ri.a)(["\n  margin-bottom: 0px !important;\n"]))),TE=Object(d.default)(OE)(ik||(ik=Object(Ri.a)(["\n  position: absolute;\n  right: 5px;\n  top: 5px;\n  //padding: 5px;\n"]))),jE=d.default.div(lk||(lk=Object(Ri.a)(["\n  height: 16px;\n"]))),kE=d.default.span(sk||(sk=Object(Ri.a)(["\n  margin: 0px 10px;\n  &:hover {\n    color: palevioletred;\n  }\n"]))),EE=d.default.div(uk||(uk=Object(Ri.a)(["\n  z-index: ",";\n"])),(function(e){return e.zIndex})),xE=d.default.div(pk||(pk=Object(Ri.a)(["\n  min-width: 380px;\n  max-width: 482px;\n  max-height: 470px;\n  overflow: auto;\n"]))),wE=d.default.div(dk||(dk=Object(Ri.a)(["\n  position: absolute;\n  left: 0;\n  top: 0;\n  width: 100%;\n  height: 100%;\n"]))),SE=(d.default.div(fk||(fk=Object(Ri.a)(["\n  max-height: ",";\n  overflow-y: auto;\n  overflow-x: hidden;\n"])),(function(e){return e.maxHeight||"300px"})),d.default.div(bk||(bk=Object(Ri.a)(["\n  margin-top: 10px;\n  margin-bottom: 5px;\n  font-weight: bold;\n"])))),CE=d.default.span(yk||(yk=Object(Ri.a)(["\n  margin: 0 10px 0 2px;\n"]))),KE=d.default.div(hk||(hk=Object(Ri.a)(["\n  padding: 10px;\n  margin: 0 0 10px 0;\n  border: rgba(16, 22, 26, 0.15) solid 1px;\n  border-radius: 5px;\n"]))),RE=Object(d.default)(CE)(gk||(gk=Object(Ri.a)([""]))),DE=d.default.div(mk||(mk=Object(Ri.a)(["\n  display: flex;\n  align-items: center;\n  //justify-content: center;\n  margin: 5px 0;\n"]))),LE=d.default.div(Ok||(Ok=Object(Ri.a)(["\n  height: 3px;\n  width: 80%;\n  margin-left: 10%;\n  margin-right: 10%;\n  margin-bottom: 2px;\n  background: ",";\n"])),(function(e){return e.color})),_E=d.default.div(vk||(vk=Object(Ri.a)(["\n  border: 1px solid grey;\n  cursor: pointer;\n  font-weight: bold;\n"]))),IE="show-menu",ME="close",AE="color-picker",NE="notes",FE="plus",PE="minus",BE="collapse",zE="expand",VE="center",HE="layout-left-and-right";function GE(e){return"icon iconfont bm-".concat(e)}function UE(e){return Object(o.createElement)("span",{className:GE(e)})}function WE(e){return"content-".concat(e)}function JE(e){return"content-editor-".concat(e)}function ZE(e){return"desc-editor-".concat(e)}function YE(e){return"topic-widget-".concat(e)}function qE(e){return"topic-".concat(e)}function XE(e){return"links-".concat(e)}function $E(e){return"links-svg-".concat(e)}function QE(e){return"collapse-".concat(e)}function ex(e,t){return"dropArea-".concat(t,"-").concat(e)}var tx="DIAGRAM-ROOT",nx="DragScrollWidget",ox="svg-highlight",rx="focus-highlight",ax="drop-effect",cx="CENTER_ROOT_TOPIC",ix="DIAGRAM_CUSTOMIZE_BASE_Z_INDEX",lx="TOPIC_CONTEXT_MENU_ENABLED",sx="TOPIC_TITLE",ux="DRAG_DROP_STATE",px="RIGHT_TOP_PANEL_STATE",dx="OPERATION_ENABLED",fx="CONFIRM",bx="CANCEL",yx="DEFAULT",hx="SEARCH",gx="LEFT_AND_RIGHT",mx="ONLY_LEFT",Ox="ONLY_RIGHT",vx="EDIT",Tx="ADD_SIBLING",jx="ADD_CHILD",kx="EDIT_NOTES",Ex="DELETE",xx="SET_AS_EDITOR_ROOT",wx="EDIT_TOPOLOGY_DIAGRAM",Sx="SET_TOPIC_REFERENCES",Cx="TOPIC_STYLE",Kx="STYLE",Rx="TEXT_EDITOR",Dx="LINK",Lx="LINK_TO_PARENT",_x="SUB_LINKS",Ix="COPY_STYLE",Mx="PASTE_STYLE",Ax="CLEAR_TOPIC_STYLE",Nx="CLEAR_ALL_CUSTOM_STYLE",Fx="LINE_TYPE",Px="THEME",Bx="GLOBAL",zx="HIGHLIGHT",Vx="RANDOM_COLOR",Hx="NORMAL_TOPIC",Gx="PRIMARY_TOPIC",Ux="ROOT_TOPIC",Wx="EXPORT_THEME",Jx="IMPORT_THEME",Zx="TAGS",Yx="TAGS_MANAGER",qx="TAG_NAME",Xx="ADD_TAG",$x="UPDATE_TAG",Qx="ALREADY_ADDED",ew="CAN_BE_ADDED",tw="TOPICS_THAT_USE_THIS_TAG",nw="BACKGROUND",ow="COLOR",rw="BORDER",aw="WIDTH",cw="RADIUS",iw="FONT_SIZE",lw="LINE_HEIGHT",sw="PADDING",uw="TOP",pw="BOTTOM",dw="LEFT",fw="RIGHT",bw="NONE",yw="SOLID",hw="DOTTED",gw="DASHED",mw="DOUBLE",Ow="ROUND",vw="CURVE",Tw="LINE",jw="COLLAPSE_ALL",kw="EXPAND_ALL",Ew="CENTER_ROOT_TOPIC",xw="ZOOM",ww="ZOOM_IN",Sw="ZOOM_OUT",Cw="RESET",Kw="RESET_ZOOM",Rw="NOTE_PLACEHOLDER",Dw="TOPOLOGY_DIAGRAM_EDITOR",Lw="BASIC",_w="FLOW_GRAPH",Iw="ACTIVITY_DIAGRAM",Mw="SEQUENCE_DIAGRAM",Aw="CLASS_DIAGRAM",Nw="REFERENCE_TOPICS",Fw="REFERENCED_TOPICS",Pw="SELECT_REF_TOPICS_TIP",Bw="TAG_NAME_OVER_MAX_TIP",zw="DELETE_TAG_TIP",Vw="DELETE_TOPOLOGY_TIP",Hw=function(e){e.stopPropagation()};function Gw(e,t){!function(e,t){var n=document.createElement("a");n.href=e,n.download=t,n.click()}("data:text/plain,".concat(encodeURIComponent(e)),t)}function Uw(e){var t=e.top,n=void 0===t?0:t,o=e.right,r=void 0===o?0:o,a=e.bottom,c=void 0===a?0:a,i=e.left,l=void 0===i?0:i;return"".concat(n,"px ").concat(r,"px ").concat(c,"px ").concat(l,"px")}function Ww(e,t){return Array.isArray(t)?t.map((function(t){return e.controller.run("getI18nText",Object(m.a)(Object(m.a)({},e),{},{key:t}))})):e.controller.run("getI18nText",Object(m.a)(Object(m.a)({},e),{},{key:t.toUpperCase()}))}function Jw(e){return(e.top+e.bottom)/2}function Zw(e,t){return(e.x+t.x)/2}function Yw(e,t){return(e.y+t.y)/2}function qw(e){return[(e.left+e.right)/2,(e.top+e.bottom)/2]}function Xw(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,o=e.getBoundingClientRect(),r=t.getBoundingClientRect(),a=qw(r),c=qw(o);c[0]=(c[0]-a[0])/n,c[1]=(c[1]-a[1])/n;var i=o.width/n,l=o.height/n;return{left:c[0]-i/2,right:c[0]+i/2,top:c[1]-l/2,bottom:c[1]+l/2,width:i,height:l}}function $w(e,t){var n=e.getBoundingClientRect(),o=qw(t.getBoundingClientRect()),r=qw(n);return[r[0]-o[0],r[1]-o[1]]}function Qw(e){return Object(o.createElement)("div",null,e.children,Object(o.createElement)(y.h,{style:{margin:"10px 0"}}))}function eS(e){var t=e.title,n=e.layout,r=void 0===n?"h":n,a=e.color,c=e.handleColorChange,i={flexDirection:"h"===r?"row":"column",alignItems:"center"};return Object(o.createElement)(CE,null,Object(o.createElement)(yE,Object.assign({},i),null!=t&&Object(o.createElement)(hE,{margin:"0 5px 0 0"},t),Object(o.createElement)(y.s,null,Object(o.createElement)(_E,null,Object(o.createElement)("div",{className:GE(AE)}),Object(o.createElement)(LE,{color:a})),Object(o.createElement)("div",null,Object(o.createElement)(rt.a,{color:a,onChangeComplete:function(e){return c(e.hex)}})))))}function tS(e){var t=e.title,n=Object(Ci.a)(e,oE);return Object(o.createElement)(CE,null,Object(o.createElement)(y.d,Object.assign({},n),t))}function nS(e){var t=e.layout,n=void 0===t?"h":t,r=e.title,a=Object(Ci.a)(e,rE),c={flexDirection:"h"===n?"row":"column",alignItems:"center"};return Object(o.createElement)(CE,null,Object(o.createElement)(yE,Object.assign({},c),Object(o.createElement)(hE,{margin:"0 5px 0 0"},r),Object(o.createElement)(y.q,Object.assign({},a))))}function oS(e){var t=e.layout,n=void 0===t?"h":t,r=e.title,a=Object(Ci.a)(e,aE),c={flexDirection:"h"===n?"row":"column",alignItems:"center"};return Object(o.createElement)(CE,null,Object(o.createElement)(yE,Object.assign({},c),Object(o.createElement)(hE,{margin:"0 5px 0 0"},r," "),Object(o.createElement)(y.m,Object.assign({},a))))}function rS(e){var t=e.text,n=e.items,r=e.itemRenderer,a=e.onItemSelect,c=ot.a.ofType(),i={items:n,itemRenderer:r,onItemSelect:a,filterable:!1};return Object(o.createElement)(CE,null,Object(o.createElement)(c,Object.assign({},i),Object(o.createElement)(y.d,{text:t})))}var aS=function(e){return function(t,n){var r=n.handleClick;return Object(o.createElement)(y.p,{text:"".concat(t).concat(e),key:t,onClick:r})}},cS=function(e){return function(t,n){var r=n.handleClick;return Object(o.createElement)(y.p,{text:Ww(e,t),key:t,onClick:r})}},iS=(ot.a.ofType(),Object(v.a)(Array(7).keys())),lS=d.default.div(Tk||(Tk=Object(Ri.a)(["\n  position: relative;\n  padding: 6px;\n  width: 40px;\n  height: 40px;\n  cursor: pointer;\n  color: ",";\n  font-size: 24px;\n  display: inline-block;\n  &:hover {\n    color: ",";\n  }\n"])),(function(e){return e.disabled?"grey":"black"}),(function(e){return e.disabled?"grey":"rgb(44, 184, 146)"}));function sS(e){var t=e.controller,n=e.children,r=e.onClick,a=Object(Ci.a)(e,cE),c=e.disabled;c=c||!t.getValue(dx,e);var i=Object(m.a)({controller:t,disabled:c,onClick:function(e){c||r(e)}},a);return Object(o.createElement)(lS,Object.assign({},i),n)}var uS=b()("plugin:event");function pS(){var e={};return{handleTopicClick:function(e){uS("handleTopicClick");var t=e.controller,n=e.model,o=e.topicKey;uS(n.zoomFactor),null===n.editingDescKey&&n.editingContentKey!==o&&(n.focusKey===o&&n.focusMode===pj||t.run("operation",Object(m.a)(Object(m.a)({},e),{},{opType:wj,focusMode:uj})))},handleTopicDoubleClick:function(e){var t=e.controller;null===e.model.editingDescKey&&t.run("operation",Object(m.a)(Object(m.a)({},e),{},{opType:wj,focusMode:pj}))},handleTopicContextMenu:function(e){e.controller.run("operation",Object(m.a)(Object(m.a)({},e),{},{opType:wj,focusMode:fj}))},handleActiveModalClose:function(e){var t=e.controller,n=t.run("getActiveModalProps",e);return null==n?null:"edit-desc"===n.name?function(){t.run("operation",Object(m.a)(Object(m.a)({},e),{},{focusMode:uj,opType:wj}))}:void 0},addEventListener:function(t){var n=t.key,o=t.listener,r=t.once,a=t.controller;function c(){o(),a.run("removeEventListener",{key:n,listener:o})}e[n]||(e[n]=[]),r?(c.origin=o,e[n].push(c)):e[n].push(o)},removeEventListener:function(t){var n=t.key,o=t.listener;e[n]&&(e[n]=e[n].filter((function(e){return e!==o&&e.origin!==o})))},fireEvent:function(t){var n=t.key;e[n]&&e[n].forEach((function(e){return e()}))}}}var dS="ADD_CHILD",fS="ADD_SIBLING",bS="DELETE_TOPIC",yS="EDIT_CONTENT",hS="EDIT_NOTES",gS="SET_EDITOR_ROOT",mS=0,OS=1;function vS(){return{customizeHotKeys:function(e){var t=function(t){return function(n){!function(e,t){var n=t,o=n.topicKey,r=n.model,a=n.controller;void 0===o&&(t=Object(m.a)(Object(m.a)({},t),{},{topicKey:r.focusKey})),a.run("operation",Object(m.a)(Object(m.a)({},t),{},{opType:e}))}(t,e)}};return{topicHotKeys:new Map([[dS,{label:"add child",combo:"tab",onKeyDown:t(kj)}],[fS,{label:"add sibling",combo:"enter",onKeyDown:t(Ej)}],[bS,{label:"delete topic",combo:"del",onKeyDown:t(xj)}],[yS,{label:"edit content",combo:"space",onKeyDown:t(_j)}],[hS,{label:"edit notes",combo:"alt + d",onKeyDown:t(Ij)}],[gS,{label:"set editor root",combo:"alt + shift + f",onKeyDown:t(Aj)}]]),globalHotKeys:new Map}}}}function TS(){var e=new Map([[fx,"Confirm"],[bx,"Cancel"],[yx,"Default"],[hx,"Search"],[gx,"Left And Right"],[mx,"Only Left"],[Ox,"Only Right"],[vx,"Edit"],[jx,"Add Child"],[Tx,"Add Sibling"],[kx,"Edit Notes"],[Ex,"Delete"],[xx,"Set as Editor Root"],[wx,"Edit Topology Diagram"],[Sx,"Set Topic References"],[Cx,"TopicStyle"],[Kx,"Style"],[Rx,"Text Editor"],[Dx,"Link"],[Lx,"LinkToParent"],[_x,"SubLinks"],[Ix,"Copy Style"],[Mx,"Paste Style"],[Ax,"Clear Topic Style"],[Nx,"Clear All Custom Style"],[Fx,"LineType"],[Px,"Theme"],[Bx,"Global"],[zx,"Highlight"],[Vx,"Random Color"],[Hx,"NormalTopic"],[Gx,"PrimaryTopic"],[Ux,"RootTopic"],[Wx,"Export Theme"],[Jx,"Import Theme"],[Zx,"Tags"],[Yx,"Tags Manager"],[qx,"Tag Name"],[Xx,"Add Tag"],[$x,"Update Tag"],[Qx,"Already Added"],[ew,"Can be Added"],[tw,"Topics that Use this Tag"],[nw,"Background"],[ow,"Color"],[rw,"Border"],[aw,"Width"],[cw,"Radius"],[iw,"FontSize"],[lw,"LineHeight"],[sw,"Padding"],[uw,"Top"],[pw,"Bottom"],[dw,"Left"],[fw,"Right"],[bw,"None"],[yw,"Solid"],[hw,"Dotted"],[gw,"Dashed"],[mw,"Double"],[Ow,"Round"],[vw,"Curve"],[Tw,"Line"],[jw,"Collapse All"],[kw,"Expand All"],[Ew,"Center Root Topic"],[xw,"zoom"],[ww,"Zoom In"],[Sw,"Zoom Out"],[Cw,"Reset"],[Kw,"Reset Zoom"],[Rw,"Write topic notes here"],[Dw,"Topology Diagram Editor"],[Lw,"Basic"],[_w,"Flow Graph"],[Iw,"Activity Diagram"],[Mw,"Sequence Diagram"],[Aw,"Class Diagram"],[Nw,"Reference Topics"],[Fw,"Referenced Topics"],[Pw,"Please select the topics you want to reference. After selection, click the confirm button."],[Bw,"The length of tag name over the maximum length: 50!"],[zw,"All the relationship about this tag will be lost if you delete this tag! Are you confirm?"],[Vw,"Are you confirm to delete this topology diagram?"]]);return{getI18nTextMap:function(){return e},getI18nText:function(e){var t=e.controller,n=e.key,o=t.run("getI18nTextMap",e);if(!o.has(n))throw new Error("i18n key ".concat(n," is not exist"));return o.get(n)}}}var jS=b()("plugin:operation");function kS(){var e=new Map([[Oj,Jj.toggleCollapse],[vj,Jj.collapseAll],[Tj,Jj.expandAll],[jj,Jj.expandTo],[kj,Jj.addChild],[Ej,Jj.addSibling],[xj,Jj.deleteTopic],[wj,Jj.focusTopic],[Sj,Jj.setFocusMode],[Cj,Jj.setStyle],[Kj,Jj.clearAllCustomStyle],[Rj,Jj.setTheme],[Dj,Jj.setBlockData],[Lj,Jj.deleteBlock],[_j,function(e){var t=e.model,n=e.topicKey;return Jj.focusTopic({model:t,topicKey:n,focusMode:pj})}],[Ij,function(e){var t=e.model,n=e.topicKey,o=t.getTopic(n).getBlock(sj);return null!=o.block&&null!=o.block.data||(t=Jj.setBlockData({model:t,topicKey:n,blockType:sj,data:""})),t=Jj.focusTopic({model:t,topicKey:n,focusMode:dj})}],[Mj,function(e){var t=e.srcKey,n=e.dstKey,o=e.dropDir,r=e.model,a=r.getTopic(t),c=r.getTopic(n),i=a.parentKey,l=r.getTopic(i).subKeys,s=l.indexOf(t);if(l=l.delete(s),"in"===o){var u=c.subKeys;u=u.push(t),r=r.withMutations((function(e){e.setIn(["topics",i,"subKeys"],l).setIn(["topics",t,"parentKey"],n).setIn(["topics",n,"subKeys"],u).setIn(["topics",n,"collapse"],!1)}))}else{var p=c.parentKey,d=r.getTopic(p).subKeys,f=d.indexOf(n);if(i===p){var b=Object(T.List)();d.forEach((function(e){e!==t&&(b=e===n?"prev"===o?b.push(t).push(e):b.push(e).push(t):b.push(e))})),r=r.withMutations((function(e){e.setIn(["topics",p,"subKeys"],b)}))}else"prev"===o?d=d.insert(f,t):"next"===o&&(d=d.insert(f+1,t)),r=r.withMutations((function(e){e.setIn(["topics",i,"subKeys"],l).setIn(["topics",t,"parentKey"],p).setIn(["topics",p,"subKeys"],d).setIn(["topics",p,"collapse"],!1)}))}return r}],[Aj,Jj.setEditorRootTopicKey],[Nj,Jj.setLayoutDir]]),t=Object(T.Stack)(),n=Object(T.Stack)(),o=!0,r=new Set;return{isOperationEnabled:function(e){return o},enableOperation:function(){o=!0},disableOperation:function(e){var t=e.whiteList;o=!1,t?r=new Set(t):r.clear()},getOpMap:function(t){return e},getAllowUndo:function(e){var t=e.model,n=e.opType,o=e.allowUndo;if(!1===(void 0===o||o))return!1;if(n)switch(n){case wj:case Sj:case _j:case Ij:return!1}switch(t.focusMode){case"EDITING_DESC":case"EDITING_CONTENT":return!1}return t.config.allowUndo},getUndoRedoStack:function(){return{undoStack:t,redoStack:n}},setUndoStack:function(e){jS("setUndoStack",e.undoStack),t=e.undoStack},setRedoStack:function(e){jS("setRedoStack",e.redoStack),n=e.redoStack},canUndo:function(e){var t=e.controller;if(!t.run("isOperationEnabled",e))return!1;var n=t.run("getUndoRedoStack",e).undoStack,o=t.run("getAllowUndo",e);return n.size>0&&o},canRedo:function(e){var t=e.controller;if(!t.run("isOperationEnabled",e))return!1;var n=t.run("getUndoRedoStack",e).redoStack,o=t.run("getAllowUndo",e);return n.size>0&&o},undo:function(e){var t=e.controller,n=e.model;if(t.run("getAllowUndo",e)){var o=t.run("getUndoRedoStack",e),r=o.undoStack,a=o.redoStack,c=r.peek();c&&(t.run("setUndoStack",Object(m.a)(Object(m.a)({},e),{},{undoStack:r.shift()})),t.run("setRedoStack",Object(m.a)(Object(m.a)({},e),{},{redoStack:a.push(n)})),jS(c),t.change(c))}},redo:function(e){var t=e.controller,n=e.model;if(t.run("getAllowUndo",e)){var o=t.run("getUndoRedoStack",e),r=o.undoStack,a=o.redoStack,c=a.peek();c&&(t.run("setUndoStack",Object(m.a)(Object(m.a)({},e),{},{undoStack:r.push(n)})),t.run("setRedoStack",Object(m.a)(Object(m.a)({},e),{},{redoStack:a.shift()})),t.change(c))}},operation:function(e){var t=e.controller,n=e.opType,o=e.model,a=e.opArray,c=e.callback;if(null!=a&&!Array.isArray(a))throw new Error("operation: the type of opArray must be array!");if(null!=n&&null!=a)throw new Error("operation: opType and opArray conflict!");if(!t.run("isOperationEnabled",e)){if(0===r.size)return;if(null!=a){var i=a.filter((function(e){return!r.has(e.opType)}));if(i&&i.length>0)return}else if(!r.has(n))return}jS("operation:",n||a.map((function(e){return e.opType}))),jS("operation:",o),jS("operation:",e);var l,s=t.run("getOpMap",e);if(t.run("beforeOperation",e),t.run("getAllowUndo",e)){var u=t.run("getUndoRedoStack",e).undoStack;t.run("setUndoStack",Object(m.a)(Object(m.a)({},e),{},{undoStack:u.push(o)}))}if(null!=a)l=a.reduce((function(e,n){var o=n.opType;if(!s.has(o))throw new Error("opType:".concat(o," not exist!"));var r=s.get(o),a=Object(m.a)(Object(m.a)({controller:t},n),{},{model:e}),c=t.run("beforeOpFunction",a);return c=r(Object(m.a)(Object(m.a)({},a),{},{model:c})),c=t.run("afterOpFunction",Object(m.a)(Object(m.a)({},a),{},{model:c}))}),o);else{if(!s.has(n))throw new Error("opType:".concat(n," not exist!"));var p=s.get(n);l=t.run("beforeOpFunction",e),l=p(Object(m.a)(Object(m.a)({},e),{},{model:l})),l=t.run("afterOpFunction",Object(m.a)(Object(m.a)({},e),{},{model:l}))}jS("newModel:",l),t.change(l,c?c(l):null),t.run("afterOperation",e)},deleteRefKey:function(e){var t=e.model,n=e.topicKey,o=e.deleteRef,r=Hj(t,n);r.push(n);var a,c=Object(O.a)(r);try{for(c.s();!(a=c.n()).done;){var i=a.value;o(XE(i)),o($E(i)),o(WE(i)),o(JE(i)),o(ZE(i)),o(YE(i)),o(qE(i)),o(QE(i)),o(ex(i,"next")),o(ex(i,"prev"))}}catch(l){c.e(l)}finally{c.f()}},beforeOperation:function(e){},afterOperation:function(e){},beforeOpFunction:function(e){var t=e.controller,n=e.opType,o=e.model,r=e.topicKey;return n===xj&&r!==o.editorRootTopicKey&&t.run("deleteRefKey",e),o},afterOpFunction:function(e){return e.model},openNewModel:function(e){var t=e.model,n=e.controller,o=e.newModel;n.run("deleteRefKey",Object(m.a)(Object(m.a)({},e),{},{topicKey:t.rootTopicKey})),n.run("operation",Object(m.a)(Object(m.a)({},e),{},{opType:jj,topicKey:o.focusKey,model:o,callback:function(t){return function(){n.run("moveTopicToCenter",Object(m.a)(Object(m.a)({},e),{},{model:t,topicKey:t.focusKey}))}}}))}}}var ES=function(e){Object(s.a)(n,e);var t=Object(u.a)(n);function n(){return Object(i.a)(this,n),t.apply(this,arguments)}return Object(l.a)(n,[{key:"render",value:function(){var e=this.props.controller;return Object(o.createElement)(y.n,null,e.run("customizeTopicContextMenu",this.props))}}]),n}(lE),xS=[{icon:"edit",label:vx,shortcut:"Space",rootCanUse:!0,opType:_j},{icon:"add-sibling",label:Tx,shortcut:"Enter",opType:Ej},{icon:"add-child",label:jx,shortcut:"Tab",rootCanUse:!0,opType:kj},{icon:"notes",label:kx,shortcut:"Alt + D",rootCanUse:!0,opType:Ij},{icon:"delete-node",label:Ex,shortcut:"Del",opType:xj},{icon:"root",label:xx,shortcut:"Alt + Shift + F",opType:Aj}];function wS(){return{renderTopicContextMenu:function(e){return Object(o.createElement)(ES,Object.assign({},e))},customizeTopicContextMenu:function(e){var t=e.topicKey,n=e.model,r=e.controller,a=t===n.editorRootTopicKey;function c(t){return function(n){t.opType&&r.run("operation",Object(m.a)(Object(m.a)({},e),{},{opType:t.opType}))}}return xS.map((function(t){return a&&!t.rootCanUse?null:Object(o.createElement)(y.p,{key:t.label,icon:UE(t.icon),text:Ww(e,t.label),labelElement:Object(o.createElement)("kbd",null,t.shortcut),onClick:c(t)})}))}}}var SS=b()("node:topic-drop-effect"),CS=d.default.svg(jk||(jk=Object(Ri.a)(["\n  width: 100%;\n  height: 100%;\n  position: absolute;\n  left: 0;\n  top: 0;\n  z-index: 2;\n  pointer-events: none;\n"]))),KS=function(e){Object(s.a)(n,e);var t=Object(u.a)(n);function n(){var e;return Object(i.a)(this,n),(e=t.apply(this,arguments)).state={content:null},e}return Object(l.a)(n,[{key:"layout",value:function(){var e=this.props,t=e.getRef,n=e.model,r=e.zoomFactor,a=e.diagramState.dragDrop;if(null!=a){var c=a.targetKey,i=a.targetDir;if(SS("layout",i),null!=c){var l=t("in"===i?WE(c):ex(c,i)),s=t("svg-drop-effect"),u=t(nx).bigView,p=Xw(l,u,r),d=Xw(s,u,r),f=p.left-d.left-3,b=p.top-d.top-3,y=p.width+6,h=p.height+6;this.setState({content:Object(o.createElement)("g",null,Object(o.createElement)("rect",{x:f,y:b,width:y,height:h,fill:"none",stroke:n.config.theme.highlightColor,strokeDasharray:"5,5",strokeWidth:2}))})}else this.setState({content:null})}else this.setState({content:null})}},{key:"render",value:function(){var e=this.props.saveRef;return Object(o.createElement)(CS,{ref:e("svg-drop-effect")},this.state.content)}}]),n}(lE),RS=b()("plugin:drag-and-drop"),DS=d.default.div(kk||(kk=Object(Ri.a)(["\n  height: ",";\n  width: 100%;\n  margin: 5px 0px;\n"])),(function(e){return"".concat(e.height,"px")}));function LS(){return{renderTopicDropArea:function(e){var t=e.topicKey,n=e.dropDir,r=e.saveRef,a=e.controller,c=e.model,i={onDragEnter:function(o){RS("onDragEnter",t,n),a.run("handleTopicDragEnter",Object(m.a)(Object(m.a)({},e),{},{ev:o,dropDir:n}))},onDragLeave:function(o){RS("onDragLeave",t,n),a.run("handleTopicDragLeave",Object(m.a)(Object(m.a)({},e),{},{ev:o,dropDir:n}))},onDragOver:function(e){e.preventDefault()},onDrop:function(o){RS("onDrop",t,n),a.run("handleTopicDrop",Object(m.a)(Object(m.a)({},e),{},{ev:o,dropDir:n}))}};return Object(o.createElement)(DS,Object.assign({height:c.config.theme.marginV/2,ref:r(ex(t,n))},i))},renderDragAndDropEffect:function(e){RS("renderDragAndDropEffect");var t=e.saveRef;return Object(o.createElement)(KS,Object.assign({ref:t(ax)},e))},handleTopicDragStart:function(e){var t=e.controller;e.ev.stopPropagation(),t.run("operation",Object(m.a)(Object(m.a)({},e),{},{opType:wj,focusMode:bj}))},canDrop:function(e){var t=e.srcKey,n=e.dstKey,o=e.model,r=e.dropDir;return t!==o.editorRootTopicKey&&t!==n&&Gj(o,t,n)!==yj&&((n!==o.editorRootTopicKey||"in"===r)&&(o.getTopic(t).parentKey!==n||"in"!==r))},handleTopicDragEnter:function(e){var t=e.dropDir,n=e.topicKey,o=e.controller,r=e.model,a=e.diagramState,c=e.setDiagramState;RS("handleTopicDragEnter:",n,t),o.run("canDrop",Object(m.a)(Object(m.a)({},e),{},{srcKey:r.focusKey,dstKey:n}))&&c(Object(m.a)(Object(m.a)({},a),{},{dragDrop:{targetKey:n,targetDir:t}}))},handleTopicDragLeave:function(e){var t=e.topicKey,n=e.dropDir,o=e.getRef,r=e.ev,a=e.diagramState,c=e.setDiagramState,i=r.nativeEvent.relatedTarget;RS("handleTopicDragLeave:",t,n);var l=o(WE(t));l==i||l.contains(i)||c(Object(m.a)(Object(m.a)({},a),{},{dragDrop:null}))},handleTopicDrop:function(e){RS("handleTopicDrop");var t=e,n=t.controller,o=t.topicKey,r=t.model,a=t.diagramState,c=t.setDiagramState;e=Object(m.a)(Object(m.a)({},e),{},{srcKey:r.focusKey,dstKey:o}),c(Object(m.a)(Object(m.a)({},a),{},{dragDrop:null})),n.run("canDrop",e)&&n.run("operation",Object(m.a)(Object(m.a)({},e),{},{opType:Mj}))}}}function _S(e,t,n,o){var r,a=arguments.length,c=a<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)c=Reflect.decorate(e,t,n,o);else for(var i=e.length-1;i>=0;i--)(r=e[i])&&(c=(a<3?r(c):a>3?r(t,n,c):r(t,n))||c);return a>3&&c&&Object.defineProperty(t,n,c),c}var IS=d.default.div(Ek||(Ek=Object(Ri.a)(["\n  position: relative;\n  display: flex;\n  align-items: center;\n  padding: 5px;\n"]))),MS=d.default.div(xk||(xk=Object(Ri.a)(["\n  width: 100%;\n  height: 100%;\n  background: ",";\n"])),(function(e){return e.theme.background})),AS=function(e){Object(s.a)(n,e);var t=Object(u.a)(n);function n(e){var o;return Object(i.a)(this,n),(o=t.call(this,e)).setZoomFactor=function(e){o.dragScrollWidget.setZoomFactor(e)},o.onWheel=function(e){if(e.altKey||e.ctrlKey){var t=o.props.controller,n=t.run("getZoomFactor",o.props);(n-=e.nativeEvent.deltaY>0?.1:-.1)<.5&&(n=.5),n>4&&(n=4),t.run("setZoomFactor",Object(m.a)(Object(m.a)({},o.props),{},{zoomFactor:n}))}},o}return Object(l.a)(n,[{key:"renderHotkeys",value:function(){var e=this.props,t=e.controller,n=e.model,r=t.run("customizeHotKeys",e);if(null===r)return null;if(!(r.topicHotKeys instanceof Map&&r.globalHotKeys instanceof Map))throw new TypeError("topicHotKeys and globalHotKeys must be a Map");var a=[];return n.focusMode!==uj&&n.focusMode!==fj||r.topicHotKeys.forEach((function(e,t){a.push(Object(o.createElement)(y.j,Object.assign({key:t},e,{global:!0})))})),r.globalHotKeys.forEach((function(e,t){a.push(Object(o.createElement)(y.j,Object.assign({key:t},e,{global:!0})))})),Object(o.createElement)(y.k,null,a)}},{key:"componentDidMount",value:function(){var e=this.props,t=e.getRef,n=e.model;e.controller.run("addZoomFactorChangeEventListener",Object(m.a)(Object(m.a)({},this.props),{},{listener:this.setZoomFactor}));var o=t(qE(n.editorRootTopicKey)),r=t("node-layer"),a=o.getBoundingClientRect(),c=r.getBoundingClientRect();this.dragScrollWidget.setViewBoxScrollDelta(0,a.top-c.top-this.dragScrollWidget.viewBox.getBoundingClientRect().height/2+a.height),this.layout()}},{key:"componentWillUnmount",value:function(){this.props.controller.run("removeZoomFactorChangeEventListener",Object(m.a)(Object(m.a)({},this.props),{},{listener:this.setZoomFactor}))}},{key:"dragScrollWidget",get:function(){return this.props.getRef(nx)}},{key:"componentDidUpdate",value:function(){this.props.controller.run("fireEvent",Object(m.a)(Object(m.a)({},this.props),{},{key:cx})),this.layout()}},{key:"layout",value:function(){this.props.controller.run("layout",this.props)}},{key:"render",value:function(){var e=this,t=this.props,n=t.saveRef,r=t.model,a=t.controller,c=r.editorRootTopicKey;return Object(o.createElement)(MS,{onWheel:this.onWheel},Object(o.createElement)(dE,Object.assign({},this.state,{enableMouseWheel:!1,zoomFactor:r.zoomFactor,ref:n(nx)}),(function(t,r){var i=Object(m.a)(Object(m.a)({},e.props),{},{topicKey:c,setViewBoxScroll:t,setViewBoxScrollDelta:r});return Object(o.createElement)(IS,{ref:n("node-layer")},a.run("renderRootWidget",i))})))}}]),n}(o.PureComponent);AS=_S([y.l],AS);var NS=d.default.div(wk||(wk=Object(Ri.a)(["\n  display: flex;\n  flex-direction: column;\n  width: 100%;\n  height: 100%;\n"]))),FS=d.default.div(Sk||(Sk=Object(Ri.a)(["\n  width: 100%;\n  //height: 100%;\n  overflow: auto;\n  flex-grow: 1;\n  background: ",";\n  position: relative;\n"])),(function(e){return e.theme.background}));function PS(e){var t=e.controller,n=e.saveRef,r=Object(o.useState)(t.run("getInitialDiagramState",e)),a=Object(Si.a)(r,2),c=a[0],i=a[1],l=Object(m.a)(Object(m.a)({},e),{},{diagramState:c,setDiagramState:i});return Object(o.createElement)(NS,null,t.run("renderToolbar",e),Object(o.createElement)(FS,{ref:n(tx)},Object(o.createElement)(AS,Object.assign({},l)),t.run("renderDiagramCustomize",l)))}var BS=Object(d.default)(EE)(Ck||(Ck=Object(Ri.a)(["\n  position: absolute;\n  width: 20%;\n  padding: 0 5px;\n  background: white;\n  left: 30px;\n  top: 20px;\n  border-radius: 2px;\n"]))),zS=d.default.div(Kk||(Kk=Object(Ri.a)(["\n  max-width: 600px;\n"]))),VS=d.default.span(Rk||(Rk=Object(Ri.a)([""]))),HS=function(e){Object(s.a)(n,e);var t=Object(u.a)(n);function n(e){var r;return Object(i.a)(this,n),(r=t.call(this,e)).setEditorRootTopicKey=function(e){return function(){var t=r.props,n=t.model,o=t.controller;n.editorRootTopicKey!==e&&o.run("operation",Object(m.a)(Object(m.a)({},r.props),{},{opType:Aj,topicKey:e}))}},r.breadcrumbRenderer=function(e){var t=e.text,n=Object(Ci.a)(e,iE),r=t.length>8,a=r?t.substr(0,8)+"...":t,c={content:Object(o.createElement)(zS,null,t),position:y.u.BOTTOM_RIGHT},i=Object(o.createElement)(y.b,Object.assign({},n),Object(o.createElement)(VS,null,a));return r?Object(o.createElement)(y.x,Object.assign({},c),i):i},r}return Object(l.a)(n,[{key:"render",value:function(){var e=this.props,t=e.model,n=e.controller,r=e.zIndex,a=t.editorRootTopicKey;if(a===t.rootTopicKey)return null;for(var c=[],i=t.getTopic(a);null!=i;){var l=n.getValue(sx,Object(m.a)(Object(m.a)({},e),{},{topicKey:i.key}));c.unshift({text:l,onClick:this.setEditorRootTopicKey(i.key)}),i=t.getTopic(i.parentKey)}var s={items:c,breadcrumbRenderer:this.breadcrumbRenderer};return Object(o.createElement)(BS,{zIndex:r},Object(o.createElement)(y.c,Object.assign({},s)))}}]),n}(lE),GS=function(e){Object(s.a)(n,e);var t=Object(u.a)(n);function n(){var e;return Object(i.a)(this,n),(e=t.apply(this,arguments)).handleClose=function(){var t=e.props.controller.run("handleActiveModalClose",e.props);t&&t()},e}return Object(l.a)(n,[{key:"render",value:function(){var e=this.props.controller,t=e.run("renderModal",this.props),n=e.run("getActiveModalProps",this.props);return Object(o.createElement)(y.g,{onClose:this.handleClose,isOpen:null!==t,autoFocus:!0,enforceFocus:!0,usePortal:!0,title:n&&n.title,style:n&&n.style},Object(o.createElement)("div",{className:h.a.DIALOG_BODY,style:{minHeight:0}},t))}}]),n}(lE),US=d.default.svg(Dk||(Dk=Object(Ri.a)(["\n  width: 100%;\n  height: 100%;\n  position: absolute;\n  left: 0;\n  top: 0;\n  z-index: 1;\n  pointer-events: none;\n"]))),WS=b()("node:root-sub-links"),JS=function(e){Object(s.a)(n,e);var t=Object(u.a)(n);function n(){var e;return Object(i.a)(this,n),(e=t.apply(this,arguments)).state={curves:[]},e}return Object(l.a)(n,[{key:"layout",value:function(){var e,t,n,r=this.props,a=r.model,c=r.getRef,i=r.topicKey,l=r.zoomFactor,s=r.controller,u=a.getTopic(i),p=c(WE(i)),d=c($E(i)),f=c(nx).bigView,b=Xw(p,f,l),y=Xw(d,f,l);e={x:(n=b,(n.left+n.right)/2-y.left),y:Jw(b)-y.top};var h=[];u.subKeys.forEach((function(n){var a,i=s.run("getLinkStyle",Object(m.a)(Object(m.a)({},r),{},{topicKey:n})),u=i.lineType,p=Xw(c(WE(n)),f,l);if(t={x:(t=p.left>b.right?{x:p.left,y:Jw(p)}:{x:p.right,y:Jw(p)}).x-y.left,y:t.y-y.top},"curve"===u)a="M ".concat(e.x," ").concat(e.y," C ").concat(e.x," ").concat(Yw(e,t)," ").concat(Zw(e,t)," ").concat(t.y," ").concat(t.x," ").concat(t.y);else if("line"===u)a="M ".concat(e.x," ").concat(e.y," L ").concat(t.x," ").concat(t.y);else if("round"===u){var d=t.y>e.y?1:-1,g=t.x>e.x?1:-1,O=i.lineRadius;if(null==O)throw new Error("link line type is round, but lineRadius is not provided!");a=t.y===e.y?"M ".concat(e.x," ").concat(e.y," H ").concat(t.x):"M ".concat(e.x," ").concat(e.y,"  V ").concat(t.y-d*O," A ").concat(O," ").concat(O," 0 0 ").concat(d*g===1?0:1," ").concat(e.x+O*g," ").concat(t.y," H ").concat(t.x)}h.push(Object(o.createElement)("path",{key:"link-".concat(n),d:a,strokeWidth:i.lineWidth,stroke:i.lineColor,fill:"none"}))})),this.setState({curves:h})}},{key:"render",value:function(){WS("render");var e=this.props,t=e.topicKey,n=e.saveRef;return Object(o.createElement)(US,{ref:n($E(t))},Object(o.createElement)("g",null,this.state.curves))}}]),n}(lE),ZS=b()("RootNode"),YS=d.default.div(Lk||(Lk=Object(Ri.a)(["\n  display: flex;\n  position: relative;\n\n  align-items: ",";\n  flex-direction: column;\n\n  padding: ",";\n"])),(function(e){return e.topicDirection===oj?"flex-end":"flex-start"}),(function(e){return e.topicDirection===oj?"15px 60px 15px 0px":"15px 0px 15px 60px"})),qS=d.default.div(_k||(_k=Object(Ri.a)(["\n  display: flex;\n  position: relative;\n  align-items: center;\n  z-index: 3;\n"]))),XS=function(e){Object(s.a)(n,e);var t=Object(u.a)(n);function n(){return Object(i.a)(this,n),t.apply(this,arguments)}return Object(l.a)(n,[{key:"renderPartTopics",value:function(e,t){var n=this.props,r=n.controller,a=n.saveRef,c=r.run("createSubTopics",Object(m.a)(Object(m.a)({},this.props),{},{dir:t,isRoot:!0,topics:e}));if(!c)return null;var i=c.subTopics,l="bm-layer-".concat(t===oj?"left":"right");return Object(o.createElement)(YS,{topicDirection:t,ref:a(l)},i)}},{key:"render",value:function(){ZS("render");var e=this.props,t=e.model,n=e.topicKey,r=e.saveRef,a=e.controller,c=a.run("getTopicContentStyle",e),i=t.config,l=a.run("renderTopicContent",Object(m.a)(Object(m.a)({},e),{},{topicStyle:c,dir:aj})),s=a.run("getPartTopics",{layout:i.layoutDir,model:t,topicKey:n}),u=Object(o.createElement)(qS,{ref:r(qE(n))},l),p=a.run("renderRootWidgetOtherChildren",e);switch(i.layoutDir){case tj.LEFT_AND_RIGHT:return Object(o.createElement)(o.Fragment,null,this.renderPartTopics(s.L,"L"),u,this.renderPartTopics(s.R,"R"),p);case tj.LEFT_TO_RIGHT:return Object(o.createElement)(o.Fragment,null,u,this.renderPartTopics(s.R,"R"),p);case tj.RIGHT_TO_LEFT:return Object(o.createElement)(o.Fragment,null,this.renderPartTopics(s.L,"L"),u,p);case tj.TOP_TO_BOTTOM:return Object(o.createElement)(o.Fragment,null,u,this.renderPartTopics(s.B,"B"),p)}return null}}]),n}(o.Component),$S=d.default.div(Ik||(Ik=Object(Ri.a)(["\n  position: absolute;\n  top: calc(50% - 10px);\n  ",";\n  border-radius: 50%;\n  width: 20px;\n  height: 20px;\n  text-align: center;\n  //@ts-ignore\n  background: ",";\n  cursor: pointer;\n  padding: 0;\n  font-size: 14px;\n  line-height: 20px;\n  border: 0;\n  z-index: 2;\n"])),(function(e){var t=e.dir;return t===rj?Object(d.css)(Mk||(Mk=Object(Ri.a)(["\n        right: -25px;\n      "]))):t===oj?Object(d.css)(Ak||(Ak=Object(Ri.a)(["\n        left: -25px;\n      "]))):void 0}),(function(e){return e.background}));function QS(e){var t=e.model,n=e.topicKey,r=e.topicStyle,a=e.dir,c=e.saveRef,i=e.onClickCollapse,l=t.getTopic(n);return l.subKeys.size>0?Object(o.createElement)($S,{ref:c(QE(n)),onClick:i,background:r.background,dir:a,className:nt()(Object(wi.a)({icon:!0,iconfont:!0},"bm-".concat(l.collapse?"plus":"minus"),!0))}):null}var eC=b()("node:topic-content2"),tC=d.default.div(Nk||(Nk=Object(Ri.a)(["\n  position: relative;\n"]))),nC=d.default.div(Fk||(Fk=Object(Ri.a)(["\n  position: absolute;\n  left: 0;\n  top: 0;\n  width: auto;\n  z-index: 10;\n  color: black;\n"]))),oC=function(e){eC("cancelEvent"),e.preventDefault(),e.stopPropagation()};function rC(e){var t,n=e.controller,r=e.model,a=e.topicKey,c=e.getRef,i=r.editingContentKey!==a,l=n.run("renderTopicContentEditor",Object(m.a)(Object(m.a)({},e),{},{readOnly:i}));if(i)t=l;else{var s,u={width:50,height:40},d=c("content-editor-".concat(a));d&&(u=d.getBoundingClientRect());var f=new p.a((function(e,t){var n=e[0].contentRect;s.style.left=(u.width-n.width)/2+"px",s.style.top=(u.height-n.height)/2+"px"}));eC(u),t=Object(o.createElement)(o.Fragment,null,Object(o.createElement)("div",{style:{width:u.width,height:u.height}}),Object(o.createElement)(nC,{ref:function(e){e&&(s=e,f.observe(s))}},l))}return Object(o.createElement)(tC,{onDragEnter:oC,onDragOver:oC},t)}var aC=b()("node:topic-content-widget"),cC=d.default.div(Pk||(Pk=Object(Ri.a)(["\n  display: flex;\n  align-items: center;\n  cursor: pointer;\n  //overflow: hidden;\n  position: relative;\n"]))),iC=d.default.div(Bk||(Bk=Object(Ri.a)(["\n  position: relative;\n"]))),lC=function(e){Object(s.a)(n,e);var t=Object(u.a)(n);function n(e){var o;return Object(i.a)(this,n),(o=t.call(this,e)).onDragStart=function(e){o.run("handleTopicDragStart",Object(m.a)(Object(m.a)({},o.props),{},{ev:e}))},o.onDragOver=function(e){e.preventDefault()},o.onDragEnter=function(e){aC("onDragEnter",o.props.topicKey),o.run("handleTopicDragEnter",Object(m.a)(Object(m.a)({},o.props),{},{ev:e,dropDir:"in"}))},o.onDragLeave=function(e){o.run("handleTopicDragLeave",Object(m.a)(Object(m.a)({},o.props),{},{ev:e,dropDir:"in"}))},o.onDrop=function(e){aC("onDrop"),o.run("handleTopicDrop",Object(m.a)(Object(m.a)({},o.props),{},{ev:e,dropDir:"in"}))},o.onClick=function(e){var t=o.props.controller;o.handleTopicClickTimeout=setTimeout((function(){t.run("handleTopicClick",Object(m.a)(Object(m.a)({},o.props),{},{ev:e}))}),200)},o.onDoubleClick=function(e){clearTimeout(o.handleTopicClickTimeout),o.props.controller.run("handleTopicDoubleClick",Object(m.a)(Object(m.a)({},o.props),{},{ev:e}))},o.needRelocation=!1,o.onClickCollapse=function(e){e.stopPropagation();var t=o.props,n=t.topicKey,r=t.getRef;o.needRelocation=!0;var a=r(QE(n)).getBoundingClientRect();aC("oldRect",a),o.oldCollapseIconVector=[a.left+a.width/2,a.top+a.height/2],aC("oldCollapseIconVector",o.oldCollapseIconVector),o.operation(Oj,o.props)},o.state={dragEnter:!1},o}return Object(l.a)(n,[{key:"renderContextMenu",value:function(){var e=this.props.controller;if(e.getValue(lx,Object(m.a)({},this.props)))return this.operation(wj,Object(m.a)(Object(m.a)({},this.props),{},{focusMode:fj})),e.run("renderTopicContextMenu",this.props)}},{key:"onContextMenuClose",value:function(){}},{key:"componentDidUpdate",value:function(){if(this.needRelocation){var e=this.props,t=e.getRef,n=e.topicKey,o=e.setViewBoxScrollDelta,r=t(QE(n)).getBoundingClientRect(),a=[r.left+r.width/2,r.top+r.height/2];aC("newVector:",a),aC("oldVector:",this.oldCollapseIconVector);var c=[a[0]-this.oldCollapseIconVector[0],a[1]-this.oldCollapseIconVector[1]];aC("vector",c),o(c[0],c[1]),this.needRelocation=!1}}},{key:"render",value:function(){var e=this.props,t=e.saveRef,n=e.topicKey,r=e.model,a=e.controller,c=e.topicStyle,i=e.dir;aC("render",n,r.focusMode);var l=a.run("isOperationEnabled",e)&&r.editingContentKey!==n,s=a.run("renderTopicCollapseIcon",Object(m.a)(Object(m.a)({},e),{},{onClickCollapse:this.onClickCollapse.bind(this)})),u=a.run("renderTopicDropArea",Object(m.a)(Object(m.a)({},e),{},{dropDir:"prev"})),p=a.run("renderTopicDropArea",Object(m.a)(Object(m.a)({},e),{},{dropDir:"next"})),d={onDragEnter:this.onDragEnter,onDragLeave:this.onDragLeave,onDragOver:this.onDragOver,onDrop:this.onDrop};return Object(o.createElement)(iC,null,u,Object(o.createElement)(cC,Object.assign({style:c,draggable:l,ref:t(WE(n)),onDragStart:this.onDragStart,onClick:this.onClick,onDoubleClick:this.onDoubleClick},d),a.run("renderTopicBlocks",e),a.run("renderTopicContentOthers",e)),p,i!==aj&&s)}}]),n}(lE);lC=_S([y.f],lC);var sC=b()("node:topic-desc"),uC=d.default.div(zk||(zk=Object(Ri.a)(["\n  overflow: auto;\n"])));function pC(e){var t=e.controller,n=e.model,r=e.topicKey,a=e.getRef,c=n.editingDescKey===r;sC("isEditing",c);var i=n.getTopic(r).getBlock(sj);if(!c&&t.run("isBlockEmpty",Object(m.a)(Object(m.a)({},e),{},{block:i.block})))return null;var l=t.run("renderTopicDescEditor",e),s=a(tx),u={maxWidth:"800px",maxHeight:"600px"};if(s){var p=s.getBoundingClientRect();u.maxWidth="".concat(.6*p.width,"px"),u.maxHeight="".concat(.8*p.height,"px")}var d={autoFocus:!1,content:Object(o.createElement)(uC,{onClick:Hw,classname:h.a.POPOVER_DISMISS,style:u},l),target:Object(o.createElement)(kE,{onClick:function(n){n.stopPropagation(),t.run("operation",Object(m.a)(Object(m.a)({},e),{},{opType:Ij}))},className:GE(NE),tabIndex:-1}),interactionKind:y.t.HOVER,hoverOpenDelay:500};return i.block&&Object(o.createElement)(y.s,Object.assign({},d))}var dC=d.default.svg(Vk||(Vk=Object(Ri.a)(["\n  width: 100%;\n  height: 100%;\n  position: absolute;\n  left: 0;\n  top: 0;\n  z-index: 2;\n  pointer-events: none;\n"]))),fC=function(e){Object(s.a)(n,e);var t=Object(u.a)(n);function n(){var e;return Object(i.a)(this,n),(e=t.apply(this,arguments)).state={content:null},e}return Object(l.a)(n,[{key:"layout",value:function(){var e=this.props,t=e.getRef,n=e.model,r=e.zoomFactor,a=n.focusKey,c=n.focusMode;if(a&&c!==pj){var i=t(WE(a)),l=t(nx).bigView,s=t(ox),u=Xw(i,l,r),p=Xw(s,l,r),d=u.left-p.left-3,f=u.top-p.top-3,b=u.width+6,y=u.height+6;this.setState({content:Object(o.createElement)("rect",{x:d,y:f,width:b,height:y,fill:"none",stroke:n.config.theme.highlightColor,strokeWidth:2})})}else this.setState({content:null})}},{key:"render",value:function(){var e=this.props.saveRef;return Object(o.createElement)(dC,{ref:e(ox)},this.state.content)}}]),n}(lE),bC=d.default.svg(Hk||(Hk=Object(Ri.a)(["\n  width: 100%;\n  height: 100%;\n  position: absolute;\n  left: 0;\n  top: 0;\n  z-index: 1;\n  pointer-events: none;\n"]))),yC=b()("node:topic-sub-links"),hC=function(e){Object(s.a)(n,e);var t=Object(u.a)(n);function n(){var e;return Object(i.a)(this,n),(e=t.apply(this,arguments)).state={curves:[]},e}return Object(l.a)(n,[{key:"layout",value:function(){var e,t,n,r=this.props,a=r.model,c=r.getRef,i=r.topicKey,l=r.dir,s=r.controller,u=s.run("getZoomFactor",r),p=a.getTopic(i),d=c(WE(i)),f=c($E(i)),b=c(QE(i)),y=c(nx).bigView,h=Xw(f,y,u),g=Xw(b,y,u),O=Xw(d,y,u);yC(i),yC("svgRect",h),yC("collapseRect",g),yC("contentRect",O),l===rj?(e={x:0,y:Jw(O)-h.top},t={x:g.right-h.left+10,y:e.y}):l===oj&&(e={x:h.right-h.left,y:Jw(O)-h.top},t={x:g.left-h.left-10,y:e.y});var v=[];p.subKeys.forEach((function(a){var i,d=s.run("getLinkStyle",Object(m.a)(Object(m.a)({},r),{},{topicKey:a})),f=c(WE(a));if(f){var b=Xw(f,y,u);l===rj&&(n={x:b.left-h.left,y:Jw(b)-h.top}),l===oj&&(n={x:b.right-h.left,y:Jw(b)-h.top});var g=d.lineType;if("curve"===g)i="M ".concat(e.x," ").concat(e.y," L ").concat(t.x," ").concat(t.y," C ").concat(t.x," ").concat(Yw(t,n)," ").concat(Zw(t,n)," ").concat(n.y," ").concat(n.x," ").concat(n.y);else if("round"===g){var O=n.y>e.y?1:-1,T=n.x>e.x?1:-1,j=d.lineRadius;i=1===p.subKeys.size||Math.abs(n.y-e.y)<=1?"M ".concat(e.x," ").concat(e.y," L ").concat(n.x," ").concat(n.y):"M ".concat(e.x," ").concat(e.y," H ").concat(t.x," V ").concat(n.y-O*j," A ").concat(j," ").concat(j," 0 0 ").concat(O*T===1?0:1," ").concat(t.x+j*T," ").concat(n.y," H ").concat(n.x)}else"line"===g&&(i="M ".concat(e.x," ").concat(e.y," H ").concat(t.x," L ").concat(n.x," ").concat(n.y));v.push(Object(o.createElement)("path",{key:"link-".concat(a),d:i,strokeWidth:d.lineWidth,stroke:d.lineColor,fill:"none"}))}})),this.setState({curves:v})}},{key:"render",value:function(){var e=this.props,t=e.topicKey,n=e.saveRef;return Object(o.createElement)(bC,{ref:n($E(t))},Object(o.createElement)("g",null,this.state.curves))}}]),n}(lE),gC=b()("node:topic-widget"),mC=d.default.div(Gk||(Gk=Object(Ri.a)(["\n  display: flex;\n  align-items: center;\n  flex-direction: ",";\n"])),(function(e){return e.topicDirection===rj?"row":"row-reverse"})),OC=d.default.div(Uk||(Uk=Object(Ri.a)(["\n  position: relative;\n  padding: ",";\n"])),(function(e){return e.dir===rj?"0 0 0 ".concat(e.marginH,"px"):"0 ".concat(e.marginH,"px 0 0")})),vC=d.default.div(Wk||(Wk=Object(Ri.a)(["\n  display: flex;\n  position: relative;\n  align-items: center;\n\n  flex-direction: ",";\n"])),(function(e){return e.topicDirection===rj?"row":"row-reverse"})),TC=function(e){Object(s.a)(n,e);var t=Object(u.a)(n);function n(){return Object(i.a)(this,n),t.apply(this,arguments)}return Object(l.a)(n,[{key:"renderSubTopics",value:function(){var e=this.props,t=e.controller,n=e.model,r=e.topicKey,a=e.dir,c=n.getTopic(r).subKeys.toArray(),i=t.run("createSubTopics",Object(m.a)(Object(m.a)({},e),{},{topics:c}));if(!i)return null;var l=i.subTopics,s=t.run("renderSubLinks",e);return Object(o.createElement)(OC,{dir:a,marginH:n.config.theme.marginH},l," ",s)}},{key:"layoutLinks",value:function(){var e=this.props,t=e.getRef,n=e.topicKey,o=e.model.getTopic(n);if(0!==o.subKeys.size&&!o.collapse){gC("layoutLinks",n);var r=t(XE(n));r&&r.layout()}}},{key:"render",value:function(){var e=this.props,t=e.controller,n=e.topicKey,r=e.dir,a=e.saveRef;gC("render",n);var c=t.run("getTopicContentStyle",e),i=Object(m.a)(Object(m.a)({},e),{},{topicStyle:c}),l=t.run("renderTopicContent",i);return Object(o.createElement)(mC,{topicDirection:r},Object(o.createElement)(vC,{topicDirection:r,ref:a(qE(n))},l),this.renderSubTopics())}}]),n}(o.Component),jC=b()("node:view-port-viewer"),kC=Object(d.default)(EE)(Jk||(Jk=Object(Ri.a)(["\n  position: absolute;\n  background: white;\n  right: 30px;\n  bottom: 20px;\n  border-radius: 2px;\n  display: flex;\n  flex-direction: row;\n  user-select: none;\n"]))),EC=Object(d.default)(OE)(Zk||(Zk=Object(Ri.a)(["\n  margin: 10px;\n"]))),xC=d.default.span(Yk||(Yk=Object(Ri.a)(["\n  display: inline-block;\n  width: 80px;\n  height: 18px;\n"]))),wC=function(e){return Object(o.createElement)(y.x,{content:e.tooltip,position:g.a.TOP,className:h.a.ICON},Object(o.createElement)(EC,{onClick:e.onClick,tabIndex:-1},e.children))},SC=function(e){Object(s.a)(n,e);var t=Object(u.a)(n);function n(e){var o;return Object(i.a)(this,n),(o=t.call(this,e)).zoomFactorChange=function(e){jC("zoomFactorChange",e),o.setState({zoomFactor:e})},o.onClickResetZoom=function(e){var t=o.props;t.controller.run("setZoomFactor",Object(m.a)(Object(m.a)({},t),{},{zoomFactor:1}))},o.onClickAddZoom=function(e){var t=o.props,n=t.controller,r=n.run("getZoomFactor",t);n.run("setZoomFactor",Object(m.a)(Object(m.a)({},t),{},{zoomFactor:r+.1}))},o.onClickMinusZoom=function(e){var t=o.props,n=t.controller,r=n.run("getZoomFactor",t);n.run("setZoomFactor",Object(m.a)(Object(m.a)({},t),{},{zoomFactor:r-.1}))},o.onClickCollapseAll=function(e){var t=o.props,n=t.controller;n.run("addEventListener",Object(m.a)(Object(m.a)({},t),{},{key:cx,listener:o.centerRootTopic,once:!0})),n.run("operation",Object(m.a)(Object(m.a)({},t),{},{opType:vj}))},o.onClickExpandAll=function(e){var t=o.props,n=t.controller;n.run("addEventListener",Object(m.a)(Object(m.a)({},t),{},{key:cx,listener:o.centerRootTopic,once:!0})),n.run("operation",Object(m.a)(Object(m.a)({},t),{},{opType:Tj}))},o.centerRootTopic=function(){var e=o.props,t=e.model;e.controller.run("moveTopicToCenter",Object(m.a)(Object(m.a)({},o.props),{},{topicKey:t.editorRootTopicKey}))},o}return Object(l.a)(n,[{key:"componentDidMount",value:function(){var e=this.props;e.controller.run("addZoomFactorChangeEventListener",Object(m.a)(Object(m.a)({},e),{},{listener:this.zoomFactorChange}))}},{key:"componentWillUnmount",value:function(){var e=this.props;e.controller.run("removeZoomFactorChangeEventListener",Object(m.a)(Object(m.a)({},e),{},{listener:this.zoomFactorChange}))}},{key:"render",value:function(){jC("render");var e=this.props,t=e.controller,n=e.zIndex,r=t.run("getZoomFactor",e);return Object(o.createElement)(kC,{zIndex:n},Object(o.createElement)(wC,{onClick:this.onClickCollapseAll,tooltip:Ww(e,jw)},UE(BE)),Object(o.createElement)(wC,{onClick:this.onClickExpandAll,tooltip:Ww(e,kw)},UE(zE)),Object(o.createElement)(wC,{onClick:this.centerRootTopic,tooltip:Ww(e,Ew)},UE(VE)),Object(o.createElement)(wC,{onClick:this.onClickMinusZoom,tooltip:Ww(e,ww)},UE(PE)),Object(o.createElement)(wC,{onClick:this.onClickResetZoom,tooltip:Ww(e,Cw)},Object(o.createElement)(xC,null,"".concat(Ww(e,xw),":").concat(Math.floor(100*r),"%"))),Object(o.createElement)(wC,{onClick:this.onClickAddZoom,tooltip:Ww(e,Sw)},UE(FE)))}}]),n}(lE),CC=d.default.div(qk||(qk=Object(Ri.a)(["\n  overflow: auto;\n  padding: 0px 0px 0px 20px;\n  background: #88888850;\n"])));function KC(e){var t=e.controller,n=e.model,r=e.topicKey;if(n.focusMode===dj){var a=t.run("renderTopicDescEditor",e);return Object(o.createElement)(y.i,{key:"drawer",title:Ww(e,kx),icon:UE("note"),isOpen:!0,hasBackdrop:!0,backdropProps:{onMouseDown:Hw},isCloseButtonShown:!1,onClose:function(n){n.stopPropagation();var o="topic-desc-data-".concat(r),a=t.run("deleteTempValue",{key:o});t.run("operation",Object(m.a)(Object(m.a)({},e),{},{opType:Dj,topicKey:r,blockType:sj,data:a,focusMode:uj}))},size:"70%"},Object(o.createElement)(CC,null,a))}}function RC(e){var t=e.theme,n=e.children;return Object(o.createElement)(d.ThemeProvider,{theme:t},Object(o.createElement)(o.Fragment,null,n))}var DC=b()("plugin:rendering");function LC(){var e;return{getDiagramProps:function(){return e},renderDiagram:function(t){var n=t.model;return Object(o.createElement)(bE,null,(function(r,a,c){return e=Object(m.a)(Object(m.a)({},t),{},{saveRef:r,getRef:a,deleteRef:c}),DC("renderDiagram",n),Object(o.createElement)(RC,{theme:n.config.theme},Object(o.createElement)(PS,e))}))},renderDrawer:KC,getInitialDiagramState:function(e){return{rightTopPanel:{isOpen:!1,selectedTabId:"topic-style"}}},renderDiagramCustomize:function(e){var t=e.controller,n=e.model,o=t.getValue(ix),r=Object(m.a)(Object(m.a)({},e),{},{zIndex:o,topicKey:n.focusKey});return[t.run("renderEditorRootBreadcrumbs",r),t.run("renderRightTopPanel",r),t.run("renderModals",Object(m.a)(Object(m.a)({},r),{},{zIndex:o+1})),t.run("renderDrawer",Object(m.a)(Object(m.a)({},r),{},{zIndex:o+1})),t.run("renderViewPortViewer",r)]},renderEditorRootBreadcrumbs:function(e){return Object(o.createElement)(HS,Object.assign({key:"EditorRootBreadcrumbs"},e))},renderModals:function(e){return Object(o.createElement)(GS,Object.assign({key:"modals"},e))},renderModal:function(e){return null},getActiveModalProps:function(e){return null},renderDoc:function(e){return e.children},renderRootWidget:function(e){return Object(o.createElement)(XS,Object.assign({},e))},renderTopicWidget:function(e){return Object(o.createElement)(TC,Object.assign({},e))},renderTopicContent:function(e){return Object(o.createElement)(lC,Object.assign({},e))},renderTopicCollapseIcon:function(e){return Object(o.createElement)(QS,Object.assign({},e))},renderTopicContentOthers:function(e){return[]},renderTopicBlocks:function(e){var t=e.model,n=e.topicKey,r=e.controller,a=t.getTopic(n).blocks,c=[],i=0;return a.forEach((function(t){var n=r.run("renderTopicBlock",Object(m.a)(Object(m.a)({},e),{},{block:t,blockKey:"block-".concat(i)}));n&&(c.push(Object(o.createElement)(o.Fragment,{key:"block-".concat(i)},n)),i++)})),c},renderTopicBlock:function(e){var t=e.controller;switch(e.block.type){case lj:return t.run("renderTopicBlockContent",e);case sj:return t.run("renderTopicBlockDesc",e)}return null},renderTopicBlockContent:function(e){return Object(o.createElement)(rC,Object.assign({},e))},renderTopicBlockDesc:function(e){return Object(o.createElement)(pC,Object.assign({},e))},renderSubLinks:function(e){var t=e.saveRef,n=e.topicKey,r=e.model.getTopic(n);return 0===r.subKeys.size||r.collapse?null:Object(o.createElement)(hC,Object.assign({ref:t(XE(n))},e))},renderRootSubLinks:function(e){var t=e.saveRef,n=e.topicKey;return Object(o.createElement)(JS,Object.assign({ref:t(XE(n))},e))},renderFocusItemHighlight:function(e){var t=e.saveRef;return Object(o.createElement)(fC,Object.assign({ref:t(rx)},e))},renderRootWidgetOtherChildren:function(e){var t=e.controller,n=t.run("getZoomFactor",e);return e=Object(m.a)(Object(m.a)({},e),{},{zoomFactor:n}),Object(o.createElement)(o.Fragment,null,t.run("renderRootSubLinks",e),t.run("renderFocusItemHighlight",e),t.run("renderDragAndDropEffect",e))},renderViewPortViewer:function(e){return Object(o.createElement)(SC,Object.assign({key:"view-port-viewer"},e))}}}var _C=Object(d.default)(EE)(Xk||(Xk=Object(Ri.a)(["\n  position: absolute;\n  background: white;\n  right: 30px;\n  top: 20px;\n  border-radius: 2px;\n  user-select: none;\n"]))),IC=Object(d.default)(y.w)($k||($k=Object(Ri.a)(["\n  padding: 0px 10px;\n"])));function MC(e){var t=e.controller,n=e.zIndex,r=e.diagramState,a=e.setDiagramState,c=r.rightTopPanel,i=c.isOpen,l=c.selectedTabId,s=function(e){a(Object(m.a)(Object(m.a)({},r),{},{rightTopPanel:Object(m.a)(Object(m.a)({},c),e)}))};if(!i)return Object(o.createElement)(_C,{zIndex:n},Object(o.createElement)(mE,{onClick:function(){s({isOpen:!0})}},Object(o.createElement)(gE,{className:GE(IE)})));return Object(o.createElement)(_C,{zIndex:n},Object(o.createElement)(jE,null,Object(o.createElement)(TE,{className:GE(ME),onClick:function(){s({isOpen:!1})}})),Object(o.createElement)(IC,{id:"tabs",selectedTabId:l,onChange:function(e){s({selectedTabId:e})}},t.run("renderRightTopPanelTabs",e)))}var AC=Object(v.a)(Array(7).keys()),NC=[0,5,10,15,20,25,30,35],FC=["none","solid","dotted","dashed","double"];function PC(e){var t=e.contentStyle,n=e.setContentStyle;return Object(o.createElement)(Qw,null,Object(o.createElement)(SE,null,Ww(e,rw)),Object(o.createElement)(DE,null,Object(o.createElement)(rS,{text:"".concat(Ww(e,aw),": ").concat(t.borderWidth?t.borderWidth:Ww(e,yx)),items:AC,itemRenderer:aS("px"),onItemSelect:function(e){n({borderWidth:"".concat(e,"px")})}}),Object(o.createElement)(rS,{text:"".concat(Ww(e,Kx),": ").concat(t.borderStyle?Ww(e,t.borderStyle):Ww(e,bw)),items:FC,itemRenderer:cS(e),onItemSelect:function(e){n({borderStyle:e})}}),Object(o.createElement)(rS,{text:"".concat(Ww(e,cw),": ").concat(t.borderRadius),items:NC,itemRenderer:aS("px"),onItemSelect:function(e){n({borderRadius:"".concat(e,"px")})}}),Object(o.createElement)(eS,{color:t.borderColor,handleColorChange:function(e){n({borderColor:e})}})))}var BC=["curve","round","line"];function zC(e){var t=e.showLinkStyle,n=void 0===t||t,r=e.showSubLinkStyle,a=void 0===r||r,c=e.linkStyle,i=void 0===c?{}:c,l=e.subLinkStyle,s=void 0===l?{}:l,u=e.setLinkStyle,p=e.setSubLinkStyle;return Object(o.createElement)(Qw,null,Object(o.createElement)(SE,null,Ww(e,Dx)),n&&Object(o.createElement)(DE,{alignItems:"center"},Object(o.createElement)(hE,{margin:"0 5px 0 0"},Ww(e,Lx)+":"," "),Object(o.createElement)(rS,{text:"".concat(Ww(e,aw),": ").concat(i?i.lineWidth:"0px"),items:iS,itemRenderer:aS("px"),onItemSelect:function(e){u({lineWidth:"".concat(e,"px")})}}),Object(o.createElement)(rS,{text:"".concat(Ww(e,Fx),": ").concat(Ww(e,i.lineType)),items:BC,itemRenderer:cS(e),onItemSelect:function(e){u({lineType:e})}}),Object(o.createElement)(eS,{color:i.lineColor,handleColorChange:function(e){u({lineColor:e})}})),a&&Object(o.createElement)(DE,{alignItems:"center"},Object(o.createElement)(hE,{margin:"0 5px 0 0"},Ww(e,_x)+": "),Object(o.createElement)(rS,{text:"".concat(Ww(e,aw),": ").concat(s?s.lineWidth:"0px"),items:iS,itemRenderer:aS("px"),onItemSelect:function(e){p({lineWidth:"".concat(e,"px")})}}),Object(o.createElement)(rS,{text:"".concat(Ww(e,Fx),": ").concat(Ww(e,s.lineType)),items:BC,itemRenderer:cS(e),onItemSelect:function(e){p({lineType:e})}}),Object(o.createElement)(eS,{color:s.lineColor,handleColorChange:function(e){p({lineColor:e})}})))}function VC(e){var t=e.contentStyle,n=e.setContentStyle,r={title:"".concat(Ww(e,iw),":"),min:12,max:100,value:parseInt(t.fontSize),style:{width:50},onValueChange:function(e){n({fontSize:e})}},a={title:"".concat(Ww(e,lw),":"),style:{width:50},value:t.lineHeight||"",onChange:function(e){n({lineHeight:e.target.value})}};return Object(o.createElement)(Qw,null,Object(o.createElement)(SE,null,Ww(e,Rx)),Object(o.createElement)(yE,null,Object(o.createElement)(nS,Object.assign({},r)),Object(o.createElement)(oS,Object.assign({},a)),Object(o.createElement)(eS,{color:t.color,handleColorChange:function(e){n({color:e})}})))}var HC,GC=b()("node:style-editor");function UC(e){var t=e.controller,n=e.model,r=e.topicKey,a=n.getTopic(r),c=function(n){t.run("setTopicContentStyle",Object(m.a)(Object(m.a)({},e),{},{style:n}))};if(!n.focusKey)return null;var i=t.run("getTopicContentStyle",e),l=t.run("getLinkStyle",e),s=t.run("getSubLinkStyle",e),u=Object(m.a)(Object(m.a)({},e),{},{linkStyle:l,subLinkStyle:s,setLinkStyle:function(n){t.run("setLinkStyle",Object(m.a)(Object(m.a)({},e),{},{linkStyle:n}))},setSubLinkStyle:function(n){t.run("setSubLinkStyle",Object(m.a)(Object(m.a)({},e),{},{subLinkStyle:n}))}}),p=Object(m.a)(Object(m.a)({},e),{},{contentStyle:i,setContentStyle:c});return Object(o.createElement)(xE,null,Object(o.createElement)(PC,Object.assign({},p)),Object(o.createElement)(VC,Object.assign({},p)),Object(o.createElement)(Qw,null,Object(o.createElement)(SE,null,Ww(e,nw)),Object(o.createElement)(eS,{color:i.background,handleColorChange:function(e){c({background:e})}})),Object(o.createElement)(zC,Object.assign({},u)),Object(o.createElement)(Qw,null,Object(o.createElement)(tS,{title:Ww(e,Ax),onClick:function(){a.style&&t.run("operation",Object(m.a)(Object(m.a)({},e),{},{opType:Cj,style:null}))}}),Object(o.createElement)(tS,{title:Ww(e,Ix),onClick:function(){HC=t.run("getTopicStyle",e),GC(HC)}}),Object(o.createElement)(tS,{title:Ww(e,Mx),onClick:function(){HC&&t.run("operation",Object(m.a)(Object(m.a)({},e),{},{opType:Cj,style:JSON.stringify(HC)}))}})),function(e){var t=e.controller;return Object(o.createElement)(Qw,null,Object(o.createElement)(CE,null,Object(o.createElement)(y.d,{onClick:function(n){t.run("operation",Object(m.a)(Object(m.a)({},e),{},{opType:Kj}))}},Ww(e,Nx))))}(e))}var WC=n(109);function JC(e){var t=e.contentStyle,n=e.setContentStyle,r=WC("padding",t.padding||"0"),a={layout:"v",min:0,max:99,style:{width:38}},c=parseInt(r["padding-top"]),i=parseInt(r["padding-right"]),l=parseInt(r["padding-bottom"]),s=parseInt(r["padding-left"]),u={top:c,right:i,bottom:l,left:s},p=function(e){return function(t){n({padding:Uw(Object(m.a)(Object(m.a)({},u),{},Object(wi.a)({},e,t)))})}},d=Object(m.a)(Object(m.a)({},a),{},{title:Ww(e,uw),value:c,onValueChange:p("top")}),f=Object(m.a)(Object(m.a)({},a),{},{title:Ww(e,fw),value:i,onValueChange:p("right")}),b=Object(m.a)(Object(m.a)({},a),{},{title:Ww(e,pw),value:l,onValueChange:p("bottom")}),y=Object(m.a)(Object(m.a)({},a),{},{title:Ww(e,dw),value:s,onValueChange:p("left")});return Object(o.createElement)(Qw,null,Object(o.createElement)(SE,null,Ww(e,sw)),Object(o.createElement)(DE,null,Object(o.createElement)(nS,Object.assign({},d)),Object(o.createElement)(nS,Object.assign({},f)),Object(o.createElement)(nS,Object.assign({},b)),Object(o.createElement)(nS,Object.assign({},y))))}var ZC=d.default.div(Qk||(Qk=Object(Ri.a)(["\n  height: 250px;\n  overflow: auto;\n"])));function YC(e){var t=e.topicStyle,n=e.setTopicStyle,r=t.contentStyle,a=void 0===r?{}:r,c=t.linkStyle,i=void 0===c?{}:c,l=t.subLinkStyle,s=void 0===l?{}:l,u=function(e){n({contentStyle:e})},p=Object(m.a)(Object(m.a)({},e),{},{contentStyle:a,setContentStyle:u}),d=Object(m.a)(Object(m.a)({},e),{},{showLinkStyle:!1,linkStyle:i,subLinkStyle:s,setLinkStyle:function(e){n({linkStyle:e})},setSubLinkStyle:function(e){n({subLinkStyle:e})}});return Object(o.createElement)(ZC,null,Object(o.createElement)(PC,Object.assign({},p)),Object(o.createElement)(JC,Object.assign({},p)),Object(o.createElement)(VC,Object.assign({},p)),Object(o.createElement)(Qw,null,Object(o.createElement)(SE,null,Ww(e,nw)),Object(o.createElement)(eS,{color:a.background,handleColorChange:function(e){u({background:e})}})),Object(o.createElement)(zC,Object.assign({},d)))}b()("node:theme-editor");var qC="normal";function XC(e){var t,n=Object(o.useState)(!1),r=Object(Si.a)(n,2),a=r[0],c=r[1],i=e.model,l=e.controller,s=Object(at.cloneDeep)(i.config.theme),u=l.run("getThemeOfTopic",Object(m.a)(Object(m.a)({},e),{},{isClone:!0})),p=u.rootTopic,d=u.primaryTopic,f=u.normalTopic,b=function(t){l.run("operation",Object(m.a)(Object(m.a)({},e),{},{opType:Rj,theme:t}))},h=(t=function(e){b(Object(at.merge)(s,{randomColor:e}))},function(e){return t(e.target.checked)}),g=Object(m.a)(Object(m.a)({},e),{},{topicStyle:p,setTopicStyle:function(e){b(Object(at.merge)(s,{rootTopic:e}))}}),O=Object(o.createElement)(YC,Object.assign({},g)),v=Object(m.a)(Object(m.a)({},e),{},{topicStyle:d,setTopicStyle:function(e){b(Object(at.merge)(s,{primaryTopic:e}))}}),T=Object(o.createElement)(YC,Object.assign({},v)),j=Object(m.a)(Object(m.a)({},e),{},{topicStyle:f,setTopicStyle:function(e){b(Object(at.merge)(s,{normalTopic:e}))}}),k=Object(o.createElement)(YC,Object.assign({},j)),E={id:qC,handleTabIdChange:function(e){qC=e}},x=Object(o.createElement)(KE,null,Object(o.createElement)(y.w,Object.assign({},E),Object(o.createElement)(y.v,{id:"normal",title:Ww(e,Hx),panel:k}),Object(o.createElement)(y.v,{id:"primary",title:Ww(e,Gx),panel:T}),Object(o.createElement)(y.v,{id:"root",title:Ww(e,Ux),panel:O}))),w={isOpen:a,onClose:function(e){c(!1)}},S=Object(o.createElement)(y.a,Object.assign({},w),Object(o.createElement)("p",null,"File format error"));return Object(o.createElement)(xE,null,Object(o.createElement)(Qw,null,Object(o.createElement)(SE,null,Ww(e,Bx)),Object(o.createElement)(DE,null,Object(o.createElement)(RE,null,Ww(e,nw)+":"),Object(o.createElement)(eS,{color:s.background,handleColorChange:function(e){b(Object(at.merge)(s,{background:e}))}}),Object(o.createElement)(RE,null,Ww(e,zx)+":"),Object(o.createElement)(eS,{color:s.highlightColor,handleColorChange:function(e){b(Object(at.merge)(s,{highlightColor:e}))}}),Object(o.createElement)(RE,null,Ww(e,Vx)+":"),Object(o.createElement)(vE,{checked:s.randomColor,onChange:h}))),x,Object(o.createElement)(Qw,null,Object(o.createElement)(tS,{title:Ww(e,Wx),onClick:function(e){Gw(JSON.stringify(s),"blink-mind-theme.json")}}),Object(o.createElement)(tS,{title:Ww(e,Jx),onClick:function(e){(function(e){var t=document.createElement("input");return t.type="file",t.accept=e,new Promise((function(e,n){t.addEventListener("change",(function(t){var o=t.target.files[0],r=new FileReader;r.onload=function(t){var n=t.target.result;e(n)},r.onerror=function(e){n(e.target.error)},r.readAsText(o)})),t.click()}))})(".json,.txt").then((function(e){var t,n=JSON.parse(e);null!=(t=n).name&&null!=t.background&&null!=t.highlightColor?b(n):c(!0)}))}})),S)}function $C(){return{renderRightTopPanel:function(e){var t=Object(m.a)(Object(m.a)({},e),{},{key:"right-top-panel"});return Object(o.createElement)(MC,Object.assign({},t))},renderRightTopPanelTabs:function(e){var t=e.controller;return[t.run("renderTopicStyleEditor",e),t.run("renderThemeEditor",e)]},renderTopicStyleEditor:function(e){var t={id:"topic-style",key:"topic-style",title:Ww(e,Cx),panel:Object(o.createElement)(UC,Object.assign({},e))};return Object(o.createElement)(y.v,Object.assign({},t))},renderThemeEditor:function(e){var t={id:"theme-editor",key:"theme-editor",title:Ww(e,Px),panel:Object(o.createElement)(XC,Object.assign({},e))};return Object(o.createElement)(y.v,Object.assign({},t))}}}var QC=d.default.div(eE||(eE=Object(Ri.a)(["\n  box-shadow: rgb(170, 170, 170) 0 0 2px;\n  background: white;\n  .iconfont {\n    font-size: 28px !important;\n  }\n"])));function eK(e){var t=e.controller;return Object(o.createElement)(QC,null,t.run("renderToolbarItems",e))}function tK(e){var t=[[tj.LEFT_AND_RIGHT,Ww(e,gx),"layout-left-and-right"],[tj.LEFT_TO_RIGHT,Ww(e,Ox),"layout-right"],[tj.RIGHT_TO_LEFT,Ww(e,mx),"layout-left"]];return Object(o.createElement)(sS,Object.assign({className:GE(HE)},e),Object(o.createElement)(y.s,{enforceFocus:!1},Object(o.createElement)(wE,null),Object(o.createElement)(y.n,null,t.map((function(t){return Object(o.createElement)(y.p,{key:t[1],icon:UE(t[2]),text:t[1],onClick:(n=t[0],function(t){e.controller.run("operation",Object(m.a)(Object(m.a)({},e),{},{opType:Nj,layoutDir:n}))})});var n})))))}function nK(){return{renderToolbar:function(e){return Object(o.createElement)(eK,Object.assign({},e))},renderToolbarItems:function(e){var t=e.controller.run("customizeToolbar",e);return t.sort((function(e,t){return e.order-t.order})),t.map((function(t){return Object(o.createElement)(t.element,Object(m.a)(Object(m.a)({},e),{},{key:t.order.toString()}))}))},customizeToolbar:function(e){return[{order:100,element:tK}]}}}var oK=b()("plugin:utils");function rK(){var e=new Map,t=new Map;return{addTempValueChangeListener:function(e){var n=e.key,o=e.listener;t.has(n)||t.set(n,[]),t.get(n).push(o)},removeTempValueChangeListener:function(e){var n=e.key,o=e.listener;t.has(n)&&(t[n]=t.get(n).filter((function(e){return e!==o})))},getTempValue:function(t){var n=t.key;return oK("getTempValue",n),e.get(n)},setTempValue:function(n){var o=n.key,r=n.value;if(oK("setTempValue",o),e.set(o,r),t.has(o)){var a,c=t.get(o),i=Object(O.a)(c);try{for(i.s();!(a=i.n()).done;){(0,a.value)(r)}}catch(l){i.e(l)}finally{i.f()}}},deleteTempValue:function(t){var n=t.key;oK("deleteTempValue",n);var o=e.get(n);return e.delete(n),o}}}function aK(){return[LC(),rK(),wS(),$C(),nK(),LS()]}var cK=b()("node:text-editor"),iK=d.default.div(tE||(tE=Object(Ri.a)(["\n  padding: 6px;\n  background-color: ",";\n  cursor: ",";\n  min-width: 50px;\n"])),(function(e){return e.readOnly?null:"white"}),(function(e){return e.readOnly?"pointer":"text"})),lK=function(e){Object(s.a)(n,e);var t=Object(u.a)(n);function n(e){var o;return Object(i.a)(this,n),(o=t.call(this,e)).state={content:null},o.onMouseDown=function(e){e.stopPropagation()},o.onMouseMove=function(e){},o.onKeyDown=function(e){},o._handleClick=function(e){!o.root.contains(e.target)&&o.onClickOutSide(e)},o.rootRef=function(e){return function(t){e(t),o.root=t}},o.initState(),o}return Object(l.a)(n,[{key:"onChange",value:function(e){var t=e.value;cK("onChange",t),this.setState({content:t})}},{key:"componentDidMount",value:function(){this.props.readOnly||document.addEventListener("click",this._handleClick)}},{key:"componentWillUnmount",value:function(){this.props.readOnly||document.removeEventListener("click",this._handleClick)}},{key:"onClickOutSide",value:function(e){}},{key:"getCustomizeProps",value:function(){return null}},{key:"getContent",value:function(){var e=this.getCustomizeProps().block.data;return null==e?null:("string"===typeof e&&(e=Ne.a.deserialize(e)),e)}},{key:"initState",value:function(){var e=this.getContent();this.state={content:e}}},{key:"render",value:function(){var e=this.props,t=e.topicKey,n=e.saveRef,r=this.getCustomizeProps(),a=r.readOnly,c=r.getRefKeyFunc,i=r.placeholder,l=r.style;cK(a);var s=c(t),u=a?this.getContent():this.state.content,p=this.onMouseDown,d=this.onMouseMove,f=this.onKeyDown,b={value:u,readOnly:a,onChange:this.onChange.bind(this),placeholder:i,style:l},y={key:s,readOnly:a,ref:this.rootRef(n(s)),onMouseDown:p,onMouseMove:d,onKeyDown:f};return Object(o.createElement)(iK,Object.assign({},y),Object(o.createElement)(Fe.Editor,Object.assign({},b,{autoFocus:!0})))}}]),n}(o.PureComponent),sK=b()("node:topic-content-editor");function uK(e){return"content-editor-".concat(e)}var pK=function(e){Object(s.a)(n,e);var t=Object(u.a)(n);function n(e){var o;return Object(i.a)(this,n),(o=t.call(this,e)).onKeyDown=function(e){e.nativeEvent.ctrlKey&&"Enter"===e.nativeEvent.code&&o.save()},o}return Object(l.a)(n,[{key:"getCustomizeProps",value:function(){var e=this.props,t=e.model,n=e.topicKey,o=e.readOnly;return{block:t.getTopic(n).getBlock(lj).block,readOnly:o,getRefKeyFunc:uK,placeholder:"new",style:{whiteSpace:"pre"}}}},{key:"onClickOutSide",value:function(e){sK("onClickOutSide"),this.save()}},{key:"save",value:function(){var e=this.props,t=e.model,n=e.topicKey;t.editingContentKey!==n||this.props.controller.run("operation",Object(m.a)(Object(m.a)({},this.props),{},{opType:Dj,blockType:lj,data:this.state.content,focusMode:uj}))}}]),n}(lK),dK=b()("node:topic-desc-editor");function fK(e){return"desc-editor-".concat(e)}var bK=function(e){Object(s.a)(n,e);var t=Object(u.a)(n);function n(e){var o;return Object(i.a)(this,n),o=t.call(this,e),dK("constructor"),o}return Object(l.a)(n,[{key:"initState",value:function(){Object(Ei.a)(Object(xi.a)(n.prototype),"initState",this).call(this);var e=this.props,t=e.controller,o=e.topicKey,r="topic-desc-data-".concat(o),a=this.state.content;t.run("setTempValue",{key:r,value:a})}},{key:"getCustomizeProps",value:function(){var e=this.props,t=e.model,n=e.topicKey;return{block:t.getTopic(n).getBlock(sj).block,readOnly:t.editingDescKey!==n,getRefKeyFunc:fK,placeholder:"write topic notes here"}}},{key:"onChange",value:function(e){var t=e.value;dK("onChange");var n=this.props,o=n.controller,r=n.topicKey;if(!(n.model.editingDescKey!==r)){var a="topic-desc-data-".concat(r);o.run("setTempValue",{key:a,value:t}),this.setState({content:t})}}}]),n}(lK);var yK=b()("plugin:StylePlugin");function hK(){var e=new Map,t=0;return{getTopicStyle:function(e){var t=e.controller;return{contentStyle:t.run("getTopicContentStyle",e),linkStyle:t.run("getLinkStyle",e),subLinkStyle:t.run("getSubLinkStyle",e)}},getTopicContentStyle:function(e){var t=e.topicKey,n=e.model,o=e.controller;yK("getTopicContentStyle:",t,n);var r,a=n.getTopicVisualLevel(t),c=n.config.theme;if(r=a===cj?c.rootTopic:a===ij?c.primaryTopic:c.normalTopic,r=Object(m.a)(Object(m.a)({},c.contentStyle),r.contentStyle),c.randomColor){var i=o.run("getRandomColor",e);r=Object(m.a)(Object(m.a)({},r),{},{background:i,borderColor:i,subLinkStyle:Object(m.a)(Object(m.a)({},r.subLinkStyle),{},{lineColor:i})})}var l=n.getTopic(t);if(!l.style)return r;var s=JSON.parse(l.style);return Object(m.a)(Object(m.a)({},r),s.contentStyle)},getLinkStyle:function(e){var t=e.topicKey,n=e.model,o=e.controller;yK("getLinkStyle",t);var r,a=n.getTopicVisualLevel(t),c=n.config.theme,i=c.linkStyle;r=a===cj?c.rootTopic.linkStyle:a===ij?c.primaryTopic.linkStyle:c.normalTopic.linkStyle,i=Object(m.a)(Object(m.a)({},i),r);var l=n.getTopic(t);if(null!=l.parentKey){var s=o.run("getSubLinkStyle",Object(m.a)(Object(m.a)({},e),{},{topicKey:l.parentKey}));i=Object(m.a)(Object(m.a)({},i),s)}if(!l.style)return i;var u=JSON.parse(l.style);return Object(m.a)(Object(m.a)({},i),u.linkStyle)},getSubLinkStyle:function(e){var t=e.topicKey,n=e.model,o=e.controller;yK("getLinkStyle",t);var r,a=n.getTopicVisualLevel(t),c=n.config.theme,i=c.linkStyle;r=a===cj?c.rootTopic.subLinkStyle:a===ij?c.primaryTopic.subLinkStyle:c.normalTopic.subLinkStyle,i=Object(m.a)(Object(m.a)({},i),r);var l=n.getTopic(t);if(c.randomColor){var s=o.run("getRandomColor",e);yK(s),i=Object(m.a)(Object(m.a)({},i),{},{lineColor:s})}if(!l.style)return i;var u=JSON.parse(l.style);return Object(m.a)(Object(m.a)({},i),u.subLinkStyle)},setTopicContentStyle:function(e){var t=e.topicKey,n=e.controller,o=e.style,r=e.model.getTopic(t).style,a=r?JSON.parse(r):{},c=Object(m.a)(Object(m.a)({},a),{},{contentStyle:Object(m.a)(Object(m.a)({},a.contentStyle),o)});if(!Object(at.isEqual)(a,c)){var i=JSON.stringify(c);n.run("operation",Object(m.a)(Object(m.a)({},e),{},{opType:Cj,style:i}))}},setLinkStyle:function(e){var t=e.topicKey,n=e.controller,o=e.linkStyle,r=e.model.getTopic(t).style,a=r?JSON.parse(r):{},c=Object(m.a)(Object(m.a)({},a),{},{linkStyle:Object(m.a)(Object(m.a)({},a.linkStyle),o)});if(!Object(at.isEqual)(a,c)){var i=JSON.stringify(c);n.run("operation",Object(m.a)(Object(m.a)({},e),{},{opType:Cj,style:i}))}},setSubLinkStyle:function(e){var t=e.topicKey,n=e.controller,o=e.subLinkStyle,r=e.model.getTopic(t).style,a=r?JSON.parse(r):{},c=Object(m.a)(Object(m.a)({},a),{},{subLinkStyle:Object(m.a)(Object(m.a)({},a.subLinkStyle),o)});if(!Object(at.isEqual)(a,c)){var i=JSON.stringify(c);n.run("operation",Object(m.a)(Object(m.a)({},e),{},{opType:Cj,style:i}))}},getTopicThemeStyle:function(e){var t=e.topicKey,n=e.model,o=n.getTopicVisualLevel(t),r=n.config.theme;return o===cj?r.rootTopic:o===ij?r.primaryTopic:r.normalTopic},getRandomColor:function(n){var o=n.topicKey;if(e.has(o))return e.get(o);var r=["#00CC99","#FFEE88","#A167A5","#E5F993","#F5C396","#DB995A","#83BCFF","#ED7B84","#739E82","#D3BCC0","#FFA0FD","#EFD3D7","#C6878F"],a=r[++t%r.length];return e.set(o,a),yK("getRandomColor",o,a),a}}}function gK(){return[aK(),{getPartTopics:function(e){var t=e.layout,n=e.model,o=e.topicKey,r=n.getTopic(o),a=r.subKeys.size,c=r.subKeys.toArray();switch(t){case tj.LEFT_TO_RIGHT:return{R:c};case tj.RIGHT_TO_LEFT:return{L:c};case tj.LEFT_AND_RIGHT:return{L:c.slice(Math.ceil(a/2),a),R:c.slice(0,Math.ceil(a/2))};case tj.TOP_TO_BOTTOM:return{B:c}}},createSubTopics:function(e){var t=e.model,n=e.topicKey,o=e.controller,r=e.topics,a=e.saveRef,c=t.getTopic(n);if(0===r.size||c.collapse)return null;var i=[];return r.forEach((function(t){var n=Object(m.a)(Object(m.a)({},e),{},{topicKey:t,key:t,ref:a(YE(t))});i.push(o.run("renderTopicWidget",n))})),{subTopics:i}},layout:function(e){var t=e.getRef,n=e.model,o=t(XE(n.editorRootTopicKey)),r=t(rx),a=t(ax);o&&o.layout(),r&&r.layout(),a&&a.layout(),function e(o){if(o.key!==n.editorRootTopicKey){var r=t(YE(o.key));r&&r.layoutLinks()}if(!o.collapse){var a,c=Object(O.a)(o.subKeys);try{for(c.s();!(a=c.n()).done;){var i=a.value;e(n.getTopic(i))}}catch(l){c.e(l)}finally{c.f()}}}(n.getTopic(n.editorRootTopicKey))},getRelativeRect:function(e){var t=e.element,n=e.controller,o=e.getRef,r=n.run("getZoomFactor",e);return Xw(t,o(nx).bigView,r)},getRelativeRectFromViewPort:function(e){var t=e.element,n=e.controller,o=e.getRef,r=n.run("getZoomFactor",e);return Xw(t,o(nx).viewBox,r)},getRelativeVectorFromViewPort:function(e){return $w(e.element,(0,e.getRef)(nx).viewBox)},addZoomFactorChangeEventListener:function(e){e.controller.run("addTempValueChangeListener",Object(m.a)({key:"ZoomFactor"},e))},removeZoomFactorChangeEventListener:function(e){e.controller.run("removeTempValueChangeListener",Object(m.a)({key:"ZoomFactor"},e))},setZoomFactor:function(e){var t=e.controller,n=e.zoomFactor;return t.run("setTempValue",{key:"ZoomFactor",value:n})},getZoomFactor:function(e){return e.controller.run("getTempValue",{key:"ZoomFactor"})||1},moveTopicToCenter:function(e){var t=e.getRef,n=e.topicKey,o=e.model,r=e.moveDir,a=void 0===r?OS:r;if(o.editorRootTopicKey!==n&&Gj(o,n,o.editorRootTopicKey)!==hj)throw new Error("moveTopicToCenter error: topicKey ".concat(n," is not the DESCENDANT of editor root topic"));var c=t(qE(n)),i=t(nx),l=i.viewBox;if(!c||!l)throw new Error("moveTopicToCenter error: topic or viewBox is null");var s=$w(c,l);if(a===mS)i.setViewBoxScrollDelta(s[0],s[1]);else if(a===OS){var u=l.getBoundingClientRect(),p=c.getBoundingClientRect(),d=(u.width-p.width)/2;i.setViewBoxScrollDelta(s[0]+d-200,s[1])}},focusTopicAndMoveToCenter:function(e){var t=e.controller,n=e.topicKey;t.run("operation",Object(m.a)(Object(m.a)({},e),{},{opArray:[{opType:wj,topicKey:n,focusMode:uj},{opType:jj,topicKey:n}],allowUndo:!1,callback:function(o){return function(){t.run("moveTopicToCenter",Object(m.a)(Object(m.a)({},e),{},{model:o,topicKey:n}))}}}))}},kS(),hK(),pS(),vS(),{getValue:function(e,t){var n=e.propKey,o=e.controller,r=e.diagramState;switch(n){case ix:return 3;case lx:case dx:return o.run("isOperationEnabled",e);case sx:return o.run("getTopicTitle",e);case ux:return r.dragDrop;case px:return r.rightTopPanel}return t()}},{getTopicTitle:function(e){var t=e.model,n=e.controller,o=e.topicKey,r=e.maxLength,a=t.getTopic(o).getBlock(lj).block,c=n.run("serializeBlockData",Object(m.a)(Object(m.a)({},e),{},{block:a}));return null!=r&&(c=c.length>r?c.substr(0,r)+"...":c),c},renderTopicContentEditor:function(e){return Object(o.createElement)(pK,Object.assign({},e))},renderTopicDescEditor:function(e){return Object(o.createElement)(bK,Object.assign({},e))},isBlockEmpty:function(e,t){var n=e.block,o=e.controller;return n.type===lj||n.type===sj?null==n.data||""===o.run("serializeBlockData",e):t()},serializeBlockData:function(e,t){var n=e.block;return n.type===lj||n.type===sj?"string"===typeof n.data?n.data:Ne.a.serialize(n.data):t()}},{createNewModel:function(e){return Yj.createEmpty()}},{getThemeOfTopic:function(e){var t=e.model.config.theme,n=t.contentStyle,o=t.rootTopic,r=t.primaryTopic,a=t.normalTopic;return{rootTopic:Object(m.a)(Object(m.a)({},o),{},{contentStyle:Object(m.a)(Object(m.a)({},n),o.contentStyle)}),primaryTopic:Object(m.a)(Object(m.a)({},r),{},{contentStyle:Object(m.a)(Object(m.a)({},n),r.contentStyle)}),normalTopic:Object(m.a)(Object(m.a)({},a),{},{contentStyle:Object(m.a)(Object(m.a)({},n),a.contentStyle)})}}},TS()]}b()("node:Diagram"),o.Component;var mK=n(879),OK=function(e,t){return(OK=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(e,t)};function vK(e,t){function n(){this.constructor=e}OK(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}var TK=function(){return(TK=Object.assign||function(e){for(var t,n=1,o=arguments.length;n<o;n++)for(var r in t=arguments[n])Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r]);return e}).apply(this,arguments)};function jK(e,t){var n="function"===typeof Symbol&&e[Symbol.iterator];if(!n)return e;var o,r,a=n.call(e),c=[];try{for(;(void 0===t||t-- >0)&&!(o=a.next()).done;)c.push(o.value)}catch(i){r={error:i}}finally{try{o&&!o.done&&(n=a.return)&&n.call(a)}finally{if(r)throw r.error}}return c}function kK(e,t){return Object.defineProperty?Object.defineProperty(e,"raw",{value:t}):e.raw=t,e}var EK,xK,wK=Object(d.default)(EE)(EK||(EK=kK(["\n  position: absolute;\n  left: calc(50% - 150px);\n  top: 30px;\n  width: 300px;\n  background: white;\n  padding: 10px;\n  user-select: none;\n"],["\n  position: absolute;\n  left: calc(50% - 150px);\n  top: 30px;\n  width: 300px;\n  background: white;\n  padding: 10px;\n  user-select: none;\n"]))),SK=d.default.div(xK||(xK=kK(["\n  margin-bottom: 10px;\n"],["\n  margin-bottom: 10px;\n"])));function CK(e){var t=e.zIndex,n=e.controller,r=e.topicKey;return Object(o.createElement)(wK,{zIndex:t},Object(o.createElement)(SK,null,"Please select the topics you want to reference. After selection, click the confirm button."),Object(o.createElement)(yE,{justifyContent:"space-around"},Object(o.createElement)(y.d,{onClick:function(t){var o=n.run("getSelectedReferenceKeys",e);n.run("enableOperation",e),n.run("operation",TK(TK({},e),{opArray:[{opType:"OP_TYPE_SET_REFERENCE_TOPICS",topicKey:r,referenceKeys:o},{opType:wj,topicKey:r,focusMode:uj}]})),n.run("clearSelectedReferenceKeys",e)}},"Confirm"),Object(o.createElement)(y.d,{onClick:function(t){n.run("clearSelectedReferenceKeys",e),n.run("enableOperation",e),n.run("operation",TK(TK({},e),{opType:Sj,focusMode:uj}))}},"Cancel")))}var KK={keyList:Object(T.List)(),dataMap:Object(T.Map)()},RK=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return vK(t,e),Object.defineProperty(t.prototype,"keyList",{get:function(){return this.get("keyList")},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"dataMap",{get:function(){return this.get("dataMap")},enumerable:!0,configurable:!0}),t}(Object(T.Record)(KK)),DK={reference:Object(T.Map)()},LK=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return vK(t,e),Object.defineProperty(t.prototype,"reference",{get:function(){return this.get("reference")},enumerable:!0,configurable:!0}),t.prototype.getReferenceKeys=function(e){return this.reference.has(e)?this.reference.get(e).keyList.toArray():[]},t.prototype.getReferencedKeys=function(e){var t=[];return this.reference.forEach((function(n,o){n.keyList.includes(e)&&t.push(o)})),t},t}(Object(T.Record)(DK));function _K(e){var t=e.model,n=e.topicKey,o=e.referenceKeys,r=t.getExtDataItem("TOPIC_REFERENCE",LK),a=r.reference.get(n)||new RK;return a=a.set("keyList",Object(T.List)(o)),r=r.setIn(["reference",n],a),t=t.setIn(["extData","TOPIC_REFERENCE"],r)}var IK,MK,AK,NK=d.default.div(IK||(IK=kK(["\n  display: flex;\n  width: 380px;\n  margin: 10px;\n  justify-content: center;\n  align-items: center;\n"],["\n  display: flex;\n  width: 380px;\n  margin: 10px;\n  justify-content: center;\n  align-items: center;\n"]))),FK=d.default.div(MK||(MK=kK(["\n  width: 300px;\n  text-decoration: underline;\n  cursor: pointer;\n"],["\n  width: 300px;\n  text-decoration: underline;\n  cursor: pointer;\n"]))),PK=d.default.div(AK||(AK=kK(["\n  width: 80px;\n"],["\n  width: 80px;\n"])));function BK(e){var t=e.controller,n=e.refKey,r=e.refType,a=e.removeHandler,c=jK(Object(o.useState)(!1),2),i=c[0],l=c[1],s=t.getValue(sx,TK(TK({},e),{topicKey:n,maxLength:100})),u={isOpen:i,cancelButtonText:"cancel",onConfirm:function(e){a(e)},onCancel:function(e){l(!1)},onClose:function(e){l(!1)}};return Object(o.createElement)(NK,null,Object(o.createElement)(FK,{onClick:function(o){o.stopPropagation(),t.run("focusTopicAndMoveToCenter",TK(TK({},e),{topicKey:n}))}},s),Object(o.createElement)(PK,null,"reference"===r&&Object(o.createElement)(o.Fragment,null,Object(o.createElement)(y.d,{onClick:function(e){l(!0)}},"Remove"),Object(o.createElement)(y.a,TK({},u),Object(o.createElement)("p",null,"Are you confirm to remove this reference?")))))}var zK,VK,HK,GK,UK,WK=d.default.div(zK||(zK=kK([""],[""]))),JK=d.default.div(VK||(VK=kK(["\n  padding: 10px;\n"],["\n  padding: 10px;\n"]))),ZK=d.default.div(HK||(HK=kK(["\n  max-height: 200px;\n  overflow: auto;\n"],["\n  max-height: 200px;\n  overflow: auto;\n"]))),YK=d.default.div(GK||(GK=kK(["\n  font-size: 20px;\n  color: #106ba3;\n"],["\n  font-size: 20px;\n  color: #106ba3;\n"]))),qK=d.default.div(UK||(UK=kK(["\n  text-decoration: underline;\n  color: #106ba3;\n  cursor: pointer;\n"],["\n  text-decoration: underline;\n  color: #106ba3;\n  cursor: pointer;\n"])));function XK(e){var t=e.topicKey,n=e.controller,r=e.model,a=r.extData.get("TOPIC_REFERENCE"),c=a.getReferenceKeys(t),i=0===c.length?null:Object(o.createElement)(JK,null,Object(o.createElement)(YK,null,"Reference Topics:"),Object(o.createElement)(ZK,null,c.map((function(r){var c,i=TK(TK({},e),{key:r,refKey:r,refType:"reference",removeHandler:(c=r,function(o){o.stopPropagation();var r=a.reference.get(t).keyList;n.run("operation",TK(TK({},e),{opArray:[{opType:"OP_TYPE_SET_REFERENCE_TOPICS",topicKey:t,focusMode:uj,referenceKeys:r.delete(r.indexOf(c)).toArray()}]}))})});return Object(o.createElement)(BK,TK({},i))})))),l=a.getReferencedKeys(t),s=0===l.length?null:Object(o.createElement)(JK,null,Object(o.createElement)(YK,null,"Referenced Topics:"),Object(o.createElement)(ZK,null,l.map((function(t){var n=TK(TK({},e),{key:t,refKey:t,refType:"referenced"});return Object(o.createElement)(BK,TK({},n))})))),u=r.focusKey!==t&&Object(o.createElement)(JK,null,Object(o.createElement)(qK,{onClick:function(t){t.stopPropagation(),n.run("focusTopicAndMoveToCenter",e)}},"Goto Origin Topic"));return Object(o.createElement)(WK,{onMouseDown:Hw},i,s,u)}function $K(e){var t=e.model,n=e.topicKey,r=t.extData.get("TOPIC_REFERENCE")||new LK,a=r.reference.get(n),c=[];if(r.reference.forEach((function(e,t){e.keyList.includes(n)&&c.push(t)})),(null==a||0===a.keyList.size)&&0===c.length)return null;var i={className:GE("reference"),tabIndex:-1},l=Object(o.createElement)(kE,TK({},i)),s={autoFocus:!1,content:Object(o.createElement)(XK,TK({},e)),target:l,interactionKind:y.t.CLICK,hoverOpenDelay:500};return Object(o.createElement)(y.s,TK({},s))}function QK(e){var t=e.topicKey,n=e.selectedTopicKeys,r=n.has(t),a=jK(Object(o.useState)(r),2),c=a[0],i=a[1],l={checked:c,onChange:function(){n.has(t)?n.delete(t):n.add(t),i(!c)}};return Object(o.createElement)(vE,TK({},l))}var eR,tR,nR,oR,rR,aR=mK.a.ofType(),cR=Object(d.default)(aR)(eR||(eR=kK(["\n  top: 20%;\n  left: 25% !important;\n  width: 50% !important;\n"],["\n  top: 20%;\n  left: 25% !important;\n  width: 50% !important;\n"]))),iR=d.default.div(tR||(tR=kK(["\n  margin: 0 5px;\n  padding: 10px 5px;\n  width: 100%;\n  font-size: 16px;\n  cursor: pointer;\n  &:hover {\n    background: #e3e8ec;\n  }\n"],["\n  margin: 0 5px;\n  padding: 10px 5px;\n  width: 100%;\n  font-size: 16px;\n  cursor: pointer;\n  &:hover {\n    background: #e3e8ec;\n  }\n"]))),lR=Object(d.default)(y.s)(nR||(nR=kK(["\n  display: block;\n"],["\n  display: block;\n"]))),sR=d.default.div(oR||(oR=kK(["\n  padding: 10px;\n  font-size: 16px;\n  //max-width: 800px;\n  //max-height: 600px;\n  overflow: auto;\n"],["\n  padding: 10px;\n  font-size: 16px;\n  //max-width: 800px;\n  //max-height: 600px;\n  overflow: auto;\n"]))),uR=d.default.div(rR||(rR=kK(["\n  white-space: break-spaces;\n"],["\n  white-space: break-spaces;\n"]))),pR={placeholder:"Search"};function dR(e){var t=e.model,n=(e.setSearchWord,e.controller),r=function(t){return function(o){n.run("focusTopicAndMoveToCenter",TK(TK({},e),{topicKey:t}))}},a=function(){var o=[];return t.topics.forEach((function(t,r){o.push({key:r,title:n.run("getTopicTitle",TK(TK({},e),{topicKey:r}))})})),o}();return Object(o.createElement)(cR,{inputProps:pR,itemListPredicate:function(e,t){return t.filter((function(t){return t.title.toLowerCase().includes(e.toLowerCase())}))},isOpen:!0,items:a,itemRenderer:function(e,t){var n=e.key,a=e.title,c=a.length>100,i=c?a.substr(0,100)+"...":a,l={key:n,onClick:r(n)},s=Object(o.createElement)(iR,TK({},l),i),u={key:n,target:s,content:Object(o.createElement)(sR,null,Object(o.createElement)(uR,null,a)),fill:!0,interactionKind:y.t.HOVER_TARGET_ONLY,hoverOpenDelay:1e3};return c?Object(o.createElement)(lR,TK({},u)):s},onClose:function(){n.run("operation",TK(TK({},e),{opType:Sj,focusMode:uj}))},resetOnSelect:!0})}n(869);function fR(e){return r.a.createElement("div",{className:"bm-toolbar-item ".concat(rn("openfile")),onClick:function(t){var n=e.diagram,o=n.getDiagramProps().controller;Sn(".json,.blinkmind,.bm").then((function(e){var t=JSON.parse(e),r=o.run("deserializeModel",{controller:o,obj:t});n.openNewModel(r)}))}})}function bR(e){return!0===(null!=(t=e)&&"object"===typeof t&&!1===Array.isArray(t))&&"[object Object]"===Object.prototype.toString.call(e);var t}var yR=function(e){var t,n;return!1!==bR(e)&&("function"===typeof(t=e.constructor)&&(!1!==bR(n=t.prototype)&&!1!==n.hasOwnProperty("isPrototypeOf")))},hR=function(e,t){return(hR=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(e,t)};function gR(e,t){function n(){this.constructor=e}hR(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}var mR=function(){return(mR=Object.assign||function(e){for(var t,n=1,o=arguments.length;n<o;n++)for(var r in t=arguments[n])Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r]);return e}).apply(this,arguments)};function OR(e,t){var n="function"===typeof Symbol&&e[Symbol.iterator];if(!n)return e;var o,r,a=n.call(e),c=[];try{for(;(void 0===t||t-- >0)&&!(o=a.next()).done;)c.push(o.value)}catch(i){r={error:i}}finally{try{o&&!o.done&&(n=a.return)&&n.call(a)}finally{if(r)throw r.error}}return c}function vR(){for(var e=[],t=0;t<arguments.length;t++)e=e.concat(OR(arguments[t]));return e}b()("core:controller");function TR(e){var t,n;if(!Array.isArray(e))throw new TypeError("Middleware stack must be an array!");try{for(var o=function(e){var t="function"===typeof Symbol&&e[Symbol.iterator],n=0;return t?t.call(e):{next:function(){return e&&n>=e.length&&(e=void 0),{value:e&&e[n++],done:!e}}}}(e),r=o.next();!r.done;r=o.next()){if("function"!==typeof r.value)throw new TypeError("Middleware must be composed of functions!")}}catch(a){t={error:a}}finally{try{r&&!r.done&&(n=o.return)&&n.call(o)}finally{if(t)throw t.error}}return function(t,n){var o=-1;return function r(a){if(a<=o)throw new Error("next() called multiple times");o=a;var c=e[a];a===e.length&&(c=n);if(!c)return null;try{return c(t,r.bind(null,a+1))}catch(i){throw i}}(0)}}var jR;!function(){function e(e){void 0===e&&(e={});var t=e.plugins,n=void 0===t?[]:t,o=e.onChange,r=e.readOnly;this.readOnly=r,this.onChange=o,this.middleware=new Map,function e(t,n){if(Array.isArray(n))n.forEach((function(n){return e(t,n)}));else if(null!=n)for(var o in n){var r=n[o];t.middleware[o]=t.middleware[o]||[],t.middleware[o].push(r)}}(this,function(e){void 0===e&&(e={});var t=e.plugins;return vR(void 0===t?[]:t)}({plugins:n}))}e.prototype.run=function(e){for(var t=[],n=1;n<arguments.length;n++)t[n-1]=arguments[n];var o=this.middleware,r=o[e]||[];Object(Ee.a)(0!==r.length,"the middleware function "+e+" is not found!");var a=Object(E.a)(TR)(r);return a.apply(void 0,vR(t))},e.prototype.getValue=function(e,t){return this.run("getValue",mR(mR({},t),{propKey:e}))},e.prototype.change=function(e,t){this.onChange(e,t),this.currentModel=e}}();!function(e){e[e.LEFT_TO_RIGHT=0]="LEFT_TO_RIGHT",e[e.RIGHT_TO_LEFT=1]="RIGHT_TO_LEFT",e[e.LEFT_AND_RIGHT=2]="LEFT_AND_RIGHT",e[e.TOP_TO_BOTTOM=3]="TOP_TO_BOTTOM"}(jR||(jR={}));var kR="CONTENT",ER="NORMAL",xR="EDITING_CONTENT",wR="EDITING_DESC",SR="SET_FOCUS_MODE";function CR(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,(function(e){var t=16*Math.random()|0;return("x"===e?t:3&t|8).toString(16)}))}var KR=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return gR(t,e),Object.defineProperty(t.prototype,"data",{get:function(){return this.get("data")},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"type",{get:function(){return this.get("type")},enumerable:!0,configurable:!0}),t.create=function(e){return new t(e)},t.createList=function(e){if(T.List.isList(e)||Array.isArray(e))return Object(T.List)(e.map(t.create));throw new Error("Block.createList only accepts Array or List, but you passed it: "+e)},t}(Object(T.Record)({type:null,key:null,data:null})),RR=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return gR(t,e),Object.defineProperty(t.prototype,"key",{get:function(){return this.get("key")},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"parentKey",{get:function(){return this.get("parentKey")},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"collapse",{get:function(){return this.get("collapse")},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"subKeys",{get:function(){return this.get("subKeys")},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"blocks",{get:function(){return this.get("blocks")},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"relations",{get:function(){return this.get("relations")},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"style",{get:function(){return this.get("style")},enumerable:!0,configurable:!0}),t.prototype.getBlock=function(e){var t=this.blocks.findIndex((function(t){return t.type===e}));return-1===t?{index:t,block:null}:{index:t,block:this.blocks.get(t)}},t.fromJSON=function(e){var n=e.key,o=e.parentKey,r=void 0===o?null:o,a=e.blocks,c=e.subKeys,i=void 0===c?[]:c,l=e.collapse;return new t({key:n,parentKey:r,collapse:void 0!==l&&l,subKeys:Object(T.List)(i),blocks:KR.createList(a)})},t.create=function(e){var n=e.key,o=e.parentKey,r=void 0===o?null:o,a=e.content,c=void 0===a?"":a,i=e.subKeys,l=void 0===i?[]:i,s=e.collapse,u=void 0!==s&&s,p=KR.create({type:kR,data:c,key:null});return new t({key:n,parentKey:r,blocks:Object(T.List)([p]),subKeys:Object(T.List)(l),collapse:u})},t}(Object(T.Record)({key:null,parentKey:null,collapse:!1,subKeys:null,blocks:null,relations:null,style:null}));b()("modifier");var DR={readOnly:!1,allowUndo:!0,layoutDir:jR.LEFT_AND_RIGHT,theme:{name:"default",randomColor:!0,background:"rgb(57,60,65)",highlightColor:"#50C9CE",marginH:60,marginV:20,contentStyle:{lineHeight:"1.5"},linkStyle:{lineRadius:5,lineType:"curve",lineWidth:"3px"},rootTopic:{contentStyle:{fontSize:"34px",borderRadius:"35px",padding:"16px 18px 16px 18px"},subLinkStyle:{lineType:"curve",lineWidth:"3px",lineColor:"rgb(113, 203, 45)"}},primaryTopic:{contentStyle:{borderWidth:"1px",borderStyle:"solid",borderRadius:"20px",fontSize:"17px",padding:"10px 15px 10px 15px"},subLinkStyle:{lineType:"curve",lineWidth:"3px",lineColor:"rgb(113, 203, 45)"}},normalTopic:{contentStyle:{border:"1px solid #e8eaec",borderRadius:"20px",fontSize:"17px",padding:"4px 10px"},subLinkStyle:{lineType:"curve",lineWidth:"3px",lineColor:"white"}}}},LR=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return gR(t,e),Object.defineProperty(t.prototype,"layoutDir",{get:function(){return this.get("layoutDir")},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"readOnly",{get:function(){return this.get("readOnly")},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"allowUndo",{get:function(){return this.get("allowUndo")},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"theme",{get:function(){return this.get("theme")},enumerable:!0,configurable:!0}),t.fromJSON=function(e){return new t(e)},t}(Object(T.Record)(DR)),_R={topics:Object(T.Map)(),extData:Object(T.Map)(),config:null,rootTopicKey:null,editorRootTopicKey:null,focusKey:null,focusMode:null,formatVersion:null,zoomFactor:1},IR=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return gR(t,e),t.isModel=function(e){return e instanceof t},t.create=function(e){if(void 0===e&&(e=null),null==e)return t.createEmpty();var n;if(t.isModel(e)&&(n=e),yR(e)&&(n=t.fromJSON(e)),n)return null==n.focusKey&&(n=n.set("focusKey",n.rootTopicKey)),null==n.focusMode&&(n=n.set("focusMode",ER)),n;throw new Error("`Value.create` only accepts objects or values, but you passed it: "+e)},t.createEmpty=function(){var e=new t,n=RR.create({key:CR()});return e.update("topics",(function(e){return e.set(n.key,n)})).set("rootTopicKey",n.key).set("focusKey",n.key).set("focusMode",ER)},t.fromJSON=function(e){var n=new t,o=e.topics,r=void 0===o?[]:o,a=e.config,c=void 0===a?{}:a,i=e.rootTopicKey,l=e.editorRootTopicKey;return void 0===l&&(l=i),n=(n=n.merge({rootTopicKey:i,editorRootTopicKey:l})).withMutations((function(e){r.forEach((function(t){e.update("topics",(function(e){return e.set(t.key,RR.fromJSON(t))}))})),e.set("config",LR.fromJSON(c))}))},t.prototype.toJS=function(){return{rootTopicKey:this.rootTopicKey,topics:Object.values(this.topics.toJS()),config:this.config,extData:this.extData,zoomFactor:this.zoomFactor}},Object.defineProperty(t.prototype,"extData",{get:function(){return this.get("extData")},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"topics",{get:function(){return this.get("topics")},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"config",{get:function(){return this.get("config")},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"formatVersion",{get:function(){return this.get("formatVersion")},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"rootTopicKey",{get:function(){return this.get("rootTopicKey")},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"editorRootTopicKey",{get:function(){return this.get("editorRootTopicKey")},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"focusKey",{get:function(){return this.get("focusKey")},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"focusMode",{get:function(){return this.get("focusMode")},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"editingContentKey",{get:function(){return this.focusMode===xR?this.focusKey:null},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"editingDescKey",{get:function(){return this.focusMode===wR?this.focusKey:null},enumerable:!0,configurable:!0}),t.prototype.getTopic=function(e){return this.topics.get(e)},t.prototype.getExtDataItem=function(e,t){return this.extData.get(e)||new t},t.prototype.getParentTopic=function(e){var t=this.getTopic(e);return t.parentKey?this.getTopic(t.parentKey):null},t.prototype.getTopicVisualLevel=function(e){for(var t=this.getTopic(e),n=0;t&&t.key!==this.editorRootTopicKey;)n++,t=this.getParentTopic(t.key);return n},Object.defineProperty(t.prototype,"rootTopic",{get:function(){return this.getTopic(this.rootTopicKey)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"zoomFactor",{get:function(){return this.get("zoomFactor")},enumerable:!0,configurable:!0}),t}(Object(T.Record)(_R));function MR(e){var t=[[jR.LEFT_AND_RIGHT,"Left And Right","layout-left-and-right"],[jR.LEFT_TO_RIGHT,"Only Right","layout-right"],[jR.RIGHT_TO_LEFT,"Only Left","layout-left"]];return r.a.createElement("div",{className:nt()("bm-toolbar-item",rn("layout-left-and-right"))},r.a.createElement(y.s,{enforceFocus:!1},r.a.createElement("div",{className:"bm-toolbar-popover-target"}),r.a.createElement(y.n,null,t.map((function(t){return r.a.createElement(y.p,{key:t[1],icon:an(t[2]),text:t[1],onClick:(n=t[0],function(t){var o=e.diagram.getDiagramProps();o.controller.run("setLayoutDir",Object(m.a)(Object(m.a)({},o),{},{layoutDir:n}))})});var n})))))}var AR=n(300),NR=n.n(AR),FR=n(301),PR=n.n(FR),BR=n(302),zR=n.n(BR),VR=n(303),HR=n.n(VR),GR=n(304),UR=n.n(GR);function WR(e){var t=[["default",NR.a],["theme1",PR.a],["theme2",zR.a],["theme3",HR.a],["theme4",UR.a]];return r.a.createElement("div",{className:nt()("bm-toolbar-item",rn("theme"))},r.a.createElement(y.s,{enforceFocus:!1},r.a.createElement("div",{className:"bm-toolbar-popover-target"}),r.a.createElement("div",{className:"bm-popover-theme"},t.map((function(t){return r.a.createElement("div",{key:t[0],className:"bm-theme-item",onClick:(n=t[0],function(t){var o=e.diagram.getDiagramProps();o.controller.run("setTheme",Object(m.a)(Object(m.a)({},o),{},{themeKey:n}))})},r.a.createElement("img",{className:"bm-theme-img",src:t[1],alt:t[0]}));var n})))))}function JR(e){return r.a.createElement("div",{className:nt()("bm-toolbar-item",rn("export"))},r.a.createElement(y.s,{enforceFocus:!1},r.a.createElement("div",{className:"bm-toolbar-popover-target"}),r.a.createElement(y.n,null,r.a.createElement(y.p,{text:"JSON(.json)",onClick:function(t){var n=e.diagram.getDiagramProps(),o=n.controller,r=n.model,a=o.run("serializeModel",n),c=JSON.stringify(a),i="data:text/plain,".concat(encodeURIComponent(c)),l=o.run("getTopicTitle",Object(m.a)(Object(m.a)({},n),{},{topicKey:r.rootTopicKey}));!function(e,t){var n=document.createElement("a");n.href=e,n.download=t,n.click()}(i,"".concat(l,".blinkmind"))}}),r.a.createElement(y.o,null))))}function ZR(e){return r.a.createElement("div",{className:"bm-toolbar-item ".concat(rn(on)),onClick:function(t){var n=e.diagram.getDiagramProps();n.controller.run("operation",Object(m.a)(Object(m.a)({},n),{},{opType:SR,focusMode:"FOCUS_MODE_SEARCH"}))}})}var YR=function(e){Object(s.a)(n,e);var t=Object(u.a)(n);function n(){return Object(i.a)(this,n),t.apply(this,arguments)}return Object(l.a)(n,[{key:"render",value:function(){var e=this.props,t=e.onClickUndo,n=e.onClickRedo,o=e.canUndo,a=e.canRedo;return r.a.createElement("div",{className:"bm-toolbar"},r.a.createElement(fR,e),r.a.createElement(JR,e),r.a.createElement(WR,e),r.a.createElement(MR,e),r.a.createElement(ZR,e),r.a.createElement("div",{className:nt()("bm-toolbar-item",rn("undo"),{"bm-toolbar-item-disabled":!o}),onClick:t}),r.a.createElement("div",{className:nt()("bm-toolbar-item",rn("redo"),{"bm-toolbar-item-disabled":!a}),onClick:n}))}}]),n}(r.a.PureComponent),qR=(n(870),b()("app"),[rf(),function(){var e=new Map([["default",If],["random-color-square",Gf],["theme1",Uf],["theme2",Wf],["theme3",Jf],["theme4",Zf]]);return{getAllThemes:function(t){return e},setTheme:function(e){var t=e.model,n=e.controller,o=e.themeKey,r=n.run("getAllThemes",e);if(!r.has(o))throw new Error("setTheme: the theme key is not correct!");var a=r.get(o),c=Vf.setTheme({model:t,theme:a});n.change(c)}}}(),function(){var e=new Set;function t(t){var n=t.model,o=t.topicKey,r=n.getExtDataItem("TOPIC_REFERENCE",LK);return e=new Set(r.getReferenceKeys(o)),n=Jj.focusTopic({model:n,topicKey:o,focusMode:"FOCUS_MODE_SET_REFERENCE_TOPICS"})}return{customizeTopicContextMenu:function(e,t){var n=e.controller;return Object(o.createElement)(o.Fragment,null,t(),Object(o.createElement)(y.o,null),Object(o.createElement)(y.p,{key:"EXT_KEY_TOPIC_REFERENCE",icon:UE("reference"),text:"Set Reference Topics",onClick:function(t){n.run("operation",TK(TK({},e),{opType:"OP_TYPE_START_SET_REFERENCE_TOPICS"})),n.run("disableOperation",TK(TK({},e),{whiteList:[Oj]}))}}))},getOpMap:function(e,n){var o=n();return o.set("OP_TYPE_START_SET_REFERENCE_TOPICS",t),o.set("OP_TYPE_SET_REFERENCE_TOPICS",_K),o},beforeOpFunction:function(e,t){var n=t(),o=e.opType,r=e.topicKey;if(o===xj&&r!==n.editorRootTopicKey){var a=Hj(n,r);a.push(r);var c=n.getExtDataItem("TOPIC_REFERENCE",LK),i=c.reference;a.forEach((function(e){var t=c.getReferencedKeys(e);(i=i.withMutations((function(n){t.forEach((function(t){n.updateIn([t,"keyList"],(function(t){return t.delete(t.indexOf(e))}))}))}))).has(e)&&(i=i.delete(e))})),c=c.set("reference",i),n=n.setIn(["extData","TOPIC_REFERENCE"],c)}return n},renderDiagramCustomize:function(e,t){var n=e.model,r=e.controller.getValue(ix)+2,a=t();if("FOCUS_MODE_SET_REFERENCE_TOPICS"===n.focusMode){var c=TK(TK({},e),{zIndex:r,topicKey:n.focusKey,key:"AddReferenceTopicPanel"});a.push(Object(o.createElement)(CK,TK({},c)))}return a},renderTopicContentOthers:function(t,n){var r=t.model,a=t.topicKey,c=t.controller,i=n();if(i.push(c.run("renderTopicExtReference",TK(TK({},t),{key:"EXT_KEY_TOPIC_REFERENCE-icon"}))),"FOCUS_MODE_SET_REFERENCE_TOPICS"===r.focusMode&&r.focusKey!==a){var l=TK(TK({},t),{key:"checkbox",selectedTopicKeys:e}),s=Object(o.createElement)(QK,TK({},l));i.push(s)}return i},renderTopicExtReference:function(e,t){return Object(o.createElement)($K,TK({},e))},clearSelectedReferenceKeys:function(){e.clear()},getSelectedReferenceKeys:function(){return Array.from(e)},deserializeExtDataItem:function(e,t){var n=e.extDataKey,o=e.extDataItem;if("TOPIC_REFERENCE"===n){var r=new LK,a=function(e){var t=o.reference[e],n=new RK({keyList:Object(T.List)(t.keyList),dataMap:Object(T.Map)(t.dataMap)});r=r.update("reference",(function(t){return t.set(e,n)}))};for(var c in o.reference)a(c);return r}return t()}}}(),function(){var e=function(e){};return{customizeHotKeys:function(e,t){var n=e.controller,o=e.model,r=t();return r.globalHotKeys.set("DEFAULT_SEARCH",{label:"search",combo:"ctrl + f",onKeyDown:function(){n.run("operation",TK(TK({},e),{opType:wj,topicKey:o.focusKey,focusMode:"FOCUS_MODE_SEARCH"}))}}),r},renderDiagramCustomize:function(t,n){var r=n();if("FOCUS_MODE_SEARCH"===t.model.focusMode){var a=TK(TK({key:"search-panel"},t),{setSearchWorld:e});r.push(Object(o.createElement)(dR,TK({},a)))}return r}}}(),$T(),{serializeModel:function(e,t){var n=t();if(null!=n)return n;var o=e.model,r=e.controller;return{rootTopicKey:o.rootTopicKey,editorRootTopicKey:o.editorRootTopicKey,focusKey:o.focusKey,extData:r.run("serializeExtData",vf(vf({},e),{extData:o.extData})),topics:o.topics.valueSeq().toArray().map((function(t){return r.run("serializeTopic",vf(vf({},e),{topic:t}))})),config:r.run("serializeConfig",vf(vf({},e),{config:o.config})),formatVersion:o.formatVersion}},deserializeModel:function(e,t){var n=t();if(null!=n)return n;var o=e.obj,r=e.controller;null==o.formatVersion&&(o.formatVersion="0.0");var a=o.rootTopicKey,c=o.editorRootTopicKey,i=o.focusKey,l=o.topics,s=o.config,u=o.extData,p=o.formatVersion,d=new Of;return null==(d=d.merge({rootTopicKey:a,editorRootTopicKey:null==c?a:c,focusKey:i,extData:r.run("deserializeExtData",vf(vf({},e),{extData:u,formatVersion:p})),config:r.run("deserializeConfig",vf(vf({},e),{config:s,formatVersion:p})),topics:r.run("deserializeTopics",vf(vf({},e),{topics:l,formatVersion:p})),formatVersion:o.formatVersion})).focusKey&&(d=d.set("focusKey",d.rootTopicKey)),null==d.focusMode&&(d=d.set("focusMode",uf)),Tf("deserializeModel",d),d},serializeExtData:function(e,t){var n=t();if(null!=n)return n;var o=e.extData,r=e.controller,a={};return o.forEach((function(t,n){a[n]=r.run("serializeExtDataItem",{props:e,extDataKey:n,extDataItem:t})})),a},deserializeExtData:function(e,t){var n=t();if(null!=n)return n;var o=e.extData,r=e.controller,a=Object(T.Map)();for(var c in o)a=a.set(c,r.run("deserializeExtDataItem",vf(vf({},e),{extDataKey:c,extDataItem:o[c]})));return a},serializeExtDataItem:function(e,t){var n=t();if(null!=n)return n;var o=e.extDataItem;return Object(T.isImmutable)(o)?o.toJS():o},deserializeExtDataItem:function(e,t){var n=t();return null!=n?n:e.extDataItem},serializeConfig:function(e,t){var n=t();return null!=n?n:e.config.toJS()},deserializeConfig:function(e,t){var n=t();if(null!=n)return n;var o=e.config;return new yf(o)},serializeTopic:function(e,t){var n=t();if(null!=n)return n;var o=e.topic,r=e.controller;return{key:o.key,parentKey:o.parentKey,subKeys:o.subKeys.toArray(),collapse:o.collapse,style:o.style,blocks:o.blocks.map((function(t){return r.run("serializeBlock",vf(vf({},e),{block:t}))}))}},deserializeTopic:function(e,t){var n=t();if(null!=n)return n;var o=e.topic,r=e.controller,a=o.key,c=o.parentKey,i=o.subKeys,l=o.blocks,s=o.style,u=o.collapse,p=new gf;return p=p.merge({key:a,parentKey:c,subKeys:Object(T.List)(i),style:s,collapse:u,blocks:r.run("deserializeBlocks",vf(vf({},e),{blocks:l}))})},deserializeTopics:function(e,t){var n=t();if(null!=n)return n;var o=e.topics,r=e.controller,a=Object(T.Map)();return a=a.withMutations((function(t){o.forEach((function(n){return t.set(n.key,r.run("deserializeTopic",vf(vf({},e),{topic:n})))}))}))},serializeBlock:function(e,t){var n=t();if(null!=n)return n;var o=e.block,r=e.controller;return{type:o.type,data:r.run("serializeBlockData",vf({},e))}},serializeBlockData:function(e,t){var n=t();return null!=n?n:e.block.data},deserializeBlock:function(e,t){var n=t();if(null!=n)return n;var o=e.block,r=e.controller,a=o.type;return new ff({type:a,data:r.run("deserializeBlockData",vf(vf({},e),{block:o}))})},deserializeBlockData:function(e,t){var n=t();return null!=n?n:e.block.data},deserializeBlocks:function(e,t){var n=t();if(null!=n)return n;var o=e.blocks,r=e.controller,a=Object(T.List)();return a=a.withMutations((function(t){o.forEach((function(n){return t.push(r.run("deserializeBlock",vf(vf({},e),{block:n})))}))}))}}]),XR=function(e){Object(s.a)(n,e);var t=Object(u.a)(n);function n(e){var o;return Object(i.a)(this,n),(o=t.call(this,e)).diagramRef=function(e){o.diagram=e,o.setState({})},o.onClickUndo=function(e){var t=o.diagram.getDiagramProps();t.controller.run("undo",t)},o.onClickRedo=function(e){var t=o.diagram.getDiagramProps();t.controller.run("redo",t)},o.onChange=function(e,t){o.setState({model:e},t)},o.initModel(),o}return Object(l.a)(n,[{key:"initModel",value:function(){var e=IR.create({rootTopicKey:"7b11654a-e9d3-45ba-a1aa-afca29ff5f18",editorRootTopicKey:"7b11654a-e9d3-45ba-a1aa-afca29ff5f18",focusKey:"e94db39f-5a03-4a4c-95ab-dec899802e63",extData:{TOPIC_REFERENCE:{reference:{"131c9433-90a2-40b8-9e02-b774761c2456":{keyList:["33b684a7-f2aa-41a1-93fb-f5e1e621511d"],dataMap:{}}}}},topics:[{key:"1f66701b-72a2-45be-abad-d14ba71a78e0",parentKey:"ccf815c4-e6ad-4cbb-9427-cca701828c6c",subKeys:["a2462a85-2447-4110-b244-6d399bcdcd36","16bb2549-ee9b-4d13-bf1f-ee0ba86872b5","ea213084-3b9f-4c99-8f2b-903c00394708","e6406abc-7710-4f4d-9b0d-3b40d9b2d0a7","6a995fff-008c-4e66-a127-590b13b99ffd","97c73d77-1496-431f-93e6-5aebcfbf8020"],collapse:!1,style:null,blocks:[{type:"CONTENT",data:"Functional\nProgramming"}]},{key:"f8959855-b412-49cf-b308-d4b014a6fc59",parentKey:"183f002c-a1ac-4ef6-bd23-2495e98fefaa",subKeys:[],collapse:!1,style:null,blocks:[{type:"CONTENT",data:"Abstraction"}]},{key:"1c417f10-9197-42eb-a724-a2c99a488847",parentKey:"dc0c93cb-0c05-40a0-9bd6-e6c1870c5613",subKeys:[],collapse:!1,style:null,blocks:[{type:"CONTENT",data:"forEach"}]},{key:"9b52509a-42df-4ba8-9200-29ec192e314a",parentKey:"7b11654a-e9d3-45ba-a1aa-afca29ff5f18",subKeys:["dc0c93cb-0c05-40a0-9bd6-e6c1870c5613","3dc1c815-02b4-4097-ae29-578920b3a065","5c0d4a18-5da2-4f3f-9752-4912ae3df225"],collapse:!1,style:null,blocks:[{type:"CONTENT",data:"Data\nStructures"}]},{key:"af8c79c0-2a79-40e8-a7ff-5edf08399e5b",parentKey:"3dc1c815-02b4-4097-ae29-578920b3a065",subKeys:[],collapse:!1,style:null,blocks:[{type:"CONTENT",data:"get"}]},{key:"4567082c-b57b-45f4-8c04-168f9a2f123f",parentKey:"06067a6c-cfd1-4faf-8aa6-5eb827f3d020",subKeys:["f548ba3e-55f6-484d-8289-858f8fd28289"],collapse:!0,style:null,blocks:[{type:"CONTENT",data:"Boolean"},{type:"DESC",data:'The boolean type has only two values: **true** and **false**\n\n```\nconsole.log(typeof(true)); //=> "boolean"\nconsole.log(typeof(false)); //=> "boolean"\n\n```\n\n```\nlet nameFieldChecked = true;\nlet ageFieldChecked = false;\n\nconsole.log("Name field checked: ", nameFieldChecked, " and " , "Age field checked: ", ageFieldChecked);\n//=> Name field checked:  true  and  Age field checked:  false\n\n```\n'}]},{key:"a1649782-ec29-4030-bb2d-d6044103cf10",parentKey:"f8750599-32db-4fb3-829e-0673887df2c2",subKeys:["dfb39c55-dfce-4d5a-88a7-5fd066288121"],collapse:!0,style:null,blocks:[{type:"CONTENT",data:"Function\nexpression"},{type:"DESC",data:'A **function expression** is determined by a function keyword, followed by an optional function name \\(anonymous\\), a list of parameters in a pair of parenthesis \\(para1, ..., paramN\\) and a pair of curly braces \\{ ... \\} that delimits the body code.\n\n**Syntax:**\n```\nconst exp = function functionName(params1, params2) {\n    statements;\n}\n\n```\n\n**example 1: named function**\n* It provides the ability to write recursive function\n* Better stack strace and readability\n\n```\nconst count = function arrayLength(array) {\n  return array.length;\n}\n\ncount([5, 7, 8]); // output: "3"\narrayLength([5, 7, 8]); // ReferenceError: arrayLength is not defined\n\n```\n\n**example 2: anonymous function**\n```\nconst count = function(array) {\n  return array.length;\n}\n\ncount([5, 7, 8]); // output: "3"\n\n```\n\n**example 3: Error stack trace**\n```\n// Ex 1:\nconst count = function arrayLength(array) {\n    throw new Error("Custom error")\n}\n\ncount([5, 7, 8]);\n\nError: Custom error\n    at arrayLength (/Users/git/other/js/programming-basics/test.js:2:11)\n    at Object.<anonymous> (/Users/git/other/js/programming-basics/test.js:5:1)\n    at Module._compile (node:internal/modules/cjs/loader:1101:14)\n    at Object.Module._extensions..js (node:internal/modules/cjs/loader:1153:10)\n    at Module.load (node:internal/modules/cjs/loader:981:32)\n    at Function.Module._load (node:internal/modules/cjs/loader:822:12)\n    at Function.executeUserEntryPoint [as runMain] (node:internal/modules/run_main:79:12)\n    at node:internal/main/run_main_module:17:47\n\n// Ex 2:    \nconst count = function (array) {\n    throw new Error("Custom error")\n}\n\ncount([5, 7, 8]);\n\nError: Custom error\n    at count (/Users/git/other/js/programming-basics/test.js:2:11)\n    at Object.<anonymous> (/Users/git/other/js/programming-basics/test.js:5:1)\n    at Module._compile (node:internal/modules/cjs/loader:1101:14)\n    at Object.Module._extensions..js (node:internal/modules/cjs/loader:1153:10)\n    at Module.load (node:internal/modules/cjs/loader:981:32)\n    at Function.Module._load (node:internal/modules/cjs/loader:822:12)\n    at Function.executeUserEntryPoint [as runMain] (node:internal/modules/run_main:79:12)\n    at node:internal/main/run_main_module:17:47\n\n```\nOne of the benefits of creating a named function expression is that in case we encountered an error, the stack trace will contain the name of the function, making it easier to find the origin of the error.'}]},{key:"ddfd37cf-11f2-4176-9d67-f494b6ea0263",parentKey:"89cf71a0-0ca8-45ff-b136-62ffbf6ff778",subKeys:[],collapse:!1,style:null,blocks:[{type:"CONTENT",data:"Default Binding"},{type:"DESC",data:'The first rule is that, if the function contains a **this** reference and it is a standalone function invocation, then it is bound to global object, the default binding rule applies and it is the default catch\\-all rule when none of the other rules apply. It behaves differently for strict\\-mode and non strict\\-mode.\n\n* Non strict mode\n\n```\nfunction foo() {\n  console.log(this.bar);\n}\nvar bar = "bar"\n\nfoo(); //=> bar\n\n```\n\n* Strict mode\n\n```\nfunction foo() {\n\'use strict\'\nconsole.log(this.bar);\n}\n\nvar bar = "yay"\n\nfoo(); //=> TypeError: this is undefined\n\n```\n'}]},{key:"c0743415-e5c5-48da-a6ec-a2d0571da863",parentKey:"7b11654a-e9d3-45ba-a1aa-afca29ff5f18",subKeys:["d48e8af6-6e14-4a4c-967b-15cf3d58036c","245b9e77-ccdc-49b6-8a0a-838244d1de2e"],collapse:!1,style:null,blocks:[{type:"CONTENT",data:"Exceptions &\nError handling"},{type:"DESC",data:"* **Exceptions** are expected failures\n* **Errors** are unexpected failures\n   * Error objects are thrown when runtime errors occur. The Error object can also be used as a base object for user\\-defined exceptions.\n\n\n**example**\n```\ntry {\n  throw new Error('Whoops!')\n} catch (e) {\n  console.error(e.name + ': ' + e.message) //=> Error: Whoops!\n}\n\n```\n"}]},{key:"31aa7d3d-f836-4d0f-8704-6606fb0a1577",parentKey:"183f002c-a1ac-4ef6-bd23-2495e98fefaa",subKeys:[],collapse:!1,style:null,blocks:[{type:"CONTENT",data:"Polymorphism"}]},{key:"ea213084-3b9f-4c99-8f2b-903c00394708",parentKey:"1f66701b-72a2-45be-abad-d14ba71a78e0",subKeys:[],collapse:!1,style:null,blocks:[{type:"CONTENT",data:"First-class \nfunctions"}]},{key:"d1972f4f-fd4a-43b1-8575-480a88d66898",parentKey:"08aaf5bf-5222-4d4c-bd8d-2267d2f81433",subKeys:[],collapse:!1,style:null,blocks:[{type:"CONTENT",data:"Shadowing"},{type:"DESC",data:"**Variable shadowing** occurs when a variable declared within a certain scope \\(decision block, or method\\) has the same name as a variable declared in an outer scope. This _outer variable_ is said to be shadowed by the inner variable, while the inner identifier is said to mask the outer identifier.\n\n**Example 1:**\n```\nlet number = 10; //variable declared in outer scope\n\nfunction displayDouble() {\n  let number = 3; //same variable declared in inner scope\n\n  number = number * 2;\n  console.log(number); //=> 6\n}\n\ndisplayDouble();\nconsole.log(number); //=> 10\n\n```\n\n**Example 2:**\n```\nlet employee = 'Kenny'; //variable declared in outer scope\n\n['Alice', 'Bob', 'Cathy'].forEach(employee => { //same variable declared in inner scope\n  console.log(employee); //=> Alice Bob Cathy\n});\n\nconsole.log(employee); //=> Kenny\n\n```\n\n**Example 3:**\n```\nlet name = 'Jenny'; //variable declared in outer scope\n\nfor (let name = 0; name < 3; name++) { //same variable declared in inner scope\n  console.log(name); //=> 0 1 2\n}\n\nconsole.log(name); //=> Jenny\n\n```\n"}]},{key:"9677e53a-05a4-4bd6-9010-f10826426bb6",parentKey:"3854fdd8-7de4-429c-b73d-2519cbf63781",subKeys:[],collapse:!1,style:null,blocks:[{type:"CONTENT",data:"else If Statement"},{type:"DESC",data:'**if** statement can be extended with an **else if** statement, which adds another conditional with its own block, it is a way to chain on extra choices/outcomes.\n\n**Syntax:**\n```\nif (condition) {\n     // when condition is true this block will be executed\n     // no futher conditions will be checked\n} else if (condition) {\n      // when a previous block condition has been failed\n      // this(else if) block condition is evaluted\n      // when a condition passed this block will be executed\n} else {\n      //when all condition has been failed this block will be executed\n}\n\n```\n\n**example:**\n```\nif (false) {\n      console.log("if blocked executed");\n} else if (2 < 5 && 3 < 5 ) {\n      console.log("else if blocked executed");\n} else {\n      console.log("else blocked executed");\n}\n\n// Output - "else if blocked executed"\n\n```\n'}]},{key:"7662833c-7ece-4668-a37b-4e11820503b4",parentKey:"08aaf5bf-5222-4d4c-bd8d-2267d2f81433",subKeys:["9c9627b1-6bba-4135-955e-608e6a937ed1"],collapse:!0,style:null,blocks:[{type:"CONTENT",data:"Function scope"},{type:"DESC",data:"**Function Scope** \\- A function in JavaScript defines a scope for variables declared using **var**, **let** and **const**.\n\n**Example 1:**\n```\nfunction run() {\n  // \"run\" function scope\n  var message = 'Run, Forrest, Run!';\n  console.log(message); //=> 'Run, Forrest, Run!'\n}\n\nrun();\nconsole.log(message); //=> throws ReferenceError\n\n```\n**run\\(\\)** function body creates a scope. The variable message is accessible inside of the function scope, but inaccessible outside.\n\n**Exmaple 2:**\n```\nfunction run() {\n  // \"run\" function scope\n  const two = 2;\n  let count = 0;\n  function run2() {}\n\n  console.log(two);   //=> 2\n  console.log(count); //=> 0\n  console.log(run2);  //=> function\n}\n\nrun();\nconsole.log(two);   //=> throws ReferenceError\nconsole.log(count); //=> throws ReferenceError\nconsole.log(run2);  //=> throws ReferenceError\n\n```\n\n**Exmaple 3**: Var is **functional\\-scoped**\n```\nvar fullMoon = true;\n\n// Use var to initialize a variable\nvar species = \"human\";\n\nif (fullMoon) {\n  // Attempt to create a new variable in a block\n  var species = \"werewolf\";\n  console.log(`${species}.`); //=> werewolf\n}\n\nconsole.log(`${species}.`); //=> werewolf\n\n```\nBoth the **global variable** and the **block\\-scoped variable** end up with the same value, **werewolf**. This is because instead of creating a new local variable with var, it is reassigning the same variable in the same scope.\n\n**Example 4:**\n```\nvar foo = 'bar';\n\nfunction bar() {\n    var foo = 'baz';\n\n    function baz(foo) {\n        foo = 'bam';\n        bam = 'yay';\n    }\n    baz();\n}\n\nbar();\nconsole.log(foo); //=> bar\nconsole.log(bam); //=> yay\nbaz(); //=> ReferenceError: bam is not defined\n\n\n```\n"}]},{key:"91f27dd0-5185-4daa-8501-15ba8727dc06",parentKey:"d40f6cf0-dcae-4162-8b2f-d89edd7e3212",subKeys:[],collapse:!1,style:null,blocks:[{type:"CONTENT",data:"for .. each"},{type:"DESC",data:'The **forEach\\(\\)** method executes a provided function once for each array element \\(will see more of this in detail in Array & methods\\)\n\n**example 1:**\n```\nconst array = [1, 2, 3, { id: 254, name: "Chris" }]\n\narray[5] = 5\narray[-6] = 6;\narray["name"] = "Lars"\n\narray.forEach(value => console.log(`Value: ${value}`));\n\n// Output:\n// Value: 1\n// Value: 2\n// Value: 3\n// Value: [object Object]\n// Value: 5\n\n```\n'}]},{key:"96d2f138-986b-4286-b6da-755624dba9c4",parentKey:"e1994f06-f679-4c5f-9197-90f6f2a551e7",subKeys:["e94db39f-5a03-4a4c-95ab-dec899802e63","8800712b-3d36-41bf-a8d2-a4bdb3b520e5"],collapse:!1,style:'{"contentStyle":{"background":"#eb7bb2"}}',blocks:[{type:"CONTENT",data:"Promises"},{type:"DESC",data:"Promise is an object represents the eventual completion \\(or failure\\) of an asynchronous operation and its resulting value. And it address the callback hell problem, inversion of control.\n\nA **Promise** is in one of these states:\n* pending: initial state, neither fulfilled nor rejected.\n* fulfilled: meaning that the operation was completed successfully.\n* rejected: meaning that the operation failed.\n\n\n```none\n                                            \u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510                                     \n                                            \u2502   async   \u2502                                     \n                                    \u250c\u2500\u2500\u2500\u2500\u2500\u2500\u25b6\u2502  actions  \u2502                                     \n                                    \u2502       \u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518                                     \n                           settled  \u2502                                                         \n                           \u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2534\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510                                                \n                           \u2502      .then      \u2502                                                \n                     \u250c\u2500\u2500\u2500\u2500\u2500\u25b6 (onFulfillment) \u251c\u2500\u2500\u2500\u2510                                            \n                     \u2502     \u2502                 \u2502   \u2502                                            \n                 fulfill   \u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518   \u2502                                            \n    pending          \u2502                           \u2502                                            \n\u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510     \u2502                        return      pending                             \n\u2502              \u2502     \u2502                           \u2502   \u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510        \u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510\n\u2502   Promise    \u251c\u2500\u2500\u2500\u2500\u2500\u2524                           \u2502   \u2502                 \u2502        \u2502  .then()   \u2502\n\u2502              \u2502     \u2502                           \u251c\u2500\u2500\u2500\u25b6    Promise      \u251c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u25b6  .catch()  \u2502 ... \n\u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518     \u2502                           \u2502   \u2502                 \u2502        \u2502            \u2502\n                  reject                         \u2502   \u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518        \u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518\n                     \u2502     \u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510 return                                         \n                     \u2502     \u2502                 \u2502   \u2502                                            \n                     \u2514\u2500\u2500\u2500\u2500\u2500\u25b6                 \u251c\u2500\u2500\u2500\u2518                                            \n                           \u2502     .catch      \u2502                                                \n                           \u2502  (onRejection)  \u2502                                                \n                           \u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u252c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518                                                \n                                    \u2502                                                         \n                                    \u2502        \u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510                                    \n                                    \u2502        \u2502   error   \u2502                                    \n                                    \u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u25b6\u2502 handling  \u2502                                    \n                                             \u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518\n\n```\n"}]},{key:"66e79181-e275-41de-94c5-eac1802afc6b",parentKey:"277f12bf-6cef-4676-92bb-ee233886e4cb",subKeys:[],collapse:!1,style:null,blocks:[{type:"CONTENT",data:""}]},{key:"8d03fe66-9d8f-4ae3-96c1-d18220788b3a",parentKey:"dc0c93cb-0c05-40a0-9bd6-e6c1870c5613",subKeys:[],collapse:!1,style:null,blocks:[{type:"CONTENT",data:"pop"}]},{key:"f319a1ab-dd84-45fa-b56f-023f85f0e1a9",parentKey:"862cc5cf-2295-40f3-8bfb-bf1832c716e0",subKeys:[],collapse:!1,style:null,blocks:[{type:"CONTENT",data:"objects"}]},{key:"c1e621c4-ae65-40d0-ad48-650368d181d0",parentKey:"29f23365-fcf6-4f8f-8060-811df84e4770",subKeys:[],collapse:!1,style:null,blocks:[{type:"CONTENT",data:""}]},{key:"d40f6cf0-dcae-4162-8b2f-d89edd7e3212",parentKey:"7b11654a-e9d3-45ba-a1aa-afca29ff5f18",subKeys:["d4cb9863-ba6c-4ea6-903e-44accf4a5b7b","29f23365-fcf6-4f8f-8060-811df84e4770","a3055667-8217-484e-aae8-728cab93135c","91f27dd0-5185-4daa-8501-15ba8727dc06","65199906-ca55-4ae8-bd9f-a4a08cbc2432","a70b7d9d-ea0f-49c3-a488-ddbceebe85d8"],collapse:!1,style:null,blocks:[{type:"CONTENT",data:"Loops"},{type:"DESC",data:"A loop is a sequence of instructions that is **continually repeated** until a certain condition is met. An example would be the process of getting an item of data and changing it, and then making sure some condition is checked such as, if a counter has reached a prescribed number."}]},{key:"ef12f21d-9fc6-4b69-9034-dfe4162cf6e7",parentKey:"183f002c-a1ac-4ef6-bd23-2495e98fefaa",subKeys:[],collapse:!1,style:null,blocks:[{type:"CONTENT",data:"Inheritance"}]},{key:"dbc9a664-bff0-4263-811c-cb91470ce277",parentKey:"2c6ddd66-98a5-4410-b7f2-dbd42aaa7e01",subKeys:[],collapse:!1,style:null,blocks:[{type:"CONTENT",data:"Object"},{type:"DESC",data:'**Object** : typeof instance === "object". It is used to store collections of data and more complex entities.\n\n```\nconsole.log(typeof({})); //=> "object"\nconsole.log(typeof([])); //=> "object" - Arrays aren\u2019t primitive, they are objects\nconsole.log(typeof(new Map())); //=> "object"\nconsole.log(typeof(new Date())); //=> "object"\n\n```\n\nSpecial non\\-data but Structural type for any constructed object instance also used as data structures: \n1. new Object, \n1. new Array, \n1. new Map, \n1. new Set, \n1. new WeakMap, \n1. new WeakSet, \n1. new Date and almost everything made with **new** keyword;\n\n\n**Indexed collections**: Arrays and typed Arrays\n**Keyed collections**: Maps, Sets, WeakMaps, WeakSets'}]},{key:"d48e8af6-6e14-4a4c-967b-15cf3d58036c",parentKey:"c0743415-e5c5-48da-a6ec-a2d0571da863",subKeys:["31322dda-20dd-46ac-846f-5a632516e9dd"],collapse:!0,style:null,blocks:[{type:"CONTENT",data:"throw /\nerror"},{type:"DESC",data:"## Throw\n\n* The **throw** statement throws a user\\-defined exception. Execution of the current function will stop \\(the statements after throw won't be executed\\), and control will be passed to the first catch block in the call stack. If no catch block exists among caller functions, the program will terminate.\n\n\n**Syntax:**\n```\nthrow expression;\n\n```\n\n**example 1:**\n```\nthrow 'Error2'; // generates an exception with a string value\nthrow 42;       // generates an exception with the value 42\nthrow true;     // generates an exception with the value true\n\n```\n\n**example 2:**\n```\nfunction getRectArea(width, height) {\n    if (isNaN(width) || isNaN(height)) {\n        throw 'Parameter is not a number!';\n    }\n}\n\ntry {\n    getRectArea(3, 'A');\n} catch (e) {\n    console.error(e); //=> Parameter is not a number!\n}\n\n```\n\n## Error\n\n* **Error** objects are thrown when runtime errors occur. The Error object can also be used as a base object for user\\-defined exceptions.\n\n\n**example**\n* Throwing a generic error\n\n```\ntry {\n  throw new Error('Whoops!')\n} catch (e) {\n  console.error(e.name + ': ' + e.message) //=> Error: Whoops!\n}\n\n```\n\n* Handling a specific error type\n\n```\ntry {\n    foo.bar()\n} catch (e) {\n    if (e instanceof EvalError) {\n        console.error(e.name + ': ' + e.message)\n    } else if (e instanceof RangeError) {\n        console.error(e.name + ': ' + e.message)\n    }\n    else {\n        // If none of our cases matched leave the Error unhandled\n        throw e;\n    }\n}\n\nResult:\n\nfile:///Users/execption.js:2\nfoo.bar()\n^\n\nReferenceError: foo is not defined\nat file:///Users/execption.js:2:5\nat ModuleJob.run (node:internal/modules/esm/module_job:183:25)\nat async Loader.import (node:internal/modules/esm/loader:178:24)\nat async Object.loadESM (node:internal/process/esm_loader:68:5)\nat async handleMainPromise (node:internal/modules/run_main:63:12)\n\n\n```\n\n* Custom Error Class\n\n```\nclass CustomError extends Error {\n    constructor(foo = 'bar', ...params) {\n        // Pass remaining arguments (including vendor specific ones) to parent constructor\n        super(...params)\n\n        // Maintains proper stack trace for where our error was thrown (only available on V8)\n        if (Error.captureStackTrace) {\n            Error.captureStackTrace(this, CustomError)\n        }\n\n        this.name = 'CustomError'\n        // Custom debugging information\n        this.foo = foo\n        this.date = new Date()\n    }\n}\n\ntry {\n    throw new CustomError('baz', 'bazMessage')\n} catch (e) {\n    console.error(e.name)    //=> CustomError\n    console.error(e.foo)     //=> baz\n    console.error(e.message) //=> bazMessage\n    console.error(e.stack)   //=> stacktrace\n}\n\n```\n\nFor more info,\n* [https://developer.mozilla.org/en\\-US/docs/Web/JavaScript/Reference/Global\\_Objects/Error](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Error)\n\n"}]},{key:"36a2fcb8-8f7a-4b25-adbc-3be25f6f534a",parentKey:"89cf71a0-0ca8-45ff-b136-62ffbf6ff778",subKeys:["73667249-cfd7-438c-a8db-cb40b58d16fb"],collapse:!0,style:null,blocks:[{type:"CONTENT",data:"Explicit Binding"},{type:"DESC",data:"**Explicit Binding** will force a function call to use a particular object for the **this** binding\\. And it can be achieved using **call\\(\\)** and **apply\\(\\)**.\n\n* example 1\n\n```\nfunction foo() {\n    console.log(this.bar);\n}\n\nlet obj1 = { bar: 'bar 1' };\nlet obj2 = { bar: 'bar 2' };\n\nfoo.call(obj1); //=> bar 1\nfoo.apply(obj2) //=> bar 2\n\n```\n\n* example 2\n\n```\nfunction foo() {\n    console.log(this.bar);\n}\n\nlet obj1 = { bar: 'bar 1' };\nlet obj2 = { bar: 'bar 2' };\n\nlet orig = foo;\n\nfoo = function () { orig.call(obj1) };\n\nfoo(); //=> bar 1\nfoo.call(obj2); //=> bar 1 'it is explicitly bound to obj1'\n\n```\n"}]},{key:"277f12bf-6cef-4676-92bb-ee233886e4cb",parentKey:"5df46409-6d87-4099-85c8-664e7e703c8e",subKeys:["66e79181-e275-41de-94c5-eac1802afc6b"],collapse:!0,style:null,blocks:[{type:"CONTENT",data:"Class"},{type:"DESC",data:'**Classes** are a template for creating objects. Classes in JS are built on prototypes. It is useful for creating multiple objects. And it is a new ES style convention and recommended one.\n\n```\nclass Employee {\n    constructor(firstName, lastName) {\n        this.firstName = firstName;\n        this.lastName = lastName;\n    }\n    print() {\n        console.log(`${this.firstName} ${this.lastName}`)\n    }\n}\n\nlet user1 = new Employee("Jack", "Ryan");\nuser1.print(); //=> Jack Ryan\n\nlet user2 = new Employee("Alice", "Martin");\nuser2.print(); //=> Alice Martin\n\n```\n'}]},{key:"a70b7d9d-ea0f-49c3-a488-ddbceebe85d8",parentKey:"d40f6cf0-dcae-4162-8b2f-d89edd7e3212",subKeys:[],collapse:!1,style:null,blocks:[{type:"CONTENT",data:"do while"},{type:"DESC",data:'**do\\-while** loop will always be executed at least once, even if the condition is false, because the code block is executed before the condition is checked.\n\n```\nlet i = 10;\ndo {\n  console.log("The number is " + i);\n  i++;\n}\nwhile (i < 5);\n\n// output: "The number is 10"\n\n```\n'}]},{key:"88317110-d644-4ca9-84bf-01ae778571da",parentKey:"5c0d4a18-5da2-4f3f-9752-4912ae3df225",subKeys:[],collapse:!1,style:null,blocks:[{type:"CONTENT",data:"entries"}]},{key:"fa03906c-9682-4352-98eb-3a4525a5780c",parentKey:"dc0c93cb-0c05-40a0-9bd6-e6c1870c5613",subKeys:[],collapse:!1,style:null,blocks:[{type:"CONTENT",data:"filter"}]},{key:"f9aad4c2-5205-49ec-a74c-ed04c3bb6813",parentKey:"dc0c93cb-0c05-40a0-9bd6-e6c1870c5613",subKeys:[],collapse:!1,style:null,blocks:[{type:"CONTENT",data:"push"}]},{key:"d4cb9863-ba6c-4ea6-903e-44accf4a5b7b",parentKey:"d40f6cf0-dcae-4162-8b2f-d89edd7e3212",subKeys:[],collapse:!1,style:null,blocks:[{type:"CONTENT",data:"for"},{type:"DESC",data:'The **for** loop repeats a block of code as long as a certain condition is met. It is typically used to execute a block of code for certain number of times.\n\n**Syntax:**\n```\nfor(initialization; condition; final-expression) {\n    // Code to be executed\n}\n\n```\n\n* **initialization** \u2014 it is used to initialize the counter variables, and evaluated once unconditionally before the first execution of the body of the loop.\n* **condition** \u2014 it is evaluated at the beginning of each iteration. If it evaluates to true, the loop statements execute. If it evaluates to false, the execution of the loop ends.\n* **final\\-expression** \u2014 this is always evaluated \\(or run\\) each time the loop has gone through a full iteration. It usually serves to increment \\(or in some cases decrement\\) the counter variable.\n\n\n**example 1**:\n```\nfor (let i = 0; i < 10; i++) {\n  console.log("The number is " + i);\n}\n\n// Output:\n// "The number is 0"\n// "The number is 1"\n// "The number is 2"\n// "The number is 3"\n// "The number is 4"\n// "The number is 5"\n// "The number is 6"\n// "The number is 7"\n// "The number is 8"\n// "The number is 9"\n\n```\n\n**example 2: **skipping current execution of loop using **continue** statement\n```\nfor (let i = 0; i < 10; i++) {\n  if(i%2===0){\n    continue;\n  }\n  console.log("The number is " + i);\n}\n\n// Output:\n// "The number is 1"\n// "The number is 3"\n// "The number is 5"\n// "The number is 7"\n// "The number is 9"\n\n```\n\n**example 3**: terminating current execution flow of the loop using **break** statement\n```\nfor (let i = 0; i < 10; i++) {\n  if(i===5){\n    break;\n  }\n  console.log("The number is " + i);\n}\n\n// Output:\n// "The number is 0"\n// "The number is 1"\n// "The number is 2"\n// "The number is 3"\n// "The number is 4"\n\n```\n\n**example 4: **following example is valid js code\n```\nfor (; ;) {\n    console.log("Infinite loop - \'JavaScript heap out of memory\' it is what you get when you run");\n}\n\n```\n\n**example 5: **And it iterates over by **positive numeric index**.\n```\nconst array = [1, 2, 3, { id: 254, name: "Chris" }]\n\narray[5] = 5\narray[-6] = 6;\narray["name"] = "Lars"\n\nfor (let index = 0; index < array.length; index++)\n    console.log(`Index: ${index} & Value: ${array[index]}`);\n\n// Output:\n//Index: 0 & Value: 1\n//Index: 1 & Value: 2\n//Index: 2 & Value: 3\n//Index: 3 & Value: [object Object]\n//Index: 4 & Value: undefined\n//Index: 5 & Value: 5     \n\n```\n'}]},{key:"7b11654a-e9d3-45ba-a1aa-afca29ff5f18",parentKey:null,subKeys:["44213600-22aa-4972-aa99-eec27b840064","252c6937-bd93-4233-90cb-333938667c72","08aaf5bf-5222-4d4c-bd8d-2267d2f81433","3854fdd8-7de4-429c-b73d-2519cbf63781","d40f6cf0-dcae-4162-8b2f-d89edd7e3212","f8750599-32db-4fb3-829e-0673887df2c2","5df46409-6d87-4099-85c8-664e7e703c8e","9b52509a-42df-4ba8-9200-29ec192e314a","c0743415-e5c5-48da-a6ec-a2d0571da863","1340cde2-dcef-48de-a00e-1ce996ecf377","ccf815c4-e6ad-4cbb-9427-cca701828c6c","e1994f06-f679-4c5f-9197-90f6f2a551e7","bae54fe2-5e3a-40ec-8f36-4d7df7fd5a33"],collapse:!1,style:'{"contentStyle":{"background":"#f8e71c"}}',blocks:[{type:"CONTENT",data:"Js"},{type:"DESC",data:"JavaScript is a **prototype\\-based**, multi\\-paradigm, single\\-threaded, dynamic language, supporting object\\-oriented, imperative, and declarative \\(e.g. functional programming\\) styles.\n\nIt is a lightweight, interpreted, or just\\-in\\-time compiled programming language. Which involves two phases  \n* Parsing/Compilation, and\n* Execution\\.\n\n"}]},{key:"6a995fff-008c-4e66-a127-590b13b99ffd",parentKey:"1f66701b-72a2-45be-abad-d14ba71a78e0",subKeys:[],collapse:!1,style:null,blocks:[{type:"CONTENT",data:"Immutability"}]},{key:"a2462a85-2447-4110-b244-6d399bcdcd36",parentKey:"1f66701b-72a2-45be-abad-d14ba71a78e0",subKeys:[],collapse:!1,style:null,blocks:[{type:"CONTENT",data:"Higher-order\nfunction"}]},{key:"a37aef6c-b62c-423c-8124-c18edc14142b",parentKey:"f8750599-32db-4fb3-829e-0673887df2c2",subKeys:["24a0e9fa-2a33-4e0d-8736-ec434151a6d0"],collapse:!0,style:null,blocks:[{type:"CONTENT",data:"Generator\nfunction"},{type:"DESC",data:"A **generator** is a function that can stop midway and then continue from where it stopped. In short, a generator appears to be a function but it behaves like an iterator.\n\n**example 1:** function declaration \\- **function\\* <function\\-name\\>\\(\\)**\n```\nfunction* generatorFunction() {\n  console.log('This will be executed first.');\n  yield 'Hello, ';\n  console.log('I will be printed after the pause');  \n  yield 'World!';\n}\nconst generatorObject = generatorFunction();\n\nconsole.log(generatorObject.next().value);\n// This will be executed first.\n// Hello, \nconsole.log(generatorObject.next().value);\n// I will be printed after the pause\n// World!\nconsole.log(generatorObject.next().value);\n// undefined\n\n```\n\n**example 2: **function expression \\- **function\\* \\(\\)**\n```\nconst indexGenerator = function* () {\n  let index = 0;\n  while(true) {\n    yield index++;\n  }\n};\nconst g = indexGenerator();\nconsole.log(g.next().value); //=> 0\nconsole.log(g.next().value); //=> 1\n\n```\n\n**example 3: **Shorthand method definition \\- **\\*<function\\-name\\>\\(\\)**\n```\nconst obj = {\n  *indexGenerator() {\n    var index = 0;\n    while(true) {\n      yield index++;\n    }\n  }\n}\nconst g = obj.indexGenerator();\nconsole.log(g.next().value); //=> 0\nconsole.log(g.next().value); //=> 1\n\n```\n"}]},{key:"62774116-bea5-49c3-a72c-6371f1cde7cb",parentKey:"dc0c93cb-0c05-40a0-9bd6-e6c1870c5613",subKeys:[],collapse:!1,style:null,blocks:[{type:"CONTENT",data:"find"}]},{key:"9c9627b1-6bba-4135-955e-608e6a937ed1",parentKey:"7662833c-7ece-4668-a37b-4e11820503b4",subKeys:[],collapse:!1,style:null,blocks:[{type:"CONTENT",data:""}]},{key:"d3f7bd55-fe91-45b2-b13e-ea98bb7710d9",parentKey:"10d9744a-f521-4bdf-8933-9c3fb1cfb2c8",subKeys:[],collapse:!1,style:null,blocks:[{type:"CONTENT",data:""}]},{key:"5c0d4a18-5da2-4f3f-9752-4912ae3df225",parentKey:"9b52509a-42df-4ba8-9200-29ec192e314a",subKeys:["6608af00-8cd4-4fe1-bd0b-e18e12f4a684","bb6f8cdb-b6ee-4040-9195-170825342ded","12256f82-0a50-4408-8a76-525865cbad4b","88317110-d644-4ca9-84bf-01ae778571da","af72cd3d-9be6-4420-9c07-1a80e2c62e2d"],collapse:!1,style:null,blocks:[{type:"CONTENT",data:"Set &\nmethods"}]},{key:"48db7a4d-51df-43d6-bbdc-5ee3889f5eba",parentKey:"89cf71a0-0ca8-45ff-b136-62ffbf6ff778",subKeys:[],collapse:!1,style:null,blocks:[{type:"CONTENT",data:"Implicit Binding"},{type:"DESC",data:"Another rule to consider is, if the call\\-site have a context object, also referred to as an owning or containing object, in other wrords if the function is attached to an object \\(its context\\) at the call site. Then the implicit binding rule says that it's _that_ object which should be used for the function call's _**this**_ binding\\.\n\n* example 1\n\n```\nfunction foo() {\n    console.log(this.bar);\n}\n\nvar obj1 = { bar: 'bar 1', foo: foo };\nvar obj2 = { bar: 'bar 2', foo: foo };\n\nobj1.foo(); //=> bar 1\nobj2.foo(); //=> bar 2\n\n```\n\n* example 2\n\n```\nvar obj1 = {\n    bar: 'bar 1',\n    foo: function () {\n        console.log(this.bar);\n    }\n}\n\nvar obj2 = { bar: 'bar 2', foo: obj1.foo };\nvar obj3 = { bar: 'bar 3', foo: obj2.foo };\nvar obj4 = { bar: 'bar 3', obj2: obj2 };\n\nobj1.foo(); //=> bar 1\nobj2.foo(); //=> bar 2\nobj3.foo(); //=> bar 3\nobj4.obj2.foo(); //=> bar 2 `top/last level of an object property reference chain matters to the call-site`\n\n```\n\n**_Note_**_: _One way to figure out which object _**this**_ is bound to is to look at which object is to the **_left_** of the dot operator \\(**.**\\)"}]},{key:"fc11e9b2-fb2a-4f5d-934e-65c172bb61fa",parentKey:"2c6ddd66-98a5-4410-b7f2-dbd42aaa7e01",subKeys:[],collapse:!1,style:null,blocks:[{type:"CONTENT",data:"Function"},{type:"DESC",data:'A function is a code snippet that can be called by other code or by itself, or a variable that refers to the function. When a function is called, optionally arguments are passed to the function as input, and the function can return a value. \n\nA function in JavaScript is also an **object**.\n\n```\nconsole.log(typeof(x => x * 2)); //=> "function"\nconsole.log(typeof(function(){})); //=> "function"\n\n```\n'}]},{key:"b31ac6cb-b3c3-4dd2-83a1-6b5b7466d048",parentKey:"06067a6c-cfd1-4faf-8aa6-5eb827f3d020",subKeys:[],collapse:!1,style:null,blocks:[{type:"CONTENT",data:"Null"},{type:"DESC",data:'In JavaScript, null is **not** a \u201creference to a non\\-existing object\u201d or a \u201cnull pointer\u201d like in some other languages. It\u2019s just a special value which represents \u201c**nothing**\u201d, \u201c**empty**\u201d or \u201c**value unknown**\u201d.\n\nThe special **null** value does not belong to any of the types described above.\n```\nconsole.log(typeof(null)); //=> "object"\n\n// This is a bug and one that unfortunately can\u2019t be fixed, \n// because it would break existing code.\n// https://2ality.com/2013/10/typeof-null.html\n\n```\n\nIt forms a separate type of its own which contains only the null value:\n```\nlet age = null;\nconsole.log(age); //=> null\n\n```\n'}]},{key:"31322dda-20dd-46ac-846f-5a632516e9dd",parentKey:"d48e8af6-6e14-4a4c-967b-15cf3d58036c",subKeys:[],collapse:!1,style:null,blocks:[{type:"CONTENT",data:""}]},{key:"24a0e9fa-2a33-4e0d-8736-ec434151a6d0",parentKey:"a37aef6c-b62c-423c-8124-c18edc14142b",subKeys:[],collapse:!1,style:null,blocks:[{type:"CONTENT",data:""}]},{key:"ccf815c4-e6ad-4cbb-9427-cca701828c6c",parentKey:"7b11654a-e9d3-45ba-a1aa-afca29ff5f18",subKeys:["1f66701b-72a2-45be-abad-d14ba71a78e0","131c9433-90a2-40b8-9e02-b774761c2456"],collapse:!1,style:null,blocks:[{type:"CONTENT",data:"Programming\nparadigms"},{type:"DESC",data:"A _programming paradigm_ is a _**style**_, or _**way**_, of programming.\n\n### Some common programming paradigms\n\n* **Imperative** in which the programmer instructs the machine how to change its state,\n   * _**Procedural**_ which groups instructions into procedures,\n   * _**Object\\-oriented**_ which groups instructions with the part of the state they operate on,\n* **Declarative** in which the programmer merely declares properties of the desired result, but not how to compute it\n   * _**Functional**_ in which the desired result is declared as the value of a series of function applications,\n   * _**Logical**_ in which the desired result is declared as the answer to a question about a system of facts and rules,\n   * _**Reactive**_ in which the desired result is declared with data streams and the propagation of change\n\n"}]},{key:"05c8bbd0-fe13-4906-92cf-8507b33954da",parentKey:"252c6937-bd93-4233-90cb-333938667c72",subKeys:[],collapse:!1,style:null,blocks:[{type:"CONTENT",data:"var"},{type:"DESC",data:"Value stored in it can be **reassigned**. Variables, declared with var, are either function\\-scoped or global\\-scoped. \\(will see more of that in **Scopes & Closures**\\). Their visibility is scoped to current function, or global, if declared outside function.\n\nTo declare or create a varaible\n```\nvar message;\n\n```\n\nAssign a data into it by using the assignment operator **=**\n```\nmessage = 'Hello';\n\n```\n\nCombine the variable _declaration_ and _assignment_ into a single line\n```\nvar message = 'Hello!';\n\n```\n\nDeclare multiple variables in one line\n```\nvar user = 'John', age = 25, message = 'Hello';\n\n```\n\nReassigning a value\n```\nvar userName = \"Bruce\"\nuserName = \"Wayne\"\n\nconsole.log(userName) //=> \"Wayne\"\n\n```\n"}]},{key:"33b684a7-f2aa-41a1-93fb-f5e1e621511d",parentKey:"f8750599-32db-4fb3-829e-0673887df2c2",subKeys:[],collapse:!1,style:null,blocks:[{type:"CONTENT",data:"_proto_ &\nprototype"},{type:"DESC",data:'In JavaScript, objects have a special hidden property **\\[\\[Prototype\\]\\]**, that is either null or references another object. That object is called \u201ca prototype\u201d.\n\nThe property \\[\\[Prototype\\]\\] is internal and hidden, but there are many ways to set it. One of them is to use the special name \\_\\_proto\\_\\_\n```\nlet animal = {\n  eats: true\n};\nlet rabbit = {\n  jumps: true\n};\n\nrabbit.__proto__ = animal; // sets rabbit.[[Prototype]] = animal\n\n```\n\n* **\\_\\_proto\\_\\_** is an internal property of an object, pointing to its prototype. And it is used in the lookup chain to resolve methods \\(usage of \\_\\_proto\\_\\_ is deprecated**\\)**\n* **prototype** is a property of a Function object. It is the prototype of objects constructed by that function.\n\n\n**example 1:**\n```\nfunction Person(name) {\n    this.name = name;\n}\n\nPerson.prototype.age = 25;\n\nlet william = new Person(\'William\');\nwilliam.age = 35;\n\n// the __proto__ property on the instance refers to the prototype of the constructor\nconsole.log(william.__proto__ === Person.prototype); //=> true\n\nconsole.log(william.age); //=> 35\n\n// now we are directly accessing the prototype of the Person function\nconsole.log(william.__proto__.age); //=> 25\n\n// william.__proto points to "Person" prototype \n// william.__proto.__proto__ points to "Object" prototype\nwilliam.__proto__.__proto__.toString = function () {\n    console.log("built-in object modified");\n}\n\nconst obj = {};\nobj.toString(); //=> built-in object modified\n\n```\n\n**example 2:**\n```\nfunction Employee(id, name) {\n\n    // instance members goes into objects\n    this.id = id;\n    this.name = name;\n\n    // function object members goes into Employee\n    Employee.count = 0;\n\n    // prototype members goes into shared prototype\n    Employee.prototype.baseSalary = 5000;\n\n    // instance function goes into every instance (wasting resource)\n    this.print = function () {\n        console.log(`id=${this.id}, name=${this.name}`);\n    }\n\n    // prototype functions goes into shared prototype, added only once\n    Employee.prototype.printDetails = function () {\n        console.log(`id=${this.id}, name=${this.name}`);\n    }\n\n}\n\nlet emp1 = new Employee(1, "Alice")\nemp1.print(); //=> id=1, name=Alice\nemp1.printDetails(); //=> id=1, name=Alice\nemp1.baseSalary = 1000;\nconsole.log(emp1.baseSalary); //=> 1000\n\nlet emp2 = new Employee(2, "Bob")\nemp2.print(); //=> id=1, name=Alice\nemp2.printDetails(); //=> id=1, name=Alice\nconsole.log(emp2.baseSalary); //=> 5000\n\nconsole.log(emp1.constructor.count); //=> 0\nconsole.log(emp2.constructor.count); //=> 0\n\n```\n\n**prototype \\- object linkage:**\n```none\n                 \u250c\u2500\u2500\u252c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u252c\u2500\u2500\u2500\u2500\u2500\u2510            \u250c\u2500\u2500\u252c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u252c\u2500\u2500\u2500\u2500\u2500\u2510                 \n                 \u2502F \u2502     key    \u2502value\u2502            \u2502  \u2502     key    \u2502value\u2502                 \n                 \u2502u \u251c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u253c\u2500\u2500\u2500\u2500\u2500\u2524            \u2502O \u251c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u253c\u2500\u2500\u2500\u2500\u2500\u2524                 \n                 \u2502n \u2502  __proto__ \u2502     \u2502            \u2502b \u2502  __proto__ \u2502     \u2502                 \n                 \u2502c \u251c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u253c\u2500\u2500\u2500\u2500\u2500\u2524            \u2502j \u251c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u253c\u2500\u2500\u2500\u2500\u2500\u2524                 \n                 \u2502t \u2502   call()   \u2502     \u2502            \u2502e \u2502 toString() \u2502     \u2502                 \n                 \u2502i \u251c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u253c\u2500\u2500\u2500\u2500\u2500\u2524            \u2502c \u251c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u253c\u2500\u2500\u2500\u2500\u2500\u2524                 \n                 \u2502o \u2502  apply()   \u2502     \u2502            \u2502t \u2502 valueOf()  \u2502     \u2502                 \n                 \u2502n \u251c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u253c\u2500\u2500\u2500\u2500\u2500\u2524            \u2502  \u251c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u253c\u2500\u2500\u2500\u2500\u2500\u2524                 \n                 \u2502  \u2502   bind()   \u2502     \u2502            \u2502  \u2502   ...      \u2502     \u2502                 \n                 \u2514\u2500\u2500\u2534\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u25b2\u2500\u2500\u2500\u2500\u2534\u2500\u2500\u2500\u2500\u2500\u2518            \u2514\u2500\u2500\u2534\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u25b2\u2500\u2500\u2500\u2500\u2534\u2500\u2500\u2500\u2500\u2500\u2518                 \n\u250c\u2500\u2500\u252c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u252c\u2500\u2500\u2500\u2500\u2500\u2510     \u2502     \u250c\u2500\u2500\u252c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u252c\u2500\u2500\u2500\u2500\u2500\u2510      \u2502                            \n\u2502  \u2502     key    \u2502value\u2502     \u2502     \u2502p \u2502     key    \u2502value\u2502      \u2502                            \n\u2502E \u251c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u253c\u2500\u2500\u2500\u2500\u2500\u2524     \u2502     \u2502r \u251c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u253c\u2500\u2500\u2500\u2500\u2500\u2524      \u2502                            \n\u2502m \u2502  __proto__ \u2502   \u25cf\u2500\u253c\u2500\u2500\u2500\u2500\u2500\u2518     \u2502o \u2502  __proto__ \u2502    \u25cf\u253c\u2500\u2500\u2500\u2500\u2500\u2500\u2518                            \n\u2502p \u251c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u253c\u2500\u2500\u2500\u2500\u2500\u2524           \u2502t \u251c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u253c\u2500\u2500\u2500\u2500\u2500\u2524                                   \n\u2502l \u2502  prototype \u2502   \u25cf\u2500\u253c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u25b6o \u2502 constructor\u2502     \u2502                                   \n\u2502o \u2502            \u2502     \u2502\u25c1\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u25cft \u2502            \u2502     \u2502                                   \n\u2502y \u251c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u253c\u2500\u2500\u2500\u2500\u2500\u2524           \u2502y \u251c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u253c\u2500\u2500\u2500\u2500\u2500\u2524                                   \n\u2502e \u2502   count    \u2502     \u2502           \u2502p \u2502 baseSalary \u2502     \u2502           \u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510\n\u2502e \u251c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u253c\u2500\u2500\u2500\u2500\u2500\u2524           \u2502e \u251c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u253c\u2500\u2500\u2500\u2500\u2500\u2524           \u2502function printDetails{\u2502\n\u2502  \u2502            \u2502     \u2502           \u2502  \u2502printDetails\u2502   \u25cf\u2500\u253c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u25b6\u2502          }           \u2502\n\u2514\u2500\u2500\u2534\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2534\u2500\u2500\u2500\u2500\u2500\u2518           \u2514\u2500\u2500\u2534\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2534\u2500\u2500\u2500\u2500\u2500\u2518           \u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518\n                                             \u25b2                                              \n                                             \u2502                                              \n                                             \u2502                                              \n             \u250c\u2500\u2500\u252c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u252c\u2500\u2500\u2500\u2500\u2500\u2510         \u2502                                              \n             \u2502  \u2502     key    \u2502value\u2502         \u2502                                              \n             \u2502  \u251c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u253c\u2500\u2500\u2500\u2500\u2500\u2524         \u2502                                              \n             \u2502e \u2502  __proto__ \u2502  \u25cf\u2500\u2500\u253c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518                                              \n             \u2502m \u251c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u253c\u2500\u2500\u2500\u2500\u2500\u2524                                                        \n             \u2502p \u2502     id     \u2502     \u2502                                                        \n             \u25021 \u251c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u253c\u2500\u2500\u2500\u2500\u2500\u2524                                                        \n             \u2502  \u2502    name    \u2502     \u2502          \u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510                             \n             \u2502  \u251c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u253c\u2500\u2500\u2500\u2500\u2500\u2524          \u2502function print{\u2502                             \n             \u2502  \u2502    print   \u2502  \u25cf\u2500\u2500\u253c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u25b6\u2502       }       \u2502                             \n             \u2514\u2500\u2500\u2534\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2534\u2500\u2500\u2500\u2500\u2500\u2518          \u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518\n\n```\n\nFor more refference,\n* [https://javascript.info/prototypes](https://javascript.info/prototypes)\n\n'}]},{key:"07fcbf3d-5e2d-4049-b16a-075a36dea9ec",parentKey:"49780f87-17f7-4f90-a761-6ddf6ce8e1ca",subKeys:[],collapse:!1,style:null,blocks:[{type:"CONTENT",data:"Error handling"},{type:"DESC",data:"A common callback pattern is called \"error\\-first style\" \\(sometimes called \"Node style,\" as it's also the convention used across nearly all Node.js APIs\\), where the first argument of a single callback is reserved for an error object \\(if any\\). If success, this argument will be empty/falsy \\(and any subsequent arguments will be the success data\\), but if an error result is being signaled, the first argument is set/truthy \\(and usually nothing else is passed\\)\n\n```\n// Example asynchronous function\nfunction asynchronousRequest(args, callback) {\n  // Throw an error if no arguments are passed\n  if (!args) {\n    return callback(new Error('Whoa! Something went wrong.'))\n  } else {\n    return setTimeout(\n      // Just adding in a random number so it seems like the contrived asynchronous function\n      // returned different data\n      () => callback(null, {body: args + ' ' + Math.floor(Math.random() * 10)}),\n      500,\n    )\n  }\n}\n\n// Nested asynchronous requests\nfunction callbackHell() {\n  asynchronousRequest('First', function first(error, response) {\n    if (error) {\n      console.log(error)\n      return\n    }\n    console.log(response.body)\n    asynchronousRequest('Second', function second(error, response) {\n      if (error) {\n        console.log(error)\n        return\n      }\n      console.log(response.body)\n      asynchronousRequest(null, function third(error, response) {\n        if (error) {\n          console.log(error)\n          return\n        }\n        console.log(response.body)\n      })\n    })\n  })\n}\n\n// Execute\ncallbackHell()\n\n```\n"}]},{key:"5830091e-64ee-4015-aeff-f8779fa73582",parentKey:"862cc5cf-2295-40f3-8bfb-bf1832c716e0",subKeys:[],collapse:!1,style:null,blocks:[{type:"CONTENT",data:"Attributes"}]},{key:"28bcdae2-e48d-47e3-bc28-5f6afecfef7d",parentKey:"3dc1c815-02b4-4097-ae29-578920b3a065",subKeys:[],collapse:!1,style:null,blocks:[{type:"CONTENT",data:"delete"}]},{key:"bb6f8cdb-b6ee-4040-9195-170825342ded",parentKey:"5c0d4a18-5da2-4f3f-9752-4912ae3df225",subKeys:[],collapse:!1,style:null,blocks:[{type:"CONTENT",data:"clear"}]},{key:"a44085f3-06c0-4910-9787-af5b20c0709b",parentKey:"08aaf5bf-5222-4d4c-bd8d-2267d2f81433",subKeys:[],collapse:!1,style:'{"contentStyle":{"background":"#9b9b9b"}}',blocks:[{type:"CONTENT",data:"Module scope"},{type:"DESC",data:'**Module Scope **\\- A module is just a file. One script is one module. Modules can load each other and use special directives export and import to interchange functionality, call functions of one module from another one:\n\n* **export** keyword labels variables and functions that should be accessible from outside the current module.\n* **import** allows the import of functionality from other modules.\n\n\nBefore modules, a variable declared outside any function was a global variable. In modules, a variable declared outside any function is hidden and not available to other modules unless it is explicitly exported.\n\nTo make import/export work, browsers need **<script type="module"\\> **and for NodeJS \\- set **"type": "module"** in the **package\\.json** or use the **.mjs** extension\\.\n\n**Example 1:**\nFor instance, if we have a file** sayHi\\.mjs** exporting a function:\n```\n// \ud83d\udcc1 sayHi.mjs\nexport function sayHi(user) {\n  console.log(`Hello, ${user}!`);\n}\n\n```\n\n\u2026Then another file may import and use it:\n```\n// \ud83d\udcc1 main.mjs\nimport {sayHi} from \'./sayHi.mjs\';\n\nconsole.log(sayHi); //=> function...\nsayHi(\'John\'); //=> Hello, John!\n\n```\n\n**Example 2:**\n**circle\\.mjs**\n```\n// "circle" module scope\nconst pi = 3.14159;\n\nconsole.log(pi); //=> 3.14159\n\n// Usage of pi\n\n```\n\n**main\\.mjs**\n```\nimport \'./circle\';\n\nconsole.log(pi); //=> ReferenceError: pi is not defined\n\n```\n\nThe variable pi is **not accessible** outside of circle module \\(unless explicitly exported using export\\).\n\n**Refference**:\n* [https://hacks.mozilla.org/2018/03/es\\-modules\\-a\\-cartoon\\-deep\\-dive/](https://hacks.mozilla.org/2018/03/es-modules-a-cartoon-deep-dive/)\n* [https://developer.mozilla.org/en\\-US/docs/Web/JavaScript/Guide/Modules](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Guide/Modules)\n* [https://javascript.info/modules\\-intro](https://javascript.info/modules-intro)\n\n'}]},{key:"a3055667-8217-484e-aae8-728cab93135c",parentKey:"d40f6cf0-dcae-4162-8b2f-d89edd7e3212",subKeys:[],collapse:!1,style:null,blocks:[{type:"CONTENT",data:"for .. of"},{type:"DESC",data:"The **for\\-of** loop is similar to the for\\-in loop because it loops over iterable objects. It invokes a custom iteration hook with statements to be executed for the value of each distinct property of the object. Compared to the for\\-in loop, it is newer and automatically uses an iterator.\n\n**Syntax:**\n```\nfor (let i of object) {\n    console.log(i);\n}\n\n```\nIf the object is an array, the for\\-of loop will **print out the values** of the array\u2019s indexes in order.\n\n**example 1:**\n```\nlet arr = [3, 5, 7];\n\nfor (let i of arr) {\n  console.log(i);\n}\n\n// output:\n// 3\n// 5\n// 7\n\n```\n\n**example 2:**\n```\nconst items = {\n  'first': new Date(),\n  'second': 2,\n  'third': 'test'\n}\n\nfor (let i of items) {\n  console.log(i);\n}\n\n// Output: TypeError: items is not iterable\n\n```\n\n**example 3: **And it gets all the **values** of all postivie index\n```\nconst array = [1, 2, 3, { id: 254, name: \"Chris\" }]\n\narray[5] = 5\narray[-6] = 6;\narray[\"name\"] = \"Lars\"\n\nfor (let value of array)\n    console.log(`Value: ${value}`);\n    \n// Output:\n// Value: 1\n// Value: 2\n// Value: 3\n// Value: [object Object]\n// Value: undefined\n// Value: 5\n\n```\n"}]},{key:"3993010c-2552-4c4e-ad7e-195cb2bbc7e5",parentKey:"5df46409-6d87-4099-85c8-664e7e703c8e",subKeys:[],collapse:!1,style:null,blocks:[{type:"CONTENT",data:"Constructor\nfunction"},{type:"DESC",data:'**Constructor function** can also be used to create objects in JS. It is useful for creating multiple objects. And it is an old ES style convention not recommended anymore.\n\n```\nfunction Person(firstName, lastName) {\n    this.firstName = firstName;\n    this.lastName = lastName;\n}\n\nPerson.prototype.print = function () {\n    console.log(`${this.firstName} ${this.lastName}`)\n}\n\nlet user1 = new Person("Jack", "Ryan")\nuser1.print(); //=> Jack Ryan\n\nlet user2 = new Person("Alice", "Martin")\nuser2.print(); //=> Alice Martin\n\n```\n'}]},{key:"a9f8d9be-7d66-4b3e-941d-429c02913ec5",parentKey:"f8750599-32db-4fb3-829e-0673887df2c2",subKeys:[],collapse:!1,style:null,blocks:[{type:"CONTENT",data:"Arrow\nfunction"},{type:"DESC",data:'An **arrow function** is defined using a pair of parenthesis that contains the list of parameters \\(param1, param2, ..., paramN\\), followed by a fat arrow =\\> and a pair of curly braces \\{...\\} that delimits the body statements.\n\n**example 1:**\n```\nconst square = (value) => {\n  return value * value\n}\nsquare(10); // output: "100"\n\n```\n\n**example 2:**\n* When the arrow function has only one parameter, the pair of parentheses can be omitted. When it contains a single statement, the curly braces and return can be omitted too.\n\n```\nconst square = value => value * value;\nsquare(10); // output: "100"\n\n```\n\n**example 3:**\n* when it takes no parameters\n\n```\nconst currentDate = () => console.log(new Date().toString().slice(0,15));\ncurrentDate(); // output: "Wed Jul 21 2021"\n\nconst currentTime = _ => console.log(new Date().toTimeString().slice(0, 8));\ncurrentTime(); // output: "19:08:58"\n\n```\n\n**example 4:**\n```\nlet add = (a, b) => a + b;\n\nconst result = add(2, 2);\nconsole.log(result); // output: "4"\n\n```\n'}]},{key:"5a194e70-b4a3-49f9-8e9a-64f0b9456ede",parentKey:"862cc5cf-2295-40f3-8bfb-bf1832c716e0",subKeys:[],collapse:!1,style:null,blocks:[{type:"CONTENT",data:"Methods"}]},{key:"092ca5f2-7268-4e31-b7bd-d9aa2c3fd8d0",parentKey:"183f002c-a1ac-4ef6-bd23-2495e98fefaa",subKeys:[],collapse:!1,style:null,blocks:[{type:"CONTENT",data:"Encapsulation"}]},{key:"265fb26e-4629-437b-8e64-aa7ce30ae47a",parentKey:"252c6937-bd93-4233-90cb-333938667c72",subKeys:[],collapse:!1,style:null,blocks:[{type:"CONTENT",data:"let"},{type:"DESC",data:"Value stored in it can be reassigned. Let is **blocked** scope \\(will see more of that in **Scopes & Closures**\\).\n\nTo declare or create a varaible\n```\nlet message;\n\n```\n\nAssign a data into it by using the assignment operator =:\n```\nmessage = 'Hello';\n\n```\n\nCombine the variable _declaration_ and _assignment_ into a single line\n```\nlet message = 'Hello!';\n\n```\n\nDeclare multiple variables in one line\n```\nlet user = 'John', age = 25, message = 'Hello';\n\n```\n\nReassigning a value\n```\nlet userName = \"Bruce\"\nuserName = \"Wayne\"\n\n```\n"}]},{key:"c1f96a01-5d07-4fd0-99fb-210490cb6f5a",parentKey:"dc0c93cb-0c05-40a0-9bd6-e6c1870c5613",subKeys:[],collapse:!1,style:null,blocks:[{type:"CONTENT",data:"concat"}]},{key:"06067a6c-cfd1-4faf-8aa6-5eb827f3d020",parentKey:"44213600-22aa-4972-aa99-eec27b840064",subKeys:["c92fd58b-57a4-4c72-897a-d1c394f9a8aa","1590d94a-ef69-4f89-9e2d-a3de018ca2d4","5c6ad5d4-eb49-479c-be03-0b8d8e805cee","4567082c-b57b-45f4-8c04-168f9a2f123f","b31ac6cb-b3c3-4dd2-83a1-6b5b7466d048","b5c8a0d0-01e6-4922-a8f0-132d5442bb1d","e784d8b5-f79b-469c-8fa4-e7305d4405b3"],collapse:!1,style:null,blocks:[{type:"CONTENT",data:"Primitive"},{type:"DESC",data:'All primitive values are **immutable**, means \u201c**unchangeable**\u201d. Read\\-only. The variable may be reassigned a new value, but the existing value can not be changed in the ways that objects, arrays, and functions can be altered.\n\n**Example 1:**\n```\nExample 1:\nlet str = \'hello\';\nconsole.log(str[0]); // "h"\nstr[0] = \'j\';\nconsole.log(str); // "hello"\n\n```\n\n**Example 2:**\nhttps://github.com/getify/You\\-Dont\\-Know\\-JS/blob/2nd\\-ed/get\\-started/apA.md\n```\nlet myName = "Kyle";\nlet yourName = myName;\nmyName = "Frank";\nconsole.log(myName); // "Frank"\nconsole.log(yourName); // "Kyle"\n\n```\n**yourName** wasn\'t affected by the re\\-assignment of **myName** to "Frank"? That\'s because each variable holds its own copy of the value.\n\n**Example 3:**\n```\n// Using a string method doesn\'t mutate the string\nvar bar = "baz";\nconsole.log(bar);               // baz\nbar.toUpperCase();\nconsole.log(bar);               // baz\n\n// Assignment gives the primitive a new (not a mutated) value\nbar = bar.toUpperCase();       // BAZ\n\n```\n\nFor more info \\- [https://developer.mozilla.org/en\\-US/docs/Glossary/Primitive](https://developer.mozilla.org/en-US/docs/Glossary/Primitive)'}]},{key:"1590d94a-ef69-4f89-9e2d-a3de018ca2d4",parentKey:"06067a6c-cfd1-4faf-8aa6-5eb827f3d020",subKeys:[],collapse:!1,style:null,blocks:[{type:"CONTENT",data:"BigInt"},{type:"DESC",data:'In JavaScript, the \u201c**number**\u201d type cannot represent integer values larger than \\(253\\-1\\) \\(that\u2019s 9007199254740991\\), or less than \\-\\(253\\-1\\) for negatives. It\u2019s a technical limitation caused by their internal representation.\n\n```\nconsole.log(typeof(22234234n)); //=> "bigint"\n\n```\n\nA BigInt value is created by appending n to the end of an integer\n```\nconst bigInt = 1234567890123456789012345678901234567890n; // the "n" at the end means it\'s a BigInt\n\n```\n\nBigInt numbers are rarely needed'}]},{key:"3cad2294-2687-43b8-bd7d-1ca3ebd67acd",parentKey:"1340cde2-dcef-48de-a00e-1ce996ecf377",subKeys:[],collapse:!1,style:null,blocks:[{type:"CONTENT",data:"Logical\noperators"},{type:"DESC",data:'**Logical operators** are typically used with Boolean \\(logical\\) values; when they are, they return a Boolean value. There are four logical operators in JS\n* \\|\\| \\(OR\\)\n* && \\(AND\\)\n* \\! \\(NOT\\)\n* ?? \\(Nullish Coalescing\\)\n\n\n### \\|\\| \\(OR\\)\n\n* Returns true if **either** operand is true; if both are false, returns false.\n\n```\nconsole.log(true || true);   //=> true\nconsole.log(false || true);  //=> true\nconsole.log(true || false);  //=> true\nconsole.log(false || false); //=> false\n\n\nif (1 || 0) { // works just like if( true || false )\n    console.log(\'truthy!\'); //=> truthy!\n}\n\nlet hour = 9;\nif (hour < 10 || hour > 18) {\n    console.log(\'The office is closed.\'); //=> The office is closed.\n}\n\n```\n* OR \\|\\| operator is the called \u201c**short\\-circuit**\u201d evaluation \\- It means that \\|\\| processes its arguments until the first truthy value is reached, and then the value is returned immediately, without even touching the other argument.\n\n```\ntrue || console.log("not printed");\nfalse || console.log("printed"); //=> printed\n\n```\n\n\n### && \\(AND\\)\n\n* Returns true if **both** operands are true; otherwise, returns false.\n\n```\nconsole.log(true && true);   //=> true\nconsole.log(false && true);  //=> false\nconsole.log(true && false);  //=> false\nconsole.log(false && false); //=> false\n\nlet hour = 12;\nlet minute = 30;\nif (hour == 12 && minute == 30) {\n    console.log(\'The time is 12:30\'); //=> The time is 12:30\n}\n\nif (1 && 0) { // evaluated as true && false\n    console.log("won\'t work, because the result is falsy");\n}\n\n```\n\n\n### Short\\-circuit evaluation\n\nAs logical expressions are evaluated left to right, they are tested for possible "short\\-circuit" evaluation using the following rules:\n\n* false && anything is short\\-circuit evaluated to false.\n* true \\|\\| anything is short\\-circuit evaluated to true.\n\n\n### \\! \\(NOT\\)\n\n* Returns the inverse value.\n\n```\nconsole.log(!true); //=> false\nconsole.log(!0); //=> true\n\nconsole.log(!!"non-empty string"); //=> true\nconsole.log(!!null); //=> false\n\nconsole.log(Boolean("non-empty string")); //=> true\nconsole.log(Boolean(null)); //=> false\n\n```\n'}]},{key:"9eaa4c3f-edb8-487d-b332-ad14665991f9",parentKey:"1340cde2-dcef-48de-a00e-1ce996ecf377",subKeys:[],collapse:!1,style:null,blocks:[{type:"CONTENT",data:"Assignment\noperators"},{type:"DESC",data:"An **assignment operator** assigns a value to its left operand based on the value of its right operand. The simple assignment operator is equal \\(=\\), which assigns the value of its right operand to its left operand. That is, x = y assigns the value of y to x.\n\n| **Name** | **Shorthand operator** | **Meaning** |\n|:--- |:--- |:--- |\n| Assignment | x = y | x = y |\n| Addition assignment | x \\+= y | x = x \\+ y |\n| Subtraction assignment | x \\-= y | x = x \\- y |\n| Multiplication assignment | x \\*= y | x = x \\* y |\n| Division assignment | x /= y | x = x / y |\n| Remainder assignment | x %= y | x = x % y |\n| Exponentiation assignment | x \\*\\*= y | x = x \\*\\* y |\n| Left shift assignment | x <<= y | x = x << y |\n| Right shift assignment | x \\>\\>= y | x = x \\>\\> y |\n| Unsigned right shift assignment | x \\>\\>\\>= y | x = x \\>\\>\\> y |\n| Bitwise AND assignment | x &= y | x = x & y |\n| Bitwise XOR assignment | x ^= y | x = x ^ y |\n| Bitwise OR assignment | x \\| = y | x = x \\| y |\n| Logical AND assignment | x &&= y | x && \\(x = y\\) |\n| Logical OR assignment | x \\| \\| = y | x \\| \\| \\(x = y\\) |\n| Logical nullish assignment | x ??= y | x ?? \\(x = y\\) |\n**example**\n```\nconst x = 10;\nlet y = x;\nconsole.log(y); //=> 10\n\nlet a = null;\nlet b = 100;\nconsole.log(a) //=> null\na ??= b; // operator only assigns if a is nullish\nconsole.log(a) //=> 100\n\n```\n"}]},{key:"65199906-ca55-4ae8-bd9f-a4a08cbc2432",parentKey:"d40f6cf0-dcae-4162-8b2f-d89edd7e3212",subKeys:[],collapse:!1,style:null,blocks:[{type:"CONTENT",data:"while"},{type:"DESC",data:'The **while** loop loops through a block of code as long as the specified condition evaluates to true. As soon as the condition fails, the loop is stopped.\n\n**Syntax:**\n\n```\nwhile(condition) {\n    // as long as the condition is true\n    // code in this block will be executed\n}\n\n```\n\n**example 1:**\n\n```\nlet count = 1;\nwhile(count <= 5) {    \n    console.log("The number is " + count);\n    count++;\n}\n\n// Output:\n// The number is 1\n// The number is 2\n// The number is 3\n// The number is 4\n// The number is 5\n\n```\n\n**example 2: **skipping current execution of loop using **continue** statement\n\n```\nlet count = 1;\nwhile(count <= 10) {\n    if(count%2===0){\n        count++;\n        continue;\n    }    \n    console.log("The number is " + count);\n    count++;\n}\n\n// Output:\n// "The number is 1"\n// "The number is 3"\n// "The number is 5"\n// "The number is 7"\n// "The number is 9"\n\n```\n\n**example 3**: terminating current execution flow of the loop using **break** statement\n\n```\nlet count = 1;\nwhile(true) {\n    if(count===10){\n        break;\n    }    \n    console.log("The number is " + count);\n    count++;\n}\n\n// Output:\n// "The number is 1"\n// "The number is 2"\n// "The number is 3"\n// "The number is 4"\n// "The number is 5"\n// "The number is 6"\n// "The number is 7"\n// "The number is 8"\n// "The number is 9"\n\n```\n'}]},{key:"f548ba3e-55f6-484d-8289-858f8fd28289",parentKey:"4567082c-b57b-45f4-8c04-168f9a2f123f",subKeys:[],collapse:!1,style:null,blocks:[{type:"CONTENT",data:""}]},{key:"35cf3ece-a21e-4a8e-a8f8-d2b24a2b742d",parentKey:"08aaf5bf-5222-4d4c-bd8d-2267d2f81433",subKeys:[],collapse:!1,style:null,blocks:[{type:"CONTENT",data:"Global scope"},{type:"DESC",data:'The scope of a variable declared with **var** is its current execution context and closures thereof, which is either the enclosing function and functions declared within it, or, for variables declared outside any function, global. \n\nYou can also assign a value to a variable For example, **x = 42**. This form creates an **undeclared global variable**. \n\n```\nvar x = 0; // Declares x within file scope, then assigns it a value of 0.\n\nconsole.log(typeof z); // "undefined", since z doesn\'t exist yet\n\nfunction a() {\n    var y = 2; // Declares y within scope of function a, then assigns it a value of 2.\n\n    console.log(x, y); // 0 2\n\n    function b() {\n        x = 3; // Assigns 3 to existing file scoped x.\n        y = 4; // Assigns 4 to existing outer y.\n        z = 5; // Creates a new global variable z, and assigns it a value of 5.\n        // (Throws a ReferenceError in strict mode.)\n    }\n\n    b(); // Creates z as a global variable.\n    console.log(x, y, z); // 3 4 5\n}\n\na(); // Also calls b.\nconsole.log(x, z);     //=> 3 5\nconsole.log(typeof y); //=> "undefined", as y is local to function a\n\n```\n\n**Note: window** and **document**, for example, are global variables supplied by the **browser**. In a **Node** environment, you can access **global** object as a global variable.\n\n**Refference:**\n* [https://developer.mozilla.org/en\\-US/docs/Web/JavaScript/Reference/Statements/var](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Statements/var)\n* https://developer.mozilla.org/en\\-US/docs/Web/JavaScript/Guide/Grammar\\_and\\_types#variable\\_scope\n\n'}]},{key:"aea8f33e-b4a3-4139-a406-d5fa77431698",parentKey:"49780f87-17f7-4f90-a761-6ddf6ce8e1ca",subKeys:[],collapse:!1,style:null,blocks:[{type:"CONTENT",data:"callback hell"},{type:"DESC",data:"Callback hell is also reffered as pyramid of doom. And callback hell is almost nothing to do with the nesting/indentation, if you look at example 1 and example 2, both suffers callback hell problem. **Inversion of Control \\- ** it is the notion of having code under your control in one part of the program, then handing control over to a callback in another part of the program\n\n* **example 1:**\n\n```\nsetTimeout(function () {\n    console.log('1');\n    setTimeout(function () {\n        console.log('2');\n        setTimeout(function () {\n            console.log('3');\n        }, 1000)\n    }, 1000)\n}, 1000)\n\n//=> 1\n//=> 2\n//=> 3\n\n```\n\n* **example 2:**\n\n```\nfunction one(callback) {\n    console.log('1');\n    setTimeout(callback, 1000);\n}\n\nfunction two(callback) {\n    console.log('2');\n    setTimeout(callback, 1000);\n}\n\nfunction three() {\n    console.log('3');\n}\n\none(function () {\n    two(three);\n});\n\n//=> 1\n//=> 2\n//=> 3\n\n```\n"}]},{key:"5499f8cd-26d8-4796-acc9-b138109bcea0",parentKey:"e784d8b5-f79b-469c-8fa4-e7305d4405b3",subKeys:[],collapse:!1,style:null,blocks:[{type:"CONTENT",data:""}]},{key:"5c6ad5d4-eb49-479c-be03-0b8d8e805cee",parentKey:"06067a6c-cfd1-4faf-8aa6-5eb827f3d020",subKeys:[],collapse:!1,style:null,blocks:[{type:"CONTENT",data:"String"},{type:"DESC",data:'A string in JavaScript must be surrounded by quotes.\n\n```\nconsole.log(typeof("hello")); //=> "string"\nconsole.log(typeof(\'hello\')); //=> "string"\nconsole.log(typeof(`hello`)); //=> "string"\n\n```\n\n```\nlet str = "Hello";\nlet str2 = \'Single quotes are ok too\';\nlet phrase = `can embed another ${str}`;\n\nconsole.log("Str:", str, "+", "Str2:", str2, "+", "Phrase:", phrase);\n//=> Str: Hello + Str2: Single quotes are ok too + Phrase: can embed another Hello\n\n```\n\nIn JavaScript, there are 3 types of quotes.\n```\nDouble quotes: "Hello".\nSingle quotes: \'Hello\'.\nBackticks: `Hello`.\n\n```\n'}]},{key:"4e7eeab5-6321-43c0-9350-31a523a94d8d",parentKey:"89cf71a0-0ca8-45ff-b136-62ffbf6ff778",subKeys:[],collapse:!1,style:null,blocks:[{type:"CONTENT",data:"order of\nprecedence"},{type:"DESC",data:"1. Was the function called with 'new' ?\n1. Was the fucntion called with 'call' or 'apply' specifying an explicit this ?\n1. Was the function called via a containing/owing object \\(context\\) ?\n1. Default, global object \\(expect strict mode\\)\n\n"}]},{key:"e94db39f-5a03-4a4c-95ab-dec899802e63",parentKey:"96d2f138-986b-4286-b6da-755624dba9c4",subKeys:[],collapse:!1,style:null,blocks:[{type:"CONTENT",data:"Creating & \nconsuming"},{type:"DESC",data:"### Creating a Promise\n\nInitialize a promise with the _**new Promise**_ syntax, and you must initialize it with a function. The function that gets passed to a promise has resolve and reject parameters. The resolve and reject functions handle the success and failure of an operation, respectively."}]},{key:"c92fd58b-57a4-4c72-897a-d1c394f9a8aa",parentKey:"06067a6c-cfd1-4faf-8aa6-5eb827f3d020",subKeys:[],collapse:!1,style:null,blocks:[{type:"CONTENT",data:"Number"},{type:"DESC",data:'The number type represents both **integer** and **floating point** numbers\\.\n\n**Example 1: **Checking the type\n```\nconsole.log(typeof(2)); // "number"\nconsole.log(typeof(-200)); // "number"\nconsole.log(typeof(100.554)); // "number"\nconsole.log(typeof(-99.99)); // "number"\n\n```\n\n```\nlet age = 35\nconst gravity = 9.81  // const for non-changing values\nlet mass = 72         // mass in Kilogram\nconst PI = 3.14       // pi a geometrical constant\nconst boilingPoint = 100 // temperature in oC, boiling point of water which is a constant\nconst bodyTemp = 37      // oC average human body temperature, which is a constant\n\nconsole.log(age, gravity, mass, PI, boilingPoint, bodyTemp) //=> 35 9.81 72 3.14 100 37\n\n```\n'}]},{key:"ea952fa5-a291-436e-85a1-8cda065a4432",parentKey:"1340cde2-dcef-48de-a00e-1ce996ecf377",subKeys:[],collapse:!1,style:null,blocks:[{type:"CONTENT",data:"String\noperators"},{type:"DESC",data:"The **concatenation operator** \\(\\+\\) concatenates two string values together, returning another string that is the union of the two operand strings.\n\n**example:**\n```\nconsole.log('my ' + 'string'); //=> console logs the string \"my string\".\n\nlet myString = 'alpha';\nmyString += 'bet';\nconsole.log(myString); //=> alphabet\n\n```\n"}]},{key:"12256f82-0a50-4408-8a76-525865cbad4b",parentKey:"5c0d4a18-5da2-4f3f-9752-4912ae3df225",subKeys:[],collapse:!1,style:null,blocks:[{type:"CONTENT",data:"delete"}]},{key:"69e69b35-9400-4fb3-aa5e-e9315b4a6eba",parentKey:"08aaf5bf-5222-4d4c-bd8d-2267d2f81433",subKeys:[],collapse:!1,style:null,blocks:[{type:"CONTENT",data:"Closure"},{type:"DESC",data:"A **closure** is the combination of a function bundled together \\(enclosed\\) with references to its surrounding state \\(the lexical environment\\). In other words, a closure gives you access to an outer function\u2019s scope from an inner function. In JavaScript, closures are created every time a function is created, at function creation time. In JavaScript, closures are created every time a function is created, at function creation time.\n\n_**Closure is when a function 'remembers' its lexical scope even when the function is executed outside that lexical scope.**_\n\nThe closure **captures** variables from lexical environment.\n```\nfunction outerFunc() {\n  let outerVar = 'I am outside!';\n\n  function innerFunc() {\n    console.log(outerVar);\n  }\n\n  return innerFunc; // Even though this function is being returned it still remembers lexical environment\n}\n\nconst myInnerFunc = outerFunc();\nmyInnerFunc(); //=> \"I am outside!\"\n\n```\nNow **innerFunc\\(\\)** is executed outside of its lexical scope. And what\u2019s important. **innerFunc\\(\\)** still has access to **outerVar** from its **lexical scope**, _even being executed outside of its lexical scope_.\n\nIn other words, **innerFunc\\(\\) **closes over \\(a.k.a. captures, remembers\\) the variable outerVar from its lexical scope.\n\n**Refference:**\n* [https://developer.mozilla.org/en\\-US/docs/Web/JavaScript/Closures](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Closures)\n* https://javascript.info/closure#lexical\\-environment\n\n"}]},{key:"e6406abc-7710-4f4d-9b0d-3b40d9b2d0a7",parentKey:"1f66701b-72a2-45be-abad-d14ba71a78e0",subKeys:[],collapse:!1,style:null,blocks:[{type:"CONTENT",data:"Recursion"}]},{key:"131c9433-90a2-40b8-9e02-b774761c2456",parentKey:"ccf815c4-e6ad-4cbb-9427-cca701828c6c",subKeys:["862cc5cf-2295-40f3-8bfb-bf1832c716e0","183f002c-a1ac-4ef6-bd23-2495e98fefaa"],collapse:!1,style:'{"contentStyle":{"background":"#f1919f","borderStyle":"none"},"linkStyle":{"lineType":"curve"}}',blocks:[{type:"CONTENT",data:"Object Oriented\nProgramming"},{type:"DESC",data:"**Object\\-oriented programming** \\(OOP\\) is a programming paradigm based on the concept of \"**objects**\", which can contain _data_ and **code**: \n* **data,** in the form of fields \\(often known as attributes or properties\\), and \n* **code**, in the form of procedures \\(often known as methods\\).\n\n\nJS is _Prototype\\-based programming_ is a style of object\\-oriented programming in which classes are not explicitly defined, but rather derived by adding _properties_ and _methods_ to an instance of another class or, less frequently, adding them to an empty object. In simple words, this type of style allows the creation of an object without first defining its class.\n* Every single 'object' is built by a constructor call.\n* A constructor makes an object linked to its own prototype.\n\n\nFor more details, refer to **\\_\\_proto\\_\\_ and prototype** of Functions"}]},{key:"e1994f06-f679-4c5f-9197-90f6f2a551e7",parentKey:"7b11654a-e9d3-45ba-a1aa-afca29ff5f18",subKeys:["49780f87-17f7-4f90-a761-6ddf6ce8e1ca","96d2f138-986b-4286-b6da-755624dba9c4"],collapse:!1,style:null,blocks:[{type:"CONTENT",data:"callback &\npromises &\nasync"},{type:"DESC",data:"JS is a **single\\-threaded programming language** with a **synchronous** **execution** model that processes one operation after another, it can only process one statement at a time. However, an action like requesting data from an API can take an indeterminate amount of time, depending on the size of data being requested, the speed of the network connection, and other factors. If API calls were performed in a synchronous manner, the browser would not be able to handle any user input, like scrolling or clicking a button, until that operation completes. This is known as _blocking_.\n\nIn order to prevent blocking behavior, the browser environment has many Web APIs \\(Node APIs\\) that JavaScript can access that are asynchronous, meaning they can run in parallel with other operations instead of sequentially. This is useful because it allows the user to continue using the browser normally while the asynchronous operations are being processed.\n\nOne such function is **setTimeout** and it belongs to the Web API \\- [https://developer.mozilla.org/en\\-US/docs/Web/API](https://developer.mozilla.org/en-US/docs/Web/API) and Node API \\- [https://nodejs.org/api/all.html](https://nodejs.org/api/all.html)\n\n**Refference**:\n* Tania Rascia \\- [https://www.digitalocean.com/community/tutorials/understanding\\-the\\-event\\-loop\\-callbacks\\-promises\\-and\\-async\\-await\\-in\\-javascript](https://www.digitalocean.com/community/tutorials/understanding-the-event-loop-callbacks-promises-and-async-await-in-javascript)\n\n\n### Concurrency vs Parallelism:\n\n* Concurrency is the task of running and managing the multiple computations at the same time.\n* Parallelism is the task of running multiple computations simultaneously.\n\n\n**JavaScript has a concurrency model based on an event loop.**\n\nFor more details, \n* [http://tutorials.jenkov.com/java\\-concurrency/concurrency\\-vs\\-parallelism.html](http://tutorials.jenkov.com/java-concurrency/concurrency-vs-parallelism.html)\n* [https://developer.mozilla.org/en\\-US/docs/Web/JavaScript/EventLoop](https://developer.mozilla.org/en-US/docs/Web/JavaScript/EventLoop)\n\n"}]},{key:"245b9e77-ccdc-49b6-8a0a-838244d1de2e",parentKey:"c0743415-e5c5-48da-a6ec-a2d0571da863",subKeys:[],collapse:!1,style:null,blocks:[{type:"CONTENT",data:"try/catch/finally"},{type:"DESC",data:"* The _**try**_ statement consists of a _**try\\-block**_, which contains one or more statements. _\\{\\} _must always be used, even for single statements. \n\n\n* A _**catch\\-block**_ contains statements that specify what to do if an exception is thrown in the try\\-block. If any statement within the try\\-block \\(or in a function called from within the try\\-block\\) throws an exception, control is immediately shifted to the catch\\-block. If no exception is thrown in the try\\-block, the catch\\-block is skipped.\n\n\n* The _**finally\\-block**_ will always execute after the try\\-block and catch\\-block\\(s\\) have finished executing. It always executes, regardless of whether an exception was thrown or caught.\n\n\nAt least one catch\\-block, or a finally\\-block, must be present. This gives us three forms for the try statement:\n* try\\...catch\n* try\\...finally\n* try\\...catch...finally\n\n\n\n### try\\...catch\n\n* When a catch\\-block is used, the catch\\-block is executed when any exception is thrown from within the try\\-block.\n\n```\ntry {\n    throw new Error('myException'); // generates an exception\n} catch (e) {\n    console.error(e);\n}\n\n```\n\n### try\\...finally\n\n* the finally\\-block executes regardless of whether an exception is thrown\n\n```\ntry {\n    console.log(\"Opening a file and doing some operations\");\n} finally {\n    console.log(\"Closing all the files and used resources\");\n}\n\n```\n\n\n### try\\...catch...finally\n\n```\ntry {\n    console.log('try');\n    BAD_CODE();\n} catch (err) {\n    console.error('catch');\n} finally {\n    console.log('finally');\n}\n\n```\n\nFor more info,\n* [https://developer.mozilla.org/en\\-US/docs/Web/JavaScript/Reference/Statements/try...catch](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Statements/try...catch)\n\n"}]},{key:"bae54fe2-5e3a-40ec-8f36-4d7df7fd5a33",parentKey:"7b11654a-e9d3-45ba-a1aa-afca29ff5f18",subKeys:[],collapse:!1,style:null,blocks:[{type:"CONTENT",data:"Event\nloop"},{type:"DESC",data:"JS is a **single\\-threaded programming language** with a **synchronous** **execution** model that processes one operation after another, it can only process one statement at a time.\n\nThe event loop is what allows to perform non\\-blocking I/O operations \u2014 despite the fact that JavaScript is single\\-threaded.\n\nFor more info refer,\n* [https://www.youtube.com/watch?v=8aGhZQkoFbQ](https://www.youtube.com/watch?v=8aGhZQkoFbQ)\n* [https://developer.mozilla.org/en\\-US/docs/Web/JavaScript/EventLoop](https://developer.mozilla.org/en-US/docs/Web/JavaScript/EventLoop)\n* [https://nodejs.org/en/docs/guides/event\\-loop\\-timers\\-and\\-nexttick/](https://nodejs.org/en/docs/guides/event-loop-timers-and-nexttick/)\n\n"}]},{key:"97c73d77-1496-431f-93e6-5aebcfbf8020",parentKey:"1f66701b-72a2-45be-abad-d14ba71a78e0",subKeys:[],collapse:!1,style:null,blocks:[{type:"CONTENT",data:"Referential\nTransparency"}]},{key:"d051afcf-8e00-4760-8d65-783421039068",parentKey:"862cc5cf-2295-40f3-8bfb-bf1832c716e0",subKeys:[],collapse:!1,style:null,blocks:[{type:"CONTENT",data:"Classes"}]},{key:"af72cd3d-9be6-4420-9c07-1a80e2c62e2d",parentKey:"5c0d4a18-5da2-4f3f-9752-4912ae3df225",subKeys:[],collapse:!1,style:null,blocks:[{type:"CONTENT",data:"forEach"}]},{key:"50256453-3cf5-4adf-85c0-562970b46468",parentKey:"08aaf5bf-5222-4d4c-bd8d-2267d2f81433",subKeys:["c007d461-f421-48fd-9566-ac88d298bbb8"],collapse:!0,style:null,blocks:[{type:"CONTENT",data:"Block scope"},{type:"DESC",data:'**Block scope** \\- A code block in JavaScript defines a scope for variables declared using **let** and **const **within a curly brace **\\{\\}. **it can be accessed only within that curly brace.\n\n**Example 1:**\n```\nif (true) {\n  // "if" block scope\n  const message = \'Hello\';\n  let name = "Chris"\n  console.log(message); // \'Hello\'\n  console.log(name); // \'Chris\'\n}\nconsole.log(message); //=> throws ReferenceError\nconsole.log(name); //=> throws ReferenceError\n\n```\n\n**Example 2:**\n```\nlet fullMoon = true;\n\n// Initialize a global variable\nlet species = "human";\n\nif (fullMoon) {\n  // Initialize a block-scoped variable\n  let species = "werewolf";\n  console.log(`${species}`); //=> "werewolf"\n}\n\nconsole.log(`${species}`); //=> "human"\n\n```\n\n**Example 3: var is not block scoped**\n```\nif (true) {\n  // "if" block scope\n  var count = 0;\n  console.log(count); //=> 0\n}\nconsole.log(count); //=> 0\n\n```\n\nA code block does not create a scope for var variables, but a function body does.\n\n**Refference:**\n* [https://developer.mozilla.org/en\\-US/docs/Web/JavaScript/Reference/Statements/block](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Statements/block)\n\n'}]},{key:"3dc1c815-02b4-4097-ae29-578920b3a065",parentKey:"9b52509a-42df-4ba8-9200-29ec192e314a",subKeys:["c261d5f7-915b-4abd-b3d1-47ef335bc8ff","28bcdae2-e48d-47e3-bc28-5f6afecfef7d","ed43d880-a946-4d1f-8a16-fc59a0662188","a6c4854c-be38-4f7f-9866-a0025b236e65","af8c79c0-2a79-40e8-a7ff-5edf08399e5b"],collapse:!1,style:null,blocks:[{type:"CONTENT",data:"Map &\nmethods"}]},{key:"08aaf5bf-5222-4d4c-bd8d-2267d2f81433",parentKey:"7b11654a-e9d3-45ba-a1aa-afca29ff5f18",subKeys:["50256453-3cf5-4adf-85c0-562970b46468","7662833c-7ece-4668-a37b-4e11820503b4","a44085f3-06c0-4910-9787-af5b20c0709b","4c35fca7-ac9c-4475-99ab-d77f97120360","35cf3ece-a21e-4a8e-a8f8-d2b24a2b742d","84650864-61f6-4e20-b87d-ed779ffa7d20","69e69b35-9400-4fb3-aa5e-e9315b4a6eba","d1972f4f-fd4a-43b1-8575-480a88d66898"],collapse:!1,style:null,blocks:[{type:"CONTENT",data:"Scopes & \nClosure"},{type:"DESC",data:'**Scope** is **current context of execution**. The context in which values and expressions are "visible" or can be referenced. If a variable or other expression is not "in the current scope," then it is unavailable for use. Scopes can also be layered in a hierarchy, so that child scopes have access to parent scopes, but not vice versa.\n\n### Difference Between var, let, and const\n\n| **Keyword** | **Scope** | **Hoisting** | **Can Be Reassigned** | **Can Be Redeclared** |\n|:---:|:---:|:---:|:---:|:---:|\n| var | Function scope | Yes | Yes | Yes |\n| let | Block scope | No | Yes | No |\n| const | Block scope | No | No | No |\n\n**Reference** \n* [https://javascript.info/var](https://javascript.info/var)\n* [https://javascript.info/closure](https://javascript.info/closure)\n* [https://developer.mozilla.org/en\\-US/docs/Glossary/Scope](https://developer.mozilla.org/en-US/docs/Glossary/Scope)\n\n'}]},{key:"45b02b6a-06f9-4bad-80bb-14c97acb3b80",parentKey:"dc0c93cb-0c05-40a0-9bd6-e6c1870c5613",subKeys:[],collapse:!1,style:null,blocks:[{type:"CONTENT",data:"unshift"}]},{key:"10d9744a-f521-4bdf-8933-9c3fb1cfb2c8",parentKey:"3854fdd8-7de4-429c-b73d-2519cbf63781",subKeys:["d3f7bd55-fe91-45b2-b13e-ea98bb7710d9"],collapse:!0,style:null,blocks:[{type:"CONTENT",data:"else Statement"},{type:"DESC",data:'**if** statement can be extended with an **else** statement, which adds another block to run when the **if** condition doesn\u2019t pass.\n\n**Syntax:**\n```\nif (condition) {\n      //when condition is true this block will be executed\n      // no futher conditions will be checked\n} else {\n      //when a condition is false/failed this block will be executed\n}\n\n```\n\n**example:**\n```\nif ("cat" === "dog") {\n      console.log("if block executed");\n} else {\n      console.log("else block executed");\n}\n// Output: "else block executed"\n\n```\n'}]},{key:"3854fdd8-7de4-429c-b73d-2519cbf63781",parentKey:"7b11654a-e9d3-45ba-a1aa-afca29ff5f18",subKeys:["ffcc44e2-dc44-4241-8c15-ee2ab8c71588","10d9744a-f521-4bdf-8933-9c3fb1cfb2c8","9677e53a-05a4-4bd6-9010-f10826426bb6","62136ee4-f92e-49fb-b4de-03911ffe1da1"],collapse:!1,style:null,blocks:[{type:"CONTENT",data:"Conditional\nStatements"},{type:"DESC",data:'Conditional statements controls behavior and determines whether or not a piece of code can run.\n\n## Truthy\n\nIn JavaScript, a truthy value is a value that is considered true when encountered in a Boolean context. All values are truthy unless they are defined as falsy \\(i.e., except for false, 0, \\-0, 0n, "", null, undefined, and NaN\\).\n\n**Examples of truthy values** in JavaScript \\(which will be coerced to true in boolean contexts, and thus execute the if block\\)\n```\nif (true)\n    if ({})\n        if ([])\n            if (42)\n                if ("0")\n                    if ("false")\n                        if (new Date())\n                            if (-42)\n                                if (12n)\n                                    if (3.14)\n                                        if (-3.14)\n                                            if (Infinity)\n                                                if (-Infinity)\n                                                    console.log("Yay!!! Success")                                                    \n// Output - "Yay!!! Success"\n\n```\n\n\n## Falsy\n\nA falsy \\(sometimes written falsey\\) value is a value that is considered false when encountered in a Boolean context.\n\n**Complete list of JavaScript falsy values**\n| false | The keyword false. |\n|:--- |:--- |\n| 0 | The Number zero \\(so, also 0.0, etc., and 0x0\\). |\n| \\-0 | The Number negative zero \\(so, also \\-0.0, etc., and \\-0x0\\). |\n| 0n | The BigInt zero \\(so, also 0x0n\\). Note that there is no BigInt negative zero \u2014 the negation of 0n is 0n. |\n| "", | \'\', \\`\\` Empty string value. |\n| null | null \u2014 the absence of any value. |\n| undefined | undefined \u2014 the primitive value. |\n| NaN | NaN \u2014 not a number. |\n| document\\.all | Objects are falsy if and only if they have the \\[\\[IsHTMLDDA\\]\\] internal slot.That slot only exists in document.all and cannot be set using JavaScript. |\n'}]},{key:"4c35fca7-ac9c-4475-99ab-d77f97120360",parentKey:"08aaf5bf-5222-4d4c-bd8d-2267d2f81433",subKeys:["75e32173-5b17-4d07-b761-2003054bf186"],collapse:!0,style:null,blocks:[{type:"CONTENT",data:"lexical scope /\nScope chain"},{type:"DESC",data:"Lexical scope means every inner level can access its outer levels. And the scope is determined when the code is compiled.\n\n* **Scope chain** \\- When a variable is used in JavaScript, the JavaScript engine will try to find the variable\u2019s value in the current scope. If it could not find the variable, it will look into the outer scope and will continue to do so until it finds the variable or reaches global scope.\n\n\nIf it\u2019s still could not find the variable, it will either implicitly declare the variable in the global scope \\(if not in strict mode\\) or return an error.\n\n**Example 1:**\n```\nfunction run() {\n  // \"run\" function scope\n  const message = 'Run, Forrest, Run!';\n\n  if (true) {\n    // \"if\" code block scope\n    const friend = 'Bubba';\n    console.log(message); //=> 'Run, Forrest, Run!'\n  }\n\n  console.log(friend); //=> throws ReferenceError\n}\n\nrun();\n\n```\n\nThe scope contained within another scope is named _inner scope_. In the example, if code block scope is an inner scope of run\\(\\) function scope. The scope that wraps another scope is named _outer scope_. In the example, run\\(\\) function scope is an outer scope to if code block scope.\n\n**example 2:**\n```\n// global scope\nvar e = 10;\nfunction sum(a){\n  return function sum2(b){\n    return function sum3(c){\n      // outer functions scope\n      return function sum4(d){\n        // local scope\n        return a + b + c + d + e;\n      }\n    }\n  }\n}\n\nvar sum2 = sum(1);\nvar sum3 = sum2(2);\nvar sum4 = sum3(3);\nvar result = sum4(4);\nconsole.log(result) //=> 20\n\n```\n\n**example 3: \\(without strict mode\\)**\n* cheating lexical scope using **eval** , usage of eval is not recommended as it tends to slow down the execution\n\n```\nvar bar = 'bar';\n\nfunction foo(str) {\n    eval(str);\n    console.log(bar); //=> 42\n}\n\nfoo(\"var bar=42;\");\n\n```\n"}]},{key:"616b2d85-3831-4c1d-8582-a671725dcd94",parentKey:"1340cde2-dcef-48de-a00e-1ce996ecf377",subKeys:[],collapse:!1,style:null,blocks:[{type:"CONTENT",data:"Comparison\noperators"},{type:"DESC",data:"A **comparison operator** compares its operands and returns a logical value based on whether the comparison is true.\n\n| **Operator** | **Description** |\n|:--- |:--- |\n| Equal \\(==\\) | Returns true if the operands are equal |\n| Not equal \\(\\!=\\) | Returns true if the operands are not equal |\n| Strict equal \\(===\\) | Returns true if the operands are equal and of the same type. |\n| Strict not equal \\(\\!==\\) | Returns true if the operands are of the same type but not equal, or are of different type. |\n| Greater than \\(\\>\\) | Returns true if the left operand is greater than the right operand. |\n| Greater than or equal \\(\\>=\\) | Returns true if the left operand is greater than or equal to the right operand. |\n| Less than \\(<\\) | Returns true if the left operand is less than the right operand |\n| Less than or equal \\(<=\\) | Returns true if the left operand is less than or equal to the right operand. |\n**examples:**\n```\n// Equal (==)\nconsole.log(3 == '3'); //=> true\n\n// Not equal (!=)\nconsole.log(3 != 4); //=> true\n\n// Strict equal (===)\nconsole.log(3 === 3); //=> true\n\n// Strict not equal (!==)\nconsole.log(3 !== '3'); //=> true\n\n// Greater than (>)\nconsole.log(\"12\" > 2); //=> true\n\n// Greater than or equal (>=)\nconsole.log(3 >= 3); //=> true\n\n// Less than (<)\nconsole.log(\"2\" < 12); //=> true\n\n// Less than or equal (<=)\nconsole.log(4 <= 5); //=> true\n\n```\n"}]},{key:"84650864-61f6-4e20-b87d-ed779ffa7d20",parentKey:"08aaf5bf-5222-4d4c-bd8d-2267d2f81433",subKeys:[],collapse:!1,style:null,blocks:[{type:"CONTENT",data:"Hoisting"},{type:"DESC",data:'Hoisting is a JavaScript mechanism where variables and function declarations are **moved to the top of their scope** before code execution.\n\nWhen you execute a piece of JavaScript code, the JavaScript engine creates the **global execution context**. The global execution context has two phases: **creation** and **execution**. During the creation phase, the JavaScript engine moves the variable and function declarations to the top of your code. This feature is known as **_hoisting_** in JavaScript.\n\n## Variable hoisting\n\n* using **var**\n\n```\nconsole.log(counter); // undefined\nvar counter = 1;\n\n```\n\n* using **let**\n\n```\nconsole.log(counter); // "ReferenceError: Cannot access \'counter\' before initialization\nlet counter = 1;\n\n```\n\n\n## Function hoisting\n\n```\nlet x = 20,\n    y = 10;\n\nlet result = add(x,y);\n\nconsole.log(add) // \u0192 add(a, b){\n                 //  return a + b;\n                 //  }\n\nconsole.log(result); // 30\n\nfunction add(a, b){\nreturn a + b;\n}\n\n```\n\n\n## Function expressions\n\n```\nlet x = 20,\n    y = 10;\n\nlet result = add(x,y);\nconsole.log(result); // "TypeError: add is not a function\n\nvar add = function(x, y) {\nreturn x + y;\n}\n\n```\n\n```\nlet x = 20,\n    y = 10;\n\nlet result = add(x,y);\nconsole.log(result); // "TypeError: add is not a function\n\nvar add = (x, y) => x + y;\n\n```\n\nDuring the creation phase of the **global execution context**, the JavaScript Engine creates the **add** variable in the memory and initializes its value to **undefined**. When executing the following code, the add is undefined, hence, it isn\u2019t a function.'}]},{key:"89cf71a0-0ca8-45ff-b136-62ffbf6ff778",parentKey:"f8750599-32db-4fb3-829e-0673887df2c2",subKeys:["ddfd37cf-11f2-4176-9d67-f494b6ea0263","48db7a4d-51df-43d6-bbdc-5ee3889f5eba","36a2fcb8-8f7a-4b25-adbc-3be25f6f534a","c18b4495-0355-48f2-ab94-741434d7409b","4e7eeab5-6321-43c0-9350-31a523a94d8d"],collapse:!1,style:null,blocks:[{type:"CONTENT",data:"`this`\nkeyword"},{type:"DESC",data:'A function of **this** keyword behaves a little differently in JavaScript compared to other languages. It also has some differences between _strict mode_ and _non\\-strict mode_. **this **_\\_\\_is a reference to the object for which the function was called._\n\nTo understand **this** binding, we have to understand the call\\-site: the location in code where a function is called \\(not where it\'s declared\\). We must inspect the call\\-site to answer the question: what\'s this **this** a reference to?\n\n```\nfunction baz() {\n    // call-stack is: `baz`\n    // so, our call-site is in the global scope\n\n    console.log( "baz" );\n    bar(); // <=== call-site for `bar`\n}\n\nfunction bar() {\n    // call-stack is: `baz` -> `bar`\n    // so, our call-site is in `baz`\n\n    console.log( "bar" );\n    foo(); // <=== call-site for `foo`\n}\n\nfunction foo() {\n    // call-stack is: `baz` -> `bar` -> `foo`\n    // so, our call-site is in `bar`\n\n    console.log( "foo" );\n}\n\nbaz(); // <=== call-site for `baz`\n\n```\n\nThe _call\\-site_ determines which of 4 rules applies. And the four types of bindings are,\n* Default Binding\n* Implicit Binding\n* Explicit Binding\n* new Binding\n\n'}]},{key:"6608af00-8cd4-4fe1-bd0b-e18e12f4a684",parentKey:"5c0d4a18-5da2-4f3f-9752-4912ae3df225",subKeys:[],collapse:!1,style:null,blocks:[{type:"CONTENT",data:"add"}]},{key:"ebc9a270-2a40-4a5c-bf55-79f90cd5f8ce",parentKey:"dc0c93cb-0c05-40a0-9bd6-e6c1870c5613",subKeys:[],collapse:!1,style:null,blocks:[{type:"CONTENT",data:"shift"}]},{key:"16bb2549-ee9b-4d13-bf1f-ee0ba86872b5",parentKey:"1f66701b-72a2-45be-abad-d14ba71a78e0",subKeys:[],collapse:!1,style:null,blocks:[{type:"CONTENT",data:"Pure functions"}]},{key:"73667249-cfd7-438c-a8db-cb40b58d16fb",parentKey:"36a2fcb8-8f7a-4b25-adbc-3be25f6f534a",subKeys:[],collapse:!1,style:null,blocks:[{type:"CONTENT",data:""}]},{key:"85ee6b37-5053-4f78-b25d-53d1bf11d87b",parentKey:"252c6937-bd93-4233-90cb-333938667c72",subKeys:[],collapse:!1,style:null,blocks:[{type:"CONTENT",data:"const"},{type:"DESC",data:'The keyword **const** is an abbreviation for **constant**. Similar to **let**, it\u2019s **block\\-scoped**, however, you can\u2019t reassigned it and value must be provided when declaring it.\n\n**Example 1:**\n```\nconst pi = 3.14\nconsole.log("Pi :", pi); //=> 3.14\n\n```\n\n**Example 2:**\n```\nconst gravity; // SyntaxError: Missing initializer in const declaration\n\n```\n\n**Example 3:**\n```\nconst name = "Chris"\nname = "Jordan" // TypeError: Assignment to constant variable.\n\n```\n'}]},{key:"49780f87-17f7-4f90-a761-6ddf6ce8e1ca",parentKey:"e1994f06-f679-4c5f-9197-90f6f2a551e7",subKeys:["07fcbf3d-5e2d-4049-b16a-075a36dea9ec","aea8f33e-b4a3-4139-a406-d5fa77431698"],collapse:!1,style:null,blocks:[{type:"CONTENT",data:"callback"},{type:"DESC",data:"A **callback** function is a function passed into another function as an argument, which is then invoked later somepoint in the code. Callbacks are one of the way to handle asynchrony in JS.\n\n* **synchronous example**\n\n```\nconsole.log(\"Execution started\");\n\n// a function\nfunction greeting(name) {\n    console.log('Hello, ' + name);\n}\n\n// a function that takes another function as an argument\nfunction print(callback) {\n    const name = 'Alice';\n    // When you call a function that is passed as an argument, it is referred to as a callback\n    callback(name);\n}\n\n// passing a function as an argument\nprint(greeting);\n\nconsole.log(\"Execution completed\");\n\n//=> Execution started\n//=> Hello, Alice\n//=> Execution completed\n\n```\n\n* **asynchronous example**\n\n```\nconsole.log(\"Execution started\");\n\n// a function\nfunction greeting(name) {\n    console.log('Hello, ' + name);\n}\n\n// a function that takes another function as an argument\nfunction print(callback) {\n    const name = 'Alice';\n    // When you call a function that is passed as an argument, it is referred to as a callback\n    callback(name);\n}\n\n// passing a function as an argument\n// to the setTimeout async function which belongs to Web APIs\nsetTimeout(() => {\n    print(greeting);\n}, 5000);\n\nconsole.log(\"Execution completed\");\n\n//=> Execution started\n//=> Execution completed\n//=> Hello, Alice\n\n```\n"}]},{key:"62136ee4-f92e-49fb-b4de-03911ffe1da1",parentKey:"3854fdd8-7de4-429c-b73d-2519cbf63781",subKeys:[],collapse:!1,style:null,blocks:[{type:"CONTENT",data:"switch"},{type:"DESC",data:"The **switch** statement evaluates an expression, matching the expression's value to a case clause, and executes statements associated with that case, as well as statements in cases that follow the matching case.\n\n**Example 1:** expression matches a case\nThe **break** statement terminates the current flow of execution\n```\nconst expr = 'Papayas';\nswitch (expr) {\n  case 'Oranges':\n    console.log('Oranges are $0.59 a pound.');\n    break;\n  case 'Mangoes':\n  case 'Papayas':\n    console.log('Mangoes and papayas are $2.79 a pound.');\n    break;\n  default:\n    console.log(`Sorry, we are out of ${expr}.`);\n}\n\n// output: \"Mangoes and papayas are $2.79 a pound.\"\n\n```\n\n**Example 2:** expression did not match any cases\n```\nconst expr = 'Onion';\nswitch (expr) {\n  case 'Oranges':\n    console.log('Oranges are $0.59 a pound.');\n    break;\n  case 'Mangoes':\n  case 'Papayas':\n    console.log('Mangoes and papayas are $2.79 a pound.');\n    break;\n  default:\n    console.log(`Sorry, we are out of ${expr}.`);\n}\n\n// output: \"Sorry, we are out of Onion.\"\n\n```\n\n**Example 3:** expression matches a case but break statement is not specified\nIf you forget a _break_ then the script will run from the case where the criterion is met and will run the cases after that _regardless if a criterion was met_.\n```\nconst expr = 'Oranges';\nswitch (expr) {\n  case 'Oranges':\n    console.log('Oranges are $0.59 a pound.');\n  case 'Mangoes':\n  case 'Papayas':\n    console.log('Mangoes and papayas are $2.79 a pound.');\n  default:\n    console.log(`Sorry, we are out of ${expr}.`);\n}\n\n// Output:\n// Oranges are $0.59 a pound.\n// Mangoes and papayas are $2.79 a pound.\n// Sorry, we are out of Oranges.\n\n```\n"}]},{key:"2c6ddd66-98a5-4410-b7f2-dbd42aaa7e01",parentKey:"44213600-22aa-4972-aa99-eec27b840064",subKeys:["dbc9a664-bff0-4263-811c-cb91470ce277","fc11e9b2-fb2a-4f5d-934e-65c172bb61fa"],collapse:!1,style:null,blocks:[{type:"CONTENT",data:"Non-primitive"},{type:"DESC",data:'Non\\-primitive are mutuable means \'**changeable**\'.  Only object values \\(arrays, objects, functions, etc.\\) are treated as references\n\n**Example 1:**\n```\nlet arr = [212, 8, 506];\nconsole.log(arr[0]); // 212\narr[0] = 420;\nconsole.log(arr); // [420, 8, 506]\n\n```\n\n**Example 2 \\-**\n[https://github.com/getify/You\\-Dont\\-Know\\-JS/blob/2nd\\-ed/get\\-started/apA.md](https://github.com/getify/You-Dont-Know-JS/blob/2nd-ed/get-started/apA.md)\n```\nlet myAddress = {\n    street: "123 JS Blvd",\n    city: "Austin",\n    state: "TX"\n};\n\nlet yourAddress = myAddress;\n\nmyAddress.street = "456 TS Ave";\n\nconsole.log(yourAddress.street); // 456 TS Ave\nconsole.log(myAddress.street) // 456 TS Ave\n\n```\n\nValue assigned to **myAddress** is an object, it\'s held/assigned by reference, and thus the assignment to the **yourAddress** variable is a copy of the reference, not the object value itself. That\'s why the updated value assigned to the myAddress.street is reflected when we access yourAddress.street. myAddress and yourAddress have copies of the **reference to the single shared object**, so an update to one is an update to both.'}]},{key:"5df46409-6d87-4099-85c8-664e7e703c8e",parentKey:"7b11654a-e9d3-45ba-a1aa-afca29ff5f18",subKeys:["89f35d77-be58-421f-96f1-c53ebf79d892","79a87fe8-34ea-45e0-90b4-ee2399074191","3993010c-2552-4c4e-ad7e-195cb2bbc7e5","277f12bf-6cef-4676-92bb-ee233886e4cb","e153daae-cd39-4033-bd24-8fcf1a6f9f84"],collapse:!1,style:null,blocks:[{type:"CONTENT",data:"Objects"},{type:"DESC",data:'**Object** is a collection of properties, and a property is an association between a name \\(or key\\) and a value. It is used to store keyed collections of various data and more complex entities.\n\nAn object can be created with figure brackets **\\{\u2026\\}** with an optional list of properties. A property is a \u201ckey: value\u201d pair, where **key** is a string \\(also called a \u201cproperty name\u201d\\), and **value** can be anything.\n\n**example**\n```\nlet user = {     // an object\n  name: "John",  // by key "name" store value "John"\n  age: 30        // by key "age" store value 30\n};\n\n```\n'}]},{key:"e153daae-cd39-4033-bd24-8fcf1a6f9f84",parentKey:"5df46409-6d87-4099-85c8-664e7e703c8e",subKeys:[],collapse:!1,style:null,blocks:[{type:"CONTENT",data:"Object.create()"},{type:"DESC",data:'**Object\\.create\\(\\)** method creates a new object, using an existing object as the prototype of the newly created object.\n\n```\nconst person = {\n    isHuman: false,\n    printIntroduction: function () {\n        console.log(`My name is ${this.name}. Am I human? ${this.isHuman}`);\n    }\n};\n\nconst me = Object.create(person);\n\nme.name = \'Matthew\'; // "name" is a property set on "me", but not on "person"\nme.isHuman = true; // inherited properties can be overwritten\n\nme.printIntroduction(); //=> My name is Matthew. Am I human? true\n\n```\n'}]},{key:"44213600-22aa-4972-aa99-eec27b840064",parentKey:"7b11654a-e9d3-45ba-a1aa-afca29ff5f18",subKeys:["06067a6c-cfd1-4faf-8aa6-5eb827f3d020","2c6ddd66-98a5-4410-b7f2-dbd42aaa7e01"],collapse:!1,style:null,blocks:[{type:"CONTENT",data:"Data types"},{type:"DESC",data:"1. [https://javascript.info/types](https://javascript.info/types)\n1. [https://developer.mozilla.org/en\\-US/docs/Web/JavaScript/Data\\_structures](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures)\n1. [https://github.com/getify/You\\-Dont\\-Know\\-JS/blob/1st\\-ed/types%20%26%20grammar/ch1.md](https://github.com/getify/You-Dont-Know-JS/blob/1st-ed/types%20&%20grammar/ch1.md)\n\n"}]},{key:"ed43d880-a946-4d1f-8a16-fc59a0662188",parentKey:"3dc1c815-02b4-4097-ae29-578920b3a065",subKeys:[],collapse:!1,style:null,blocks:[{type:"CONTENT",data:"entries"}]},{key:"99e87759-dcab-49a7-a8ef-504c4e2bf8cc",parentKey:"1340cde2-dcef-48de-a00e-1ce996ecf377",subKeys:["1b0b95ad-674e-4dcb-9903-b34c8252624b"],collapse:!0,style:null,blocks:[{type:"CONTENT",data:"Unary\noperators"},{type:"DESC",data:'A **unary** operation is an operation with only one operand.\n\n* **delete**\n\nThe delete operator deletes an object\'s property. The syntax is:\n```\ndelete object.property;\ndelete object[propertyKey];\ndelete objectName[index];\n\n```\n**example**\n```\ndelete Math.PI; // returns false (cannot delete non-configurable properties)\n\nconst myObj = {h: 4};\ndelete myobj.h; // returns true (can delete user-defined properties)\n\n```\n\n* **typeof**\n\nThe typeof operator returns a string indicating the type of the unevaluated operand. operand is the string, variable, keyword, or object for which the type is to be returned.\n\n```\nlet myFun = new Function(\'5 + 2\');\nlet shape = \'round\';\nlet size = 1;\nlet foo = [\'Apple\', \'Mango\', \'Orange\'];\nlet today = new Date();\n\ntypeof myFun;       // returns "function"\ntypeof shape;       // returns "string"\ntypeof size;        // returns "number"\ntypeof foo;         // returns "object"\ntypeof today;       // returns "object"\ntypeof doesntExist; // returns "undefined"\n\n```\n'}]},{key:"ffcc44e2-dc44-4241-8c15-ee2ab8c71588",parentKey:"3854fdd8-7de4-429c-b73d-2519cbf63781",subKeys:[],collapse:!1,style:null,blocks:[{type:"CONTENT",data:"If Statement"},{type:"DESC",data:'**If** statement only runs if the condition enclosed in parentheses \\(\\) is truthy\n\n**Syntax:**\n```\nif (condition) {\n    //when condition is true this block will be executed\n}\n\n```\n\n**example**:\n```\nif (10 > 5) {\n    console.log("if blocked executed");\n}\n\n// Output - "if blocked executed"\n\n```\n'}]},{key:"dc0c93cb-0c05-40a0-9bd6-e6c1870c5613",parentKey:"9b52509a-42df-4ba8-9200-29ec192e314a",subKeys:["c1f96a01-5d07-4fd0-99fb-210490cb6f5a","fa03906c-9682-4352-98eb-3a4525a5780c","62774116-bea5-49c3-a72c-6371f1cde7cb","1c417f10-9197-42eb-a724-a2c99a488847","f9aad4c2-5205-49ec-a74c-ed04c3bb6813","8d03fe66-9d8f-4ae3-96c1-d18220788b3a","ebc9a270-2a40-4a5c-bf55-79f90cd5f8ce","45b02b6a-06f9-4bad-80bb-14c97acb3b80"],collapse:!1,style:null,blocks:[{type:"CONTENT",data:"Array &\nmethods"}]},{key:"183f002c-a1ac-4ef6-bd23-2495e98fefaa",parentKey:"131c9433-90a2-40b8-9e02-b774761c2456",subKeys:["f8959855-b412-49cf-b308-d4b014a6fc59","31aa7d3d-f836-4d0f-8704-6606fb0a1577","092ca5f2-7268-4e31-b7bd-d9aa2c3fd8d0","ef12f21d-9fc6-4b69-9034-dfe4162cf6e7"],collapse:!1,style:null,blocks:[{type:"CONTENT",data:"Four pillars"}]},{key:"75e32173-5b17-4d07-b761-2003054bf186",parentKey:"4c35fca7-ac9c-4475-99ab-d77f97120360",subKeys:[],collapse:!1,style:null,blocks:[{type:"CONTENT",data:""}]},{key:"8800712b-3d36-41bf-a8d2-a4bdb3b520e5",parentKey:"96d2f138-986b-4286-b6da-755624dba9c4",subKeys:[],collapse:!1,style:null,blocks:[{type:"CONTENT",data:"Error handling"}]},{key:"252c6937-bd93-4233-90cb-333938667c72",parentKey:"7b11654a-e9d3-45ba-a1aa-afca29ff5f18",subKeys:["05c8bbd0-fe13-4906-92cf-8507b33954da","265fb26e-4629-437b-8e64-aa7ce30ae47a","85ee6b37-5053-4f78-b25d-53d1bf11d87b"],collapse:!1,style:null,blocks:[{type:"CONTENT",data:"Variables"},{type:"DESC",data:"A variable is a **container** for a value or **named storage** for data. And it is a named reference to a value. That way an unpredictable value can be accessed through a predetermined name."}]},{key:"862cc5cf-2295-40f3-8bfb-bf1832c716e0",parentKey:"131c9433-90a2-40b8-9e02-b774761c2456",subKeys:["d051afcf-8e00-4760-8d65-783421039068","f319a1ab-dd84-45fa-b56f-023f85f0e1a9","5a194e70-b4a3-49f9-8e9a-64f0b9456ede","5830091e-64ee-4015-aeff-f8779fa73582"],collapse:!1,style:null,blocks:[{type:"CONTENT",data:"Building\nblocks"}]},{key:"a6c4854c-be38-4f7f-9866-a0025b236e65",parentKey:"3dc1c815-02b4-4097-ae29-578920b3a065",subKeys:[],collapse:!1,style:null,blocks:[{type:"CONTENT",data:"forEach"}]},{key:"89f35d77-be58-421f-96f1-c53ebf79d892",parentKey:"5df46409-6d87-4099-85c8-664e7e703c8e",subKeys:[],collapse:!1,style:null,blocks:[{type:"CONTENT",data:"Object\nliterals"},{type:"DESC",data:'**Object Literal** is generally used to create a single object.\n\n* An object literal is a comma\\-separated list of name\\-value pairs inside of curly braces **\\{\\}**.\n\n```\nconst greeting = {\n    greet: (message, name) => {\n        console.log(message + " " + name + "!!");\n    }\n};\n\ngreeting.greet("Hi", "Jack"); //=> Hi Jack!!\n\n```\n\n* Accessing values from object using square brackets\n\n```\nlet user = {}; // object literal\n\n// set\nuser["likes birds"] = true;\n\n// get\nconsole.log(user["likes birds"]); //=> true\n\n```\n\n* Accessing values from object using dot operator\n\n```\nconst user = {\n    "name": "Jack",\n    age: 25\n}\nconsole.log(user.name); //=> Jack\nconsole.log(user.age); //=> 25\n\n```\n\n* **Shorthand** method definition can be used in a method declaration on object literals and ES2015 classes. You can define them using a function name, followed by a list of parameters in a pair of parenthesis \\(para1, ..., paramN\\) and a pair of curly braces \\{ ... \\} that delimits the body statements.\n\n```\nconst collection = {\n  items: [],\n  add(...items) {\n    this.items.push(...items);\n  },\n  get(index) {\n    return this.items[index];\n  }\n};\ncollection.add(\'C\', \'Js\', \'PHP\', \'Java\');\nconsole.log(collection.get(1)) //=> "Js"\n\n```\n\n**add\\(\\)** and **get\\(\\)** methods in **collection** object are defined using short method definition. These methods are called as usual: **collection\\.add\\(...\\)** and **collection\\.get\\(...\\)**.'}]},{key:"0341d846-c3f3-4915-a4b3-0c11b3643a9d",parentKey:"f8750599-32db-4fb3-829e-0673887df2c2",subKeys:[],collapse:!1,style:null,blocks:[{type:"CONTENT",data:"Function\ndeclaration"},{type:"DESC",data:'A **function** declaration \\(also called a function statement\\) consists of the function keyword, followed by:\n* The **name** of the function.\n* A list of **parameters** to the function, enclosed in parentheses and separated by commas.\n* The JavaScript **statements** that define the function, enclosed in braces, **\\{**...**\\}**.\n\n\n**Syntax:**\n```\nfunction validFunctionName(parameter1, parameter2) {\n  return statement;\n}\n\n```\n\n**example 1: which takes no parameters and returns nothing \\(void\\)**\n```\nfunction currentTime() {\n  console.log(new Date().toTimeString().slice(0, 8));\n}\n\ncurrentTime() // output: "18:35:36"\n\n```\n\n**example 2: which takes parameters and returns a value**\nThe **return** statement ends function execution and specifies a value to be returned to the function caller.\n```\nfunction sum(a, b) {\n  return a + b;\n}\nconst result = sum(5, 6);\n\nconsole.log(result); // output: "11"\n\n```\n\n**example 3**: **default parameters** \n```\nfunction showMessage(from, text = "no text given") {\n  console.log( from + ": " + text );\n}\n\nshowMessage("Ann"); // output: "Ann: no text given"\nshowMessage("Ann", "Hello, world!"); // output: "Ann: Hello, world!"\n\n```\n\n**example 4: constructor function **\\(will see more this in detail when it comes to **objects**\\)\n```\nfunction Emp(id, name) {\n    this.id = id;\n    this.name = name;\n}\n\nlet emp1 = new Emp(1, "John");\n\nconsole.log(emp1.id); // output: "1"\nconsole.log(emp1.name); // output: "John"\n\n```\n'}]},{key:"b5c8a0d0-01e6-4922-a8f0-132d5442bb1d",parentKey:"06067a6c-cfd1-4faf-8aa6-5eb827f3d020",subKeys:[],collapse:!1,style:'{"contentStyle":{"background":"#50e3c2"}}',blocks:[{type:"CONTENT",data:"Undefined"},{type:"DESC",data:'The special value undefined also stands apart. It makes a type of its own, just like null.\n\n```\nconsole.log(typeof(undefined)); //=> "undefined"\n\n```\n\nThe meaning of undefined is \u201c**value is not assigned**\u201d. If a **variable is declared, but not assigned**, then its value is undefined:\n```\nlet age;\nconsole.log(age); //=> shows "undefined"\n\n```\n\nTechnically, it is possible to explicitly assign undefined to a variable:\n```\nlet age = 100;\n\n// change the value to undefined\nage = undefined;\n\nconsole.log(age); //=> shows "undefined"\n\n```\n'}]},{key:"a941ee5a-a4a5-4964-a537-1513bfe7b814",parentKey:"1340cde2-dcef-48de-a00e-1ce996ecf377",subKeys:[],collapse:!1,style:null,blocks:[{type:"CONTENT",data:"Arithmetic\noperators"},{type:"DESC",data:"An **arithmetic operator** takes numerical values \\(either literals or variables\\) as their operands and returns a single numerical value.\n\nThe standard arithmetic operators are addition \\(\\+\\), subtraction \\(\\-\\), multiplication \\(\\*\\), and division \\(/\\).\n| **Operator** | **Description** |\n|:--- |:--- |\n| Remainder \\(%\\) | Binary operator. Returns the integer remainder of dividing the two operands. |\n| Increment \\(\\+\\+\\) | Unary operator. Adds one to its operand. If used as a prefix operator \\(\\+\\+x\\), returns the value of its operand after adding one; if used as a postfix operator \\(x\\+\\+\\), returns the value of its operand before adding one. |\n| Decrement \\(\\-\\-\\) | Unary operator. Subtracts one from its operand. The return value is analogous to that for the increment operator. |\n| Unary negation \\(\\-\\) | Unary operator. Returns the negation of its operand. |\n| Unary plus \\(\\+\\) | Unary operator. Attempts to convert the operand to a number, if it is not already. |\n| Exponentiation operator \\(\\*\\*\\) | Calculates the base to the exponent power, that is, base^exponent |\n**examples**\n```\n// Addition (+)\nconsole.log(2 + 2); //=> 4\n// Subtraction (-)\nconsole.log(5 - 2); //=> 3\n// Multiplication (*)\nconsole.log(3 * 3); //=> 9\n// Division (/)\nconsole.log(10 / 3); //=> 3.3333333333333335\n// Remainder (%)\nconsole.log(14 / 3); //=> 4.666666666666667\n// Increment (++)\nlet x = 5\nconsole.log(x++); //=> 5\nconsole.log(++x); //=> 7\n// Decrement (--)\nlet y = 10\nconsole.log(y--); //=> 10\nconsole.log(--y); //=> 8\n// Unary negation (-)\nlet z = 3.14\nconsole.log(-z); //=> -3.14\n// Unary plus (+)\nlet i = '3';\nconsole.log(+i); //=> 3\nconsole.log(+true); //=> 1\n// Exponentiation operator (**)\nconsole.log(2 ** 3); //=> 8\n\n```\n"}]},{key:"95ac6039-3664-4d8d-8b2c-c9eb8c22e77c",parentKey:"1340cde2-dcef-48de-a00e-1ce996ecf377",subKeys:[],collapse:!1,style:null,blocks:[{type:"CONTENT",data:"Conditional (ternary)\noperator"},{type:"DESC",data:"The **conditional operator** is the only JavaScript operator that takes three operands. The operator can have one of two values based on a condition. The syntax is:\n```\ncondition ? val1 : val2\n\n```\nIf condition is true, the operator has the value of val1. Otherwise it has the value of val2. You can use the conditional operator anywhere you would use a standard operator.\n\n**example:**\n```\nlet age = 18;\nlet status = (age >= 18) ? 'adult' : 'minor';\nconsole.log(status); //=> adult\n\nage = 10;\nstatus = (age >= 18) ? 'adult' : 'minor';\nconsole.log(status); //=> minor\n\n```\n"}]},{key:"dfb39c55-dfce-4d5a-88a7-5fd066288121",parentKey:"a1649782-ec29-4030-bb2d-d6044103cf10",subKeys:[],collapse:!1,style:null,blocks:[{type:"CONTENT",data:""}]},{key:"956d1f1d-c3c0-4538-b40c-e1d868bb2653",parentKey:"1340cde2-dcef-48de-a00e-1ce996ecf377",subKeys:[],collapse:!1,style:null,blocks:[{type:"CONTENT",data:"Relational\noperators"},{type:"DESC",data:"A **relational operator** compares its operands and returns a Boolean value based on whether the comparison is true.\n\n* **in**\n\nThe in operator returns true if the specified property is in the specified object. The syntax is:\n```\n// Arrays\nlet trees = ['redwood', 'bay', 'cedar', 'oak', 'maple'];\n0 in trees;        //=> true\n3 in trees;        //=> true\n6 in trees;        //=> false\n'bay' in trees;    //=> false (you must specify the index number, not the value at that index)\n'length' in trees; //=> true (length is an Array property)\n\n// built-in objects\n'PI' in Math;          //=> true\nlet myString = new String('coral');\n'length' in myString;  //=> true\n\n// Custom objects\nlet myCar = { make: 'Honda', model: 'Accord', year: 1998 };\n'make' in myCar;  //=> true\n'model' in myCar; //=> true\n\n```\n\n* **instanceof**\n\nThe instanceof operator returns true if the specified object is of the specified object type.\n```\nlet theDay = new Date(1995, 12, 17);\nif (theDay instanceof Date) {\n    console.log(\"yes it is\") //=> yes it is\n}\n\n```\n"}]},{key:"e784d8b5-f79b-469c-8fa4-e7305d4405b3",parentKey:"06067a6c-cfd1-4faf-8aa6-5eb827f3d020",subKeys:["5499f8cd-26d8-4796-acc9-b138109bcea0"],collapse:!0,style:null,blocks:[{type:"CONTENT",data:"Symbol"},{type:"DESC",data:"The JavaScript **ES6** introduced a new primitive data type called Symbol. A Symbol is a unique and immutable primitive value and may be used as the key of an Object property.\n\n```\nconsole.log(typeof(Symbol())); //=> \"symbol\"\n\n```\n\n```\n// two symbols with the same description\n\nconst value1 = Symbol('hello');\nconst value2 = Symbol('hello');\n\nconsole.log(value1 === value2); //=> false\n\n```\n"}]},{key:"1340cde2-dcef-48de-a00e-1ce996ecf377",parentKey:"7b11654a-e9d3-45ba-a1aa-afca29ff5f18",subKeys:["9eaa4c3f-edb8-487d-b332-ad14665991f9","616b2d85-3831-4c1d-8582-a671725dcd94","a941ee5a-a4a5-4964-a537-1513bfe7b814","3cad2294-2687-43b8-bd7d-1ca3ebd67acd","ea952fa5-a291-436e-85a1-8cda065a4432","95ac6039-3664-4d8d-8b2c-c9eb8c22e77c","99e87759-dcab-49a7-a8ef-504c4e2bf8cc","956d1f1d-c3c0-4538-b40c-e1d868bb2653"],collapse:!1,style:null,blocks:[{type:"CONTENT",data:"Operators"},{type:"DESC",data:"**Operators **\\(eg: \\+, \\-, \\*, /\\) are symbols that are used to perform operations on operands.\n\n**example:**\n```\nlet sum = 10 + 20;\n\n```\n\nFor more info\n* [https://developer.mozilla.org/en\\-US/docs/Web/JavaScript/Guide/Expressions\\_and\\_Operators](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Guide/Expressions_and_Operators)\n\n"}]},{key:"840a8fff-1b5b-48bd-9aae-6214c599c5ab",parentKey:"f8750599-32db-4fb3-829e-0673887df2c2",subKeys:[],collapse:!1,style:null,blocks:[{type:"CONTENT",data:"Immediately invoked \nfunction expression\n- IIFE"},{type:"DESC",data:'An **IIFE** \\(Immediately Invoked Function Expression\\) is a JavaScript function that runs as soon as it is defined or as soon as it starts to executes.\n\n**Syntax:**\n```\n(function () {\n  statements\n})();\n\n```\n* The first is the anonymous function with lexical scope enclosed within the Grouping Operator \\(\\). This prevents accessing variables within the IIFE idiom as well as polluting the global scope.\n* The second part creates the immediately invoked function expression \\(\\) through which the JavaScript engine will directly interpret the function.\n\n\n**example 1:**\n```\n(function () {\n    console.log("Immediately invoked") //=> Immediately invoked\n})();\n\n```\n\n**example 2: **Avoid polluting the global namespace\n* If we have some initiation code that we don\'t need to use again, we could use the IIFE pattern.\n\n```\n(function () {\n  // some initiation code\n  let firstVariable;\n  let secondVariable;\n})();\n\n// firstVariable and secondVariable will be discarded after the function is executed.\n\n```\n\n```\nvar foo = \'foo\';\n\n(function () {\n    var foo = \'foo2\';\n    console.log(foo); //=> foo2\n})();\n\nconsole.log(foo); //=> foo\n\n```\n\n**example 3: **stack trace\n```\n// Ex 1:\n(function () {\n    throw new Error("Exception has occurred");\n})();\n\n// Error: Exception has occurred\n//     at /Users/git/other/js/test.js:2:11\n//     at Object.<anonymous> (/Users/git/other/js/test.js:3:3)\n//     at Module._compile (node:internal/modules/cjs/loader:1101:14)\n//     at Object.Module._extensions..js (node:internal/modules/cjs/loader:1153:10)\n//     at Module.load (node:internal/modules/cjs/loader:981:32)\n//     at Function.Module._load (node:internal/modules/cjs/loader:822:12)\n//     at Function.executeUserEntryPoint [as runMain] (node:internal/modules/run_main:79:12)\n//     at node:internal/main/run_main_module:17:47\n\n// Ex 2:\n(function deposit() {\n    throw new Error("Exception has occurred");\n})();\n\n// Error: Exception has occurred\n//     at deposit (/Users/git/other/js/test.js:6:11)\n//     at Object.<anonymous> (/Users/git/other/js/test.js:7:3)\n//     at Module._compile (node:internal/modules/cjs/loader:1101:14)\n//     at Object.Module._extensions..js (node:internal/modules/cjs/loader:1153:10)\n//     at Module.load (node:internal/modules/cjs/loader:981:32)\n//     at Function.Module._load (node:internal/modules/cjs/loader:822:12)\n//     at Function.executeUserEntryPoint [as runMain] (node:internal/modules/run_main:79:12)\n//     at node:internal/main/run_main_module:17:47\n\n```\nOne of the benefits of creating a named function expression is that in case we encountered an error, the stack trace will contain the name of the function, making it easier to find the origin of the error.\n\nFor more info,\n* [http://benalman.com/news/2010/11/immediately\\-invoked\\-function\\-expression/](http://benalman.com/news/2010/11/immediately-invoked-function-expression/)\n\n'}]},{key:"1b0b95ad-674e-4dcb-9903-b34c8252624b",parentKey:"99e87759-dcab-49a7-a8ef-504c4e2bf8cc",subKeys:[],collapse:!1,style:null,blocks:[{type:"CONTENT",data:""}]},{key:"c007d461-f421-48fd-9566-ac88d298bbb8",parentKey:"50256453-3cf5-4adf-85c0-562970b46468",subKeys:[],collapse:!1,style:null,blocks:[{type:"CONTENT",data:""}]},{key:"29f23365-fcf6-4f8f-8060-811df84e4770",parentKey:"d40f6cf0-dcae-4162-8b2f-d89edd7e3212",subKeys:["c1e621c4-ae65-40d0-ad48-650368d181d0"],collapse:!0,style:null,blocks:[{type:"CONTENT",data:"for .. in"},{type:"DESC",data:'The **for\\-in** loop always loops over an object\u2019s elements one by one. It can be **array indexes** or **key incase of objects**. Iterates over all **enumerable property** keys of an object.\n\n**Syntax:**\n```\nfor (let i in object) {\n    console.log(object[i]);\n}\n\n```\nIf the object is an array, the for\\-in loop will **print out the array indexes in order**. If the object contains key\\-value pairs, the for\\-in loop will **print out each key that exists**. A for...in loop iterates over the properties of an object in an **arbitrary** order\n\n**example 1:**\n```\nlet arr = [3, 5, 7];\narr.foo = "hello";\n\nfor (let i in arr) {\n  console.log(i); // by default it prints the indexes and key\n}\n\n// output:\n// 0\n// 1\n// 2\n// foo\n\n```\n\n**example 2:**\n```\nconst object = { a: 1, b: 2, c: 3 };\n\nfor (const property in object) {\n  console.log(property); // by default it prints the indexes and key\n}\n\n// output:\n// a\n// b\n// c\n\n```\n\n**example 3:**\n```\nconst object = { a: 1, b: 2, c: 3 };\n\nfor (const property in object) {\n  console.log(`${property}: ${object[property]}`);\n}\n\n// output:\n// "a: 1"\n// "b: 2"\n// "c: 3"\n\n```\n\n**exmaple 4: **And it iterates over by **all index**.\n```\nconst array = [1, 2, 3, { id: 254, name: "Chris" }]\n\narray[5] = 5\narray[-6] = 6;\narray["name"] = "Lars"\n\nfor (let index in array)\n    console.log(`Index: ${index} & Value: ${array[index]}`);\n    \n// Output:\n// Index: 0 & Value: 1\n// Index: 1 & Value: 2\n// Index: 2 & Value: 3\n// Index: 3 & Value: [object Object]\n// Index: 5 & Value: 5\n// Index: -6 & Value: 6\n// Index: name & Value: Lars\n\n```\n'}]},{key:"c18b4495-0355-48f2-ab94-741434d7409b",parentKey:"89cf71a0-0ca8-45ff-b136-62ffbf6ff778",subKeys:[],collapse:!1,style:null,blocks:[{type:"CONTENT",data:"`new` Binding"},{type:"DESC",data:"When a function is invoked with **new** in front of it, otherwise known as a constructor call, the following things are done automatically:\n* a brand new object is created \\(aka, constructed\\)\n* the newly constructed object is \\[\\[Prototype\\]\\]\\-linked to the function that constructed it\n* the newly constructed object is set as the this binding for that function call\n* unless the function returns its own alternate object, the new\\-invoked function call will automatically return the newly constructed object.\n\n\n```\nfunction foo(a) {\n    this.a = a;\n}\n\nvar bar = new foo(2);\nconsole.log(bar) //=> foo { a: 2 }\nconsole.log(bar.a); // 2\n\n```\n"}]},{key:"79a87fe8-34ea-45e0-90b4-ee2399074191",parentKey:"5df46409-6d87-4099-85c8-664e7e703c8e",subKeys:[],collapse:!1,style:null,blocks:[{type:"CONTENT",data:"new Object()"},{type:"DESC",data:'**Object** can be crated using object constructor. And it is generally used to create a single object.\n\n**example 1:**\n```\nlet user = new Object(); // empty \'user` object has been created\n\nuser.id = 1001;\nuser["name"] = "Nick";\nuser["age"] = 28;\n\nconsole.log("User object: ", user); //=> User object:  { id: 1001, name: \'Nick\', age: 28 }\n\n```\n\n**example 2:**\n```\n// equivalent to obj1 = new Boolean(true)\nlet obj1 = new Object(true)\n\n// equivalent to obj2 = new Boolean(false)\nlet obj2 = new Object(Boolean())\n\nconsole.log(obj1); //=> [Boolean: true]\nconsole.log(obj2); //=> [Boolean: false]\n\n```\n'}]},{key:"c261d5f7-915b-4abd-b3d1-47ef335bc8ff",parentKey:"3dc1c815-02b4-4097-ae29-578920b3a065",subKeys:[],collapse:!1,style:null,blocks:[{type:"CONTENT",data:"clear"}]},{key:"f8750599-32db-4fb3-829e-0673887df2c2",parentKey:"7b11654a-e9d3-45ba-a1aa-afca29ff5f18",subKeys:["0341d846-c3f3-4915-a4b3-0c11b3643a9d","a1649782-ec29-4030-bb2d-d6044103cf10","a9f8d9be-7d66-4b3e-941d-429c02913ec5","a37aef6c-b62c-423c-8124-c18edc14142b","840a8fff-1b5b-48bd-9aae-6214c599c5ab","33b684a7-f2aa-41a1-93fb-f5e1e621511d","89cf71a0-0ca8-45ff-b136-62ffbf6ff778"],collapse:!1,style:'{"contentStyle":{"background":"#9eff88"}}',blocks:[{type:"CONTENT",data:"Functions"},{type:"DESC",data:"**Function** is a \"subprogram\" that can be called by code external \\(or internal in the case of recursion\\) to the function. Like the program itself, a function is composed of a sequence of statements called the function body. Values can be passed to a function, and the function will return a value.\n\n### Parameters vs Arguments\n\n**_Parameters_** are these variables which you specify between parentheses when defining a function.\n```\nfunction sayHi(name) { ... } \n\n```\n_**Arguments**_ then are the concrete values you pass to a function when calling that function.\n```\nsayHi('June');\n\n```\n\n**Referrence**:\n* [https://developer.mozilla.org/en\\-US/docs/Web/JavaScript/Reference/Functions](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Functions)\n\n"}]}],config:{readOnly:!1,allowUndo:!0,layoutDir:2,theme:{name:"default",randomColor:!0,background:"rgb(57,60,65)",highlightColor:"#50C9CE",marginH:60,marginV:20,contentStyle:{lineHeight:"1.5",fontSize:"16px"},linkStyle:{lineRadius:5,lineType:"curve",lineWidth:"3px"},rootTopic:{contentStyle:{fontSize:"36px"},subLinkStyle:{lineType:"curve",lineWidth:"3px"}},primaryTopic:{contentStyle:{fontSize:"24px"},subLinkStyle:{lineType:"curve",lineWidth:"3px"}},normalTopic:{subLinkStyle:{lineType:"curve",lineWidth:"3px"}}}},formatVersion:"0.0"});this.state={model:e}}},{key:"renderDiagram",value:function(){return r.a.createElement(Oa,{ref:this.diagramRef,model:this.state.model,onChange:this.onChange,plugins:qR})}},{key:"renderToolbar",value:function(){var e=this.diagram.getDiagramProps(),t=e.controller,n=t.run("canUndo",e),o=t.run("canRedo",e),a={diagram:this.diagram,onClickUndo:this.onClickUndo,onClickRedo:this.onClickRedo,canUndo:n,canRedo:o};return r.a.createElement(YR,a)}},{key:"render",value:function(){return r.a.createElement("div",{className:"mindmap"},this.diagram&&this.renderToolbar(),this.renderDiagram())}}]),n}(r.a.Component);n(871);var $R=function(){return r.a.createElement(XR,null)};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));localStorage.debug=["app","plugin:layout"].join(","),c.a.render(r.a.createElement($R,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()}))}}]);
//# sourceMappingURL=chunk-blinkmind.c7766496.chunk.js.map