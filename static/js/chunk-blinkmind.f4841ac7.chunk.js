(window["webpackJsonpreact-mindmap"]=window["webpackJsonpreact-mindmap"]||[]).push([[0],{300:function(e,t,n){e.exports=n.p+"static/media/default.4f8c4983.jpg"},301:function(e,t,n){e.exports=n.p+"static/media/theme1.2f59f00b.jpg"},302:function(e,t,n){e.exports=n.p+"static/media/theme2.b18193fb.jpg"},303:function(e,t,n){e.exports=n.p+"static/media/theme3.61c97910.jpg"},304:function(e,t,n){e.exports=n.p+"static/media/theme4.1e21408c.jpg"},354:function(e,t,n){},357:function(e,t,n){},518:function(e,t,n){},761:function(e,t,n){},847:function(e,t,n){},868:function(e,t,n){},869:function(e,t,n){},870:function(e,t,n){},871:function(e,t,n){},872:function(e,t,n){"use strict";n.r(t);var o=n(0),r=n.n(o),c=n(22),i=n.n(c),a=(n(354),n(10)),l=n(11),u=n(14),s=n(13),p=n(45),d=n(2),f=n(9),b=n.n(f),y=n(86),h=n(5),g=n(32),m=n(1),O=n(29),v=n(23),T=n(3);function j(e){return!0===(null!=(t=e)&&"object"===typeof t&&!1===Array.isArray(t))&&"[object Object]"===Object.prototype.toString.call(e);var t}var k=function(e){var t,n;return!1!==j(e)&&("function"===typeof(t=e.constructor)&&(!1!==j(n=t.prototype)&&!1!==n.hasOwnProperty("isPrototypeOf")))},E=n(31);var x,S=function(e,t){},C="L",w="R",K="M";!function(e){e[e.LEFT_TO_RIGHT=0]="LEFT_TO_RIGHT",e[e.RIGHT_TO_LEFT=1]="RIGHT_TO_LEFT",e[e.LEFT_AND_RIGHT=2]="LEFT_AND_RIGHT",e[e.TOP_TO_BOTTOM=3]="TOP_TO_BOTTOM"}(x||(x={}));var R=0,D=1,L="CONTENT",I="DESC",_="NORMAL",M="EDITING_CONTENT",A="EDITING_DESC",N="SHOW_POPUP",F="DRAGGING",P="ANCESTOR",B="DESCENDANT",z="SIBLING",V="NONE",H="TOGGLE_COLLAPSE",G="COLLAPSE_ALL",W="EXPAND_ALL",U="EXPAND_TO",Z="ADD_CHILD",J="ADD_SIBLING",Y="DELETE_TOPIC",q="FOCUS_TOPIC",X="SET_FOCUS_MODE",$="SET_STYLE",Q="SET_THEME",ee="SET_TOPIC_BLOCK",te="DELETE_TOPIC_BLOCK",ne="START_EDITING_CONTENT",oe="START_EDITING_DESC",re="DRAG_AND_DROP",ce="SET_EDITOR_ROOT",ie=function(e){Object(u.a)(n,e);var t=Object(s.a)(n);function n(){return Object(a.a)(this,n),t.apply(this,arguments)}return Object(l.a)(n,[{key:"data",get:function(){return this.get("data")}},{key:"type",get:function(){return this.get("type")}}],[{key:"create",value:function(e){return new n(e)}},{key:"createList",value:function(e){if(T.List.isList(e)||Array.isArray(e))return Object(T.List)(e.map(n.create));throw new Error("Block.createList only accepts Array or List, but you passed it: ".concat(e))}}]),n}(Object(T.Record)({type:null,key:null,data:null}));var ae={readOnly:!1,allowUndo:!0,layoutDir:x.LEFT_AND_RIGHT,theme:{name:"default",randomColor:!0,background:"rgb(57,60,65)",highlightColor:"#50C9CE",marginH:60,marginV:20,contentStyle:{lineHeight:"1.5"},linkStyle:{lineRadius:5,lineType:"curve",lineWidth:"3px"},rootTopic:{contentStyle:{fontSize:"34px",borderRadius:"35px",padding:"16px 18px 16px 18px"},subLinkStyle:{lineType:"curve",lineWidth:"3px",lineColor:"rgb(113, 203, 45)"}},primaryTopic:{contentStyle:{borderWidth:"1px",borderStyle:"solid",borderRadius:"20px",fontSize:"17px",padding:"10px 15px 10px 15px"},subLinkStyle:{lineType:"curve",lineWidth:"3px",lineColor:"rgb(113, 203, 45)"}},normalTopic:{contentStyle:{border:"1px solid #e8eaec",borderRadius:"20px",fontSize:"17px",padding:"4px 10px"},subLinkStyle:{lineType:"curve",lineWidth:"3px",lineColor:"white"}}}},le=function(e){Object(u.a)(n,e);var t=Object(s.a)(n);function n(){return Object(a.a)(this,n),t.apply(this,arguments)}return Object(l.a)(n,[{key:"layoutDir",get:function(){return this.get("layoutDir")}},{key:"readOnly",get:function(){return this.get("readOnly")}},{key:"allowUndo",get:function(){return this.get("allowUndo")}},{key:"theme",get:function(){return this.get("theme")}}],[{key:"fromJSON",value:function(e){return new n(e)}}]),n}(Object(T.Record)(ae));function ue(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,(function(e){var t=16*Math.random()|0;return("x"===e?t:3&t|8).toString(16)}))}var se=function(e){Object(u.a)(n,e);var t=Object(s.a)(n);function n(){return Object(a.a)(this,n),t.apply(this,arguments)}return Object(l.a)(n,[{key:"key",get:function(){return this.get("key")}},{key:"parentKey",get:function(){return this.get("parentKey")}},{key:"collapse",get:function(){return this.get("collapse")}},{key:"subKeys",get:function(){return this.get("subKeys")}},{key:"blocks",get:function(){return this.get("blocks")}},{key:"relations",get:function(){return this.get("relations")}},{key:"style",get:function(){return this.get("style")}},{key:"getBlock",value:function(e){var t=this.blocks.findIndex((function(t){return t.type===e}));return-1===t?{index:t,block:null}:{index:t,block:this.blocks.get(t)}}}],[{key:"fromJSON",value:function(e){var t=e.key,o=e.parentKey,r=void 0===o?null:o,c=e.blocks,i=e.subKeys,a=void 0===i?[]:i,l=e.collapse;return new n({key:t,parentKey:r,collapse:void 0!==l&&l,subKeys:Object(T.List)(a),blocks:ie.createList(c)})}},{key:"create",value:function(e){var t=e.key,o=e.parentKey,r=void 0===o?null:o,c=e.content,i=void 0===c?"":c,a=e.subKeys,l=void 0===a?[]:a,u=e.collapse,s=void 0!==u&&u,p=ie.create({type:L,data:i,key:null});return new n({key:t,parentKey:r,blocks:Object(T.List)([p]),subKeys:Object(T.List)(l),collapse:s})}}]),n}(Object(T.Record)({key:null,parentKey:null,collapse:!1,subKeys:null,blocks:null,relations:null,style:null}));function pe(e,t){var n=e.getTopic(t),o=[];if(n.subKeys.size>0){var r,c=n.subKeys.toArray();(r=o).push.apply(r,Object(v.a)(c)),o=c.reduce((function(t,n){return t.push.apply(t,Object(v.a)(pe(e,n))),t}),o)}return o}function de(e,t,n){var o=e.getTopic(t),r=e.getTopic(n);if(o&&r){if(o.parentKey==r.parentKey)return z;for(var c=o;c.parentKey;){if(c.parentKey===r.key)return B;c=e.getParentTopic(c.key)}for(c=r;c.parentKey;){if(c.parentKey===o.key)return P;c=e.getParentTopic(c.key)}}return V}var fe=b()("modifier");function be(e){var t=e.model,n=e.topicKey,o=e.focusMode;return fe("focus topic"),n!==t.focusKey&&(t=t.set("focusKey",n)),o!==t.focusMode&&(t=t.set("focusMode",o)),t}var ye={addChild:function(e){var t=e.model,n=e.topicKey;fe("addChild:",n);var o=t.getTopic(n);if(o){var r=se.create({key:ue(),parentKey:o.key});return o=o.set("collapse",!1).update("subKeys",(function(e){return e.push(r.key)})),be({model:t=t.update("topics",(function(e){return e.set(n,o).set(r.key,r)})),topicKey:r.key,focusMode:M})}return t},addSibling:function(e){var t=e.model,n=e.topicKey;if(n===t.rootTopicKey)return t;var o=t.getTopic(n);if(o){var r=t.getTopic(o.parentKey),c=r.subKeys.indexOf(n),i=se.create({key:ue(),parentKey:r.key});return be({model:t=t.update("topics",(function(e){return e.set(i.key,i)})).updateIn(["topics",r.key,"subKeys"],(function(e){return e.insert(c+1,i.key)})),topicKey:i.key,focusMode:M})}return t},toggleCollapse:function(e){var t=e.model,n=e.topicKey,o=t.getTopic(n);return o&&0!==o.subKeys.size&&(o=o.merge({collapse:!o.collapse}),t=t.updateIn(["topics",o.key,"collapse"],(function(e){return!e}))),t=be({model:t,topicKey:n,focusMode:_})},collapseAll:function(e){var t=e.model,n=pe(t,t.editorRootTopicKey);return fe(t),t=be({model:t=t.withMutations((function(e){n.forEach((function(t){e.setIn(["topics",t,"collapse"],!0)}))})),topicKey:t.editorRootTopicKey,focusMode:_})},expandAll:function(e){var t=e.model,n=pe(t,t.editorRootTopicKey);return fe(t),t=t.withMutations((function(e){n.forEach((function(t){e.setIn(["topics",t,"collapse"],!1)}))})),fe(t),t},expandTo:function(e){var t=e.model,n=e.topicKey,o=function(e,t){for(var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],o=[t],r=e.getTopic(t);r.parentKey;)n?o.push(r.parentKey):o.unshift(r.parentKey),r=e.getParentTopic(r.key);return o}(t,n).filter((function(e){return e!==n}));return de(t=t.withMutations((function(e){o.forEach((function(t){e.setIn(["topics",t,"collapse"],!1)}))})),n,t.editorRootTopicKey)!==B&&(t=t.set("editorRootTopicKey",t.rootTopicKey)),t},focusTopic:be,setFocusMode:function(e){var t=e.model,n=e.focusMode;return fe("setFocusMode"),n!==t.focusMode&&(t=t.set("focusMode",n)),t},deleteTopic:function(e){var t=e.model,n=e.topicKey;if(n===t.editorRootTopicKey)return t;var o=t.getTopic(n);return o&&(t=t.withMutations((function(e){e.update("topics",(function(e){e=e.delete(n);var o=pe(t,n);return e=e.withMutations((function(e){o.forEach((function(t){e.delete(t)}))}))})),e.updateIn(["topics",o.parentKey,"subKeys"],(function(e){return e.delete(e.indexOf(n))})),e.focusKey===n&&e.set("focusKey",null).set("focusMode",null)}))),t},setBlockData:function(e){var t=e.model,n=e.topicKey,o=e.blockType,r=e.focusMode,c=e.data,i=t.getTopic(n);if(i){var a=i.getBlock(o),l=a.index,u=a.block;-1===l?t=t.updateIn(["topics",n,"blocks"],(function(e){return e.push(ie.create({type:o,data:c}))})):u.data!==c&&(t=t.updateIn(["topics",n,"blocks",l,"data"],(function(e){return c}))),r&&(t=be({model:t,topicKey:n,focusMode:r}))}return t},deleteBlock:function(e){var t=e.model,n=e.topicKey,o=e.blockType,r=t.getTopic(n);if(r){var c=r.getBlock(o).index;-1!==c&&(t=t.updateIn(["topics",n,"blocks"],(function(e){return e.delete(c)}))),t=be({model:t,topicKey:null,focusMode:null})}return t},setStyle:function(e){var t=e.model,n=e.topicKey,o=e.style,r=t.getTopic(n);return r&&o!==r.style&&(t=t.updateIn(["topics",n,"style"],(function(e){return o}))),t},clearAllCustomStyle:function(e){var t=e.model;return t=t.withMutations((function(e){e.topics.keySeq().forEach((function(t){e.setIn(["topics",t,"style"],null)}))}))},setTheme:function(e){var t=e.model,n=e.theme;return t=t.setIn(["config","theme"],n)},setLayoutDir:function(e){var t=e.model,n=e.layoutDir;return t.config.layoutDir===n?t:t=t.setIn(["config","layoutDir"],n)},setEditorRootTopicKey:function(e){var t=e.model,n=e.topicKey;return t.editorRootTopicKey!==n&&(t=t.set("editorRootTopicKey",n)),t.getTopic(n).collapse&&(t=t.setIn(["topics",n,"collapse"],!1)),t},setZoomFactor:function(e){var t=e.model,n=e.zoomFactor;return t.zoomFactor!==n&&(t=t.set("zoomFactor",n)),t}},he={topics:Object(T.Map)(),extData:Object(T.Map)(),config:new le,rootTopicKey:null,editorRootTopicKey:null,focusKey:null,focusMode:null,formatVersion:null,zoomFactor:1};Object(T.Record)(he);function ge(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.plugins,n=void 0===t?[]:t;return Object(v.a)(n)}b()("core:controller");function me(e,t){if(Array.isArray(t))t.forEach((function(t){return me(e,t)}));else if(null!=t)for(var n in t){var o=t[n];e.middleware[n]=e.middleware[n]||[],e.middleware[n].push(o)}}function Oe(e){if(!Array.isArray(e))throw new TypeError("Middleware stack must be an array!");var t,n=Object(O.a)(e);try{for(n.s();!(t=n.n()).done;){if("function"!==typeof t.value)throw new TypeError("Middleware must be composed of functions!")}}catch(o){n.e(o)}finally{n.f()}return function(t,n){var r=-1;return function c(i){if(i<=r)throw new Error("next() called multiple times");r=i;var a=e[i];i===e.length&&(a=n);if(!a)return null;try{return a(t,c.bind(null,i+1))}catch(o){throw o}}(0)}}var ve=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};Object(a.a)(this,e);var n=t.plugins,o=void 0===n?[]:n,r=t.onChange,c=t.readOnly;this.readOnly=c,this.onChange=r,this.middleware=new Map;var i=ge({plugins:o});me(this,i)}return Object(l.a)(e,[{key:"run",value:function(e){var t=this.middleware,n=t[e]||[];S(0!==n.length,"the middleware function ".concat(e," is not found!"));for(var o=Object(E.a)(Oe)(n),r=arguments.length,c=new Array(r>1?r-1:0),i=1;i<r;i++)c[i-1]=arguments[i];return o.apply(void 0,c)}},{key:"getValue",value:function(e,t){return this.run("getValue",Object(m.a)(Object(m.a)({},t),{},{propKey:e}))}},{key:"change",value:function(e,t){this.onChange(e,t),this.currentModel=e}}]),e}();n(357),n(100);function Te(e){return!0===(null!=(t=e)&&"object"===typeof t&&!1===Array.isArray(t))&&"[object Object]"===Object.prototype.toString.call(e);var t}var je,ke=function(e){var t,n;return!1!==Te(e)&&("function"===typeof(t=e.constructor)&&(!1!==Te(n=t.prototype)&&!1!==n.hasOwnProperty("isPrototypeOf")))},Ee=n(28);!function(e){e[e.LEFT_TO_RIGHT=0]="LEFT_TO_RIGHT",e[e.RIGHT_TO_LEFT=1]="RIGHT_TO_LEFT",e[e.LEFT_AND_RIGHT=2]="LEFT_AND_RIGHT",e[e.TOP_TO_BOTTOM=3]="TOP_TO_BOTTOM"}(je||(je={}));var xe="CONTENT",Se="DESC",Ce="NORMAL",we="EDITING_CONTENT",Ke="EDITING_DESC",Re="SET_TOPIC_BLOCK",De=function(e){Object(u.a)(n,e);var t=Object(s.a)(n);function n(){return Object(a.a)(this,n),t.apply(this,arguments)}return Object(l.a)(n,[{key:"data",get:function(){return this.get("data")}},{key:"type",get:function(){return this.get("type")}}],[{key:"create",value:function(e){return new n(e)}},{key:"createList",value:function(e){if(T.List.isList(e)||Array.isArray(e))return Object(T.List)(e.map(n.create));throw new Error("Block.createList only accepts Array or List, but you passed it: ".concat(e))}}]),n}(Object(T.Record)({type:null,key:null,data:null}));var Le={readOnly:!1,allowUndo:!0,layoutDir:je.LEFT_AND_RIGHT,theme:{name:"default",randomColor:!0,background:"rgb(57,60,65)",highlightColor:"#50C9CE",marginH:60,marginV:20,contentStyle:{lineHeight:"1.5"},linkStyle:{lineRadius:5,lineType:"curve",lineWidth:"3px"},rootTopic:{contentStyle:{fontSize:"34px",borderRadius:"35px",padding:"16px 18px 16px 18px"},subLinkStyle:{lineType:"curve",lineWidth:"3px",lineColor:"rgb(113, 203, 45)"}},primaryTopic:{contentStyle:{borderWidth:"1px",borderStyle:"solid",borderRadius:"20px",fontSize:"17px",padding:"10px 15px 10px 15px"},subLinkStyle:{lineType:"curve",lineWidth:"3px",lineColor:"rgb(113, 203, 45)"}},normalTopic:{contentStyle:{border:"1px solid #e8eaec",borderRadius:"20px",fontSize:"17px",padding:"4px 10px"},subLinkStyle:{lineType:"curve",lineWidth:"3px",lineColor:"white"}}}},Ie=function(e){Object(u.a)(n,e);var t=Object(s.a)(n);function n(){return Object(a.a)(this,n),t.apply(this,arguments)}return Object(l.a)(n,[{key:"layoutDir",get:function(){return this.get("layoutDir")}},{key:"readOnly",get:function(){return this.get("readOnly")}},{key:"allowUndo",get:function(){return this.get("allowUndo")}},{key:"theme",get:function(){return this.get("theme")}}],[{key:"fromJSON",value:function(e){return new n(e)}}]),n}(Object(T.Record)(Le));function _e(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,(function(e){var t=16*Math.random()|0;return("x"===e?t:3&t|8).toString(16)}))}var Me=function(e){Object(u.a)(n,e);var t=Object(s.a)(n);function n(){return Object(a.a)(this,n),t.apply(this,arguments)}return Object(l.a)(n,[{key:"key",get:function(){return this.get("key")}},{key:"parentKey",get:function(){return this.get("parentKey")}},{key:"collapse",get:function(){return this.get("collapse")}},{key:"subKeys",get:function(){return this.get("subKeys")}},{key:"blocks",get:function(){return this.get("blocks")}},{key:"relations",get:function(){return this.get("relations")}},{key:"style",get:function(){return this.get("style")}},{key:"getBlock",value:function(e){var t=this.blocks.findIndex((function(t){return t.type===e}));return-1===t?{index:t,block:null}:{index:t,block:this.blocks.get(t)}}}],[{key:"fromJSON",value:function(e){var t=e.key,o=e.parentKey,r=void 0===o?null:o,c=e.blocks,i=e.subKeys,a=void 0===i?[]:i,l=e.collapse;return new n({key:t,parentKey:r,collapse:void 0!==l&&l,subKeys:Object(T.List)(a),blocks:De.createList(c)})}},{key:"create",value:function(e){var t=e.key,o=e.parentKey,r=void 0===o?null:o,c=e.content,i=void 0===c?"":c,a=e.subKeys,l=void 0===a?[]:a,u=e.collapse,s=void 0!==u&&u,p=De.create({type:xe,data:i,key:null});return new n({key:t,parentKey:r,blocks:Object(T.List)([p]),subKeys:Object(T.List)(l),collapse:s})}}]),n}(Object(T.Record)({key:null,parentKey:null,collapse:!1,subKeys:null,blocks:null,relations:null,style:null}));b()("modifier");var Ae={topics:Object(T.Map)(),extData:Object(T.Map)(),config:new Ie,rootTopicKey:null,editorRootTopicKey:null,focusKey:null,focusMode:null,formatVersion:null,zoomFactor:1};Object(T.Record)(Ae);b()("core:controller");var Ne=n(44),Fe=n(36),Pe=function(e,t){return(Pe=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(e,t)};function Be(e,t){function n(){this.constructor=e}Pe(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}var ze=function(){return(ze=Object.assign||function(e){for(var t,n=1,o=arguments.length;n<o;n++)for(var r in t=arguments[n])Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r]);return e}).apply(this,arguments)};var Ve,He,Ge,We=b()("node:text-editor"),Ue=d.default.div(Ge||(Ve=["\n  padding: 6px;\n  background-color: ",";\n  cursor: ",";\n  min-width: 50px;\n"],He=["\n  padding: 6px;\n  background-color: ",";\n  cursor: ",";\n  min-width: 50px;\n"],Object.defineProperty?Object.defineProperty(Ve,"raw",{value:He}):Ve.raw=He,Ge=Ve),(function(e){return e.readOnly?null:"white"}),(function(e){return e.readOnly?"pointer":"text"})),Ze=function(e){function t(t){var n=e.call(this,t)||this;return n.state={content:null},n.onMouseDown=function(e){e.stopPropagation()},n.onMouseMove=function(e){},n.onKeyDown=function(e){},n._handleClick=function(e){!n.root.contains(e.target)&&n.onClickOutSide(e)},n.rootRef=function(e){return function(t){e(t),n.root=t}},n.initState(),n}return Be(t,e),t.prototype.onChange=function(e){var t=e.value;We("onChange",t),this.setState({content:t})},t.prototype.componentDidMount=function(){this.props.readOnly||document.addEventListener("click",this._handleClick)},t.prototype.componentWillUnmount=function(){this.props.readOnly||document.removeEventListener("click",this._handleClick)},t.prototype.onClickOutSide=function(e){},t.prototype.getCustomizeProps=function(){return null},t.prototype.getContent=function(){var e=this.getCustomizeProps().block.data;return null==e?null:("string"===typeof e&&(e=Ne.a.deserialize(e)),e)},t.prototype.initState=function(){var e=this.getContent();this.state={content:e}},t.prototype.render=function(){var e=this.props,t=e.topicKey,n=e.saveRef,r=this.getCustomizeProps(),c=r.readOnly,i=r.getRefKeyFunc,a=r.placeholder,l=r.style;We(c);var u=i(t),s=c?this.getContent():this.state.content,p=this.onMouseDown,d=this.onMouseMove,f=this.onKeyDown,b={value:s,readOnly:c,onChange:this.onChange.bind(this),placeholder:a,style:l},y={key:u,readOnly:c,ref:this.rootRef(n(u)),onMouseDown:p,onMouseMove:d,onKeyDown:f};return Object(o.createElement)(Ue,ze({},y),Object(o.createElement)(Fe.Editor,ze({},b,{autoFocus:!0})))},t}(o.PureComponent),Je=b()("node:topic-content-editor");function Ye(e){return"content-editor-"+e}var qe=function(e){function t(t){var n=e.call(this,t)||this;return n.onKeyDown=function(e){e.nativeEvent.ctrlKey&&"Enter"===e.nativeEvent.code&&n.save()},n}return Be(t,e),t.prototype.getCustomizeProps=function(){var e=this.props,t=e.model,n=e.topicKey,o=e.readOnly;return{block:t.getTopic(n).getBlock(xe).block,readOnly:o,getRefKeyFunc:Ye,placeholder:"new",style:{whiteSpace:"pre"}}},t.prototype.onClickOutSide=function(e){Je("onClickOutSide"),this.save()},t.prototype.save=function(){var e=this.props,t=e.model,n=e.topicKey;t.editingContentKey!==n||this.props.controller.run("operation",ze(ze({},this.props),{opType:Re,blockType:xe,data:this.state.content,focusMode:Ce}))},t}(Ze),Xe=b()("node:topic-desc-editor");function $e(e){return"desc-editor-"+e}var Qe=function(e){function t(t){var n=e.call(this,t)||this;return Xe("constructor"),n}return Be(t,e),t.prototype.initState=function(){e.prototype.initState.call(this);var t=this.props,n=t.controller,o="topic-desc-data-"+t.topicKey,r=this.state.content;n.run("setTempValue",{key:o,value:r})},t.prototype.getCustomizeProps=function(){var e=this.props,t=e.model,n=e.topicKey;return{block:t.getTopic(n).getBlock(Se).block,readOnly:t.editingDescKey!==n,getRefKeyFunc:$e,placeholder:"write topic notes here"}},t.prototype.onChange=function(e){var t=e.value;Xe("onChange");var n=this.props,o=n.controller,r=n.topicKey;if(!(n.model.editingDescKey!==r)){var c="topic-desc-data-"+r;o.run("setTempValue",{key:c,value:t}),this.setState({content:t})}},t}(Ze);var et=function(){return{getTopicTitle:function(e){var t=e.model,n=e.controller,o=e.topicKey,r=e.maxLength,c=t.getTopic(o).getBlock(xe).block,i=n.run("serializeBlockData",ze(ze({},e),{block:c}));return null!=r&&(i=i.length>r?i.substr(0,r)+"...":i),i},renderTopicContentEditor:function(e){return Object(o.createElement)(qe,ze({},e))},renderTopicDescEditor:function(e){return Object(o.createElement)(Qe,ze({},e))},isBlockEmpty:function(e,t){var n=e.block,o=e.controller;return n.type===xe||n.type===Se?null==n.data||""===o.run("serializeBlockData",e):t()},serializeBlockData:function(e,t){var n=e.block;return n.type===xe||n.type===Se?"string"===typeof n.data?n.data:Ne.a.serialize(n.data):t()}}},tt=n(15),nt=n.n(tt),ot=n(878),rt=n(66),ct=n(20),it=function(e,t){return(it=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(e,t)};function at(e,t){function n(){this.constructor=e}it(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}var lt=function(){return(lt=Object.assign||function(e){for(var t,n=1,o=arguments.length;n<o;n++)for(var r in t=arguments[n])Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r]);return e}).apply(this,arguments)};function ut(e,t){var n={};for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&t.indexOf(o)<0&&(n[o]=e[o]);if(null!=e&&"function"===typeof Object.getOwnPropertySymbols){var r=0;for(o=Object.getOwnPropertySymbols(e);r<o.length;r++)t.indexOf(o[r])<0&&Object.prototype.propertyIsEnumerable.call(e,o[r])&&(n[o[r]]=e[o[r]])}return n}function st(e,t,n,o){var r,c=arguments.length,i=c<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)i=Reflect.decorate(e,t,n,o);else for(var a=e.length-1;a>=0;a--)(r=e[a])&&(i=(c<3?r(i):c>3?r(t,n,i):r(t,n))||i);return c>3&&i&&Object.defineProperty(t,n,i),i}function pt(e){var t="function"===typeof Symbol&&e[Symbol.iterator],n=0;return t?t.call(e):{next:function(){return e&&n>=e.length&&(e=void 0),{value:e&&e[n++],done:!e}}}}function dt(e,t){var n="function"===typeof Symbol&&e[Symbol.iterator];if(!n)return e;var o,r,c=n.call(e),i=[];try{for(;(void 0===t||t-- >0)&&!(o=c.next()).done;)i.push(o.value)}catch(a){r={error:a}}finally{try{o&&!o.done&&(n=c.return)&&n.call(c)}finally{if(r)throw r.error}}return i}function ft(){for(var e=[],t=0;t<arguments.length;t++)e=e.concat(dt(arguments[t]));return e}function bt(e,t){return Object.defineProperty?Object.defineProperty(e,"raw",{value:t}):e.raw=t,e}var yt,ht,gt,mt,Ot,vt,Tt,jt,kt,Et,xt,St,Ct,wt=function(e){function t(t){return e.call(this,t)||this}return at(t,e),t.prototype.operation=function(e,t){this.props.controller.run("operation",lt({opType:e},t))},t.prototype.run=function(e,t){this.props.controller.run(e,t)},Object.defineProperty(t.prototype,"topic",{get:function(){return this.props.model.getTopic(this.props.topicKey)},enumerable:!0,configurable:!0}),t}(o.PureComponent),Kt=b()("node:drag-scroll-widget"),Rt=d.default.div(yt||(yt=bt(["\n  position: relative;\n  width: 100%;\n  height: 100%;\n  overflow: scroll;\n"],["\n  position: relative;\n  width: 100%;\n  height: 100%;\n  overflow: scroll;\n"]))),Dt=d.default.div(ht||(ht=bt(["\n  position: relative;\n  width: max-content;\n"],["\n  position: relative;\n  width: max-content;\n"]))),Lt=function(e){function t(t){var n=e.call(this,t)||this;return n.contentResizeCallback=function(e,t){if(n.oldContentRect){var o={width:n.content.clientWidth+2*n.viewBox.clientWidth,height:n.content.clientHeight+2*n.viewBox.clientHeight};n.bigView.style.width=o.width+"px",n.bigView.style.height=o.height+"px"}n.oldContentRect=e[0].contentRect},n.contentResizeObserver=new p.a(n.contentResizeCallback),n.contentRef=function(e){e&&(n.content=e,n.contentResizeObserver.observe(n.content))},n.viewBoxRef=function(e){e&&(n.viewBox=e,n.props.enableMouseWheel||(Kt("addEventListener onwheel"),n.viewBox.addEventListener("wheel",(function(e){Kt("onwheel"),(e.ctrlKey||e.altKey)&&e.preventDefault()}),{passive:!1})),n.setViewBoxScroll(n.viewBox.clientWidth,n.viewBox.clientHeight))},n.bigViewRef=function(e){e&&(n.bigView=e)},n.setWidgetStyle=function(){n.content&&n.viewBox&&n.bigView&&(n.bigView.style.width=2*(n.content.clientWidth+n.viewBox.clientWidth)+"px",n.bigView.style.height=2*(n.content.clientHeight+n.viewBox.clientHeight)+"px",n.content.style.left=n.viewBox.clientWidth+"px",n.content.style.top=n.viewBox.clientHeight+"px")},n.setViewBoxScroll=function(e,t){Kt("setViewBoxScroll "+e+" "+t),n.viewBox&&(n.viewBox.scrollLeft=e,n.viewBox.scrollTop=t)},n.setViewBoxScrollDelta=function(e,t){Kt("setViewBoxScrollDelta "+e+" "+t),n.viewBox&&(n.viewBox.scrollLeft+=e,n.viewBox.scrollTop+=t)},n.onMouseDown=function(e){var t=n.props,o=t.mouseKey,r=t.needKeyPressed,c=t.canDragFunc;if((!c||c())&&(0===e.button&&"left"===o||2===e.button&&"right"===o)){if(r&&!e.ctrlKey)return;n._lastCoordX=n.viewBox.scrollLeft+e.nativeEvent.clientX,n._lastCoordY=n.viewBox.scrollTop+e.nativeEvent.clientY;var i=n.viewBox;i.addEventListener("mousemove",n.onMouseMove),i.addEventListener("mouseup",n.onMouseUp)}},n.onMouseUp=function(e){var t=n.viewBox;t.removeEventListener("mousemove",n.onMouseMove),t.removeEventListener("mouseup",n.onMouseUp)},n.onMouseMove=function(e){n.viewBox.scrollLeft=n._lastCoordX-e.clientX,n.viewBox.scrollTop=n._lastCoordY-e.clientY},n.handleContextMenu=function(e){e.preventDefault()},n.state={widgetStyle:{width:"10000px",height:"10000px"}},n}return at(t,e),t.prototype.componentDidMount=function(){this.setWidgetStyle(),document.addEventListener("contextmenu",this.handleContextMenu)},t.prototype.componentWillUnmount=function(){document.removeEventListener("contextmenu",this.handleContextMenu)},t.prototype.setZoomFactor=function(e){this.bigView.style.transform="scale("+e+")",this.bigView.style.transformOrigin="50% 50%"},t.prototype.render=function(){var e=lt({},this.state.widgetStyle);return Object(o.createElement)(Rt,{ref:this.viewBoxRef,onMouseDown:this.onMouseDown},Object(o.createElement)("div",{style:e,ref:this.bigViewRef},Object(o.createElement)(Dt,{ref:this.contentRef,style:this.state.contentStyle},this.props.children(this.setViewBoxScroll,this.setViewBoxScrollDelta))))},t.defaultProps={mouseKey:"left",needKeyPressed:!1},t}(o.Component),It=b()("node:save-ref"),_t=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.getRef=function(e){return It(t),t[e]},t.saveRef=function(e){return function(n){n&&(t[e]=n,t.fireListener(e,n))}},t.deleteRef=function(e){It("deleteRef:",e),delete t[e]},t.observers=new Map,t.fireListener=function(e,n){var o,r;if(t.observers.has(e)){var c=t.observers.get(e);try{for(var i=pt(c),a=i.next();!a.done;a=i.next()){(0,a.value)(e,n)}}catch(l){o={error:l}}finally{try{a&&!a.done&&(r=i.return)&&r.call(i)}finally{if(o)throw o.error}}}},t.registerRefListener=function(e,n){t.observers.has(e)?t.observers.get(e).push(n):t.observers.set(e,[n])},t}return at(t,e),t.prototype.render=function(){return this.props.children(this.saveRef,this.getRef,this.deleteRef,this.registerRefListener.bind(this))},t}(o.Component),Mt=d.default.div(gt||(gt=bt(["\n  display: flex;\n  flex-direction: ",";\n  align-items: ",";\n  justify-content: ",";\n"],["\n  display: flex;\n  flex-direction: ",";\n  align-items: ",";\n  justify-content: ",";\n"])),(function(e){return e.flexDirection?e.flexDirection:"row"}),(function(e){return e.alignItems}),(function(e){return e.justifyContent})),At=d.default.div(mt||(mt=bt(["\n  margin: ",";\n"],["\n  margin: ",";\n"])),(function(e){return e.margin})),Nt=d.default.a(Ot||(Ot=bt(["\n  font-size: 20px !important;\n"],["\n  font-size: 20px !important;\n"]))),Ft=d.default.div(vt||(vt=bt(["\n  padding: 5px;\n  cursor: pointer;\n"],["\n  padding: 5px;\n  cursor: pointer;\n"]))),Pt=d.default.div(Tt||(Tt=bt(["\n  cursor: pointer;\n  &:hover {\n    color: #1ea7fd;\n  }\n"],["\n  cursor: pointer;\n  &:hover {\n    color: #1ea7fd;\n  }\n"]))),Bt=Object(d.default)(y.e)(jt||(jt=bt(["\n  margin-bottom: 0px !important;\n"],["\n  margin-bottom: 0px !important;\n"]))),zt=Object(d.default)(Pt)(kt||(kt=bt(["\n  position: absolute;\n  right: 5px;\n  top: 5px;\n  //padding: 5px;\n"],["\n  position: absolute;\n  right: 5px;\n  top: 5px;\n  //padding: 5px;\n"]))),Vt=d.default.div(Et||(Et=bt(["\n  height: 16px;\n"],["\n  height: 16px;\n"]))),Ht=d.default.span(xt||(xt=bt(["\n  margin: 0px 10px;\n  &:hover {\n    color: palevioletred;\n  }\n"],["\n  margin: 0px 10px;\n  &:hover {\n    color: palevioletred;\n  }\n"]))),Gt=d.default.div(St||(St=bt(["\n  z-index: ",";\n"],["\n  z-index: ",";\n"])),(function(e){return e.zIndex})),Wt=d.default.div(Ct||(Ct=bt(["\n  min-width: 360px;\n  max-height: 470px;\n  overflow: auto;\n"],["\n  min-width: 360px;\n  max-height: 470px;\n  overflow: auto;\n"]))),Ut=b()("plugin:event");function Zt(){var e={};return{handleTopicClick:function(e){Ut("handleTopicClick");var t=e.controller,n=e.model,o=e.topicKey;Ut(n.zoomFactor),null===n.editingDescKey&&n.editingContentKey!==o&&(n.focusKey===o&&n.focusMode===M||t.run("operation",lt(lt({},e),{opType:q,focusMode:_})))},handleTopicDoubleClick:function(e){var t=e.controller;null===e.model.editingDescKey&&t.run("operation",lt(lt({},e),{opType:q,focusMode:M}))},handleTopicContextMenu:function(e){e.controller.run("operation",lt(lt({},e),{opType:q,focusMode:N}))},handleActiveModalClose:function(e){var t=e.controller,n=t.run("getActiveModalProps",e);return null==n?null:"edit-desc"===n.name?function(){t.run("operation",lt(lt({},e),{focusMode:_,opType:q}))}:void 0},addEventListener:function(t){var n=t.key,o=t.listener,r=t.once,c=t.controller;function i(){o(),c.run("removeEventListener",{key:n,listener:o})}e[n]||(e[n]=[]),r?(i.origin=o,e[n].push(i)):e[n].push(o)},removeEventListener:function(t){var n=t.key,o=t.listener;e[n]&&(e[n]=e[n].filter((function(e){return e!==o&&e.origin!==o})))},fireEvent:function(t){var n=t.key;e[n]&&e[n].forEach((function(e){return e()}))}}}var Jt="show-menu",Yt="close",qt="color-picker",Xt="notes",$t="plus",Qt="minus",en="collapse",tn="expand",nn="center",on="search";function rn(e){return"icon iconfont bm-"+e}function cn(e){return Object(o.createElement)("span",{className:rn(e)})}function an(e){return"content-"+e}function ln(e){return"content-editor-"+e}function un(e){return"desc-editor-"+e}function sn(e){return"topic-widget-"+e}function pn(e){return"topic-"+e}function dn(e){return"links-"+e}function fn(e){return"links-svg-"+e}function bn(e){return"collapse-"+e}function yn(e,t){return"dropArea-"+t+"-"+e}var hn="DIAGRAM-ROOT",gn="DragScrollWidget",mn="svg-highlight",On="focus-highlight",vn="drop-effect",Tn="CENTER_ROOT_TOPIC",jn="DIAGRAM_CUSTOMIZE_BASE_Z_INDEX",kn="TOPIC_CONTEXT_MENU_ENABLED",En="TOPIC_TITLE",xn=function(e){e.stopPropagation()};function Sn(e,t){!function(e,t){var n=document.createElement("a");n.href=e,n.download=t,n.click()}("data:text/plain,"+encodeURIComponent(e),t)}function Cn(e){var t=document.createElement("input");return t.type="file",t.accept=e,new Promise((function(e,n){t.addEventListener("change",(function(t){var o=t.target.files[0],r=new FileReader;r.onload=function(t){var n=t.target.result;e(n)},r.onerror=function(e){n(e.target.error)},r.readAsText(o)})),t.click()}))}function wn(e){var t=e.top,n=void 0===t?0:t,o=e.right,r=void 0===o?0:o,c=e.bottom,i=void 0===c?0:c,a=e.left;return n+"px "+r+"px "+i+"px "+(void 0===a?0:a)+"px"}function Kn(e){return(e.top+e.bottom)/2}function Rn(e,t){return(e.x+t.x)/2}function Dn(e,t){return(e.y+t.y)/2}function Ln(e){return[(e.left+e.right)/2,(e.top+e.bottom)/2]}function In(e,t,n){void 0===n&&(n=1);var o=e.getBoundingClientRect(),r=Ln(t.getBoundingClientRect()),c=Ln(o);c[0]=(c[0]-r[0])/n,c[1]=(c[1]-r[1])/n;var i=o.width/n,a=o.height/n;return{left:c[0]-i/2,right:c[0]+i/2,top:c[1]-a/2,bottom:c[1]+a/2,width:i,height:a}}function _n(e,t){var n=e.getBoundingClientRect(),o=Ln(t.getBoundingClientRect()),r=Ln(n);return[r[0]-o[0],r[1]-o[1]]}var Mn="ADD_CHILD",An="ADD_SIBLING",Nn="DELETE_TOPIC",Fn="EDIT_CONTENT",Pn="EDIT_NOTES",Bn="SET_EDITOR_ROOT";function zn(){return{customizeHotKeys:function(e){var t=function(t){return function(n){!function(e,t){var n=t.topicKey,o=t.model,r=t.controller;void 0===n&&(t=lt(lt({},t),{topicKey:o.focusKey})),r.run("operation",lt(lt({},t),{opType:e}))}(t,e)}};return{topicHotKeys:new Map([[Mn,{label:"add child",combo:"tab",onKeyDown:t(Z)}],[An,{label:"add sibling",combo:"enter",onKeyDown:t(J)}],[Nn,{label:"delete topic",combo:"del",onKeyDown:t(Y)}],[Fn,{label:"edit content",combo:"space",onKeyDown:t(ne)}],[Pn,{label:"edit notes",combo:"alt + d",onKeyDown:t(oe)}],[Bn,{label:"set editor root",combo:"alt + shift + f",onKeyDown:t(ce)}]]),globalHotKeys:new Map}}}}var Vn=b()("plugin:operation");function Hn(){var e=new Map([[H,ye.toggleCollapse],[G,ye.collapseAll],[W,ye.expandAll],[U,ye.expandTo],[Z,ye.addChild],[J,ye.addSibling],[Y,ye.deleteTopic],[q,ye.focusTopic],[X,ye.setFocusMode],[$,ye.setStyle],[Q,ye.setTheme],[ee,ye.setBlockData],[te,ye.deleteBlock],[ne,function(e){var t=e.model,n=e.topicKey;return ye.focusTopic({model:t,topicKey:n,focusMode:M})}],[oe,function(e){var t=e.model,n=e.topicKey,o=t.getTopic(n).getBlock(I);return null!=o.block&&null!=o.block.data||(t=ye.setBlockData({model:t,topicKey:n,blockType:I,data:""})),t=ye.focusTopic({model:t,topicKey:n,focusMode:A})}],[re,function(e){var t=e.srcKey,n=e.dstKey,o=e.dropDir,r=e.model,c=r.getTopic(t),i=r.getTopic(n),a=c.parentKey,l=r.getTopic(a).subKeys,u=l.indexOf(t);if(l=l.delete(u),"in"===o){var s=i.subKeys;s=s.push(t),r=r.withMutations((function(e){e.setIn(["topics",a,"subKeys"],l).setIn(["topics",t,"parentKey"],n).setIn(["topics",n,"subKeys"],s).setIn(["topics",n,"collapse"],!1)}))}else{var p=i.parentKey,d=r.getTopic(p).subKeys,f=d.indexOf(n);if(a===p){var b=Object(T.List)();d.forEach((function(e){e!==t&&(b=e===n?"prev"===o?b.push(t).push(e):b.push(e).push(t):b.push(e))})),r=r.withMutations((function(e){e.setIn(["topics",p,"subKeys"],b)}))}else"prev"===o?d=d.insert(f,t):"next"===o&&(d=d.insert(f+1,t)),r=r.withMutations((function(e){e.setIn(["topics",a,"subKeys"],l).setIn(["topics",t,"parentKey"],p).setIn(["topics",p,"subKeys"],d).setIn(["topics",p,"collapse"],!1)}))}return r}],[ce,ye.setEditorRootTopicKey]]),t=Object(T.Stack)(),n=Object(T.Stack)(),o=!0,r=new Set;return{isOperationEnabled:function(e){return o},enableOperation:function(){o=!0},disableOperation:function(e){var t=e.whiteList;o=!1,t?r=new Set(t):r.clear()},getOpMap:function(t){return e},getAllowUndo:function(e){var t=e.model,n=e.opType;if(n)switch(n){case q:case ne:case oe:return!1}switch(t.focusMode){case"EDITING_DESC":case"EDITING_CONTENT":return!1}return t.config.allowUndo},getUndoRedoStack:function(){return{undoStack:t,redoStack:n}},setUndoStack:function(e){Vn("setUndoStack",e.undoStack),t=e.undoStack},setRedoStack:function(e){Vn("setRedoStack",e.redoStack),n=e.redoStack},canUndo:function(e){var t=e.controller,n=t.run("getUndoRedoStack",e).undoStack,o=t.run("getAllowUndo",e);return n.size>0&&o},canRedo:function(e){var t=e.controller,n=t.run("getUndoRedoStack",e).redoStack,o=t.run("getAllowUndo",e);return n.size>0&&o},undo:function(e){var t=e.controller,n=e.model;if(t.run("getAllowUndo",e)){var o=t.run("getUndoRedoStack",e),r=o.undoStack,c=o.redoStack,i=r.peek();i&&(t.run("setUndoStack",lt(lt({},e),{undoStack:r.shift()})),t.run("setRedoStack",lt(lt({},e),{redoStack:c.push(n)})),Vn(i),t.change(i))}},redo:function(e){var t=e.controller,n=e.model;if(t.run("getAllowUndo",e)){var o=t.run("getUndoRedoStack",e),r=o.undoStack,c=o.redoStack,i=c.peek();i&&(t.run("setUndoStack",lt(lt({},e),{undoStack:r.push(n)})),t.run("setRedoStack",lt(lt({},e),{redoStack:c.shift()})),t.change(i))}},operation:function(e){var t=e.controller,n=e.opType,o=e.model,c=e.opArray,i=e.callback;if(null!=c&&!Array.isArray(c))throw new Error("operation: the type of opArray must be array!");if(null!=n&&null!=c)throw new Error("operation: opType and opArray conflict!");if(!t.run("isOperationEnabled",e)){if(0===r.size)return;if(null!=c){var a=c.filter((function(e){return!r.has(e.opType)}));if(a&&a.length>0)return}else if(!r.has(n))return}Vn("operation:",n),Vn("operation:",o),Vn("operation:",e);var l,u=t.run("getOpMap",e);if(t.run("beforeOperation",e),t.run("getAllowUndo",e)){var s=t.run("getUndoRedoStack",e).undoStack;t.run("setUndoStack",lt(lt({},e),{undoStack:s.push(o)}))}if(null!=c)l=c.reduce((function(e,n){var o=n.opType;if(!u.has(o))throw new Error("opType:"+o+" not exist!");var r=u.get(o),c=lt(lt({controller:t},n),{model:e}),i=t.run("beforeOpFunction",c);return i=r(lt(lt({},c),{model:i})),i=t.run("afterOpFunction",lt(lt({},c),{model:i}))}),o);else{if(!u.has(n))throw new Error("opType:"+n+" not exist!");var p=u.get(n);l=t.run("beforeOpFunction",e),l=p(lt(lt({},e),{model:l})),l=t.run("afterOpFunction",lt(lt({},e),{model:l}))}Vn("newModel:",l),t.change(l,i),t.run("afterOperation",e)},deleteRefKey:function(e){var t,n,o=e.model,r=e.topicKey,c=e.deleteRef,i=pe(o,r);i.push(r);try{for(var a=pt(i),l=a.next();!l.done;l=a.next()){var u=l.value;c(dn(u)),c(fn(u)),c(an(u)),c(ln(u)),c(un(u)),c(sn(u)),c(pn(u)),c(bn(u)),c(yn(u,"next")),c(yn(u,"prev"))}}catch(s){t={error:s}}finally{try{l&&!l.done&&(n=a.return)&&n.call(a)}finally{if(t)throw t.error}}},beforeOperation:function(e){},afterOperation:function(e){},beforeOpFunction:function(e){var t=e.controller,n=e.opType,o=e.model,r=e.topicKey;return n===Y&&r!==o.editorRootTopicKey&&t.run("deleteRefKey",e),o},afterOpFunction:function(e){return e.model}}}var Gn=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return at(t,e),t.prototype.render=function(){var e=this.props.controller;return Object(o.createElement)(y.n,null,e.run("customizeTopicContextMenu",this.props))},t}(wt),Wn=[{icon:"edit",label:"edit",shortcut:"Space",rootCanUse:!0,opType:ne},{icon:"add-sibling",label:"add sibling",shortcut:"Enter",opType:J},{icon:"add-child",label:"add child",shortcut:"Tab",rootCanUse:!0,opType:Z},{icon:"notes",label:"edit notes",shortcut:"Alt + D",rootCanUse:!0,opType:oe},{icon:"delete-node",label:"delete node",shortcut:"Del",opType:Y},{icon:"root",label:"set as editor root",shortcut:"Alt + Shift + F",opType:ce}];var Un,Zn,Jn=b()("node:topic-drop-effect"),Yn=d.default.svg(Un||(Un=bt(["\n  width: 100%;\n  height: 100%;\n  position: absolute;\n  left: 0;\n  top: 0;\n  z-index: 2;\n  pointer-events: none;\n"],["\n  width: 100%;\n  height: 100%;\n  position: absolute;\n  left: 0;\n  top: 0;\n  z-index: 2;\n  pointer-events: none;\n"]))),qn=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.state={content:null},t}return at(t,e),t.prototype.layout=function(){var e=this.props,t=this.props,n=t.getRef,r=t.model,c=t.zoomFactor,i=t.controller.run("getDragTargetProps",e),a=i.key,l=i.dropDir;if(Jn("layout",l),null!==a){var u=n("in"===l?an(a):yn(a,l)),s=n("svg-drop-effect"),p=n(gn).bigView,d=In(u,p,c),f=In(s,p,c),b=d.left-f.left-3,y=d.top-f.top-3,h=d.width+6,g=d.height+6;this.setState({content:Object(o.createElement)("g",null,Object(o.createElement)("rect",{x:b,y:y,width:h,height:g,fill:"none",stroke:r.config.theme.highlightColor,strokeDasharray:"5,5",strokeWidth:2}))})}else this.setState({content:null})},t.prototype.render=function(){var e=this.props.saveRef;return Object(o.createElement)(Yn,{ref:e("svg-drop-effect")},this.state.content)},t}(wt),Xn=b()("plugin:drag-and-drop"),$n=d.default.div(Zn||(Zn=bt(["\n  height: ",";\n  width: 100%;\n  margin: 5px 0px;\n"],["\n  height: ",";\n  width: 100%;\n  margin: 5px 0px;\n"])),(function(e){return e.height+"px"}));function Qn(){var e=null,t=null;return{renderTopicDropArea:function(e){var t=e.topicKey,n=e.dropDir,r=e.saveRef,c=e.controller,i=e.model,a={onDragEnter:function(o){Xn("onDragEnter",t,n),c.run("handleTopicDragEnter",lt(lt({},e),{ev:o,dropDir:n}))},onDragLeave:function(o){Xn("onDragLeave",t,n),c.run("handleTopicDragLeave",lt(lt({},e),{ev:o,dropDir:n}))},onDragOver:function(e){e.preventDefault()},onDrop:function(o){Xn("onDrop",t,n),c.run("handleTopicDrop",lt(lt({},e),{ev:o,dropDir:n}))}};return Object(o.createElement)($n,lt({height:i.config.theme.marginV/2,ref:r(yn(t,n))},a))},renderDragAndDropEffect:function(e){Xn("renderDragAndDropEffect");var t=e.saveRef;return Object(o.createElement)(qn,lt({ref:t(vn)},e))},getDragTargetProps:function(n){return{key:e,dropDir:t}},handleTopicDragStart:function(e){var t=e.controller;e.ev.stopPropagation(),t.run("operation",lt(lt({},e),{opType:q,focusMode:F}))},canDrop:function(e){var t=e.srcKey,n=e.dstKey,o=e.model,r=e.dropDir;return t!==o.editorRootTopicKey&&t!==n&&de(o,t,n)!==P&&((n!==o.editorRootTopicKey||"in"===r)&&(o.getTopic(t).parentKey!==n||"in"!==r))},handleTopicDragEnter:function(n){var o=n.dropDir,r=n.topicKey,c=n.controller,i=n.model;Xn("handleTopicDragEnter:",r,o),c.run("canDrop",lt(lt({},n),{srcKey:i.focusKey,dstKey:r}))&&(e=r,t=o,c.change(i))},handleTopicDragLeave:function(n){var o=n.controller,r=n.model,c=n.topicKey,i=n.dropDir,a=n.getRef,l=n.ev.nativeEvent.relatedTarget;Xn("handleTopicDragLeave:",c,i);var u=a(an(c));u==l||u.contains(l)||(e=null,t=null,o.change(r))},handleTopicDrop:function(n){Xn("handleTopicDrop");var o=n.controller,r=n.topicKey,c=n.model;n=lt(lt({},n),{srcKey:c.focusKey,dstKey:r}),e=null,t=null,o.run("canDrop",n)&&o.run("operation",lt(lt({},n),{opType:re}))}}}var eo,to,no,oo,ro,co,io,ao,lo,uo,so,po=Object(d.default)(Gt)(eo||(eo=bt(["\n  position: absolute;\n  width: 20%;\n  padding: 0 5px;\n  background: white;\n  left: 30px;\n  top: 20px;\n  border-radius: 2px;\n"],["\n  position: absolute;\n  width: 20%;\n  padding: 0 5px;\n  background: white;\n  left: 30px;\n  top: 20px;\n  border-radius: 2px;\n"]))),fo=d.default.div(to||(to=bt(["\n  max-width: 600px;\n"],["\n  max-width: 600px;\n"]))),bo=d.default.span(no||(no=bt([""],[""]))),yo=function(e){function t(t){var n=e.call(this,t)||this;return n.setEditorRootTopicKey=function(e){return function(){var t=n.props,o=t.model,r=t.controller;o.editorRootTopicKey!==e&&r.change(ye.setEditorRootTopicKey({model:o,topicKey:e}))}},n.breadcrumbRenderer=function(e){var t=e.text,n=ut(e,["text"]),r=t.length>8,c=r?t.substr(0,8)+"...":t,i={content:Object(o.createElement)(fo,null,t),position:y.u.BOTTOM_RIGHT},a=Object(o.createElement)(y.b,lt({},n),Object(o.createElement)(bo,null,c));return r?Object(o.createElement)(y.x,lt({},i),a):a},n.state={show:!1},n}return at(t,e),t.prototype.render=function(){var e=this.props,t=e.model,n=e.controller,r=e.zIndex,c=t.editorRootTopicKey;if(c===t.rootTopicKey)return null;for(var i=[],a=t.getTopic(c);null!=a;){var l=n.getValue(En,lt(lt({},e),{topicKey:a.key}));i.unshift({text:l,onClick:this.setEditorRootTopicKey(a.key)}),a=t.getTopic(a.parentKey)}var u={items:i,breadcrumbRenderer:this.breadcrumbRenderer};return Object(o.createElement)(po,{zIndex:r},Object(o.createElement)(y.c,lt({},u)))},t}(wt),ho=d.default.div(oo||(oo=bt(["\n  position: relative;\n  display: flex;\n  align-items: center;\n  padding: 5px;\n"],["\n  position: relative;\n  display: flex;\n  align-items: center;\n  padding: 5px;\n"]))),go=d.default.div(ro||(ro=bt(["\n  width: 100%;\n  height: 100%;\n  background: ",";\n"],["\n  width: 100%;\n  height: 100%;\n  background: ",";\n"])),(function(e){return e.theme.background})),mo=function(e){function t(t){var n=e.call(this,t)||this;return n.setZoomFactor=function(e){n.dragScrollWidget.setZoomFactor(e)},n.onWheel=function(e){if(e.altKey||e.ctrlKey){var t=n.props.controller,o=t.run("getZoomFactor",n.props);(o-=e.nativeEvent.deltaY>0?.1:-.1)<.5&&(o=.5),o>4&&(o=4),t.run("setZoomFactor",lt(lt({},n.props),{zoomFactor:o}))}},n}return at(t,e),t.prototype.renderHotkeys=function(){var e=this.props,t=e.controller,n=e.model,r=t.run("customizeHotKeys",e);if(null===r)return null;if(!(r.topicHotKeys instanceof Map&&r.globalHotKeys instanceof Map))throw new TypeError("topicHotKeys and globalHotKeys must be a Map");var c=[];return n.focusMode!==_&&n.focusMode!==N||r.topicHotKeys.forEach((function(e,t){c.push(Object(o.createElement)(y.j,lt({key:t},e,{global:!0})))})),r.globalHotKeys.forEach((function(e,t){c.push(Object(o.createElement)(y.j,lt({key:t},e,{global:!0})))})),Object(o.createElement)(y.k,null,c)},t.prototype.componentDidMount=function(){var e=this.props,t=e.getRef,n=e.model;e.controller.run("addZoomFactorChangeEventListener",lt(lt({},this.props),{listener:this.setZoomFactor}));var o=t(pn(n.editorRootTopicKey)),r=t("node-layer"),c=o.getBoundingClientRect(),i=r.getBoundingClientRect();this.dragScrollWidget.setViewBoxScrollDelta(0,c.top-i.top-this.dragScrollWidget.viewBox.getBoundingClientRect().height/2+c.height),this.layout()},t.prototype.componentWillUnmount=function(){this.props.controller.run("removeZoomFactorChangeEventListener",lt(lt({},this.props),{listener:this.setZoomFactor}))},Object.defineProperty(t.prototype,"dragScrollWidget",{get:function(){return this.props.getRef(gn)},enumerable:!0,configurable:!0}),t.prototype.componentDidUpdate=function(){this.props.controller.run("fireEvent",lt(lt({},this.props),{key:Tn})),this.layout()},t.prototype.layout=function(){this.props.controller.run("layout",this.props)},t.prototype.render=function(){var e=this,t=this.props,n=t.saveRef,r=t.model,c=t.controller,i=r.editorRootTopicKey;return Object(o.createElement)(go,{onWheel:this.onWheel},Object(o.createElement)(Lt,lt({},this.state,{enableMouseWheel:!1,zoomFactor:r.zoomFactor,ref:n(gn)}),(function(t,r){var a=lt(lt({},e.props),{topicKey:i,setViewBoxScroll:t,setViewBoxScrollDelta:r});return Object(o.createElement)(ho,{ref:n("node-layer")},c.run("renderRootWidget",a))})))},t=st([y.l],t)}(o.Component),Oo=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.handleClose=function(){var e=t.props.controller.run("handleActiveModalClose",t.props);e&&e()},t}return at(t,e),t.prototype.render=function(){var e=this.props.controller,t=e.run("renderModal",this.props),n=e.run("getActiveModalProps",this.props);return Object(o.createElement)(y.g,{onClose:this.handleClose,isOpen:null!==t,autoFocus:!0,enforceFocus:!0,usePortal:!0,title:n&&n.title,style:n&&n.style},Object(o.createElement)("div",{className:h.a.DIALOG_BODY,style:{minHeight:0}},t))},t}(wt),vo=d.default.svg(co||(co=bt(["\n  width: 100%;\n  height: 100%;\n  position: absolute;\n  left: 0;\n  top: 0;\n  z-index: 1;\n  pointer-events: none;\n"],["\n  width: 100%;\n  height: 100%;\n  position: absolute;\n  left: 0;\n  top: 0;\n  z-index: 1;\n  pointer-events: none;\n"]))),To=b()("node:root-sub-links"),jo=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.state={curves:[]},t}return at(t,e),t.prototype.layout=function(){var e,t,n,r=this.props,c=r.model,i=r.getRef,a=r.topicKey,l=r.zoomFactor,u=r.controller,s=c.getTopic(a),p=i(an(a)),d=i(fn(a)),f=i(gn).bigView,b=In(p,f,l),y=In(d,f,l);e={x:(n=b,(n.left+n.right)/2-y.left),y:Kn(b)-y.top};var h=[];s.subKeys.forEach((function(n){var c,a=u.run("getLinkStyle",lt(lt({},r),{topicKey:n})),s=a.lineType,p=In(i(an(n)),f,l);if(t={x:(t=p.left>b.right?{x:p.left,y:Kn(p)}:{x:p.right,y:Kn(p)}).x-y.left,y:t.y-y.top},"curve"===s)c="M "+e.x+" "+e.y+" C "+e.x+" "+Dn(e,t)+" "+Rn(e,t)+" "+t.y+" "+t.x+" "+t.y;else if("line"===s)c="M "+e.x+" "+e.y+" L "+t.x+" "+t.y;else if("round"===s){var d=t.y>e.y?1:-1,g=t.x>e.x?1:-1,m=a.lineRadius;if(null==m)throw new Error("link line type is round, but lineRadius is not provided!");c=t.y===e.y?"M "+e.x+" "+e.y+" H "+t.x:"M "+e.x+" "+e.y+"  V "+(t.y-d*m)+" A "+m+" "+m+" 0 0 "+(d*g===1?0:1)+" "+(e.x+m*g)+" "+t.y+" H "+t.x}h.push(Object(o.createElement)("path",{key:"link-"+n,d:c,strokeWidth:a.lineWidth,stroke:a.lineColor,fill:"none"}))})),this.setState({curves:h})},t.prototype.render=function(){To("render");var e=this.props,t=e.topicKey,n=e.saveRef;return Object(o.createElement)(vo,{ref:n(fn(t))},Object(o.createElement)("g",null,this.state.curves))},t}(wt),ko=b()("RootNode"),Eo=d.default.div(io||(io=bt(["\n  display: flex;\n  position: relative;\n\n  align-items: ",";\n  flex-direction: column;\n\n  padding: ",";\n"],["\n  display: flex;\n  position: relative;\n\n  align-items: ",";\n  flex-direction: column;\n\n  padding: ",";\n"])),(function(e){return e.topicDirection===C?"flex-end":"flex-start"}),(function(e){return e.topicDirection===C?"15px 60px 15px 0px":"15px 0px 15px 60px"})),xo=d.default.div(ao||(ao=bt(["\n  display: flex;\n  position: relative;\n  align-items: center;\n  z-index: 3;\n"],["\n  display: flex;\n  position: relative;\n  align-items: center;\n  z-index: 3;\n"]))),So=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return at(t,e),t.prototype.renderPartTopics=function(e,t){var n=this.props,r=n.controller,c=n.saveRef,i=r.run("createSubTopics",lt(lt({},this.props),{dir:t,isRoot:!0,topics:e}));if(!i)return null;var a=i.subTopics,l="bm-layer-"+(t===C?"left":"right");return Object(o.createElement)(Eo,{topicDirection:t,ref:c(l)},a)},t.prototype.render=function(){ko("render");var e=this.props,t=e.model,n=e.topicKey,r=e.saveRef,c=e.controller,i=c.run("getTopicContentStyle",e),a=t.config,l=c.run("renderTopicContent",lt(lt({},e),{topicStyle:i,dir:K})),u=c.run("getPartTopics",{layout:a.layoutDir,model:t,topicKey:n}),s=Object(o.createElement)(xo,{ref:r(pn(n))},l),p=c.run("renderRootWidgetOtherChildren",e);switch(a.layoutDir){case x.LEFT_AND_RIGHT:return Object(o.createElement)(o.Fragment,null,this.renderPartTopics(u.L,"L"),s,this.renderPartTopics(u.R,"R"),p);case x.LEFT_TO_RIGHT:return Object(o.createElement)(o.Fragment,null,s,this.renderPartTopics(u.R,"R"),p);case x.RIGHT_TO_LEFT:return Object(o.createElement)(o.Fragment,null,this.renderPartTopics(u.L,"L"),s,p);case x.TOP_TO_BOTTOM:return Object(o.createElement)(o.Fragment,null,s,this.renderPartTopics(u.B,"B"),p)}return null},t}(o.Component),Co=d.default.div(so||(so=bt(["\n  position: absolute;\n  top: calc(50% - 10px);\n  ",";\n  border-radius: 50%;\n  width: 20px;\n  height: 20px;\n  text-align: center;\n  //@ts-ignore\n  background: ",";\n  cursor: pointer;\n  padding: 0;\n  font-size: 14px;\n  line-height: 20px;\n  border: 0;\n  z-index: 2;\n"],["\n  position: absolute;\n  top: calc(50% - 10px);\n  ",";\n  border-radius: 50%;\n  width: 20px;\n  height: 20px;\n  text-align: center;\n  //@ts-ignore\n  background: ",";\n  cursor: pointer;\n  padding: 0;\n  font-size: 14px;\n  line-height: 20px;\n  border: 0;\n  z-index: 2;\n"])),(function(e){var t=e.dir;return t===w?Object(d.css)(lo||(lo=bt(["\n        right: -25px;\n      "],["\n        right: -25px;\n      "]))):t===C?Object(d.css)(uo||(uo=bt(["\n        left: -25px;\n      "],["\n        left: -25px;\n      "]))):void 0}),(function(e){return e.background}));function wo(e){var t,n=e.model,r=e.topicKey,c=e.topicStyle,i=e.dir,a=e.saveRef,l=e.onClickCollapse,u=n.getTopic(r);return u.subKeys.size>0?Object(o.createElement)(Co,{ref:a(bn(r)),onClick:l,background:c.background,dir:i,className:nt()((t={icon:!0,iconfont:!0},t["bm-"+(u.collapse?"plus":"minus")]=!0,t))}):null}var Ko,Ro,Do=b()("node:topic-content2"),Lo=d.default.div(Ko||(Ko=bt(["\n  position: relative;\n"],["\n  position: relative;\n"]))),Io=d.default.div(Ro||(Ro=bt(["\n  position: absolute;\n  left: 0;\n  top: 0;\n  width: auto;\n  z-index: 10;\n  color: black;\n"],["\n  position: absolute;\n  left: 0;\n  top: 0;\n  width: auto;\n  z-index: 10;\n  color: black;\n"]))),_o=function(e){Do("cancelEvent"),e.preventDefault(),e.stopPropagation()};function Mo(e){var t,n=e.controller,r=e.model,c=e.topicKey,i=e.getRef,a=r.editingContentKey!==c,l=n.run("renderTopicContentEditor",lt(lt({},e),{readOnly:a}));if(a)t=l;else{var u,s={width:50,height:40},d=i("content-editor-"+c);d&&(s=d.getBoundingClientRect());var f=new p.a((function(e,t){var n=e[0].contentRect;u.style.left=(s.width-n.width)/2+"px",u.style.top=(s.height-n.height)/2+"px"}));Do(s),t=Object(o.createElement)(o.Fragment,null,Object(o.createElement)("div",{style:{width:s.width,height:s.height}}),Object(o.createElement)(Io,{ref:function(e){e&&(u=e,f.observe(u))}},l))}return Object(o.createElement)(Lo,{onDragEnter:_o,onDragOver:_o},t)}var Ao,No,Fo,Po=b()("node:topic-content-widget"),Bo=d.default.div(Ao||(Ao=bt(["\n  display: flex;\n  align-items: center;\n  cursor: pointer;\n  //overflow: hidden;\n  position: relative;\n"],["\n  display: flex;\n  align-items: center;\n  cursor: pointer;\n  //overflow: hidden;\n  position: relative;\n"]))),zo=d.default.div(No||(No=bt(["\n  position: relative;\n"],["\n  position: relative;\n"]))),Vo=function(e){function t(t){var n=e.call(this,t)||this;return n.onDragStart=function(e){n.run("handleTopicDragStart",lt(lt({},n.props),{ev:e}))},n.onDragOver=function(e){e.preventDefault()},n.onDragEnter=function(e){Po("onDragEnter",n.props.topicKey),n.run("handleTopicDragEnter",lt(lt({},n.props),{ev:e,dropDir:"in"}))},n.onDragLeave=function(e){n.run("handleTopicDragLeave",lt(lt({},n.props),{ev:e,dropDir:"in"}))},n.onDrop=function(e){Po("onDrop"),n.run("handleTopicDrop",lt(lt({},n.props),{ev:e,dropDir:"in"}))},n.onClick=function(e){var t=n.props.controller;n.handleTopicClickTimeout=setTimeout((function(){t.run("handleTopicClick",lt(lt({},n.props),{ev:e}))}),200)},n.onDoubleClick=function(e){clearTimeout(n.handleTopicClickTimeout),n.props.controller.run("handleTopicDoubleClick",lt(lt({},n.props),{ev:e}))},n.needRelocation=!1,n.onClickCollapse=function(e){e.stopPropagation();var t=n.props,o=t.topicKey,r=t.getRef;n.needRelocation=!0;var c=r(bn(o)).getBoundingClientRect();Po("oldRect",c),n.oldCollapseIconVector=[c.left+c.width/2,c.top+c.height/2],Po("oldCollapseIconVector",n.oldCollapseIconVector),n.operation(H,n.props)},n.state={dragEnter:!1},n}return at(t,e),t.prototype.renderContextMenu=function(){var e=this.props.controller;if(e.getValue(kn,lt({},this.props)))return this.operation(q,lt(lt({},this.props),{focusMode:N})),e.run("renderTopicContextMenu",this.props)},t.prototype.onContextMenuClose=function(){},t.prototype.componentDidUpdate=function(){if(this.needRelocation){var e=this.props,t=e.getRef,n=e.topicKey,o=e.setViewBoxScrollDelta,r=t(bn(n)).getBoundingClientRect(),c=[r.left+r.width/2,r.top+r.height/2];Po("newVector:",c),Po("oldVector:",this.oldCollapseIconVector);var i=[c[0]-this.oldCollapseIconVector[0],c[1]-this.oldCollapseIconVector[1]];Po("vector",i),o(i[0],i[1]),this.needRelocation=!1}},t.prototype.render=function(){var e=this.props,t=e.saveRef,n=e.topicKey,r=e.model,c=e.controller,i=e.topicStyle,a=e.dir;Po("render",n,r.focusMode);var l=c.run("isOperationEnabled",e)&&r.editingContentKey!==n,u=c.run("renderTopicCollapseIcon",lt(lt({},e),{onClickCollapse:this.onClickCollapse.bind(this)})),s=c.run("renderTopicDropArea",lt(lt({},e),{dropDir:"prev"})),p=c.run("renderTopicDropArea",lt(lt({},e),{dropDir:"next"})),d={onDragEnter:this.onDragEnter,onDragLeave:this.onDragLeave,onDragOver:this.onDragOver,onDrop:this.onDrop};return Object(o.createElement)(zo,null,s,Object(o.createElement)(Bo,lt({style:i,draggable:l,ref:t(an(n)),onDragStart:this.onDragStart,onClick:this.onClick,onDoubleClick:this.onDoubleClick},d),c.run("renderTopicBlocks",e),c.run("renderTopicContentOthers",e)),p,a!==K&&u)},t=st([y.f],t)}(wt),Ho=b()("node:topic-desc"),Go=d.default.div(Fo||(Fo=bt(["\n  overflow: auto;\n"],["\n  overflow: auto;\n"])));function Wo(e){var t=e.controller,n=e.model,r=e.topicKey,c=e.getRef,i=n.editingDescKey===r;Ho("isEditing",i);var a=n.getTopic(r).getBlock(I);if(!i&&t.run("isBlockEmpty",lt(lt({},e),{block:a.block})))return null;var l=t.run("renderTopicDescEditor",e),u=c(hn),s={maxWidth:"800px",maxHeight:"600px"};if(u){var p=u.getBoundingClientRect();s.maxWidth=.6*p.width+"px",s.maxHeight=.8*p.height+"px"}var d={autoFocus:!1,content:Object(o.createElement)(Go,{onClick:xn,classname:h.a.POPOVER_DISMISS,style:s},l),target:Object(o.createElement)(Ht,{onClick:function(n){n.stopPropagation(),t.run("operation",lt(lt({},e),{opType:oe}))},className:rn(Xt),tabIndex:-1}),interactionKind:y.t.HOVER,hoverOpenDelay:500};return a.block&&Object(o.createElement)(y.s,lt({},d))}var Uo,Zo,Jo,Yo,qo,Xo,$o,Qo,er,tr=d.default.svg(Uo||(Uo=bt(["\n  width: 100%;\n  height: 100%;\n  position: absolute;\n  left: 0;\n  top: 0;\n  z-index: 2;\n  pointer-events: none;\n"],["\n  width: 100%;\n  height: 100%;\n  position: absolute;\n  left: 0;\n  top: 0;\n  z-index: 2;\n  pointer-events: none;\n"]))),nr=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.state={content:null},t}return at(t,e),t.prototype.layout=function(){var e=this.props,t=e.getRef,n=e.model,r=e.zoomFactor,c=n.focusKey,i=n.focusMode;if(c&&i!==M){var a=t(an(c)),l=t(gn).bigView,u=t(mn),s=In(a,l,r),p=In(u,l,r),d=s.left-p.left-3,f=s.top-p.top-3,b=s.width+6,y=s.height+6;this.setState({content:Object(o.createElement)("rect",{x:d,y:f,width:b,height:y,fill:"none",stroke:n.config.theme.highlightColor,strokeWidth:2})})}else this.setState({content:null})},t.prototype.render=function(){var e=this.props.saveRef;return Object(o.createElement)(tr,{ref:e(mn)},this.state.content)},t}(wt),or=d.default.svg(Zo||(Zo=bt(["\n  width: 100%;\n  height: 100%;\n  position: absolute;\n  left: 0;\n  top: 0;\n  z-index: 1;\n  pointer-events: none;\n"],["\n  width: 100%;\n  height: 100%;\n  position: absolute;\n  left: 0;\n  top: 0;\n  z-index: 1;\n  pointer-events: none;\n"]))),rr=b()("node:topic-sub-links"),cr=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.state={curves:[]},t}return at(t,e),t.prototype.layout=function(){var e,t,n,r=this.props,c=r.model,i=r.getRef,a=r.topicKey,l=r.dir,u=r.controller,s=u.run("getZoomFactor",r),p=c.getTopic(a),d=i(an(a)),f=i(fn(a)),b=i(bn(a)),y=i(gn).bigView,h=In(f,y,s),g=In(b,y,s),m=In(d,y,s);rr(a),rr("svgRect",h),rr("collapseRect",g),rr("contentRect",m),l===w?(e={x:0,y:Kn(m)-h.top},t={x:g.right-h.left+10,y:e.y}):l===C&&(e={x:h.right-h.left,y:Kn(m)-h.top},t={x:g.left-h.left-10,y:e.y});var O=[];p.subKeys.forEach((function(c){var a,d=u.run("getLinkStyle",lt(lt({},r),{topicKey:c})),f=i(an(c));if(f){var b=In(f,y,s);l===w&&(n={x:b.left-h.left,y:Kn(b)-h.top}),l===C&&(n={x:b.right-h.left,y:Kn(b)-h.top});var g=d.lineType;if("curve"===g)a="M "+e.x+" "+e.y+" L "+t.x+" "+t.y+" C "+t.x+" "+Dn(t,n)+" "+Rn(t,n)+" "+n.y+" "+n.x+" "+n.y;else if("round"===g){var m=n.y>e.y?1:-1,v=n.x>e.x?1:-1,T=d.lineRadius;a=1===p.subKeys.size||Math.abs(n.y-e.y)<=1?"M "+e.x+" "+e.y+" L "+n.x+" "+n.y:"M "+e.x+" "+e.y+" H "+t.x+" V "+(n.y-m*T)+" A "+T+" "+T+" 0 0 "+(m*v===1?0:1)+" "+(t.x+T*v)+" "+n.y+" H "+n.x}else"line"===g&&(a="M "+e.x+" "+e.y+" H "+t.x+" L "+n.x+" "+n.y);O.push(Object(o.createElement)("path",{key:"link-"+c,d:a,strokeWidth:d.lineWidth,stroke:d.lineColor,fill:"none"}))}})),this.setState({curves:O})},t.prototype.render=function(){var e=this.props,t=e.topicKey,n=e.saveRef;return Object(o.createElement)(or,{ref:n(fn(t))},Object(o.createElement)("g",null,this.state.curves))},t}(wt),ir=b()("node:topic-widget"),ar=d.default.div(Jo||(Jo=bt(["\n  display: flex;\n  align-items: center;\n  flex-direction: ",";\n"],["\n  display: flex;\n  align-items: center;\n  flex-direction: ",";\n"])),(function(e){return e.topicDirection===w?"row":"row-reverse"})),lr=d.default.div(Yo||(Yo=bt(["\n  position: relative;\n  padding: ",";\n"],["\n  position: relative;\n  padding: ",";\n"])),(function(e){return e.dir===w?"0 0 0 "+e.marginH+"px":"0 "+e.marginH+"px 0 0"})),ur=d.default.div(qo||(qo=bt(["\n  display: flex;\n  position: relative;\n  align-items: center;\n\n  flex-direction: ",";\n"],["\n  display: flex;\n  position: relative;\n  align-items: center;\n\n  flex-direction: ",";\n"])),(function(e){return e.topicDirection===w?"row":"row-reverse"})),sr=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return at(t,e),t.prototype.renderSubTopics=function(){var e=this.props,t=e.controller,n=e.model,r=e.topicKey,c=e.dir,i=n.getTopic(r).subKeys.toArray(),a=t.run("createSubTopics",lt(lt({},e),{topics:i}));if(!a)return null;var l=a.subTopics,u=t.run("renderSubLinks",e);return Object(o.createElement)(lr,{dir:c,marginH:n.config.theme.marginH},l," ",u)},t.prototype.layoutLinks=function(){var e=this.props,t=e.getRef,n=e.topicKey,o=e.model.getTopic(n);if(0!==o.subKeys.size&&!o.collapse){ir("layoutLinks",n);var r=t(dn(n));r&&r.layout()}},t.prototype.render=function(){var e=this.props,t=e.controller,n=e.topicKey,r=e.dir,c=e.saveRef;ir("render",n);var i=t.run("getTopicContentStyle",e),a=lt(lt({},e),{topicStyle:i}),l=t.run("renderTopicContent",a);return Object(o.createElement)(ar,{topicDirection:r},Object(o.createElement)(ur,{topicDirection:r,ref:c(pn(n))},l),this.renderSubTopics())},t}(o.Component),pr=b()("node:view-port-viewer"),dr=Object(d.default)(Gt)(Xo||(Xo=bt(["\n  position: absolute;\n  background: white;\n  right: 30px;\n  bottom: 20px;\n  border-radius: 2px;\n  display: flex;\n  flex-direction: row;\n  user-select: none;\n"],["\n  position: absolute;\n  background: white;\n  right: 30px;\n  bottom: 20px;\n  border-radius: 2px;\n  display: flex;\n  flex-direction: row;\n  user-select: none;\n"]))),fr=Object(d.default)(Pt)($o||($o=bt(["\n  margin: 10px;\n"],["\n  margin: 10px;\n"]))),br=d.default.span(Qo||(Qo=bt(["\n  display: inline-block;\n  width: 80px;\n  height: 18px;\n"],["\n  display: inline-block;\n  width: 80px;\n  height: 18px;\n"]))),yr=function(e){return Object(o.createElement)(y.x,{content:e.tooltip,position:g.a.TOP,className:h.a.ICON},Object(o.createElement)(fr,{onClick:e.onClick,tabIndex:-1},e.children))},hr=function(e){function t(t){var n=e.call(this,t)||this;return n.zoomFactorChange=function(e){pr("zoomFactorChange",e),n.setState({zoomFactor:e})},n.onClickResetZoom=function(e){var t=n.props;t.controller.run("setZoomFactor",lt(lt({},t),{zoomFactor:1}))},n.onClickAddZoom=function(e){var t=n.props,o=t.controller,r=o.run("getZoomFactor",t);o.run("setZoomFactor",lt(lt({},t),{zoomFactor:r+.1}))},n.onClickMinusZoom=function(e){var t=n.props,o=t.controller,r=o.run("getZoomFactor",t);o.run("setZoomFactor",lt(lt({},t),{zoomFactor:r-.1}))},n.onClickCollapseAll=function(e){var t=n.props,o=t.controller;o.run("addEventListener",lt(lt({},t),{key:Tn,listener:n.centerRootTopic,once:!0})),o.run("operation",lt(lt({},t),{opType:G}))},n.onClickExpandAll=function(e){var t=n.props,o=t.controller;o.run("addEventListener",lt(lt({},t),{key:Tn,listener:n.centerRootTopic,once:!0})),o.run("operation",lt(lt({},t),{opType:W}))},n.centerRootTopic=function(){var e=n.props,t=e.model;e.controller.run("moveTopicToCenter",lt(lt({},n.props),{topicKey:t.editorRootTopicKey}))},n}return at(t,e),t.prototype.componentDidMount=function(){var e=this.props;e.controller.run("addZoomFactorChangeEventListener",lt(lt({},e),{listener:this.zoomFactorChange}))},t.prototype.componentWillUnmount=function(){var e=this.props;e.controller.run("removeZoomFactorChangeEventListener",lt(lt({},e),{listener:this.zoomFactorChange}))},t.prototype.render=function(){pr("render");var e=this.props,t=e.controller,n=e.zIndex,r=t.run("getZoomFactor",e);return Object(o.createElement)(dr,{zIndex:n},Object(o.createElement)(yr,{onClick:this.onClickCollapseAll,tooltip:"collapse all"},cn(en)),Object(o.createElement)(yr,{onClick:this.onClickExpandAll,tooltip:"expand all"},cn(tn)),Object(o.createElement)(yr,{onClick:this.centerRootTopic,tooltip:"center root topic"},cn(nn)),Object(o.createElement)(yr,{onClick:this.onClickMinusZoom,tooltip:"zoom in"},cn(Qt)),Object(o.createElement)(yr,{onClick:this.onClickResetZoom,tooltip:"reset zoom"},Object(o.createElement)(br,null,"zoom:"+Math.floor(100*r)+"%")),Object(o.createElement)(yr,{onClick:this.onClickAddZoom,tooltip:"zoom out"},cn($t)))},t}(wt),gr=d.default.div(er||(er=bt(["\n  overflow: auto;\n  padding: 0px 0px 0px 20px;\n  background: #88888850;\n"],["\n  overflow: auto;\n  padding: 0px 0px 0px 20px;\n  background: #88888850;\n"])));function mr(e){var t=e.controller,n=e.model,r=e.topicKey;if(n.focusMode===A){var c=t.run("renderTopicDescEditor",e);return Object(o.createElement)(y.i,{key:"drawer",title:"Edit Notes",icon:cn("note"),isOpen:!0,hasBackdrop:!0,backdropProps:{onMouseDown:xn},isCloseButtonShown:!1,onClose:function(n){n.stopPropagation();var o="topic-desc-data-"+r,c=t.run("deleteTempValue",{key:o});t.run("operation",lt(lt({},e),{opType:ee,topicKey:r,blockType:I,data:c,focusMode:_}))},size:"70%"},Object(o.createElement)(gr,null,c))}}function Or(e){var t=e.theme,n=e.children;return Object(o.createElement)(d.ThemeProvider,{theme:t},Object(o.createElement)(o.Fragment,null,n))}var vr,Tr=b()("plugin:rendering");function jr(){var e,t=d.default.div(vr||(vr=bt(["\n    width: 100%;\n    height: 100%;\n    background: ",";\n    position: relative;\n  "],["\n    width: 100%;\n    height: 100%;\n    background: ",";\n    position: relative;\n  "])),(function(e){return e.theme.background}));return{getDiagramProps:function(){return e},renderDiagram:function(n){var r=n.model,c=n.controller;return Object(o.createElement)(_t,null,(function(i,a,l){return e=lt(lt({},n),{saveRef:i,getRef:a,deleteRef:l}),Tr("renderDiagram",r),Object(o.createElement)(Or,{theme:r.config.theme},Object(o.createElement)(t,{ref:i(hn)},Object(o.createElement)(mo,lt({},e)),c.run("renderDiagramCustomize",e)))}))},renderDrawer:mr,renderDiagramCustomize:function(e){var t=e.controller,n=e.model,o=t.getValue(jn),r=lt(lt({},e),{zIndex:o,topicKey:n.focusKey});return[t.run("renderEditorRootBreadcrumbs",r),t.run("renderRightTopPanel",r),t.run("renderModals",lt(lt({},r),{zIndex:o+1})),t.run("renderDrawer",lt(lt({},r),{zIndex:o+1})),t.run("renderViewPortViewer",r)]},renderEditorRootBreadcrumbs:function(e){return Object(o.createElement)(yo,lt({key:"EditorRootBreadcrumbs"},e))},renderModals:function(e){return Object(o.createElement)(Oo,lt({key:"modals"},e))},renderModal:function(e){return null},getActiveModalProps:function(e){return null},renderDoc:function(e){return e.children},renderRootWidget:function(e){return Object(o.createElement)(So,lt({},e))},renderTopicWidget:function(e){return Object(o.createElement)(sr,lt({},e))},renderTopicContent:function(e){return Object(o.createElement)(Vo,lt({},e))},renderTopicCollapseIcon:function(e){return Object(o.createElement)(wo,lt({},e))},renderTopicContentOthers:function(e){return[]},renderTopicBlocks:function(e){var t=e.model,n=e.topicKey,r=e.controller,c=t.getTopic(n).blocks,i=[],a=0;return c.forEach((function(t){var n=r.run("renderTopicBlock",lt(lt({},e),{block:t,blockKey:"block-"+a}));n&&(i.push(Object(o.createElement)(o.Fragment,{key:"block-"+a},n)),a++)})),i},renderTopicBlock:function(e){var t=e.controller;switch(e.block.type){case L:return t.run("renderTopicBlockContent",e);case I:return t.run("renderTopicBlockDesc",e)}return null},renderTopicBlockContent:function(e){return Object(o.createElement)(Mo,lt({},e))},renderTopicBlockDesc:function(e){return Object(o.createElement)(Wo,lt({},e))},renderSubLinks:function(e){var t=e.saveRef,n=e.topicKey,r=e.model.getTopic(n);return 0===r.subKeys.size||r.collapse?null:Object(o.createElement)(cr,lt({ref:t(dn(n))},e))},renderRootSubLinks:function(e){var t=e.saveRef,n=e.topicKey;return Object(o.createElement)(jo,lt({ref:t(dn(n))},e))},renderFocusItemHighlight:function(e){var t=e.saveRef;return Object(o.createElement)(nr,lt({ref:t(On)},e))},renderRootWidgetOtherChildren:function(e){var t=e.controller,n=t.run("getZoomFactor",e);return e=lt(lt({},e),{zoomFactor:n}),Object(o.createElement)(o.Fragment,null,t.run("renderRootSubLinks",e),t.run("renderFocusItemHighlight",e),t.run("renderDragAndDropEffect",e))},renderViewPortViewer:function(e){return Object(o.createElement)(hr,lt({key:"view-port-viewer"},e))}}}var kr,Er,xr=Object(d.default)(Gt)(kr||(kr=bt(["\n  position: absolute;\n  background: white;\n  right: 30px;\n  top: 20px;\n  border-radius: 2px;\n  user-select: none;\n"],["\n  position: absolute;\n  background: white;\n  right: 30px;\n  top: 20px;\n  border-radius: 2px;\n  user-select: none;\n"]))),Sr=Object(d.default)(y.w)(Er||(Er=bt(["\n  padding: 0px 10px;\n"],["\n  padding: 0px 10px;\n"])));function Cr(e){var t=e.controller,n=e.zIndex,r=e.selectedTabId,c=e.handleTabIdChange,i=dt(Object(o.useState)(!1),2),a=i[0],l=i[1];return a?Object(o.createElement)(xr,{zIndex:n},Object(o.createElement)(Vt,null,Object(o.createElement)(zt,{className:rn(Yt),onClick:function(){return l(!1)}})),Object(o.createElement)(Sr,{id:r,onChange:c},t.run("renderRightTopPanelTabs",e))):Object(o.createElement)(xr,{zIndex:n},Object(o.createElement)(Ft,{onClick:function(){return l(!0)}},Object(o.createElement)(Nt,{className:rn(Jt)})))}var wr,Kr,Rr,Dr,Lr,Ir,_r,Mr=d.default.div(wr||(wr=bt(["\n  margin-top: 10px;\n  margin-bottom: 5px;\n  font-weight: bold;\n"],["\n  margin-top: 10px;\n  margin-bottom: 5px;\n  font-weight: bold;\n"]))),Ar=d.default.span(Kr||(Kr=bt(["\n  margin: 0px 10px 0px 0px;\n"],["\n  margin: 0px 10px 0px 0px;\n"]))),Nr=d.default.div(Rr||(Rr=bt(["\n  padding: 10px;\n  margin: 0 0 10px 0;\n  border: rgba(16, 22, 26, 0.15) solid 1px;\n  border-radius: 5px;\n"],["\n  padding: 10px;\n  margin: 0 0 10px 0;\n  border: rgba(16, 22, 26, 0.15) solid 1px;\n  border-radius: 5px;\n"]))),Fr=Object(d.default)(Ar)(Dr||(Dr=bt([""],[""]))),Pr=d.default.div(Lr||(Lr=bt(["\n  display: flex;\n  align-items: center;\n  //justify-content: center;\n  margin: 5px 0;\n"],["\n  display: flex;\n  align-items: center;\n  //justify-content: center;\n  margin: 5px 0;\n"]))),Br=d.default.div(Ir||(Ir=bt(["\n  height: 3px;\n  width: 80%;\n  margin-left: 10%;\n  margin-right: 10%;\n  margin-bottom: 2px;\n  background: ",";\n"],["\n  height: 3px;\n  width: 80%;\n  margin-left: 10%;\n  margin-right: 10%;\n  margin-bottom: 2px;\n  background: ",";\n"])),(function(e){return e.color})),zr=d.default.div(_r||(_r=bt(["\n  border: 1px solid grey;\n  cursor: pointer;\n  font-weight: bold;\n"],["\n  border: 1px solid grey;\n  cursor: pointer;\n  font-weight: bold;\n"])));function Vr(e){return Object(o.createElement)("div",null,e.children,Object(o.createElement)(y.h,{style:{margin:"10px 0"}}))}function Hr(e){var t=e.color,n=e.handleColorChange;return Object(o.createElement)(Ar,null,Object(o.createElement)(y.s,null,Object(o.createElement)(zr,null,Object(o.createElement)("div",{className:rn(qt)}),Object(o.createElement)(Br,{color:t})),Object(o.createElement)("div",null,Object(o.createElement)(rt.a,{color:t,onChangeComplete:function(e){return n(e.hex)}}))))}function Gr(e){var t=e.title,n=e.handleClick;return Object(o.createElement)(Ar,null,Object(o.createElement)(y.d,{onClick:n},t))}function Wr(e){var t=e.layout,n=void 0===t?"h":t,r=e.title,c=ut(e,["layout","title"]),i={flexDirection:"h"===n?"row":"column",alignItems:"center"};return Object(o.createElement)(Ar,null,Object(o.createElement)(Mt,lt({},i),Object(o.createElement)(At,{margin:"0 5px 0 0"},r),Object(o.createElement)(y.q,lt({},c))))}function Ur(e){var t=e.text,n=e.items,r=e.itemRenderer,c=e.onItemSelect,i=ot.a.ofType(),a={items:n,itemRenderer:r,onItemSelect:c,filterable:!1};return Object(o.createElement)(Ar,null,Object(o.createElement)(i,lt({},a),Object(o.createElement)(y.d,{text:t})))}var Zr=function(e){return function(t,n){var r=n.handleClick;return Object(o.createElement)(y.p,{text:""+t+e,key:t,onClick:r})}},Jr=(ot.a.ofType(),ft(Array(7).keys())),Yr=ft(Array(7).keys()),qr=[0,5,10,15,20,25,30,35],Xr=["none","solid","dotted","dashed","double"];function $r(e){var t=e.contentStyle,n=e.setContentStyle;return Object(o.createElement)(Vr,null,Object(o.createElement)(Mr,null,"Border"),Object(o.createElement)("div",null,Object(o.createElement)(Ur,{text:"width: "+(t.borderWidth?t.borderWidth:"0px"),items:Yr,itemRenderer:Zr("px"),onItemSelect:function(e){n({borderWidth:e+"px"})}}),Object(o.createElement)(Ur,{text:"style: "+(t.borderStyle?t.borderStyle:"none"),items:Xr,itemRenderer:Zr(""),onItemSelect:function(e){n({borderStyle:e})}}),Object(o.createElement)(Ur,{text:"radius: "+t.borderRadius,items:qr,itemRenderer:Zr("px"),onItemSelect:function(e){n({borderRadius:e+"px"})}}),Object(o.createElement)(Hr,{color:t.borderColor,handleColorChange:function(e){n({borderColor:e})}})))}var Qr=["curve","round","line"],ec=function(e,t){var n=t.handleClick;t.modifiers,t.query;return Object(o.createElement)(y.p,{text:""+e,key:e,onClick:n})};function tc(e){var t=e.showLinkStyle,n=void 0===t||t,r=e.showSubLinkStyle,c=void 0===r||r,i=e.linkStyle,a=void 0===i?{}:i,l=e.subLinkStyle,u=void 0===l?{}:l,s=e.setLinkStyle,p=e.setSubLinkStyle;return Object(o.createElement)(Vr,null,Object(o.createElement)(Mr,null,"Link"),n&&Object(o.createElement)(Pr,{alignItems:"center"},Object(o.createElement)(At,{margin:"0 5px 0 0"},"LinkToParent: "),Object(o.createElement)(Ur,{text:"width: "+(a?a.lineWidth:"0px"),items:Jr,itemRenderer:Zr("px"),onItemSelect:function(e){s({lineWidth:e+"px"})}}),Object(o.createElement)(Ur,{text:"lineType: "+a.lineType,items:Qr,itemRenderer:ec,onItemSelect:function(e){s({lineType:e})}}),Object(o.createElement)(Hr,{color:a.lineColor,handleColorChange:function(e){s({lineColor:e})}})),c&&Object(o.createElement)(Pr,{alignItems:"center"},Object(o.createElement)(At,{margin:"0 5px 0 0"},"SubLinks: "),Object(o.createElement)(Ur,{text:"width: "+(u?u.lineWidth:"0px"),items:Jr,itemRenderer:Zr("px"),onItemSelect:function(e){p({lineWidth:e+"px"})}}),Object(o.createElement)(Ur,{text:"lineType: "+u.lineType,items:Qr,itemRenderer:ec,onItemSelect:function(e){p({lineType:e})}}),Object(o.createElement)(Hr,{color:u.lineColor,handleColorChange:function(e){p({lineColor:e})}})))}function nc(e){var t=e.contentStyle,n=e.setContentStyle,r={title:"FontSize:",min:12,max:100,value:parseInt(t.fontSize),style:{width:50},onValueChange:function(e){n({fontSize:e})}},c={style:{width:50},value:t.lineHeight||"",onChange:function(e){n({lineHeight:e.target.value})}};return Object(o.createElement)(Vr,null,Object(o.createElement)(Mr,null,"Text Editor"),Object(o.createElement)(Mt,null,Object(o.createElement)(Wr,lt({},r)),Object(o.createElement)(Ar,null,Object(o.createElement)(Mt,{alignItems:"center"},Object(o.createElement)(At,{margin:"0 5px 0 0"},"LineHeight: "),Object(o.createElement)(y.m,lt({},c)))),Object(o.createElement)(Hr,{color:t.color,handleColorChange:function(e){n({color:e})}})))}var oc,rc=b()("node:style-editor");function cc(e){var t=e.controller,n=e.model,r=e.topicKey,c=n.getTopic(r),i=function(n){t.run("setTopicContentStyle",lt(lt({},e),{style:n}))};if(!n.focusKey)return null;var a=t.run("getTopicContentStyle",e),l={linkStyle:t.run("getLinkStyle",e),subLinkStyle:t.run("getSubLinkStyle",e),setLinkStyle:function(n){t.run("setLinkStyle",lt(lt({},e),{linkStyle:n}))},setSubLinkStyle:function(n){t.run("setSubLinkStyle",lt(lt({},e),{subLinkStyle:n}))}},u={contentStyle:a,setContentStyle:i};return Object(o.createElement)(Wt,null,Object(o.createElement)($r,lt({},u)),Object(o.createElement)(nc,lt({},u)),Object(o.createElement)(Vr,null,Object(o.createElement)(Mr,null,"Background"),Object(o.createElement)(Hr,{color:a.background,handleColorChange:function(e){i({background:e})}})),Object(o.createElement)(tc,lt({},l)),Object(o.createElement)(Vr,null,Object(o.createElement)(Gr,{title:"Clear Topic Style",handleClick:function(){c.style&&t.run("operation",lt(lt({},e),{opType:$,style:null}))}}),Object(o.createElement)(Gr,{title:"Copy Style",handleClick:function(){oc=t.run("getTopicStyle",e),rc(oc)}}),Object(o.createElement)(Gr,{title:"Paste Style",handleClick:function(){oc&&t.run("operation",lt(lt({},e),{opType:$,style:JSON.stringify(oc)}))}})),function(e){var t=e.controller;return Object(o.createElement)(Vr,null,Object(o.createElement)(Ar,null,Object(o.createElement)(y.d,{onClick:function(n){t.run("clearAllCustomStyle",e)}},"Clear All Custom Styles")))}(e))}var ic=n(109);function ac(e){var t=e.contentStyle,n=e.setContentStyle,r=ic("padding",t.padding||"0"),c={layout:"v",min:0,max:99,style:{width:38}},i=parseInt(r["padding-top"]),a=parseInt(r["padding-right"]),l=parseInt(r["padding-bottom"]),u=parseInt(r["padding-left"]),s={top:i,right:a,bottom:l,left:u},p=function(e){return function(t){var o;n({padding:wn(lt(lt({},s),(o={},o[e]=t,o)))})}},d=lt(lt({},c),{title:"top",value:i,onValueChange:p("top")}),f=lt(lt({},c),{title:"right",value:a,onValueChange:p("right")}),b=lt(lt({},c),{title:"bottom",value:l,onValueChange:p("bottom")}),y=lt(lt({},c),{title:"left",value:u,onValueChange:p("left")});return Object(o.createElement)(Vr,null,Object(o.createElement)(Mr,null,"Padding"),Object(o.createElement)(Pr,null,Object(o.createElement)(Wr,lt({},d)),Object(o.createElement)(Wr,lt({},f)),Object(o.createElement)(Wr,lt({},b)),Object(o.createElement)(Wr,lt({},y))))}var lc,uc=d.default.div(lc||(lc=bt(["\n  height: 250px;\n  overflow: auto;\n"],["\n  height: 250px;\n  overflow: auto;\n"])));function sc(e){var t=e.topicStyle,n=e.setTopicStyle,r=t.contentStyle,c=void 0===r?{}:r,i=t.linkStyle,a=void 0===i?{}:i,l=t.subLinkStyle,u=function(e){n({contentStyle:e})},s={contentStyle:c,setContentStyle:u},p={showLinkStyle:!1,linkStyle:a,subLinkStyle:void 0===l?{}:l,setLinkStyle:function(e){n({linkStyle:e})},setSubLinkStyle:function(e){n({subLinkStyle:e})}};return Object(o.createElement)(uc,null,Object(o.createElement)($r,lt({},s)),Object(o.createElement)(ac,lt({},s)),Object(o.createElement)(nc,lt({},s)),Object(o.createElement)(Vr,null,Object(o.createElement)(Mr,null,"Background"),Object(o.createElement)(Hr,{color:c.background,handleColorChange:function(e){u({background:e})}})),Object(o.createElement)(tc,lt({},p)))}var pc="normal";function dc(e){var t,n=dt(Object(o.useState)(!1),2),r=(n[0],n[1],dt(Object(o.useState)(!1),2)),c=r[0],i=r[1],a=e.model,l=e.controller,u=a.config.theme,s=u.rootTopic,p=u.primaryTopic,d=u.normalTopic,f=function(t){l.run("operation",lt(lt({},e),{opType:Q,theme:Object(ct.clone)(t)}))},b=(t=function(e){f(Object(ct.merge)(u,{randomColor:e}))},function(e){return t(e.target.checked)}),h={topicStyle:s,setTopicStyle:function(e){f(Object(ct.merge)(u,{rootTopic:e}))}},g=Object(o.createElement)(sc,lt({},h)),m={topicStyle:p,setTopicStyle:function(e){f(Object(ct.merge)(u,{primaryTopic:e}))}},O=Object(o.createElement)(sc,lt({},m)),v={topicStyle:d,setTopicStyle:function(e){f(Object(ct.merge)(u,{normalTopic:e}))}},T=Object(o.createElement)(sc,lt({},v)),j={id:pc,handleTabIdChange:function(e){pc=e}},k=Object(o.createElement)(Nr,null,Object(o.createElement)(y.w,lt({},j),Object(o.createElement)(y.v,{id:"normal",title:"NormalTopic",panel:T}),Object(o.createElement)(y.v,{id:"primary",title:"PrimaryTopic",panel:O}),Object(o.createElement)(y.v,{id:"root",title:"RootTopic",panel:g}))),E={isOpen:c,onClose:function(e){i(!1)}},x=Object(o.createElement)(y.a,lt({},E),Object(o.createElement)("p",null,"File format error"));return Object(o.createElement)(Wt,null,Object(o.createElement)(Vr,null,Object(o.createElement)(Mr,null,"Global"),Object(o.createElement)(Pr,null,Object(o.createElement)(Fr,null,"Background:"),Object(o.createElement)(Hr,{color:u.background,handleColorChange:function(e){f(Object(ct.merge)(u,{background:e}))}}),Object(o.createElement)(Fr,null,"Highlight:"),Object(o.createElement)(Hr,{color:u.highlightColor,handleColorChange:function(e){f(Object(ct.merge)(u,{highlightColor:e}))}}),Object(o.createElement)(Fr,null,"Random Color:"),Object(o.createElement)(Bt,{checked:u.randomColor,onChange:b}))),k,Object(o.createElement)(Vr,null,Object(o.createElement)(Gr,{title:"Export Theme",handleClick:function(e){Sn(JSON.stringify(u),"blink-mind-theme.json")}}),Object(o.createElement)(Gr,{title:"Import Theme",handleClick:function(e){Cn(".json,.txt").then((function(e){var t,n=JSON.parse(e);null!=(t=n).name&&null!=t.background&&null!=t.highlightColor?f(n):i(!0)}))}})),x)}function fc(){var e="topic-style",t=function(t){e=t};return{renderRightTopPanel:function(n){var r=lt(lt({},n),{key:"right-top-panel",selectedTabId:e,handleTabIdChange:t});return Object(o.createElement)(Cr,lt({},r))},renderRightTopPanelTabs:function(e){var t=e.controller;return[t.run("renderTopicStyleEditor",e),t.run("renderThemeEditor",e)]},renderTopicStyleEditor:function(e){var t={id:"topic-style",key:"topic-style",title:"TopicStyle",panel:Object(o.createElement)(cc,lt({},e))};return Object(o.createElement)(y.v,lt({},t))},renderThemeEditor:function(e){var t={id:"theme-editor",key:"theme-editor",title:"Theme",panel:Object(o.createElement)(dc,lt({},e))};return Object(o.createElement)(y.v,lt({},t))}}}var bc=b()("plugin:utils");function yc(){var e=new Map,t=new Map;return{addTempValueChangeListener:function(e){var n=e.key,o=e.listener;t.has(n)||t.set(n,[]),t.get(n).push(o)},removeTempValueChangeListener:function(e){var n=e.key,o=e.listener;t.has(n)&&(t[n]=t.get(n).filter((function(e){return e!==o})))},getTempValue:function(t){var n=t.key;return bc("getTempValue",n),e.get(n)},setTempValue:function(n){var o,r,c=n.key,i=n.value;if(bc("setTempValue",c),e.set(c,i),t.has(c)){var a=t.get(c);try{for(var l=pt(a),u=l.next();!u.done;u=l.next()){(0,u.value)(i)}}catch(s){o={error:s}}finally{try{u&&!u.done&&(r=l.return)&&r.call(l)}finally{if(o)throw o.error}}}},deleteTempValue:function(t){var n=t.key;bc("deleteTempValue",n);var o=e.get(n);return e.delete(n),o}}}var hc=b()("plugin:StylePlugin");function gc(){var e=new Map,t=0;return{getTopicStyle:function(e){var t=e.controller;return{contentStyle:t.run("getTopicContentStyle",e),linkStyle:t.run("getLinkStyle",e),subLinkStyle:t.run("getSubLinkStyle",e)}},getTopicContentStyle:function(e){var t=e.topicKey,n=e.model,o=e.controller;hc("getTopicContentStyle:",t,n);var r,c=n.getTopicVisualLevel(t),i=n.config.theme;if(r=c===R?i.rootTopic:c===D?i.primaryTopic:i.normalTopic,r=lt(lt({},i.contentStyle),r.contentStyle),i.randomColor){var a=o.run("getRandomColor",e);r=lt(lt({},r),{background:a,borderColor:a,subLinkStyle:lt(lt({},r.subLinkStyle),{lineColor:a})})}var l=n.getTopic(t);if(!l.style)return r;var u=JSON.parse(l.style);return lt(lt({},r),u.contentStyle)},getLinkStyle:function(e){var t=e.topicKey,n=e.model,o=e.controller;hc("getLinkStyle",t);var r,c=n.getTopicVisualLevel(t),i=n.config.theme,a=i.linkStyle;r=c===R?i.rootTopic.linkStyle:c===D?i.primaryTopic.linkStyle:i.normalTopic.linkStyle,a=lt(lt({},a),r);var l=n.getTopic(t);if(null!=l.parentKey){var u=o.run("getSubLinkStyle",lt(lt({},e),{topicKey:l.parentKey}));a=lt(lt({},a),u)}if(!l.style)return a;var s=JSON.parse(l.style);return lt(lt({},a),s.linkStyle)},getSubLinkStyle:function(e){var t=e.topicKey,n=e.model,o=e.controller;hc("getLinkStyle",t);var r,c=n.getTopicVisualLevel(t),i=n.config.theme,a=i.linkStyle;r=c===R?i.rootTopic.subLinkStyle:c===D?i.primaryTopic.subLinkStyle:i.normalTopic.subLinkStyle,a=lt(lt({},a),r);var l=n.getTopic(t);if(i.randomColor){var u=o.run("getRandomColor",e);hc(u),a=lt(lt({},a),{lineColor:u})}if(!l.style)return a;var s=JSON.parse(l.style);return lt(lt({},a),s.subLinkStyle)},setTopicContentStyle:function(e){var t=e.topicKey,n=e.controller,o=e.style,r=e.model.getTopic(t).style,c=r?JSON.parse(r):{},i=lt(lt({},c),{contentStyle:lt(lt({},c.contentStyle),o)});if(!Object(ct.isEqual)(c,i)){var a=JSON.stringify(i);n.run("operation",lt(lt({},e),{opType:$,style:a}))}},setLinkStyle:function(e){var t=e.topicKey,n=e.controller,o=e.linkStyle,r=e.model.getTopic(t).style,c=r?JSON.parse(r):{},i=lt(lt({},c),{linkStyle:lt(lt({},c.linkStyle),o)});if(!Object(ct.isEqual)(c,i)){var a=JSON.stringify(i);n.run("operation",lt(lt({},e),{opType:$,style:a}))}},setSubLinkStyle:function(e){var t=e.topicKey,n=e.controller,o=e.subLinkStyle,r=e.model.getTopic(t).style,c=r?JSON.parse(r):{},i=lt(lt({},c),{subLinkStyle:lt(lt({},c.subLinkStyle),o)});if(!Object(ct.isEqual)(c,i)){var a=JSON.stringify(i);n.run("operation",lt(lt({},e),{opType:$,style:a}))}},getTopicThemeStyle:function(e){var t=e.topicKey,n=e.model,o=n.getTopicVisualLevel(t),r=n.config.theme;return o===R?r.rootTopic:o===D?r.primaryTopic:r.normalTopic},getRandomColor:function(n){var o=n.topicKey;if(e.has(o))return e.get(o);var r=["#00CC99","#FFEE88","#A167A5","#E5F993","#F5C396","#DB995A","#83BCFF","#ED7B84","#739E82","#D3BCC0","#FFA0FD","#EFD3D7","#C6878F"],c=r[++t%r.length];return e.set(o,c),hc("getRandomColor",o,c),c},clearAllCustomStyle:function(e){var t=e.model,n=e.controller,o=t.withMutations((function(e){e.topics.keySeq().forEach((function(t){e.setIn(["topics",t,"style"],null)}))}));n.change(o)}}}function mc(){return[[jr(),yc(),{renderTopicContextMenu:function(e){return Object(o.createElement)(Gn,lt({},e))},customizeTopicContextMenu:function(e){var t=e.topicKey,n=e.model,r=e.controller,c=t===n.editorRootTopicKey;function i(t){return function(n){t.opType&&r.run("operation",lt(lt({},e),{opType:t.opType}))}}return Wn.map((function(e){return c&&!e.rootCanUse?null:Object(o.createElement)(y.p,{key:e.label,icon:cn(e.icon),text:e.label,labelElement:Object(o.createElement)("kbd",null,e.shortcut),onClick:i(e)})}))}},fc(),Qn()],{getPartTopics:function(e){var t=e.layout,n=e.model,o=e.topicKey,r=n.getTopic(o),c=r.subKeys.size,i=r.subKeys.toArray();switch(t){case x.LEFT_TO_RIGHT:return{R:i};case x.RIGHT_TO_LEFT:return{L:i};case x.LEFT_AND_RIGHT:return{L:i.slice(Math.ceil(c/2),c),R:i.slice(0,Math.ceil(c/2))};case x.TOP_TO_BOTTOM:return{B:i}}},createSubTopics:function(e){var t=e.model,n=e.topicKey,o=e.controller,r=e.topics,c=e.saveRef,i=t.getTopic(n);if(0===r.size||i.collapse)return null;var a=[];return r.forEach((function(t){var n=lt(lt({},e),{topicKey:t,key:t,ref:c(sn(t))});a.push(o.run("renderTopicWidget",n))})),{subTopics:a}},layout:function(e){var t=e.getRef,n=e.model,o=t(dn(n.editorRootTopicKey)),r=t(On),c=t(vn);o&&o.layout(),r&&r.layout(),c&&c.layout(),function e(o){var r,c;if(o.key!==n.editorRootTopicKey){var i=t(sn(o.key));i&&i.layoutLinks()}if(!o.collapse)try{for(var a=pt(o.subKeys),l=a.next();!l.done;l=a.next()){var u=l.value;e(n.getTopic(u))}}catch(s){r={error:s}}finally{try{l&&!l.done&&(c=a.return)&&c.call(a)}finally{if(r)throw r.error}}}(n.getTopic(n.editorRootTopicKey))},setLayoutDir:function(e){var t=e.layoutDir,n=e.model;e.controller.change(ye.setLayoutDir({model:n,layoutDir:t}))},getRelativeRect:function(e){var t=e.element,n=e.controller,o=e.getRef,r=n.run("getZoomFactor",e);return In(t,o(gn).bigView,r)},getRelativeRectFromViewPort:function(e){var t=e.element,n=e.controller,o=e.getRef,r=n.run("getZoomFactor",e);return In(t,o(gn).viewBox,r)},getRelativeVectorFromViewPort:function(e){return _n(e.element,(0,e.getRef)(gn).viewBox)},addZoomFactorChangeEventListener:function(e){e.controller.run("addTempValueChangeListener",lt({key:"ZoomFactor"},e))},removeZoomFactorChangeEventListener:function(e){e.controller.run("removeTempValueChangeListener",lt({key:"ZoomFactor"},e))},setZoomFactor:function(e){var t=e.controller,n=e.zoomFactor;return t.run("setTempValue",{key:"ZoomFactor",value:n})},getZoomFactor:function(e){return e.controller.run("getTempValue",{key:"ZoomFactor"})||1},moveTopicToCenter:function(e){var t=e.getRef,n=e.topicKey,o=e.model;if(o.editorRootTopicKey!==n&&de(o,n,o.editorRootTopicKey)!==B)throw new Error("moveTopicToCenter error: topicKey "+n+" is not the DESCENDANT of editor root topic");var r=t(pn(n)),c=t(gn),i=c.viewBox;if(!r||!i)throw new Error("moveTopicToCenter error: topic or viewBox is null");var a=_n(r,i);c.setViewBoxScrollDelta(a[0],a[1])},focusTopicAndMoveToCenter:function(e){var t=e.controller,n=e.topicKey;t.run("operation",lt(lt({},e),{opArray:[{opType:q,topicKey:n,focusMode:_},{opType:U,topicKey:n}],callback:function(){t.run("moveTopicToCenter",lt(lt({},e),{topicKey:n}))}}))}},Hn(),gc(),Zt(),zn(),{getValue:function(e,t){var n=e.propKey,o=e.controller;switch(n){case jn:return 3;case kn:return o.run("isOperationEnabled",e);case En:return o.run("getTopicTitle",e)}return t()}},et()]}b()("node:Diagram");var Oc=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.resolveController=Object(E.a)((function(e,n){void 0===e&&(e=[]);var o=n();t.controller=new ve({plugins:[e,o],construct:!1,onChange:t.props.onChange})})),t}return at(t,e),t.prototype.getDiagramProps=function(){return this.controller.run("getDiagramProps")},t.prototype.openNewModel=function(e){var t=this,n=this.getDiagramProps(),o=n.model,r=n.controller;r.run("deleteRefKey",lt(lt({},n),{topicKey:o.rootTopicKey})),r.run("operation",lt(lt({},n),{opType:U,topicKey:e.focusKey,model:e,callback:function(){var e=t.getDiagramProps(),n=e.model;r.run("moveTopicToCenter",lt(lt({},e),{topicKey:n.focusKey}))}}))},t.prototype.render=function(){var e=this.props.plugins;return this.resolveController(e,mc),this.diagramProps=lt(lt({},this.props),{controller:this.controller}),this.controller.run("renderDiagram",this.diagramProps)},t}(o.Component);function vc(e){return!0===(null!=(t=e)&&"object"===typeof t&&!1===Array.isArray(t))&&"[object Object]"===Object.prototype.toString.call(e);var t}var Tc=function(e){var t,n;return!1!==vc(e)&&("function"===typeof(t=e.constructor)&&(!1!==vc(n=t.prototype)&&!1!==n.hasOwnProperty("isPrototypeOf")))};var jc,kc=function(e,t){},Ec="L",xc="R",Sc="M";!function(e){e[e.LEFT_TO_RIGHT=0]="LEFT_TO_RIGHT",e[e.RIGHT_TO_LEFT=1]="RIGHT_TO_LEFT",e[e.LEFT_AND_RIGHT=2]="LEFT_AND_RIGHT",e[e.TOP_TO_BOTTOM=3]="TOP_TO_BOTTOM"}(jc||(jc={}));var Cc=0,wc=1,Kc="CONTENT",Rc="DESC",Dc="NORMAL",Lc="EDITING_CONTENT",Ic="EDITING_DESC",_c="SHOW_POPUP",Mc="DRAGGING",Ac="ANCESTOR",Nc="DESCENDANT",Fc="SIBLING",Pc="NONE",Bc="TOGGLE_COLLAPSE",zc="COLLAPSE_ALL",Vc="EXPAND_ALL",Hc="EXPAND_TO",Gc="ADD_CHILD",Wc="ADD_SIBLING",Uc="DELETE_TOPIC",Zc="FOCUS_TOPIC",Jc="SET_FOCUS_MODE",Yc="SET_STYLE",qc="CLEAR_ALL_CUSTOM_STYLE",Xc="SET_THEME",$c="SET_TOPIC_BLOCK",Qc="DELETE_TOPIC_BLOCK",ei="START_EDITING_CONTENT",ti="START_EDITING_DESC",ni="DRAG_AND_DROP",oi="SET_EDITOR_ROOT",ri="SET_LAYOUT_DIR",ci=function(e){Object(u.a)(n,e);var t=Object(s.a)(n);function n(){return Object(a.a)(this,n),t.apply(this,arguments)}return Object(l.a)(n,[{key:"data",get:function(){return this.get("data")}},{key:"type",get:function(){return this.get("type")}}],[{key:"create",value:function(e){return new n(e)}},{key:"createList",value:function(e){if(T.List.isList(e)||Array.isArray(e))return Object(T.List)(e.map(n.create));throw new Error("Block.createList only accepts Array or List, but you passed it: ".concat(e))}}]),n}(Object(T.Record)({type:null,key:null,data:null}));var ii={readOnly:!1,allowUndo:!0,layoutDir:jc.LEFT_AND_RIGHT,theme:{name:"default",randomColor:!0,background:"rgb(57,60,65)",highlightColor:"#50C9CE",marginH:60,marginV:20,contentStyle:{lineHeight:"1.5"},linkStyle:{lineRadius:5,lineType:"curve",lineWidth:"3px"},rootTopic:{contentStyle:{fontSize:"34px",borderRadius:"35px",padding:"16px 18px 16px 18px"},subLinkStyle:{lineType:"curve",lineWidth:"3px",lineColor:"rgb(113, 203, 45)"}},primaryTopic:{contentStyle:{borderWidth:"1px",borderStyle:"solid",borderRadius:"20px",fontSize:"17px",padding:"10px 15px 10px 15px"},subLinkStyle:{lineType:"curve",lineWidth:"3px",lineColor:"rgb(113, 203, 45)"}},normalTopic:{contentStyle:{border:"1px solid #e8eaec",borderRadius:"20px",fontSize:"17px",padding:"4px 10px"},subLinkStyle:{lineType:"curve",lineWidth:"3px",lineColor:"white"}}}},ai=function(e){Object(u.a)(n,e);var t=Object(s.a)(n);function n(){return Object(a.a)(this,n),t.apply(this,arguments)}return Object(l.a)(n,[{key:"layoutDir",get:function(){return this.get("layoutDir")}},{key:"readOnly",get:function(){return this.get("readOnly")}},{key:"allowUndo",get:function(){return this.get("allowUndo")}},{key:"theme",get:function(){return this.get("theme")}}],[{key:"fromJSON",value:function(e){return new n(e)}}]),n}(Object(T.Record)(ii));function li(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,(function(e){var t=16*Math.random()|0;return("x"===e?t:3&t|8).toString(16)}))}var ui=function(e){Object(u.a)(n,e);var t=Object(s.a)(n);function n(){return Object(a.a)(this,n),t.apply(this,arguments)}return Object(l.a)(n,[{key:"key",get:function(){return this.get("key")}},{key:"parentKey",get:function(){return this.get("parentKey")}},{key:"collapse",get:function(){return this.get("collapse")}},{key:"subKeys",get:function(){return this.get("subKeys")}},{key:"blocks",get:function(){return this.get("blocks")}},{key:"relations",get:function(){return this.get("relations")}},{key:"style",get:function(){return this.get("style")}},{key:"getBlock",value:function(e){var t=this.blocks.findIndex((function(t){return t.type===e}));return-1===t?{index:t,block:null}:{index:t,block:this.blocks.get(t)}}}],[{key:"fromJSON",value:function(e){var t=e.key,o=e.parentKey,r=void 0===o?null:o,c=e.blocks,i=e.subKeys,a=void 0===i?[]:i,l=e.collapse;return new n({key:t,parentKey:r,collapse:void 0!==l&&l,subKeys:Object(T.List)(a),blocks:ci.createList(c)})}},{key:"create",value:function(e){var t=e.key,o=e.parentKey,r=void 0===o?null:o,c=e.content,i=void 0===c?"":c,a=e.subKeys,l=void 0===a?[]:a,u=e.collapse,s=void 0!==u&&u,p=ci.create({type:Kc,data:i,key:null});return new n({key:t,parentKey:r,blocks:Object(T.List)([p]),subKeys:Object(T.List)(l),collapse:s})}}]),n}(Object(T.Record)({key:null,parentKey:null,collapse:!1,subKeys:null,blocks:null,relations:null,style:null}));function si(e,t){var n=e.getTopic(t),o=[];if(n.subKeys.size>0){var r,c=n.subKeys.toArray();(r=o).push.apply(r,Object(v.a)(c)),o=c.reduce((function(t,n){return t.push.apply(t,Object(v.a)(si(e,n))),t}),o)}return o}function pi(e,t,n){var o=e.getTopic(t),r=e.getTopic(n);if(o&&r){if(o.parentKey==r.parentKey)return Fc;for(var c=o;c.parentKey;){if(c.parentKey===r.key)return Nc;c=e.getParentTopic(c.key)}for(c=r;c.parentKey;){if(c.parentKey===o.key)return Ac;c=e.getParentTopic(c.key)}}return Pc}var di=b()("modifier");function fi(e){var t=e.model,n=e.topicKey,o=e.focusMode;return di("focus topic"),n!==t.focusKey&&(t=t.set("focusKey",n)),o!==t.focusMode&&(t=t.set("focusMode",o)),t}var bi={addChild:function(e){var t=e.model,n=e.topicKey;di("addChild:",n);var o=t.getTopic(n);if(o){var r=ui.create({key:li(),parentKey:o.key});return o=o.set("collapse",!1).update("subKeys",(function(e){return e.push(r.key)})),fi({model:t=t.update("topics",(function(e){return e.set(n,o).set(r.key,r)})),topicKey:r.key,focusMode:Lc})}return t},addSibling:function(e){var t=e.model,n=e.topicKey;if(n===t.rootTopicKey)return t;var o=t.getTopic(n);if(o){var r=t.getTopic(o.parentKey),c=r.subKeys.indexOf(n),i=ui.create({key:li(),parentKey:r.key});return fi({model:t=t.update("topics",(function(e){return e.set(i.key,i)})).updateIn(["topics",r.key,"subKeys"],(function(e){return e.insert(c+1,i.key)})),topicKey:i.key,focusMode:Lc})}return t},toggleCollapse:function(e){var t=e.model,n=e.topicKey,o=t.getTopic(n);return o&&0!==o.subKeys.size&&(o=o.merge({collapse:!o.collapse}),t=t.updateIn(["topics",o.key,"collapse"],(function(e){return!e}))),t=fi({model:t,topicKey:n,focusMode:Dc})},collapseAll:function(e){var t=e.model,n=si(t,t.editorRootTopicKey);return di(t),t=fi({model:t=t.withMutations((function(e){n.forEach((function(t){e.setIn(["topics",t,"collapse"],!0)}))})),topicKey:t.editorRootTopicKey,focusMode:Dc})},expandAll:function(e){var t=e.model,n=si(t,t.editorRootTopicKey);return di(t),t=t.withMutations((function(e){n.forEach((function(t){e.setIn(["topics",t,"collapse"],!1)}))})),di(t),t},expandTo:function(e){var t=e.model,n=e.topicKey,o=function(e,t){for(var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],o=[t],r=e.getTopic(t);r.parentKey;)n?o.push(r.parentKey):o.unshift(r.parentKey),r=e.getParentTopic(r.key);return o}(t,n).filter((function(e){return e!==n}));return pi(t=t.withMutations((function(e){o.forEach((function(t){e.setIn(["topics",t,"collapse"],!1)}))})),n,t.editorRootTopicKey)!==Nc&&(t=t.set("editorRootTopicKey",t.rootTopicKey)),t},focusTopic:fi,setFocusMode:function(e){var t=e.model,n=e.focusMode;return di("setFocusMode"),n!==t.focusMode&&(t=t.set("focusMode",n)),t},deleteTopic:function(e){var t=e.model,n=e.topicKey;if(n===t.editorRootTopicKey)return t;var o=t.getTopic(n);return o&&(t=t.withMutations((function(e){e.update("topics",(function(e){e=e.delete(n);var o=si(t,n);return e=e.withMutations((function(e){o.forEach((function(t){e.delete(t)}))}))})),e.updateIn(["topics",o.parentKey,"subKeys"],(function(e){return e.delete(e.indexOf(n))})),e.focusKey===n&&e.set("focusKey",null).set("focusMode",null)}))),t},setBlockData:function(e){var t=e.model,n=e.topicKey,o=e.blockType,r=e.focusMode,c=e.data,i=t.getTopic(n);if(i){var a=i.getBlock(o),l=a.index,u=a.block;-1===l?t=t.updateIn(["topics",n,"blocks"],(function(e){return e.push(ci.create({type:o,data:c}))})):u.data!==c&&(t=t.updateIn(["topics",n,"blocks",l,"data"],(function(e){return c}))),r&&(t=fi({model:t,topicKey:n,focusMode:r}))}return t},deleteBlock:function(e){var t=e.model,n=e.topicKey,o=e.blockType,r=t.getTopic(n);if(r){var c=r.getBlock(o).index;-1!==c&&(t=t.updateIn(["topics",n,"blocks"],(function(e){return e.delete(c)}))),t=fi({model:t,topicKey:null,focusMode:null})}return t},setStyle:function(e){var t=e.model,n=e.topicKey,o=e.style,r=t.getTopic(n);return r&&o!==r.style&&(t=t.updateIn(["topics",n,"style"],(function(e){return o}))),t},clearAllCustomStyle:function(e){var t=e.model;return t=t.withMutations((function(e){e.topics.keySeq().forEach((function(t){e.setIn(["topics",t,"style"],null)}))}))},setTheme:function(e){var t=e.model,n=e.theme;return t=t.setIn(["config","theme"],n)},setLayoutDir:function(e){var t=e.model,n=e.layoutDir;return t.config.layoutDir===n?t:t=t.setIn(["config","layoutDir"],n)},setEditorRootTopicKey:function(e){var t=e.model,n=e.topicKey;return t.editorRootTopicKey!==n&&(t=t.set("editorRootTopicKey",n)),t.getTopic(n).collapse&&(t=t.setIn(["topics",n,"collapse"],!1)),t},setZoomFactor:function(e){var t=e.model,n=e.zoomFactor;return t.zoomFactor!==n&&(t=t.set("zoomFactor",n)),t}},yi={topics:Object(T.Map)(),extData:Object(T.Map)(),config:new ai,rootTopicKey:null,editorRootTopicKey:null,focusKey:null,focusMode:null,formatVersion:null,zoomFactor:1},hi=function(e){Object(u.a)(n,e);var t=Object(s.a)(n);function n(){return Object(a.a)(this,n),t.apply(this,arguments)}return Object(l.a)(n,[{key:"toJS",value:function(){return{rootTopicKey:this.rootTopicKey,topics:Object.values(this.topics.toJS()),config:this.config,extData:this.extData,zoomFactor:this.zoomFactor}}},{key:"extData",get:function(){return this.get("extData")}},{key:"topics",get:function(){return this.get("topics")}},{key:"config",get:function(){return this.get("config")}},{key:"formatVersion",get:function(){return this.get("formatVersion")}},{key:"rootTopicKey",get:function(){return this.get("rootTopicKey")}},{key:"editorRootTopicKey",get:function(){return this.get("editorRootTopicKey")}},{key:"focusKey",get:function(){return this.get("focusKey")}},{key:"focusMode",get:function(){return this.get("focusMode")}},{key:"editingContentKey",get:function(){return this.focusMode===Lc?this.focusKey:null}},{key:"editingDescKey",get:function(){return this.focusMode===Ic?this.focusKey:null}},{key:"getTopic",value:function(e){return this.topics.get(e)}},{key:"getExtDataItem",value:function(e,t){return this.extData.get(e)||new t}},{key:"getParentTopic",value:function(e){var t=this.getTopic(e);return t.parentKey?this.getTopic(t.parentKey):null}},{key:"getTopicVisualLevel",value:function(e){for(var t=this.getTopic(e),n=0;t&&t.key!==this.editorRootTopicKey;)n++,t=this.getParentTopic(t.key);return n}},{key:"rootTopic",get:function(){return this.getTopic(this.rootTopicKey)}},{key:"zoomFactor",get:function(){return this.get("zoomFactor")}}],[{key:"isModel",value:function(e){return e instanceof n}},{key:"create",value:function(){var e,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;if(null==t)return n.createEmpty();if(n.isModel(t)&&(e=t),Tc(t)&&(e=n.fromJSON(t)),e)return null==e.focusKey&&(e=e.set("focusKey",e.rootTopicKey)),null==e.focusMode&&(e=e.set("focusMode",Dc)),e;throw new Error("`Value.create` only accepts objects or values, but you passed it: ".concat(t))}},{key:"createEmpty",value:function(){var e=new n,t=ui.create({key:li(),content:"RootTopic"});return e.update("topics",(function(e){return e.set(t.key,t)})).set("rootTopicKey",t.key).set("editorRootTopicKey",t.key).set("focusKey",t.key).set("focusMode",Dc)}},{key:"fromJSON",value:function(e){var t=new n,o=e.topics,r=void 0===o?[]:o,c=e.config,i=void 0===c?{}:c,a=e.rootTopicKey,l=e.editorRootTopicKey;return void 0===l&&(l=a),t=(t=t.merge({rootTopicKey:a,editorRootTopicKey:l})).withMutations((function(e){r.forEach((function(t){e.update("topics",(function(e){return e.set(t.key,ui.fromJSON(t))}))})),e.set("config",ai.fromJSON(i))}))}}]),n}(Object(T.Record)(yi));function gi(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.plugins,n=void 0===t?[]:t;return Object(v.a)(n)}b()("core:controller");function mi(e,t){if(Array.isArray(t))t.forEach((function(t){return mi(e,t)}));else if(null!=t)for(var n in t){var o=t[n];e.middleware[n]=e.middleware[n]||[],e.middleware[n].push(o)}}function Oi(e){if(!Array.isArray(e))throw new TypeError("Middleware stack must be an array!");var t,n=Object(O.a)(e);try{for(n.s();!(t=n.n()).done;){if("function"!==typeof t.value)throw new TypeError("Middleware must be composed of functions!")}}catch(o){n.e(o)}finally{n.f()}return function(t,n){var r=-1;return function c(i){if(i<=r)throw new Error("next() called multiple times");r=i;var a=e[i];i===e.length&&(a=n);if(!a)return null;try{return a(t,c.bind(null,i+1))}catch(o){throw o}}(0)}}var vi,Ti,ji,ki,Ei,xi,Si,Ci,wi,Ki,Ri,Di,Li,Ii,_i,Mi,Ai,Ni,Fi,Pi,Bi,zi,Vi,Hi,Gi,Wi,Ui,Zi,Ji,Yi,qi,Xi,$i,Qi,ea,ta,na,oa,ra,ca,ia,aa,la,ua,sa,pa,da,fa,ba,ya,ha,ga,ma,Oa,va,Ta,ja,ka=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};Object(a.a)(this,e);var n=t.plugins,o=void 0===n?[]:n,r=t.onChange,c=t.readOnly;this.readOnly=c,this.onChange=r,this.middleware=new Map;var i=gi({plugins:o});mi(this,i)}return Object(l.a)(e,[{key:"run",value:function(e){var t=this.middleware,n=t[e]||[];kc(0!==n.length,"the middleware function ".concat(e," is not found!"));for(var o=Object(E.a)(Oi)(n),r=arguments.length,c=new Array(r>1?r-1:0),i=1;i<r;i++)c[i-1]=arguments[i];return o.apply(void 0,c)}},{key:"getValue",value:function(e,t){return this.run("getValue",Object(m.a)(Object(m.a)({},t),{},{propKey:e}))}},{key:"change",value:function(e,t){this.onChange(e,t),this.currentModel=e}}]),e}(),Ea=n(83),xa=n(55),Sa=n(56),Ca=n(60),wa=n(41),Ka=n(65),Ra=n(6),Da=(n(518),["title"]),La=["layout","title"],Ia=["layout","title"],_a=["controller","children","onClick"],Ma=["text"],Aa=function(e){Object(u.a)(n,e);var t=Object(s.a)(n);function n(e){return Object(a.a)(this,n),t.call(this,e)}return Object(l.a)(n,[{key:"operation",value:function(e,t){this.props.controller.run("operation",Object(m.a)({opType:e},t))}},{key:"run",value:function(e,t){this.props.controller.run(e,t)}},{key:"topic",get:function(){return this.props.model.getTopic(this.props.topicKey)}}]),n}(o.Component),Na=b()("node:drag-scroll-widget"),Fa=d.default.div(vi||(vi=Object(Ra.a)(["\n  position: relative;\n  width: 100%;\n  height: 100%;\n  overflow: scroll;\n"]))),Pa=d.default.div(Ti||(Ti=Object(Ra.a)(["\n  position: relative;\n  width: max-content;\n"]))),Ba=function(e){Object(u.a)(n,e);var t=Object(s.a)(n);function n(e){var o;return Object(a.a)(this,n),(o=t.call(this,e)).contentResizeCallback=function(e,t){if(o.oldContentRect){var n={width:o.content.clientWidth+2*o.viewBox.clientWidth,height:o.content.clientHeight+2*o.viewBox.clientHeight};o.bigView.style.width=n.width+"px",o.bigView.style.height=n.height+"px"}o.oldContentRect=e[0].contentRect},o.contentResizeObserver=new p.a(o.contentResizeCallback),o.contentRef=function(e){e&&(o.content=e,o.contentResizeObserver.observe(o.content))},o.viewBoxRef=function(e){e&&(o.viewBox=e,o.props.enableMouseWheel||(Na("addEventListener onwheel"),o.viewBox.addEventListener("wheel",(function(e){Na("onwheel"),(e.ctrlKey||e.altKey)&&e.preventDefault()}),{passive:!1})),o.setViewBoxScroll(o.viewBox.clientWidth,o.viewBox.clientHeight))},o.bigViewRef=function(e){e&&(o.bigView=e)},o.setWidgetStyle=function(){o.content&&o.viewBox&&o.bigView&&(o.bigView.style.width=2*(o.content.clientWidth+o.viewBox.clientWidth)+"px",o.bigView.style.height=2*(o.content.clientHeight+o.viewBox.clientHeight)+"px",o.content.style.left=o.viewBox.clientWidth+"px",o.content.style.top=o.viewBox.clientHeight+"px")},o.setViewBoxScroll=function(e,t){Na("setViewBoxScroll ".concat(e," ").concat(t)),o.viewBox&&(o.viewBox.scrollLeft=e,o.viewBox.scrollTop=t)},o.setViewBoxScrollDelta=function(e,t){Na("setViewBoxScrollDelta ".concat(e," ").concat(t)),o.viewBox&&(o.viewBox.scrollLeft+=e,o.viewBox.scrollTop+=t)},o.onMouseDown=function(e){var t=o.props,n=t.mouseKey,r=t.needKeyPressed,c=t.canDragFunc;if((!c||c())&&(0===e.button&&"left"===n||2===e.button&&"right"===n)){if(r&&!e.ctrlKey)return;o._lastCoordX=o.viewBox.scrollLeft+e.nativeEvent.clientX,o._lastCoordY=o.viewBox.scrollTop+e.nativeEvent.clientY;var i=o.viewBox;i.addEventListener("mousemove",o.onMouseMove),i.addEventListener("mouseup",o.onMouseUp)}},o.onMouseUp=function(e){var t=o.viewBox;t.removeEventListener("mousemove",o.onMouseMove),t.removeEventListener("mouseup",o.onMouseUp)},o.onMouseMove=function(e){o.viewBox.scrollLeft=o._lastCoordX-e.clientX,o.viewBox.scrollTop=o._lastCoordY-e.clientY},o.handleContextMenu=function(e){e.preventDefault()},o.state={widgetStyle:{width:"10000px",height:"10000px"}},o}return Object(l.a)(n,[{key:"componentDidMount",value:function(){this.setWidgetStyle(),document.addEventListener("contextmenu",this.handleContextMenu)}},{key:"componentWillUnmount",value:function(){document.removeEventListener("contextmenu",this.handleContextMenu)}},{key:"setZoomFactor",value:function(e){this.bigView.style.transform="scale(".concat(e,")"),this.bigView.style.transformOrigin="50% 50%"}},{key:"render",value:function(){var e=Object(m.a)({},this.state.widgetStyle);return Object(o.createElement)(Fa,{ref:this.viewBoxRef,onMouseDown:this.onMouseDown},Object(o.createElement)("div",{style:e,ref:this.bigViewRef},Object(o.createElement)(Pa,{ref:this.contentRef,style:this.state.contentStyle},this.props.children(this.setViewBoxScroll,this.setViewBoxScrollDelta))))}}]),n}(o.Component);Ba.defaultProps={mouseKey:"left",needKeyPressed:!1};var za=b()("node:save-ref"),Va=function(e){Object(u.a)(n,e);var t=Object(s.a)(n);function n(){var e;return Object(a.a)(this,n),(e=t.apply(this,arguments)).getRef=function(t){return za(Object(Ka.a)(e)),e[t]},e.saveRef=function(t){return function(n){n&&(e[t]=n,e.fireListener(t,n))}},e.deleteRef=function(t){za("deleteRef:",t),delete e[t]},e.observers=new Map,e.fireListener=function(t,n){if(e.observers.has(t)){var o,r=e.observers.get(t),c=Object(O.a)(r);try{for(c.s();!(o=c.n()).done;){(0,o.value)(t,n)}}catch(i){c.e(i)}finally{c.f()}}},e.registerRefListener=function(t,n){e.observers.has(t)?e.observers.get(t).push(n):e.observers.set(t,[n])},e}return Object(l.a)(n,[{key:"render",value:function(){return this.props.children(this.saveRef,this.getRef,this.deleteRef,this.registerRefListener.bind(this))}}]),n}(o.Component),Ha=d.default.div(ji||(ji=Object(Ra.a)(["\n  display: flex;\n  flex-direction: ",";\n  align-items: ",";\n  justify-content: ",";\n"])),(function(e){return e.flexDirection?e.flexDirection:"row"}),(function(e){return e.alignItems}),(function(e){return e.justifyContent})),Ga=d.default.div(ki||(ki=Object(Ra.a)(["\n  margin: ",";\n"])),(function(e){return e.margin})),Wa=d.default.a(Ei||(Ei=Object(Ra.a)(["\n  font-size: 20px !important;\n"]))),Ua=d.default.div(xi||(xi=Object(Ra.a)(["\n  padding: 5px;\n  cursor: pointer;\n"]))),Za=d.default.div(Si||(Si=Object(Ra.a)(["\n  cursor: pointer;\n  &:hover {\n    color: #1ea7fd;\n  }\n"]))),Ja=Object(d.default)(y.e)(Ci||(Ci=Object(Ra.a)(["\n  margin-bottom: 0px !important;\n"]))),Ya=Object(d.default)(Za)(wi||(wi=Object(Ra.a)(["\n  position: absolute;\n  right: 5px;\n  top: 5px;\n  //padding: 5px;\n"]))),qa=d.default.div(Ki||(Ki=Object(Ra.a)(["\n  height: 16px;\n"]))),Xa=d.default.span(Ri||(Ri=Object(Ra.a)(["\n  margin: 0px 10px;\n  &:hover {\n    color: palevioletred;\n  }\n"]))),$a=d.default.div(Di||(Di=Object(Ra.a)(["\n  z-index: ",";\n"])),(function(e){return e.zIndex})),Qa=d.default.div(Li||(Li=Object(Ra.a)(["\n  min-width: 380px;\n  max-width: 482px;\n  max-height: 470px;\n  overflow: auto;\n"]))),el=d.default.div(Ii||(Ii=Object(Ra.a)(["\n  position: absolute;\n  left: 0;\n  top: 0;\n  width: 100%;\n  height: 100%;\n"]))),tl=(d.default.div(_i||(_i=Object(Ra.a)(["\n  max-height: ",";\n  overflow-y: auto;\n  overflow-x: hidden;\n"])),(function(e){return e.maxHeight||"300px"})),d.default.div(Mi||(Mi=Object(Ra.a)(["\n  margin-top: 10px;\n  margin-bottom: 5px;\n  font-weight: bold;\n"])))),nl=d.default.span(Ai||(Ai=Object(Ra.a)(["\n  margin: 0 10px 0 2px;\n"]))),ol=d.default.div(Ni||(Ni=Object(Ra.a)(["\n  padding: 10px;\n  margin: 0 0 10px 0;\n  border: rgba(16, 22, 26, 0.15) solid 1px;\n  border-radius: 5px;\n"]))),rl=Object(d.default)(nl)(Fi||(Fi=Object(Ra.a)([""]))),cl=d.default.div(Pi||(Pi=Object(Ra.a)(["\n  display: flex;\n  align-items: center;\n  //justify-content: center;\n  margin: 5px 0;\n"]))),il=d.default.div(Bi||(Bi=Object(Ra.a)(["\n  height: 3px;\n  width: 80%;\n  margin-left: 10%;\n  margin-right: 10%;\n  margin-bottom: 2px;\n  background: ",";\n"])),(function(e){return e.color})),al=d.default.div(zi||(zi=Object(Ra.a)(["\n  border: 1px solid grey;\n  cursor: pointer;\n  font-weight: bold;\n"]))),ll="show-menu",ul="close",sl="color-picker",pl="notes",dl="plus",fl="minus",bl="collapse",yl="expand",hl="center",gl="layout-left-and-right";function ml(e){return"icon iconfont bm-".concat(e)}function Ol(e){return Object(o.createElement)("span",{className:ml(e)})}function vl(e){return"content-".concat(e)}function Tl(e){return"content-editor-".concat(e)}function jl(e){return"desc-editor-".concat(e)}function kl(e){return"topic-widget-".concat(e)}function El(e){return"topic-".concat(e)}function xl(e){return"links-".concat(e)}function Sl(e){return"links-svg-".concat(e)}function Cl(e){return"collapse-".concat(e)}function wl(e,t){return"dropArea-".concat(t,"-").concat(e)}var Kl="DIAGRAM-ROOT",Rl="DragScrollWidget",Dl="svg-highlight",Ll="focus-highlight",Il="drop-effect",_l="CENTER_ROOT_TOPIC",Ml="DIAGRAM_CUSTOMIZE_BASE_Z_INDEX",Al="TOPIC_CONTEXT_MENU_ENABLED",Nl="TOPIC_TITLE",Fl="DRAG_DROP_STATE",Pl="RIGHT_TOP_PANEL_STATE",Bl="OPERATION_ENABLED",zl="CONFIRM",Vl="CANCEL",Hl="DEFAULT",Gl="SEARCH",Wl="LEFT_AND_RIGHT",Ul="ONLY_LEFT",Zl="ONLY_RIGHT",Jl="EDIT",Yl="ADD_SIBLING",ql="ADD_CHILD",Xl="EDIT_NOTES",$l="DELETE",Ql="SET_AS_EDITOR_ROOT",eu="EDIT_TOPOLOGY_DIAGRAM",tu="SET_TOPIC_REFERENCES",nu="TOPIC_STYLE",ou="STYLE",ru="TEXT_EDITOR",cu="LINK",iu="LINK_TO_PARENT",au="SUB_LINKS",lu="COPY_STYLE",uu="PASTE_STYLE",su="CLEAR_TOPIC_STYLE",pu="CLEAR_ALL_CUSTOM_STYLE",du="LINE_TYPE",fu="THEME",bu="GLOBAL",yu="HIGHLIGHT",hu="RANDOM_COLOR",gu="NORMAL_TOPIC",mu="PRIMARY_TOPIC",Ou="ROOT_TOPIC",vu="EXPORT_THEME",Tu="IMPORT_THEME",ju="TAGS",ku="TAGS_MANAGER",Eu="TAG_NAME",xu="ADD_TAG",Su="UPDATE_TAG",Cu="ALREADY_ADDED",wu="CAN_BE_ADDED",Ku="TOPICS_THAT_USE_THIS_TAG",Ru="BACKGROUND",Du="COLOR",Lu="BORDER",Iu="WIDTH",_u="RADIUS",Mu="FONT_SIZE",Au="LINE_HEIGHT",Nu="PADDING",Fu="TOP",Pu="BOTTOM",Bu="LEFT",zu="RIGHT",Vu="NONE",Hu="SOLID",Gu="DOTTED",Wu="DASHED",Uu="DOUBLE",Zu="ROUND",Ju="CURVE",Yu="LINE",qu="COLLAPSE_ALL",Xu="EXPAND_ALL",$u="CENTER_ROOT_TOPIC",Qu="ZOOM",es="ZOOM_IN",ts="ZOOM_OUT",ns="RESET",os="RESET_ZOOM",rs="NOTE_PLACEHOLDER",cs="TOPOLOGY_DIAGRAM_EDITOR",is="BASIC",as="FLOW_GRAPH",ls="ACTIVITY_DIAGRAM",us="SEQUENCE_DIAGRAM",ss="CLASS_DIAGRAM",ps="REFERENCE_TOPICS",ds="REFERENCED_TOPICS",fs="SELECT_REF_TOPICS_TIP",bs="TAG_NAME_OVER_MAX_TIP",ys="DELETE_TAG_TIP",hs="DELETE_TOPOLOGY_TIP",gs=function(e){e.stopPropagation()};function ms(e,t){!function(e,t){var n=document.createElement("a");n.href=e,n.download=t,n.click()}("data:text/plain,".concat(encodeURIComponent(e)),t)}function Os(e){var t=e.top,n=void 0===t?0:t,o=e.right,r=void 0===o?0:o,c=e.bottom,i=void 0===c?0:c,a=e.left,l=void 0===a?0:a;return"".concat(n,"px ").concat(r,"px ").concat(i,"px ").concat(l,"px")}function vs(e,t){return Array.isArray(t)?t.map((function(t){return e.controller.run("getI18nText",Object(m.a)(Object(m.a)({},e),{},{key:t}))})):e.controller.run("getI18nText",Object(m.a)(Object(m.a)({},e),{},{key:t.toUpperCase()}))}function Ts(e){return(e.top+e.bottom)/2}function js(e,t){return(e.x+t.x)/2}function ks(e,t){return(e.y+t.y)/2}function Es(e){return[(e.left+e.right)/2,(e.top+e.bottom)/2]}function xs(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,o=e.getBoundingClientRect(),r=t.getBoundingClientRect(),c=Es(r),i=Es(o);i[0]=(i[0]-c[0])/n,i[1]=(i[1]-c[1])/n;var a=o.width/n,l=o.height/n;return{left:i[0]-a/2,right:i[0]+a/2,top:i[1]-l/2,bottom:i[1]+l/2,width:a,height:l}}function Ss(e,t){var n=e.getBoundingClientRect(),o=Es(t.getBoundingClientRect()),r=Es(n);return[r[0]-o[0],r[1]-o[1]]}function Cs(e){return Object(o.createElement)("div",null,e.children,Object(o.createElement)(y.h,{style:{margin:"10px 0"}}))}function ws(e){var t=e.title,n=e.layout,r=void 0===n?"h":n,c=e.color,i=e.handleColorChange,a={flexDirection:"h"===r?"row":"column",alignItems:"center"};return Object(o.createElement)(nl,null,Object(o.createElement)(Ha,Object.assign({},a),null!=t&&Object(o.createElement)(Ga,{margin:"0 5px 0 0"},t),Object(o.createElement)(y.s,null,Object(o.createElement)(al,null,Object(o.createElement)("div",{className:ml(sl)}),Object(o.createElement)(il,{color:c})),Object(o.createElement)("div",null,Object(o.createElement)(rt.a,{color:c,onChangeComplete:function(e){return i(e.hex)}})))))}function Ks(e){var t=e.title,n=Object(wa.a)(e,Da);return Object(o.createElement)(nl,null,Object(o.createElement)(y.d,Object.assign({},n),t))}function Rs(e){var t=e.layout,n=void 0===t?"h":t,r=e.title,c=Object(wa.a)(e,La),i={flexDirection:"h"===n?"row":"column",alignItems:"center"};return Object(o.createElement)(nl,null,Object(o.createElement)(Ha,Object.assign({},i),Object(o.createElement)(Ga,{margin:"0 5px 0 0"},r),Object(o.createElement)(y.q,Object.assign({},c))))}function Ds(e){var t=e.layout,n=void 0===t?"h":t,r=e.title,c=Object(wa.a)(e,Ia),i={flexDirection:"h"===n?"row":"column",alignItems:"center"};return Object(o.createElement)(nl,null,Object(o.createElement)(Ha,Object.assign({},i),Object(o.createElement)(Ga,{margin:"0 5px 0 0"},r," "),Object(o.createElement)(y.m,Object.assign({},c))))}function Ls(e){var t=e.text,n=e.items,r=e.itemRenderer,c=e.onItemSelect,i=ot.a.ofType(),a={items:n,itemRenderer:r,onItemSelect:c,filterable:!1};return Object(o.createElement)(nl,null,Object(o.createElement)(i,Object.assign({},a),Object(o.createElement)(y.d,{text:t})))}var Is=function(e){return function(t,n){var r=n.handleClick;return Object(o.createElement)(y.p,{text:"".concat(t).concat(e),key:t,onClick:r})}},_s=function(e){return function(t,n){var r=n.handleClick;return Object(o.createElement)(y.p,{text:vs(e,t),key:t,onClick:r})}},Ms=(ot.a.ofType(),Object(v.a)(Array(7).keys())),As=d.default.div(Vi||(Vi=Object(Ra.a)(["\n  position: relative;\n  padding: 6px;\n  width: 40px;\n  height: 40px;\n  cursor: pointer;\n  color: ",";\n  font-size: 24px;\n  display: inline-block;\n  &:hover {\n    color: ",";\n  }\n"])),(function(e){return e.disabled?"grey":"black"}),(function(e){return e.disabled?"grey":"rgb(44, 184, 146)"}));function Ns(e){var t=e.controller,n=e.children,r=e.onClick,c=Object(wa.a)(e,_a),i=e.disabled;i=i||!t.getValue(Bl,e);var a=Object(m.a)({controller:t,disabled:i,onClick:function(e){i||r(e)}},c);return Object(o.createElement)(As,Object.assign({},a),n)}var Fs=b()("plugin:event");function Ps(){var e={};return{handleTopicClick:function(e){Fs("handleTopicClick");var t=e.controller,n=e.model,o=e.topicKey;Fs(n.zoomFactor),null===n.editingDescKey&&n.editingContentKey!==o&&(n.focusKey===o&&n.focusMode===Lc||t.run("operation",Object(m.a)(Object(m.a)({},e),{},{opType:Zc,focusMode:Dc})))},handleTopicDoubleClick:function(e){var t=e.controller;null===e.model.editingDescKey&&t.run("operation",Object(m.a)(Object(m.a)({},e),{},{opType:Zc,focusMode:Lc}))},handleTopicContextMenu:function(e){e.controller.run("operation",Object(m.a)(Object(m.a)({},e),{},{opType:Zc,focusMode:_c}))},handleActiveModalClose:function(e){var t=e.controller,n=t.run("getActiveModalProps",e);return null==n?null:"edit-desc"===n.name?function(){t.run("operation",Object(m.a)(Object(m.a)({},e),{},{focusMode:Dc,opType:Zc}))}:void 0},addEventListener:function(t){var n=t.key,o=t.listener,r=t.once,c=t.controller;function i(){o(),c.run("removeEventListener",{key:n,listener:o})}e[n]||(e[n]=[]),r?(i.origin=o,e[n].push(i)):e[n].push(o)},removeEventListener:function(t){var n=t.key,o=t.listener;e[n]&&(e[n]=e[n].filter((function(e){return e!==o&&e.origin!==o})))},fireEvent:function(t){var n=t.key;e[n]&&e[n].forEach((function(e){return e()}))}}}var Bs="ADD_CHILD",zs="ADD_SIBLING",Vs="DELETE_TOPIC",Hs="EDIT_CONTENT",Gs="EDIT_NOTES",Ws="SET_EDITOR_ROOT",Us=0,Zs=1;function Js(){return{customizeHotKeys:function(e){var t=function(t){return function(n){!function(e,t){var n=t,o=n.topicKey,r=n.model,c=n.controller;void 0===o&&(t=Object(m.a)(Object(m.a)({},t),{},{topicKey:r.focusKey})),c.run("operation",Object(m.a)(Object(m.a)({},t),{},{opType:e}))}(t,e)}};return{topicHotKeys:new Map([[Bs,{label:"add child",combo:"tab",onKeyDown:t(Gc)}],[zs,{label:"add sibling",combo:"enter",onKeyDown:t(Wc)}],[Vs,{label:"delete topic",combo:"del",onKeyDown:t(Uc)}],[Hs,{label:"edit content",combo:"space",onKeyDown:t(ei)}],[Gs,{label:"edit notes",combo:"alt + d",onKeyDown:t(ti)}],[Ws,{label:"set editor root",combo:"alt + shift + f",onKeyDown:t(oi)}]]),globalHotKeys:new Map}}}}function Ys(){var e=new Map([[zl,"Confirm"],[Vl,"Cancel"],[Hl,"Default"],[Gl,"Search"],[Wl,"Left And Right"],[Ul,"Only Left"],[Zl,"Only Right"],[Jl,"Edit"],[ql,"Add Child"],[Yl,"Add Sibling"],[Xl,"Edit Notes"],[$l,"Delete"],[Ql,"Set as Editor Root"],[eu,"Edit Topology Diagram"],[tu,"Set Topic References"],[nu,"TopicStyle"],[ou,"Style"],[ru,"Text Editor"],[cu,"Link"],[iu,"LinkToParent"],[au,"SubLinks"],[lu,"Copy Style"],[uu,"Paste Style"],[su,"Clear Topic Style"],[pu,"Clear All Custom Style"],[du,"LineType"],[fu,"Theme"],[bu,"Global"],[yu,"Highlight"],[hu,"Random Color"],[gu,"NormalTopic"],[mu,"PrimaryTopic"],[Ou,"RootTopic"],[vu,"Export Theme"],[Tu,"Import Theme"],[ju,"Tags"],[ku,"Tags Manager"],[Eu,"Tag Name"],[xu,"Add Tag"],[Su,"Update Tag"],[Cu,"Already Added"],[wu,"Can be Added"],[Ku,"Topics that Use this Tag"],[Ru,"Background"],[Du,"Color"],[Lu,"Border"],[Iu,"Width"],[_u,"Radius"],[Mu,"FontSize"],[Au,"LineHeight"],[Nu,"Padding"],[Fu,"Top"],[Pu,"Bottom"],[Bu,"Left"],[zu,"Right"],[Vu,"None"],[Hu,"Solid"],[Gu,"Dotted"],[Wu,"Dashed"],[Uu,"Double"],[Zu,"Round"],[Ju,"Curve"],[Yu,"Line"],[qu,"Collapse All"],[Xu,"Expand All"],[$u,"Center Root Topic"],[Qu,"zoom"],[es,"Zoom In"],[ts,"Zoom Out"],[ns,"Reset"],[os,"Reset Zoom"],[rs,"Write topic notes here"],[cs,"Topology Diagram Editor"],[is,"Basic"],[as,"Flow Graph"],[ls,"Activity Diagram"],[us,"Sequence Diagram"],[ss,"Class Diagram"],[ps,"Reference Topics"],[ds,"Referenced Topics"],[fs,"Please select the topics you want to reference. After selection, click the confirm button."],[bs,"The length of tag name over the maximum length: 50!"],[ys,"All the relationship about this tag will be lost if you delete this tag! Are you confirm?"],[hs,"Are you confirm to delete this topology diagram?"]]);return{getI18nTextMap:function(){return e},getI18nText:function(e){var t=e.controller,n=e.key,o=t.run("getI18nTextMap",e);if(!o.has(n))throw new Error("i18n key ".concat(n," is not exist"));return o.get(n)}}}var qs=b()("plugin:operation");function Xs(){var e=new Map([[Bc,bi.toggleCollapse],[zc,bi.collapseAll],[Vc,bi.expandAll],[Hc,bi.expandTo],[Gc,bi.addChild],[Wc,bi.addSibling],[Uc,bi.deleteTopic],[Zc,bi.focusTopic],[Jc,bi.setFocusMode],[Yc,bi.setStyle],[qc,bi.clearAllCustomStyle],[Xc,bi.setTheme],[$c,bi.setBlockData],[Qc,bi.deleteBlock],[ei,function(e){var t=e.model,n=e.topicKey;return bi.focusTopic({model:t,topicKey:n,focusMode:Lc})}],[ti,function(e){var t=e.model,n=e.topicKey,o=t.getTopic(n).getBlock(Rc);return null!=o.block&&null!=o.block.data||(t=bi.setBlockData({model:t,topicKey:n,blockType:Rc,data:""})),t=bi.focusTopic({model:t,topicKey:n,focusMode:Ic})}],[ni,function(e){var t=e.srcKey,n=e.dstKey,o=e.dropDir,r=e.model,c=r.getTopic(t),i=r.getTopic(n),a=c.parentKey,l=r.getTopic(a).subKeys,u=l.indexOf(t);if(l=l.delete(u),"in"===o){var s=i.subKeys;s=s.push(t),r=r.withMutations((function(e){e.setIn(["topics",a,"subKeys"],l).setIn(["topics",t,"parentKey"],n).setIn(["topics",n,"subKeys"],s).setIn(["topics",n,"collapse"],!1)}))}else{var p=i.parentKey,d=r.getTopic(p).subKeys,f=d.indexOf(n);if(a===p){var b=Object(T.List)();d.forEach((function(e){e!==t&&(b=e===n?"prev"===o?b.push(t).push(e):b.push(e).push(t):b.push(e))})),r=r.withMutations((function(e){e.setIn(["topics",p,"subKeys"],b)}))}else"prev"===o?d=d.insert(f,t):"next"===o&&(d=d.insert(f+1,t)),r=r.withMutations((function(e){e.setIn(["topics",a,"subKeys"],l).setIn(["topics",t,"parentKey"],p).setIn(["topics",p,"subKeys"],d).setIn(["topics",p,"collapse"],!1)}))}return r}],[oi,bi.setEditorRootTopicKey],[ri,bi.setLayoutDir]]),t=Object(T.Stack)(),n=Object(T.Stack)(),o=!0,r=new Set;return{isOperationEnabled:function(e){return o},enableOperation:function(){o=!0},disableOperation:function(e){var t=e.whiteList;o=!1,t?r=new Set(t):r.clear()},getOpMap:function(t){return e},getAllowUndo:function(e){var t=e.model,n=e.opType,o=e.allowUndo;if(!1===(void 0===o||o))return!1;if(n)switch(n){case Zc:case Jc:case ei:case ti:return!1}switch(t.focusMode){case"EDITING_DESC":case"EDITING_CONTENT":return!1}return t.config.allowUndo},getUndoRedoStack:function(){return{undoStack:t,redoStack:n}},setUndoStack:function(e){qs("setUndoStack",e.undoStack),t=e.undoStack},setRedoStack:function(e){qs("setRedoStack",e.redoStack),n=e.redoStack},canUndo:function(e){var t=e.controller;if(!t.run("isOperationEnabled",e))return!1;var n=t.run("getUndoRedoStack",e).undoStack,o=t.run("getAllowUndo",e);return n.size>0&&o},canRedo:function(e){var t=e.controller;if(!t.run("isOperationEnabled",e))return!1;var n=t.run("getUndoRedoStack",e).redoStack,o=t.run("getAllowUndo",e);return n.size>0&&o},undo:function(e){var t=e.controller,n=e.model;if(t.run("getAllowUndo",e)){var o=t.run("getUndoRedoStack",e),r=o.undoStack,c=o.redoStack,i=r.peek();i&&(t.run("setUndoStack",Object(m.a)(Object(m.a)({},e),{},{undoStack:r.shift()})),t.run("setRedoStack",Object(m.a)(Object(m.a)({},e),{},{redoStack:c.push(n)})),qs(i),t.change(i))}},redo:function(e){var t=e.controller,n=e.model;if(t.run("getAllowUndo",e)){var o=t.run("getUndoRedoStack",e),r=o.undoStack,c=o.redoStack,i=c.peek();i&&(t.run("setUndoStack",Object(m.a)(Object(m.a)({},e),{},{undoStack:r.push(n)})),t.run("setRedoStack",Object(m.a)(Object(m.a)({},e),{},{redoStack:c.shift()})),t.change(i))}},operation:function(e){var t=e.controller,n=e.opType,o=e.model,c=e.opArray,i=e.callback;if(null!=c&&!Array.isArray(c))throw new Error("operation: the type of opArray must be array!");if(null!=n&&null!=c)throw new Error("operation: opType and opArray conflict!");if(!t.run("isOperationEnabled",e)){if(0===r.size)return;if(null!=c){var a=c.filter((function(e){return!r.has(e.opType)}));if(a&&a.length>0)return}else if(!r.has(n))return}qs("operation:",n||c.map((function(e){return e.opType}))),qs("operation:",o),qs("operation:",e);var l,u=t.run("getOpMap",e);if(t.run("beforeOperation",e),t.run("getAllowUndo",e)){var s=t.run("getUndoRedoStack",e).undoStack;t.run("setUndoStack",Object(m.a)(Object(m.a)({},e),{},{undoStack:s.push(o)}))}if(null!=c)l=c.reduce((function(e,n){var o=n.opType;if(!u.has(o))throw new Error("opType:".concat(o," not exist!"));var r=u.get(o),c=Object(m.a)(Object(m.a)({controller:t},n),{},{model:e}),i=t.run("beforeOpFunction",c);return i=r(Object(m.a)(Object(m.a)({},c),{},{model:i})),i=t.run("afterOpFunction",Object(m.a)(Object(m.a)({},c),{},{model:i}))}),o);else{if(!u.has(n))throw new Error("opType:".concat(n," not exist!"));var p=u.get(n);l=t.run("beforeOpFunction",e),l=p(Object(m.a)(Object(m.a)({},e),{},{model:l})),l=t.run("afterOpFunction",Object(m.a)(Object(m.a)({},e),{},{model:l}))}qs("newModel:",l),t.change(l,i?i(l):null),t.run("afterOperation",e)},deleteRefKey:function(e){var t=e.model,n=e.topicKey,o=e.deleteRef,r=si(t,n);r.push(n);var c,i=Object(O.a)(r);try{for(i.s();!(c=i.n()).done;){var a=c.value;o(xl(a)),o(Sl(a)),o(vl(a)),o(Tl(a)),o(jl(a)),o(kl(a)),o(El(a)),o(Cl(a)),o(wl(a,"next")),o(wl(a,"prev"))}}catch(l){i.e(l)}finally{i.f()}},beforeOperation:function(e){},afterOperation:function(e){},beforeOpFunction:function(e){var t=e.controller,n=e.opType,o=e.model,r=e.topicKey;return n===Uc&&r!==o.editorRootTopicKey&&t.run("deleteRefKey",e),o},afterOpFunction:function(e){return e.model},openNewModel:function(e){var t=e.model,n=e.controller,o=e.newModel;n.run("deleteRefKey",Object(m.a)(Object(m.a)({},e),{},{topicKey:t.rootTopicKey})),n.run("operation",Object(m.a)(Object(m.a)({},e),{},{opType:Hc,topicKey:o.focusKey,model:o,callback:function(t){return function(){n.run("moveTopicToCenter",Object(m.a)(Object(m.a)({},e),{},{model:t,topicKey:t.focusKey}))}}}))}}}var $s=function(e){Object(u.a)(n,e);var t=Object(s.a)(n);function n(){return Object(a.a)(this,n),t.apply(this,arguments)}return Object(l.a)(n,[{key:"render",value:function(){var e=this.props.controller;return Object(o.createElement)(y.n,null,e.run("customizeTopicContextMenu",this.props))}}]),n}(Aa),Qs=[{icon:"edit",label:Jl,shortcut:"Space",rootCanUse:!0,opType:ei},{icon:"add-sibling",label:Yl,shortcut:"Enter",opType:Wc},{icon:"add-child",label:ql,shortcut:"Tab",rootCanUse:!0,opType:Gc},{icon:"notes",label:Xl,shortcut:"Alt + D",rootCanUse:!0,opType:ti},{icon:"delete-node",label:$l,shortcut:"Del",opType:Uc},{icon:"root",label:Ql,shortcut:"Alt + Shift + F",opType:oi}];function ep(){return{renderTopicContextMenu:function(e){return Object(o.createElement)($s,Object.assign({},e))},customizeTopicContextMenu:function(e){var t=e.topicKey,n=e.model,r=e.controller,c=t===n.editorRootTopicKey;function i(t){return function(n){t.opType&&r.run("operation",Object(m.a)(Object(m.a)({},e),{},{opType:t.opType}))}}return Qs.map((function(t){return c&&!t.rootCanUse?null:Object(o.createElement)(y.p,{key:t.label,icon:Ol(t.icon),text:vs(e,t.label),labelElement:Object(o.createElement)("kbd",null,t.shortcut),onClick:i(t)})}))}}}var tp=b()("node:topic-drop-effect"),np=d.default.svg(Hi||(Hi=Object(Ra.a)(["\n  width: 100%;\n  height: 100%;\n  position: absolute;\n  left: 0;\n  top: 0;\n  z-index: 2;\n  pointer-events: none;\n"]))),op=function(e){Object(u.a)(n,e);var t=Object(s.a)(n);function n(){var e;return Object(a.a)(this,n),(e=t.apply(this,arguments)).state={content:null},e}return Object(l.a)(n,[{key:"layout",value:function(){var e=this.props,t=e.getRef,n=e.model,r=e.zoomFactor,c=e.diagramState.dragDrop;if(null!=c){var i=c.targetKey,a=c.targetDir;if(tp("layout",a),null!=i){var l=t("in"===a?vl(i):wl(i,a)),u=t("svg-drop-effect"),s=t(Rl).bigView,p=xs(l,s,r),d=xs(u,s,r),f=p.left-d.left-3,b=p.top-d.top-3,y=p.width+6,h=p.height+6;this.setState({content:Object(o.createElement)("g",null,Object(o.createElement)("rect",{x:f,y:b,width:y,height:h,fill:"none",stroke:n.config.theme.highlightColor,strokeDasharray:"5,5",strokeWidth:2}))})}else this.setState({content:null})}else this.setState({content:null})}},{key:"render",value:function(){var e=this.props.saveRef;return Object(o.createElement)(np,{ref:e("svg-drop-effect")},this.state.content)}}]),n}(Aa),rp=b()("plugin:drag-and-drop"),cp=d.default.div(Gi||(Gi=Object(Ra.a)(["\n  height: ",";\n  width: 100%;\n  margin: 5px 0px;\n"])),(function(e){return"".concat(e.height,"px")}));function ip(){return{renderTopicDropArea:function(e){var t=e.topicKey,n=e.dropDir,r=e.saveRef,c=e.controller,i=e.model,a={onDragEnter:function(o){rp("onDragEnter",t,n),c.run("handleTopicDragEnter",Object(m.a)(Object(m.a)({},e),{},{ev:o,dropDir:n}))},onDragLeave:function(o){rp("onDragLeave",t,n),c.run("handleTopicDragLeave",Object(m.a)(Object(m.a)({},e),{},{ev:o,dropDir:n}))},onDragOver:function(e){e.preventDefault()},onDrop:function(o){rp("onDrop",t,n),c.run("handleTopicDrop",Object(m.a)(Object(m.a)({},e),{},{ev:o,dropDir:n}))}};return Object(o.createElement)(cp,Object.assign({height:i.config.theme.marginV/2,ref:r(wl(t,n))},a))},renderDragAndDropEffect:function(e){rp("renderDragAndDropEffect");var t=e.saveRef;return Object(o.createElement)(op,Object.assign({ref:t(Il)},e))},handleTopicDragStart:function(e){var t=e.controller;e.ev.stopPropagation(),t.run("operation",Object(m.a)(Object(m.a)({},e),{},{opType:Zc,focusMode:Mc}))},canDrop:function(e){var t=e.srcKey,n=e.dstKey,o=e.model,r=e.dropDir;return t!==o.editorRootTopicKey&&t!==n&&pi(o,t,n)!==Ac&&((n!==o.editorRootTopicKey||"in"===r)&&(o.getTopic(t).parentKey!==n||"in"!==r))},handleTopicDragEnter:function(e){var t=e.dropDir,n=e.topicKey,o=e.controller,r=e.model,c=e.diagramState,i=e.setDiagramState;rp("handleTopicDragEnter:",n,t),o.run("canDrop",Object(m.a)(Object(m.a)({},e),{},{srcKey:r.focusKey,dstKey:n}))&&i(Object(m.a)(Object(m.a)({},c),{},{dragDrop:{targetKey:n,targetDir:t}}))},handleTopicDragLeave:function(e){var t=e.topicKey,n=e.dropDir,o=e.getRef,r=e.ev,c=e.diagramState,i=e.setDiagramState,a=r.nativeEvent.relatedTarget;rp("handleTopicDragLeave:",t,n);var l=o(vl(t));l==a||l.contains(a)||i(Object(m.a)(Object(m.a)({},c),{},{dragDrop:null}))},handleTopicDrop:function(e){rp("handleTopicDrop");var t=e,n=t.controller,o=t.topicKey,r=t.model,c=t.diagramState,i=t.setDiagramState;e=Object(m.a)(Object(m.a)({},e),{},{srcKey:r.focusKey,dstKey:o}),i(Object(m.a)(Object(m.a)({},c),{},{dragDrop:null})),n.run("canDrop",e)&&n.run("operation",Object(m.a)(Object(m.a)({},e),{},{opType:ni}))}}}function ap(e,t,n,o){var r,c=arguments.length,i=c<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)i=Reflect.decorate(e,t,n,o);else for(var a=e.length-1;a>=0;a--)(r=e[a])&&(i=(c<3?r(i):c>3?r(t,n,i):r(t,n))||i);return c>3&&i&&Object.defineProperty(t,n,i),i}var lp=d.default.div(Wi||(Wi=Object(Ra.a)(["\n  position: relative;\n  display: flex;\n  align-items: center;\n  padding: 5px;\n"]))),up=d.default.div(Ui||(Ui=Object(Ra.a)(["\n  width: 100%;\n  height: 100%;\n  background: ",";\n"])),(function(e){return e.theme.background})),sp=function(e){Object(u.a)(n,e);var t=Object(s.a)(n);function n(e){var o;return Object(a.a)(this,n),(o=t.call(this,e)).setZoomFactor=function(e){o.dragScrollWidget.setZoomFactor(e)},o.onWheel=function(e){if(e.altKey||e.ctrlKey){var t=o.props.controller,n=t.run("getZoomFactor",o.props);(n-=e.nativeEvent.deltaY>0?.1:-.1)<.5&&(n=.5),n>4&&(n=4),t.run("setZoomFactor",Object(m.a)(Object(m.a)({},o.props),{},{zoomFactor:n}))}},o}return Object(l.a)(n,[{key:"renderHotkeys",value:function(){var e=this.props,t=e.controller,n=e.model,r=t.run("customizeHotKeys",e);if(null===r)return null;if(!(r.topicHotKeys instanceof Map&&r.globalHotKeys instanceof Map))throw new TypeError("topicHotKeys and globalHotKeys must be a Map");var c=[];return n.focusMode!==Dc&&n.focusMode!==_c||r.topicHotKeys.forEach((function(e,t){c.push(Object(o.createElement)(y.j,Object.assign({key:t},e,{global:!0})))})),r.globalHotKeys.forEach((function(e,t){c.push(Object(o.createElement)(y.j,Object.assign({key:t},e,{global:!0})))})),Object(o.createElement)(y.k,null,c)}},{key:"componentDidMount",value:function(){var e=this.props,t=e.getRef,n=e.model;e.controller.run("addZoomFactorChangeEventListener",Object(m.a)(Object(m.a)({},this.props),{},{listener:this.setZoomFactor}));var o=t(El(n.editorRootTopicKey)),r=t("node-layer"),c=o.getBoundingClientRect(),i=r.getBoundingClientRect();this.dragScrollWidget.setViewBoxScrollDelta(0,c.top-i.top-this.dragScrollWidget.viewBox.getBoundingClientRect().height/2+c.height),this.layout()}},{key:"componentWillUnmount",value:function(){this.props.controller.run("removeZoomFactorChangeEventListener",Object(m.a)(Object(m.a)({},this.props),{},{listener:this.setZoomFactor}))}},{key:"dragScrollWidget",get:function(){return this.props.getRef(Rl)}},{key:"componentDidUpdate",value:function(){this.props.controller.run("fireEvent",Object(m.a)(Object(m.a)({},this.props),{},{key:_l})),this.layout()}},{key:"layout",value:function(){this.props.controller.run("layout",this.props)}},{key:"render",value:function(){var e=this,t=this.props,n=t.saveRef,r=t.model,c=t.controller,i=r.editorRootTopicKey;return Object(o.createElement)(up,{onWheel:this.onWheel},Object(o.createElement)(Ba,Object.assign({},this.state,{enableMouseWheel:!1,zoomFactor:r.zoomFactor,ref:n(Rl)}),(function(t,r){var a=Object(m.a)(Object(m.a)({},e.props),{},{topicKey:i,setViewBoxScroll:t,setViewBoxScrollDelta:r});return Object(o.createElement)(lp,{ref:n("node-layer")},c.run("renderRootWidget",a))})))}}]),n}(o.PureComponent);sp=ap([y.l],sp);var pp=d.default.div(Zi||(Zi=Object(Ra.a)(["\n  display: flex;\n  flex-direction: column;\n  width: 100%;\n  height: 100%;\n"]))),dp=d.default.div(Ji||(Ji=Object(Ra.a)(["\n  width: 100%;\n  //height: 100%;\n  overflow: auto;\n  flex-grow: 1;\n  background: ",";\n  position: relative;\n"])),(function(e){return e.theme.background}));function fp(e){var t=e.controller,n=e.saveRef,r=Object(o.useState)(t.run("getInitialDiagramState",e)),c=Object(Ca.a)(r,2),i=c[0],a=c[1],l=Object(m.a)(Object(m.a)({},e),{},{diagramState:i,setDiagramState:a});return Object(o.createElement)(pp,null,t.run("renderToolbar",e),Object(o.createElement)(dp,{ref:n(Kl)},Object(o.createElement)(sp,Object.assign({},l)),t.run("renderDiagramCustomize",l)))}var bp=Object(d.default)($a)(Yi||(Yi=Object(Ra.a)(["\n  position: absolute;\n  width: 20%;\n  padding: 0 5px;\n  background: white;\n  left: 30px;\n  top: 20px;\n  border-radius: 2px;\n"]))),yp=d.default.div(qi||(qi=Object(Ra.a)(["\n  max-width: 600px;\n"]))),hp=d.default.span(Xi||(Xi=Object(Ra.a)([""]))),gp=function(e){Object(u.a)(n,e);var t=Object(s.a)(n);function n(e){var r;return Object(a.a)(this,n),(r=t.call(this,e)).setEditorRootTopicKey=function(e){return function(){var t=r.props,n=t.model,o=t.controller;n.editorRootTopicKey!==e&&o.run("operation",Object(m.a)(Object(m.a)({},r.props),{},{opType:oi,topicKey:e}))}},r.breadcrumbRenderer=function(e){var t=e.text,n=Object(wa.a)(e,Ma),r=t.length>8,c=r?t.substr(0,8)+"...":t,i={content:Object(o.createElement)(yp,null,t),position:y.u.BOTTOM_RIGHT},a=Object(o.createElement)(y.b,Object.assign({},n),Object(o.createElement)(hp,null,c));return r?Object(o.createElement)(y.x,Object.assign({},i),a):a},r}return Object(l.a)(n,[{key:"render",value:function(){var e=this.props,t=e.model,n=e.controller,r=e.zIndex,c=t.editorRootTopicKey;if(c===t.rootTopicKey)return null;for(var i=[],a=t.getTopic(c);null!=a;){var l=n.getValue(Nl,Object(m.a)(Object(m.a)({},e),{},{topicKey:a.key}));i.unshift({text:l,onClick:this.setEditorRootTopicKey(a.key)}),a=t.getTopic(a.parentKey)}var u={items:i,breadcrumbRenderer:this.breadcrumbRenderer};return Object(o.createElement)(bp,{zIndex:r},Object(o.createElement)(y.c,Object.assign({},u)))}}]),n}(Aa),mp=function(e){Object(u.a)(n,e);var t=Object(s.a)(n);function n(){var e;return Object(a.a)(this,n),(e=t.apply(this,arguments)).handleClose=function(){var t=e.props.controller.run("handleActiveModalClose",e.props);t&&t()},e}return Object(l.a)(n,[{key:"render",value:function(){var e=this.props.controller,t=e.run("renderModal",this.props),n=e.run("getActiveModalProps",this.props);return Object(o.createElement)(y.g,{onClose:this.handleClose,isOpen:null!==t,autoFocus:!0,enforceFocus:!0,usePortal:!0,title:n&&n.title,style:n&&n.style},Object(o.createElement)("div",{className:h.a.DIALOG_BODY,style:{minHeight:0}},t))}}]),n}(Aa),Op=d.default.svg($i||($i=Object(Ra.a)(["\n  width: 100%;\n  height: 100%;\n  position: absolute;\n  left: 0;\n  top: 0;\n  z-index: 1;\n  pointer-events: none;\n"]))),vp=b()("node:root-sub-links"),Tp=function(e){Object(u.a)(n,e);var t=Object(s.a)(n);function n(){var e;return Object(a.a)(this,n),(e=t.apply(this,arguments)).state={curves:[]},e}return Object(l.a)(n,[{key:"layout",value:function(){var e,t,n,r=this.props,c=r.model,i=r.getRef,a=r.topicKey,l=r.zoomFactor,u=r.controller,s=c.getTopic(a),p=i(vl(a)),d=i(Sl(a)),f=i(Rl).bigView,b=xs(p,f,l),y=xs(d,f,l);e={x:(n=b,(n.left+n.right)/2-y.left),y:Ts(b)-y.top};var h=[];s.subKeys.forEach((function(n){var c,a=u.run("getLinkStyle",Object(m.a)(Object(m.a)({},r),{},{topicKey:n})),s=a.lineType,p=xs(i(vl(n)),f,l);if(t={x:(t=p.left>b.right?{x:p.left,y:Ts(p)}:{x:p.right,y:Ts(p)}).x-y.left,y:t.y-y.top},"curve"===s)c="M ".concat(e.x," ").concat(e.y," C ").concat(e.x," ").concat(ks(e,t)," ").concat(js(e,t)," ").concat(t.y," ").concat(t.x," ").concat(t.y);else if("line"===s)c="M ".concat(e.x," ").concat(e.y," L ").concat(t.x," ").concat(t.y);else if("round"===s){var d=t.y>e.y?1:-1,g=t.x>e.x?1:-1,O=a.lineRadius;if(null==O)throw new Error("link line type is round, but lineRadius is not provided!");c=t.y===e.y?"M ".concat(e.x," ").concat(e.y," H ").concat(t.x):"M ".concat(e.x," ").concat(e.y,"  V ").concat(t.y-d*O," A ").concat(O," ").concat(O," 0 0 ").concat(d*g===1?0:1," ").concat(e.x+O*g," ").concat(t.y," H ").concat(t.x)}h.push(Object(o.createElement)("path",{key:"link-".concat(n),d:c,strokeWidth:a.lineWidth,stroke:a.lineColor,fill:"none"}))})),this.setState({curves:h})}},{key:"render",value:function(){vp("render");var e=this.props,t=e.topicKey,n=e.saveRef;return Object(o.createElement)(Op,{ref:n(Sl(t))},Object(o.createElement)("g",null,this.state.curves))}}]),n}(Aa),jp=b()("RootNode"),kp=d.default.div(Qi||(Qi=Object(Ra.a)(["\n  display: flex;\n  position: relative;\n\n  align-items: ",";\n  flex-direction: column;\n\n  padding: ",";\n"])),(function(e){return e.topicDirection===Ec?"flex-end":"flex-start"}),(function(e){return e.topicDirection===Ec?"15px 60px 15px 0px":"15px 0px 15px 60px"})),Ep=d.default.div(ea||(ea=Object(Ra.a)(["\n  display: flex;\n  position: relative;\n  align-items: center;\n  z-index: 3;\n"]))),xp=function(e){Object(u.a)(n,e);var t=Object(s.a)(n);function n(){return Object(a.a)(this,n),t.apply(this,arguments)}return Object(l.a)(n,[{key:"renderPartTopics",value:function(e,t){var n=this.props,r=n.controller,c=n.saveRef,i=r.run("createSubTopics",Object(m.a)(Object(m.a)({},this.props),{},{dir:t,isRoot:!0,topics:e}));if(!i)return null;var a=i.subTopics,l="bm-layer-".concat(t===Ec?"left":"right");return Object(o.createElement)(kp,{topicDirection:t,ref:c(l)},a)}},{key:"render",value:function(){jp("render");var e=this.props,t=e.model,n=e.topicKey,r=e.saveRef,c=e.controller,i=c.run("getTopicContentStyle",e),a=t.config,l=c.run("renderTopicContent",Object(m.a)(Object(m.a)({},e),{},{topicStyle:i,dir:Sc})),u=c.run("getPartTopics",{layout:a.layoutDir,model:t,topicKey:n}),s=Object(o.createElement)(Ep,{ref:r(El(n))},l),p=c.run("renderRootWidgetOtherChildren",e);switch(a.layoutDir){case jc.LEFT_AND_RIGHT:return Object(o.createElement)(o.Fragment,null,this.renderPartTopics(u.L,"L"),s,this.renderPartTopics(u.R,"R"),p);case jc.LEFT_TO_RIGHT:return Object(o.createElement)(o.Fragment,null,s,this.renderPartTopics(u.R,"R"),p);case jc.RIGHT_TO_LEFT:return Object(o.createElement)(o.Fragment,null,this.renderPartTopics(u.L,"L"),s,p);case jc.TOP_TO_BOTTOM:return Object(o.createElement)(o.Fragment,null,s,this.renderPartTopics(u.B,"B"),p)}return null}}]),n}(o.Component),Sp=d.default.div(ta||(ta=Object(Ra.a)(["\n  position: absolute;\n  top: calc(50% - 10px);\n  ",";\n  border-radius: 50%;\n  width: 20px;\n  height: 20px;\n  text-align: center;\n  //@ts-ignore\n  background: ",";\n  cursor: pointer;\n  padding: 0;\n  font-size: 14px;\n  line-height: 20px;\n  border: 0;\n  z-index: 2;\n"])),(function(e){var t=e.dir;return t===xc?Object(d.css)(na||(na=Object(Ra.a)(["\n        right: -25px;\n      "]))):t===Ec?Object(d.css)(oa||(oa=Object(Ra.a)(["\n        left: -25px;\n      "]))):void 0}),(function(e){return e.background}));function Cp(e){var t=e.model,n=e.topicKey,r=e.topicStyle,c=e.dir,i=e.saveRef,a=e.onClickCollapse,l=t.getTopic(n);return l.subKeys.size>0?Object(o.createElement)(Sp,{ref:i(Cl(n)),onClick:a,background:r.background,dir:c,className:nt()(Object(Sa.a)({icon:!0,iconfont:!0},"bm-".concat(l.collapse?"plus":"minus"),!0))}):null}var wp=b()("node:topic-content2"),Kp=d.default.div(ra||(ra=Object(Ra.a)(["\n  position: relative;\n"]))),Rp=d.default.div(ca||(ca=Object(Ra.a)(["\n  position: absolute;\n  left: 0;\n  top: 0;\n  width: auto;\n  z-index: 10;\n  color: black;\n"]))),Dp=function(e){wp("cancelEvent"),e.preventDefault(),e.stopPropagation()};function Lp(e){var t,n=e.controller,r=e.model,c=e.topicKey,i=e.getRef,a=r.editingContentKey!==c,l=n.run("renderTopicContentEditor",Object(m.a)(Object(m.a)({},e),{},{readOnly:a}));if(a)t=l;else{var u,s={width:50,height:40},d=i("content-editor-".concat(c));d&&(s=d.getBoundingClientRect());var f=new p.a((function(e,t){var n=e[0].contentRect;u.style.left=(s.width-n.width)/2+"px",u.style.top=(s.height-n.height)/2+"px"}));wp(s),t=Object(o.createElement)(o.Fragment,null,Object(o.createElement)("div",{style:{width:s.width,height:s.height}}),Object(o.createElement)(Rp,{ref:function(e){e&&(u=e,f.observe(u))}},l))}return Object(o.createElement)(Kp,{onDragEnter:Dp,onDragOver:Dp},t)}var Ip=b()("node:topic-content-widget"),_p=d.default.div(ia||(ia=Object(Ra.a)(["\n  display: flex;\n  align-items: center;\n  cursor: pointer;\n  //overflow: hidden;\n  position: relative;\n"]))),Mp=d.default.div(aa||(aa=Object(Ra.a)(["\n  position: relative;\n"]))),Ap=function(e){Object(u.a)(n,e);var t=Object(s.a)(n);function n(e){var o;return Object(a.a)(this,n),(o=t.call(this,e)).onDragStart=function(e){o.run("handleTopicDragStart",Object(m.a)(Object(m.a)({},o.props),{},{ev:e}))},o.onDragOver=function(e){e.preventDefault()},o.onDragEnter=function(e){Ip("onDragEnter",o.props.topicKey),o.run("handleTopicDragEnter",Object(m.a)(Object(m.a)({},o.props),{},{ev:e,dropDir:"in"}))},o.onDragLeave=function(e){o.run("handleTopicDragLeave",Object(m.a)(Object(m.a)({},o.props),{},{ev:e,dropDir:"in"}))},o.onDrop=function(e){Ip("onDrop"),o.run("handleTopicDrop",Object(m.a)(Object(m.a)({},o.props),{},{ev:e,dropDir:"in"}))},o.onClick=function(e){var t=o.props.controller;o.handleTopicClickTimeout=setTimeout((function(){t.run("handleTopicClick",Object(m.a)(Object(m.a)({},o.props),{},{ev:e}))}),200)},o.onDoubleClick=function(e){clearTimeout(o.handleTopicClickTimeout),o.props.controller.run("handleTopicDoubleClick",Object(m.a)(Object(m.a)({},o.props),{},{ev:e}))},o.needRelocation=!1,o.onClickCollapse=function(e){e.stopPropagation();var t=o.props,n=t.topicKey,r=t.getRef;o.needRelocation=!0;var c=r(Cl(n)).getBoundingClientRect();Ip("oldRect",c),o.oldCollapseIconVector=[c.left+c.width/2,c.top+c.height/2],Ip("oldCollapseIconVector",o.oldCollapseIconVector),o.operation(Bc,o.props)},o.state={dragEnter:!1},o}return Object(l.a)(n,[{key:"renderContextMenu",value:function(){var e=this.props.controller;if(e.getValue(Al,Object(m.a)({},this.props)))return this.operation(Zc,Object(m.a)(Object(m.a)({},this.props),{},{focusMode:_c})),e.run("renderTopicContextMenu",this.props)}},{key:"onContextMenuClose",value:function(){}},{key:"componentDidUpdate",value:function(){if(this.needRelocation){var e=this.props,t=e.getRef,n=e.topicKey,o=e.setViewBoxScrollDelta,r=t(Cl(n)).getBoundingClientRect(),c=[r.left+r.width/2,r.top+r.height/2];Ip("newVector:",c),Ip("oldVector:",this.oldCollapseIconVector);var i=[c[0]-this.oldCollapseIconVector[0],c[1]-this.oldCollapseIconVector[1]];Ip("vector",i),o(i[0],i[1]),this.needRelocation=!1}}},{key:"render",value:function(){var e=this.props,t=e.saveRef,n=e.topicKey,r=e.model,c=e.controller,i=e.topicStyle,a=e.dir;Ip("render",n,r.focusMode);var l=c.run("isOperationEnabled",e)&&r.editingContentKey!==n,u=c.run("renderTopicCollapseIcon",Object(m.a)(Object(m.a)({},e),{},{onClickCollapse:this.onClickCollapse.bind(this)})),s=c.run("renderTopicDropArea",Object(m.a)(Object(m.a)({},e),{},{dropDir:"prev"})),p=c.run("renderTopicDropArea",Object(m.a)(Object(m.a)({},e),{},{dropDir:"next"})),d={onDragEnter:this.onDragEnter,onDragLeave:this.onDragLeave,onDragOver:this.onDragOver,onDrop:this.onDrop};return Object(o.createElement)(Mp,null,s,Object(o.createElement)(_p,Object.assign({style:i,draggable:l,ref:t(vl(n)),onDragStart:this.onDragStart,onClick:this.onClick,onDoubleClick:this.onDoubleClick},d),c.run("renderTopicBlocks",e),c.run("renderTopicContentOthers",e)),p,a!==Sc&&u)}}]),n}(Aa);Ap=ap([y.f],Ap);var Np=b()("node:topic-desc"),Fp=d.default.div(la||(la=Object(Ra.a)(["\n  overflow: auto;\n"])));function Pp(e){var t=e.controller,n=e.model,r=e.topicKey,c=e.getRef,i=n.editingDescKey===r;Np("isEditing",i);var a=n.getTopic(r).getBlock(Rc);if(!i&&t.run("isBlockEmpty",Object(m.a)(Object(m.a)({},e),{},{block:a.block})))return null;var l=t.run("renderTopicDescEditor",e),u=c(Kl),s={maxWidth:"800px",maxHeight:"600px"};if(u){var p=u.getBoundingClientRect();s.maxWidth="".concat(.6*p.width,"px"),s.maxHeight="".concat(.8*p.height,"px")}var d={autoFocus:!1,content:Object(o.createElement)(Fp,{onClick:gs,classname:h.a.POPOVER_DISMISS,style:s},l),target:Object(o.createElement)(Xa,{onClick:function(n){n.stopPropagation(),t.run("operation",Object(m.a)(Object(m.a)({},e),{},{opType:ti}))},className:ml(pl),tabIndex:-1}),interactionKind:y.t.HOVER,hoverOpenDelay:500};return a.block&&Object(o.createElement)(y.s,Object.assign({},d))}var Bp=d.default.svg(ua||(ua=Object(Ra.a)(["\n  width: 100%;\n  height: 100%;\n  position: absolute;\n  left: 0;\n  top: 0;\n  z-index: 2;\n  pointer-events: none;\n"]))),zp=function(e){Object(u.a)(n,e);var t=Object(s.a)(n);function n(){var e;return Object(a.a)(this,n),(e=t.apply(this,arguments)).state={content:null},e}return Object(l.a)(n,[{key:"layout",value:function(){var e=this.props,t=e.getRef,n=e.model,r=e.zoomFactor,c=n.focusKey,i=n.focusMode;if(c&&i!==Lc){var a=t(vl(c)),l=t(Rl).bigView,u=t(Dl),s=xs(a,l,r),p=xs(u,l,r),d=s.left-p.left-3,f=s.top-p.top-3,b=s.width+6,y=s.height+6;this.setState({content:Object(o.createElement)("rect",{x:d,y:f,width:b,height:y,fill:"none",stroke:n.config.theme.highlightColor,strokeWidth:2})})}else this.setState({content:null})}},{key:"render",value:function(){var e=this.props.saveRef;return Object(o.createElement)(Bp,{ref:e(Dl)},this.state.content)}}]),n}(Aa),Vp=d.default.svg(sa||(sa=Object(Ra.a)(["\n  width: 100%;\n  height: 100%;\n  position: absolute;\n  left: 0;\n  top: 0;\n  z-index: 1;\n  pointer-events: none;\n"]))),Hp=b()("node:topic-sub-links"),Gp=function(e){Object(u.a)(n,e);var t=Object(s.a)(n);function n(){var e;return Object(a.a)(this,n),(e=t.apply(this,arguments)).state={curves:[]},e}return Object(l.a)(n,[{key:"layout",value:function(){var e,t,n,r=this.props,c=r.model,i=r.getRef,a=r.topicKey,l=r.dir,u=r.controller,s=u.run("getZoomFactor",r),p=c.getTopic(a),d=i(vl(a)),f=i(Sl(a)),b=i(Cl(a)),y=i(Rl).bigView,h=xs(f,y,s),g=xs(b,y,s),O=xs(d,y,s);Hp(a),Hp("svgRect",h),Hp("collapseRect",g),Hp("contentRect",O),l===xc?(e={x:0,y:Ts(O)-h.top},t={x:g.right-h.left+10,y:e.y}):l===Ec&&(e={x:h.right-h.left,y:Ts(O)-h.top},t={x:g.left-h.left-10,y:e.y});var v=[];p.subKeys.forEach((function(c){var a,d=u.run("getLinkStyle",Object(m.a)(Object(m.a)({},r),{},{topicKey:c})),f=i(vl(c));if(f){var b=xs(f,y,s);l===xc&&(n={x:b.left-h.left,y:Ts(b)-h.top}),l===Ec&&(n={x:b.right-h.left,y:Ts(b)-h.top});var g=d.lineType;if("curve"===g)a="M ".concat(e.x," ").concat(e.y," L ").concat(t.x," ").concat(t.y," C ").concat(t.x," ").concat(ks(t,n)," ").concat(js(t,n)," ").concat(n.y," ").concat(n.x," ").concat(n.y);else if("round"===g){var O=n.y>e.y?1:-1,T=n.x>e.x?1:-1,j=d.lineRadius;a=1===p.subKeys.size||Math.abs(n.y-e.y)<=1?"M ".concat(e.x," ").concat(e.y," L ").concat(n.x," ").concat(n.y):"M ".concat(e.x," ").concat(e.y," H ").concat(t.x," V ").concat(n.y-O*j," A ").concat(j," ").concat(j," 0 0 ").concat(O*T===1?0:1," ").concat(t.x+j*T," ").concat(n.y," H ").concat(n.x)}else"line"===g&&(a="M ".concat(e.x," ").concat(e.y," H ").concat(t.x," L ").concat(n.x," ").concat(n.y));v.push(Object(o.createElement)("path",{key:"link-".concat(c),d:a,strokeWidth:d.lineWidth,stroke:d.lineColor,fill:"none"}))}})),this.setState({curves:v})}},{key:"render",value:function(){var e=this.props,t=e.topicKey,n=e.saveRef;return Object(o.createElement)(Vp,{ref:n(Sl(t))},Object(o.createElement)("g",null,this.state.curves))}}]),n}(Aa),Wp=b()("node:topic-widget"),Up=d.default.div(pa||(pa=Object(Ra.a)(["\n  display: flex;\n  align-items: center;\n  flex-direction: ",";\n"])),(function(e){return e.topicDirection===xc?"row":"row-reverse"})),Zp=d.default.div(da||(da=Object(Ra.a)(["\n  position: relative;\n  padding: ",";\n"])),(function(e){return e.dir===xc?"0 0 0 ".concat(e.marginH,"px"):"0 ".concat(e.marginH,"px 0 0")})),Jp=d.default.div(fa||(fa=Object(Ra.a)(["\n  display: flex;\n  position: relative;\n  align-items: center;\n\n  flex-direction: ",";\n"])),(function(e){return e.topicDirection===xc?"row":"row-reverse"})),Yp=function(e){Object(u.a)(n,e);var t=Object(s.a)(n);function n(){return Object(a.a)(this,n),t.apply(this,arguments)}return Object(l.a)(n,[{key:"renderSubTopics",value:function(){var e=this.props,t=e.controller,n=e.model,r=e.topicKey,c=e.dir,i=n.getTopic(r).subKeys.toArray(),a=t.run("createSubTopics",Object(m.a)(Object(m.a)({},e),{},{topics:i}));if(!a)return null;var l=a.subTopics,u=t.run("renderSubLinks",e);return Object(o.createElement)(Zp,{dir:c,marginH:n.config.theme.marginH},l," ",u)}},{key:"layoutLinks",value:function(){var e=this.props,t=e.getRef,n=e.topicKey,o=e.model.getTopic(n);if(0!==o.subKeys.size&&!o.collapse){Wp("layoutLinks",n);var r=t(xl(n));r&&r.layout()}}},{key:"render",value:function(){var e=this.props,t=e.controller,n=e.topicKey,r=e.dir,c=e.saveRef;Wp("render",n);var i=t.run("getTopicContentStyle",e),a=Object(m.a)(Object(m.a)({},e),{},{topicStyle:i}),l=t.run("renderTopicContent",a);return Object(o.createElement)(Up,{topicDirection:r},Object(o.createElement)(Jp,{topicDirection:r,ref:c(El(n))},l),this.renderSubTopics())}}]),n}(o.Component),qp=b()("node:view-port-viewer"),Xp=Object(d.default)($a)(ba||(ba=Object(Ra.a)(["\n  position: absolute;\n  background: white;\n  right: 30px;\n  bottom: 20px;\n  border-radius: 2px;\n  display: flex;\n  flex-direction: row;\n  user-select: none;\n"]))),$p=Object(d.default)(Za)(ya||(ya=Object(Ra.a)(["\n  margin: 10px;\n"]))),Qp=d.default.span(ha||(ha=Object(Ra.a)(["\n  display: inline-block;\n  width: 80px;\n  height: 18px;\n"]))),ed=function(e){return Object(o.createElement)(y.x,{content:e.tooltip,position:g.a.TOP,className:h.a.ICON},Object(o.createElement)($p,{onClick:e.onClick,tabIndex:-1},e.children))},td=function(e){Object(u.a)(n,e);var t=Object(s.a)(n);function n(e){var o;return Object(a.a)(this,n),(o=t.call(this,e)).zoomFactorChange=function(e){qp("zoomFactorChange",e),o.setState({zoomFactor:e})},o.onClickResetZoom=function(e){var t=o.props;t.controller.run("setZoomFactor",Object(m.a)(Object(m.a)({},t),{},{zoomFactor:1}))},o.onClickAddZoom=function(e){var t=o.props,n=t.controller,r=n.run("getZoomFactor",t);n.run("setZoomFactor",Object(m.a)(Object(m.a)({},t),{},{zoomFactor:r+.1}))},o.onClickMinusZoom=function(e){var t=o.props,n=t.controller,r=n.run("getZoomFactor",t);n.run("setZoomFactor",Object(m.a)(Object(m.a)({},t),{},{zoomFactor:r-.1}))},o.onClickCollapseAll=function(e){var t=o.props,n=t.controller;n.run("addEventListener",Object(m.a)(Object(m.a)({},t),{},{key:_l,listener:o.centerRootTopic,once:!0})),n.run("operation",Object(m.a)(Object(m.a)({},t),{},{opType:zc}))},o.onClickExpandAll=function(e){var t=o.props,n=t.controller;n.run("addEventListener",Object(m.a)(Object(m.a)({},t),{},{key:_l,listener:o.centerRootTopic,once:!0})),n.run("operation",Object(m.a)(Object(m.a)({},t),{},{opType:Vc}))},o.centerRootTopic=function(){var e=o.props,t=e.model;e.controller.run("moveTopicToCenter",Object(m.a)(Object(m.a)({},o.props),{},{topicKey:t.editorRootTopicKey}))},o}return Object(l.a)(n,[{key:"componentDidMount",value:function(){var e=this.props;e.controller.run("addZoomFactorChangeEventListener",Object(m.a)(Object(m.a)({},e),{},{listener:this.zoomFactorChange}))}},{key:"componentWillUnmount",value:function(){var e=this.props;e.controller.run("removeZoomFactorChangeEventListener",Object(m.a)(Object(m.a)({},e),{},{listener:this.zoomFactorChange}))}},{key:"render",value:function(){qp("render");var e=this.props,t=e.controller,n=e.zIndex,r=t.run("getZoomFactor",e);return Object(o.createElement)(Xp,{zIndex:n},Object(o.createElement)(ed,{onClick:this.onClickCollapseAll,tooltip:vs(e,qu)},Ol(bl)),Object(o.createElement)(ed,{onClick:this.onClickExpandAll,tooltip:vs(e,Xu)},Ol(yl)),Object(o.createElement)(ed,{onClick:this.centerRootTopic,tooltip:vs(e,$u)},Ol(hl)),Object(o.createElement)(ed,{onClick:this.onClickMinusZoom,tooltip:vs(e,es)},Ol(fl)),Object(o.createElement)(ed,{onClick:this.onClickResetZoom,tooltip:vs(e,ns)},Object(o.createElement)(Qp,null,"".concat(vs(e,Qu),":").concat(Math.floor(100*r),"%"))),Object(o.createElement)(ed,{onClick:this.onClickAddZoom,tooltip:vs(e,ts)},Ol(dl)))}}]),n}(Aa),nd=d.default.div(ga||(ga=Object(Ra.a)(["\n  overflow: auto;\n  padding: 0px 0px 0px 20px;\n  background: #88888850;\n"])));function od(e){var t=e.controller,n=e.model,r=e.topicKey;if(n.focusMode===Ic){var c=t.run("renderTopicDescEditor",e);return Object(o.createElement)(y.i,{key:"drawer",title:vs(e,Xl),icon:Ol("note"),isOpen:!0,hasBackdrop:!0,backdropProps:{onMouseDown:gs},isCloseButtonShown:!1,onClose:function(n){n.stopPropagation();var o="topic-desc-data-".concat(r),c=t.run("deleteTempValue",{key:o});t.run("operation",Object(m.a)(Object(m.a)({},e),{},{opType:$c,topicKey:r,blockType:Rc,data:c,focusMode:Dc}))},size:"70%"},Object(o.createElement)(nd,null,c))}}function rd(e){var t=e.theme,n=e.children;return Object(o.createElement)(d.ThemeProvider,{theme:t},Object(o.createElement)(o.Fragment,null,n))}var cd=b()("plugin:rendering");function id(){var e;return{getDiagramProps:function(){return e},renderDiagram:function(t){var n=t.model;return Object(o.createElement)(Va,null,(function(r,c,i){return e=Object(m.a)(Object(m.a)({},t),{},{saveRef:r,getRef:c,deleteRef:i}),cd("renderDiagram",n),Object(o.createElement)(rd,{theme:n.config.theme},Object(o.createElement)(fp,e))}))},renderDrawer:od,getInitialDiagramState:function(e){return{rightTopPanel:{isOpen:!1,selectedTabId:"topic-style"}}},renderDiagramCustomize:function(e){var t=e.controller,n=e.model,o=t.getValue(Ml),r=Object(m.a)(Object(m.a)({},e),{},{zIndex:o,topicKey:n.focusKey});return[t.run("renderEditorRootBreadcrumbs",r),t.run("renderRightTopPanel",r),t.run("renderModals",Object(m.a)(Object(m.a)({},r),{},{zIndex:o+1})),t.run("renderDrawer",Object(m.a)(Object(m.a)({},r),{},{zIndex:o+1})),t.run("renderViewPortViewer",r)]},renderEditorRootBreadcrumbs:function(e){return Object(o.createElement)(gp,Object.assign({key:"EditorRootBreadcrumbs"},e))},renderModals:function(e){return Object(o.createElement)(mp,Object.assign({key:"modals"},e))},renderModal:function(e){return null},getActiveModalProps:function(e){return null},renderDoc:function(e){return e.children},renderRootWidget:function(e){return Object(o.createElement)(xp,Object.assign({},e))},renderTopicWidget:function(e){return Object(o.createElement)(Yp,Object.assign({},e))},renderTopicContent:function(e){return Object(o.createElement)(Ap,Object.assign({},e))},renderTopicCollapseIcon:function(e){return Object(o.createElement)(Cp,Object.assign({},e))},renderTopicContentOthers:function(e){return[]},renderTopicBlocks:function(e){var t=e.model,n=e.topicKey,r=e.controller,c=t.getTopic(n).blocks,i=[],a=0;return c.forEach((function(t){var n=r.run("renderTopicBlock",Object(m.a)(Object(m.a)({},e),{},{block:t,blockKey:"block-".concat(a)}));n&&(i.push(Object(o.createElement)(o.Fragment,{key:"block-".concat(a)},n)),a++)})),i},renderTopicBlock:function(e){var t=e.controller;switch(e.block.type){case Kc:return t.run("renderTopicBlockContent",e);case Rc:return t.run("renderTopicBlockDesc",e)}return null},renderTopicBlockContent:function(e){return Object(o.createElement)(Lp,Object.assign({},e))},renderTopicBlockDesc:function(e){return Object(o.createElement)(Pp,Object.assign({},e))},renderSubLinks:function(e){var t=e.saveRef,n=e.topicKey,r=e.model.getTopic(n);return 0===r.subKeys.size||r.collapse?null:Object(o.createElement)(Gp,Object.assign({ref:t(xl(n))},e))},renderRootSubLinks:function(e){var t=e.saveRef,n=e.topicKey;return Object(o.createElement)(Tp,Object.assign({ref:t(xl(n))},e))},renderFocusItemHighlight:function(e){var t=e.saveRef;return Object(o.createElement)(zp,Object.assign({ref:t(Ll)},e))},renderRootWidgetOtherChildren:function(e){var t=e.controller,n=t.run("getZoomFactor",e);return e=Object(m.a)(Object(m.a)({},e),{},{zoomFactor:n}),Object(o.createElement)(o.Fragment,null,t.run("renderRootSubLinks",e),t.run("renderFocusItemHighlight",e),t.run("renderDragAndDropEffect",e))},renderViewPortViewer:function(e){return Object(o.createElement)(td,Object.assign({key:"view-port-viewer"},e))}}}var ad=Object(d.default)($a)(ma||(ma=Object(Ra.a)(["\n  position: absolute;\n  background: white;\n  right: 30px;\n  top: 20px;\n  border-radius: 2px;\n  user-select: none;\n"]))),ld=Object(d.default)(y.w)(Oa||(Oa=Object(Ra.a)(["\n  padding: 0px 10px;\n"])));function ud(e){var t=e.controller,n=e.zIndex,r=e.diagramState,c=e.setDiagramState,i=r.rightTopPanel,a=i.isOpen,l=i.selectedTabId,u=function(e){c(Object(m.a)(Object(m.a)({},r),{},{rightTopPanel:Object(m.a)(Object(m.a)({},i),e)}))};if(!a)return Object(o.createElement)(ad,{zIndex:n},Object(o.createElement)(Ua,{onClick:function(){u({isOpen:!0})}},Object(o.createElement)(Wa,{className:ml(ll)})));return Object(o.createElement)(ad,{zIndex:n},Object(o.createElement)(qa,null,Object(o.createElement)(Ya,{className:ml(ul),onClick:function(){u({isOpen:!1})}})),Object(o.createElement)(ld,{id:"tabs",selectedTabId:l,onChange:function(e){u({selectedTabId:e})}},t.run("renderRightTopPanelTabs",e)))}var sd=Object(v.a)(Array(7).keys()),pd=[0,5,10,15,20,25,30,35],dd=["none","solid","dotted","dashed","double"];function fd(e){var t=e.contentStyle,n=e.setContentStyle;return Object(o.createElement)(Cs,null,Object(o.createElement)(tl,null,vs(e,Lu)),Object(o.createElement)(cl,null,Object(o.createElement)(Ls,{text:"".concat(vs(e,Iu),": ").concat(t.borderWidth?t.borderWidth:vs(e,Hl)),items:sd,itemRenderer:Is("px"),onItemSelect:function(e){n({borderWidth:"".concat(e,"px")})}}),Object(o.createElement)(Ls,{text:"".concat(vs(e,ou),": ").concat(t.borderStyle?vs(e,t.borderStyle):vs(e,Vu)),items:dd,itemRenderer:_s(e),onItemSelect:function(e){n({borderStyle:e})}}),Object(o.createElement)(Ls,{text:"".concat(vs(e,_u),": ").concat(t.borderRadius),items:pd,itemRenderer:Is("px"),onItemSelect:function(e){n({borderRadius:"".concat(e,"px")})}}),Object(o.createElement)(ws,{color:t.borderColor,handleColorChange:function(e){n({borderColor:e})}})))}var bd=["curve","round","line"];function yd(e){var t=e.showLinkStyle,n=void 0===t||t,r=e.showSubLinkStyle,c=void 0===r||r,i=e.linkStyle,a=void 0===i?{}:i,l=e.subLinkStyle,u=void 0===l?{}:l,s=e.setLinkStyle,p=e.setSubLinkStyle;return Object(o.createElement)(Cs,null,Object(o.createElement)(tl,null,vs(e,cu)),n&&Object(o.createElement)(cl,{alignItems:"center"},Object(o.createElement)(Ga,{margin:"0 5px 0 0"},vs(e,iu)+":"," "),Object(o.createElement)(Ls,{text:"".concat(vs(e,Iu),": ").concat(a?a.lineWidth:"0px"),items:Ms,itemRenderer:Is("px"),onItemSelect:function(e){s({lineWidth:"".concat(e,"px")})}}),Object(o.createElement)(Ls,{text:"".concat(vs(e,du),": ").concat(vs(e,a.lineType)),items:bd,itemRenderer:_s(e),onItemSelect:function(e){s({lineType:e})}}),Object(o.createElement)(ws,{color:a.lineColor,handleColorChange:function(e){s({lineColor:e})}})),c&&Object(o.createElement)(cl,{alignItems:"center"},Object(o.createElement)(Ga,{margin:"0 5px 0 0"},vs(e,au)+": "),Object(o.createElement)(Ls,{text:"".concat(vs(e,Iu),": ").concat(u?u.lineWidth:"0px"),items:Ms,itemRenderer:Is("px"),onItemSelect:function(e){p({lineWidth:"".concat(e,"px")})}}),Object(o.createElement)(Ls,{text:"".concat(vs(e,du),": ").concat(vs(e,u.lineType)),items:bd,itemRenderer:_s(e),onItemSelect:function(e){p({lineType:e})}}),Object(o.createElement)(ws,{color:u.lineColor,handleColorChange:function(e){p({lineColor:e})}})))}function hd(e){var t=e.contentStyle,n=e.setContentStyle,r={title:"".concat(vs(e,Mu),":"),min:12,max:100,value:parseInt(t.fontSize),style:{width:50},onValueChange:function(e){n({fontSize:e})}},c={title:"".concat(vs(e,Au),":"),style:{width:50},value:t.lineHeight||"",onChange:function(e){n({lineHeight:e.target.value})}};return Object(o.createElement)(Cs,null,Object(o.createElement)(tl,null,vs(e,ru)),Object(o.createElement)(Ha,null,Object(o.createElement)(Rs,Object.assign({},r)),Object(o.createElement)(Ds,Object.assign({},c)),Object(o.createElement)(ws,{color:t.color,handleColorChange:function(e){n({color:e})}})))}var gd,md=b()("node:style-editor");function Od(e){var t=e.controller,n=e.model,r=e.topicKey,c=n.getTopic(r),i=function(n){t.run("setTopicContentStyle",Object(m.a)(Object(m.a)({},e),{},{style:n}))};if(!n.focusKey)return null;var a=t.run("getTopicContentStyle",e),l=t.run("getLinkStyle",e),u=t.run("getSubLinkStyle",e),s=Object(m.a)(Object(m.a)({},e),{},{linkStyle:l,subLinkStyle:u,setLinkStyle:function(n){t.run("setLinkStyle",Object(m.a)(Object(m.a)({},e),{},{linkStyle:n}))},setSubLinkStyle:function(n){t.run("setSubLinkStyle",Object(m.a)(Object(m.a)({},e),{},{subLinkStyle:n}))}}),p=Object(m.a)(Object(m.a)({},e),{},{contentStyle:a,setContentStyle:i});return Object(o.createElement)(Qa,null,Object(o.createElement)(fd,Object.assign({},p)),Object(o.createElement)(hd,Object.assign({},p)),Object(o.createElement)(Cs,null,Object(o.createElement)(tl,null,vs(e,Ru)),Object(o.createElement)(ws,{color:a.background,handleColorChange:function(e){i({background:e})}})),Object(o.createElement)(yd,Object.assign({},s)),Object(o.createElement)(Cs,null,Object(o.createElement)(Ks,{title:vs(e,su),onClick:function(){c.style&&t.run("operation",Object(m.a)(Object(m.a)({},e),{},{opType:Yc,style:null}))}}),Object(o.createElement)(Ks,{title:vs(e,lu),onClick:function(){gd=t.run("getTopicStyle",e),md(gd)}}),Object(o.createElement)(Ks,{title:vs(e,uu),onClick:function(){gd&&t.run("operation",Object(m.a)(Object(m.a)({},e),{},{opType:Yc,style:JSON.stringify(gd)}))}})),function(e){var t=e.controller;return Object(o.createElement)(Cs,null,Object(o.createElement)(nl,null,Object(o.createElement)(y.d,{onClick:function(n){t.run("operation",Object(m.a)(Object(m.a)({},e),{},{opType:qc}))}},vs(e,pu))))}(e))}var vd=n(109);function Td(e){var t=e.contentStyle,n=e.setContentStyle,r=vd("padding",t.padding||"0"),c={layout:"v",min:0,max:99,style:{width:38}},i=parseInt(r["padding-top"]),a=parseInt(r["padding-right"]),l=parseInt(r["padding-bottom"]),u=parseInt(r["padding-left"]),s={top:i,right:a,bottom:l,left:u},p=function(e){return function(t){n({padding:Os(Object(m.a)(Object(m.a)({},s),{},Object(Sa.a)({},e,t)))})}},d=Object(m.a)(Object(m.a)({},c),{},{title:vs(e,Fu),value:i,onValueChange:p("top")}),f=Object(m.a)(Object(m.a)({},c),{},{title:vs(e,zu),value:a,onValueChange:p("right")}),b=Object(m.a)(Object(m.a)({},c),{},{title:vs(e,Pu),value:l,onValueChange:p("bottom")}),y=Object(m.a)(Object(m.a)({},c),{},{title:vs(e,Bu),value:u,onValueChange:p("left")});return Object(o.createElement)(Cs,null,Object(o.createElement)(tl,null,vs(e,Nu)),Object(o.createElement)(cl,null,Object(o.createElement)(Rs,Object.assign({},d)),Object(o.createElement)(Rs,Object.assign({},f)),Object(o.createElement)(Rs,Object.assign({},b)),Object(o.createElement)(Rs,Object.assign({},y))))}var jd=d.default.div(va||(va=Object(Ra.a)(["\n  height: 250px;\n  overflow: auto;\n"])));function kd(e){var t=e.topicStyle,n=e.setTopicStyle,r=t.contentStyle,c=void 0===r?{}:r,i=t.linkStyle,a=void 0===i?{}:i,l=t.subLinkStyle,u=void 0===l?{}:l,s=function(e){n({contentStyle:e})},p=Object(m.a)(Object(m.a)({},e),{},{contentStyle:c,setContentStyle:s}),d=Object(m.a)(Object(m.a)({},e),{},{showLinkStyle:!1,linkStyle:a,subLinkStyle:u,setLinkStyle:function(e){n({linkStyle:e})},setSubLinkStyle:function(e){n({subLinkStyle:e})}});return Object(o.createElement)(jd,null,Object(o.createElement)(fd,Object.assign({},p)),Object(o.createElement)(Td,Object.assign({},p)),Object(o.createElement)(hd,Object.assign({},p)),Object(o.createElement)(Cs,null,Object(o.createElement)(tl,null,vs(e,Ru)),Object(o.createElement)(ws,{color:c.background,handleColorChange:function(e){s({background:e})}})),Object(o.createElement)(yd,Object.assign({},d)))}b()("node:theme-editor");var Ed="normal";function xd(e){var t,n=Object(o.useState)(!1),r=Object(Ca.a)(n,2),c=r[0],i=r[1],a=e.model,l=e.controller,u=Object(ct.cloneDeep)(a.config.theme),s=l.run("getThemeOfTopic",Object(m.a)(Object(m.a)({},e),{},{isClone:!0})),p=s.rootTopic,d=s.primaryTopic,f=s.normalTopic,b=function(t){l.run("operation",Object(m.a)(Object(m.a)({},e),{},{opType:Xc,theme:t}))},h=(t=function(e){b(Object(ct.merge)(u,{randomColor:e}))},function(e){return t(e.target.checked)}),g=Object(m.a)(Object(m.a)({},e),{},{topicStyle:p,setTopicStyle:function(e){b(Object(ct.merge)(u,{rootTopic:e}))}}),O=Object(o.createElement)(kd,Object.assign({},g)),v=Object(m.a)(Object(m.a)({},e),{},{topicStyle:d,setTopicStyle:function(e){b(Object(ct.merge)(u,{primaryTopic:e}))}}),T=Object(o.createElement)(kd,Object.assign({},v)),j=Object(m.a)(Object(m.a)({},e),{},{topicStyle:f,setTopicStyle:function(e){b(Object(ct.merge)(u,{normalTopic:e}))}}),k=Object(o.createElement)(kd,Object.assign({},j)),E={id:Ed,handleTabIdChange:function(e){Ed=e}},x=Object(o.createElement)(ol,null,Object(o.createElement)(y.w,Object.assign({},E),Object(o.createElement)(y.v,{id:"normal",title:vs(e,gu),panel:k}),Object(o.createElement)(y.v,{id:"primary",title:vs(e,mu),panel:T}),Object(o.createElement)(y.v,{id:"root",title:vs(e,Ou),panel:O}))),S={isOpen:c,onClose:function(e){i(!1)}},C=Object(o.createElement)(y.a,Object.assign({},S),Object(o.createElement)("p",null,"File format error"));return Object(o.createElement)(Qa,null,Object(o.createElement)(Cs,null,Object(o.createElement)(tl,null,vs(e,bu)),Object(o.createElement)(cl,null,Object(o.createElement)(rl,null,vs(e,Ru)+":"),Object(o.createElement)(ws,{color:u.background,handleColorChange:function(e){b(Object(ct.merge)(u,{background:e}))}}),Object(o.createElement)(rl,null,vs(e,yu)+":"),Object(o.createElement)(ws,{color:u.highlightColor,handleColorChange:function(e){b(Object(ct.merge)(u,{highlightColor:e}))}}),Object(o.createElement)(rl,null,vs(e,hu)+":"),Object(o.createElement)(Ja,{checked:u.randomColor,onChange:h}))),x,Object(o.createElement)(Cs,null,Object(o.createElement)(Ks,{title:vs(e,vu),onClick:function(e){ms(JSON.stringify(u),"blink-mind-theme.json")}}),Object(o.createElement)(Ks,{title:vs(e,Tu),onClick:function(e){(function(e){var t=document.createElement("input");return t.type="file",t.accept=e,new Promise((function(e,n){t.addEventListener("change",(function(t){var o=t.target.files[0],r=new FileReader;r.onload=function(t){var n=t.target.result;e(n)},r.onerror=function(e){n(e.target.error)},r.readAsText(o)})),t.click()}))})(".json,.txt").then((function(e){var t,n=JSON.parse(e);null!=(t=n).name&&null!=t.background&&null!=t.highlightColor?b(n):i(!0)}))}})),C)}function Sd(){return{renderRightTopPanel:function(e){var t=Object(m.a)(Object(m.a)({},e),{},{key:"right-top-panel"});return Object(o.createElement)(ud,Object.assign({},t))},renderRightTopPanelTabs:function(e){var t=e.controller;return[t.run("renderTopicStyleEditor",e),t.run("renderThemeEditor",e)]},renderTopicStyleEditor:function(e){var t={id:"topic-style",key:"topic-style",title:vs(e,nu),panel:Object(o.createElement)(Od,Object.assign({},e))};return Object(o.createElement)(y.v,Object.assign({},t))},renderThemeEditor:function(e){var t={id:"theme-editor",key:"theme-editor",title:vs(e,fu),panel:Object(o.createElement)(xd,Object.assign({},e))};return Object(o.createElement)(y.v,Object.assign({},t))}}}var Cd=d.default.div(Ta||(Ta=Object(Ra.a)(["\n  box-shadow: rgb(170, 170, 170) 0 0 2px;\n  background: white;\n  .iconfont {\n    font-size: 28px !important;\n  }\n"])));function wd(e){var t=e.controller;return Object(o.createElement)(Cd,null,t.run("renderToolbarItems",e))}function Kd(e){var t=[[jc.LEFT_AND_RIGHT,vs(e,Wl),"layout-left-and-right"],[jc.LEFT_TO_RIGHT,vs(e,Zl),"layout-right"],[jc.RIGHT_TO_LEFT,vs(e,Ul),"layout-left"]];return Object(o.createElement)(Ns,Object.assign({className:ml(gl)},e),Object(o.createElement)(y.s,{enforceFocus:!1},Object(o.createElement)(el,null),Object(o.createElement)(y.n,null,t.map((function(t){return Object(o.createElement)(y.p,{key:t[1],icon:Ol(t[2]),text:t[1],onClick:(n=t[0],function(t){e.controller.run("operation",Object(m.a)(Object(m.a)({},e),{},{opType:ri,layoutDir:n}))})});var n})))))}function Rd(){return{renderToolbar:function(e){return Object(o.createElement)(wd,Object.assign({},e))},renderToolbarItems:function(e){var t=e.controller.run("customizeToolbar",e);return t.sort((function(e,t){return e.order-t.order})),t.map((function(t){return Object(o.createElement)(t.element,Object(m.a)(Object(m.a)({},e),{},{key:t.order.toString()}))}))},customizeToolbar:function(e){return[{order:100,element:Kd}]}}}var Dd=b()("plugin:utils");function Ld(){var e=new Map,t=new Map;return{addTempValueChangeListener:function(e){var n=e.key,o=e.listener;t.has(n)||t.set(n,[]),t.get(n).push(o)},removeTempValueChangeListener:function(e){var n=e.key,o=e.listener;t.has(n)&&(t[n]=t.get(n).filter((function(e){return e!==o})))},getTempValue:function(t){var n=t.key;return Dd("getTempValue",n),e.get(n)},setTempValue:function(n){var o=n.key,r=n.value;if(Dd("setTempValue",o),e.set(o,r),t.has(o)){var c,i=t.get(o),a=Object(O.a)(i);try{for(a.s();!(c=a.n()).done;){(0,c.value)(r)}}catch(l){a.e(l)}finally{a.f()}}},deleteTempValue:function(t){var n=t.key;Dd("deleteTempValue",n);var o=e.get(n);return e.delete(n),o}}}function Id(){return[id(),Ld(),ep(),Sd(),Rd(),ip()]}var _d=b()("node:text-editor"),Md=d.default.div(ja||(ja=Object(Ra.a)(["\n  padding: 6px;\n  background-color: ",";\n  cursor: ",";\n  min-width: 50px;\n"])),(function(e){return e.readOnly?null:"white"}),(function(e){return e.readOnly?"pointer":"text"})),Ad=function(e){Object(u.a)(n,e);var t=Object(s.a)(n);function n(e){var o;return Object(a.a)(this,n),(o=t.call(this,e)).state={content:null},o.onMouseDown=function(e){e.stopPropagation()},o.onMouseMove=function(e){},o.onKeyDown=function(e){},o._handleClick=function(e){!o.root.contains(e.target)&&o.onClickOutSide(e)},o.rootRef=function(e){return function(t){e(t),o.root=t}},o.initState(),o}return Object(l.a)(n,[{key:"onChange",value:function(e){var t=e.value;_d("onChange",t),this.setState({content:t})}},{key:"componentDidMount",value:function(){this.props.readOnly||document.addEventListener("click",this._handleClick)}},{key:"componentWillUnmount",value:function(){this.props.readOnly||document.removeEventListener("click",this._handleClick)}},{key:"onClickOutSide",value:function(e){}},{key:"getCustomizeProps",value:function(){return null}},{key:"getContent",value:function(){var e=this.getCustomizeProps().block.data;return null==e?null:("string"===typeof e&&(e=Ne.a.deserialize(e)),e)}},{key:"initState",value:function(){var e=this.getContent();this.state={content:e}}},{key:"render",value:function(){var e=this.props,t=e.topicKey,n=e.saveRef,r=this.getCustomizeProps(),c=r.readOnly,i=r.getRefKeyFunc,a=r.placeholder,l=r.style;_d(c);var u=i(t),s=c?this.getContent():this.state.content,p=this.onMouseDown,d=this.onMouseMove,f=this.onKeyDown,b={value:s,readOnly:c,onChange:this.onChange.bind(this),placeholder:a,style:l},y={key:u,readOnly:c,ref:this.rootRef(n(u)),onMouseDown:p,onMouseMove:d,onKeyDown:f};return Object(o.createElement)(Md,Object.assign({},y),Object(o.createElement)(Fe.Editor,Object.assign({},b,{autoFocus:!0})))}}]),n}(o.PureComponent),Nd=b()("node:topic-content-editor");function Fd(e){return"content-editor-".concat(e)}var Pd=function(e){Object(u.a)(n,e);var t=Object(s.a)(n);function n(e){var o;return Object(a.a)(this,n),(o=t.call(this,e)).onKeyDown=function(e){e.nativeEvent.ctrlKey&&"Enter"===e.nativeEvent.code&&o.save()},o}return Object(l.a)(n,[{key:"getCustomizeProps",value:function(){var e=this.props,t=e.model,n=e.topicKey,o=e.readOnly;return{block:t.getTopic(n).getBlock(Kc).block,readOnly:o,getRefKeyFunc:Fd,placeholder:"new",style:{whiteSpace:"pre"}}}},{key:"onClickOutSide",value:function(e){Nd("onClickOutSide"),this.save()}},{key:"save",value:function(){var e=this.props,t=e.model,n=e.topicKey;t.editingContentKey!==n||this.props.controller.run("operation",Object(m.a)(Object(m.a)({},this.props),{},{opType:$c,blockType:Kc,data:this.state.content,focusMode:Dc}))}}]),n}(Ad),Bd=b()("node:topic-desc-editor");function zd(e){return"desc-editor-".concat(e)}var Vd=function(e){Object(u.a)(n,e);var t=Object(s.a)(n);function n(e){var o;return Object(a.a)(this,n),o=t.call(this,e),Bd("constructor"),o}return Object(l.a)(n,[{key:"initState",value:function(){Object(Ea.a)(Object(xa.a)(n.prototype),"initState",this).call(this);var e=this.props,t=e.controller,o=e.topicKey,r="topic-desc-data-".concat(o),c=this.state.content;t.run("setTempValue",{key:r,value:c})}},{key:"getCustomizeProps",value:function(){var e=this.props,t=e.model,n=e.topicKey;return{block:t.getTopic(n).getBlock(Rc).block,readOnly:t.editingDescKey!==n,getRefKeyFunc:zd,placeholder:"write topic notes here"}}},{key:"onChange",value:function(e){var t=e.value;Bd("onChange");var n=this.props,o=n.controller,r=n.topicKey;if(!(n.model.editingDescKey!==r)){var c="topic-desc-data-".concat(r);o.run("setTempValue",{key:c,value:t}),this.setState({content:t})}}}]),n}(Ad);var Hd=b()("plugin:StylePlugin");function Gd(){var e=new Map,t=0;return{getTopicStyle:function(e){var t=e.controller;return{contentStyle:t.run("getTopicContentStyle",e),linkStyle:t.run("getLinkStyle",e),subLinkStyle:t.run("getSubLinkStyle",e)}},getTopicContentStyle:function(e){var t=e.topicKey,n=e.model,o=e.controller;Hd("getTopicContentStyle:",t,n);var r,c=n.getTopicVisualLevel(t),i=n.config.theme;if(r=c===Cc?i.rootTopic:c===wc?i.primaryTopic:i.normalTopic,r=Object(m.a)(Object(m.a)({},i.contentStyle),r.contentStyle),i.randomColor){var a=o.run("getRandomColor",e);r=Object(m.a)(Object(m.a)({},r),{},{background:a,borderColor:a,subLinkStyle:Object(m.a)(Object(m.a)({},r.subLinkStyle),{},{lineColor:a})})}var l=n.getTopic(t);if(!l.style)return r;var u=JSON.parse(l.style);return Object(m.a)(Object(m.a)({},r),u.contentStyle)},getLinkStyle:function(e){var t=e.topicKey,n=e.model,o=e.controller;Hd("getLinkStyle",t);var r,c=n.getTopicVisualLevel(t),i=n.config.theme,a=i.linkStyle;r=c===Cc?i.rootTopic.linkStyle:c===wc?i.primaryTopic.linkStyle:i.normalTopic.linkStyle,a=Object(m.a)(Object(m.a)({},a),r);var l=n.getTopic(t);if(null!=l.parentKey){var u=o.run("getSubLinkStyle",Object(m.a)(Object(m.a)({},e),{},{topicKey:l.parentKey}));a=Object(m.a)(Object(m.a)({},a),u)}if(!l.style)return a;var s=JSON.parse(l.style);return Object(m.a)(Object(m.a)({},a),s.linkStyle)},getSubLinkStyle:function(e){var t=e.topicKey,n=e.model,o=e.controller;Hd("getLinkStyle",t);var r,c=n.getTopicVisualLevel(t),i=n.config.theme,a=i.linkStyle;r=c===Cc?i.rootTopic.subLinkStyle:c===wc?i.primaryTopic.subLinkStyle:i.normalTopic.subLinkStyle,a=Object(m.a)(Object(m.a)({},a),r);var l=n.getTopic(t);if(i.randomColor){var u=o.run("getRandomColor",e);Hd(u),a=Object(m.a)(Object(m.a)({},a),{},{lineColor:u})}if(!l.style)return a;var s=JSON.parse(l.style);return Object(m.a)(Object(m.a)({},a),s.subLinkStyle)},setTopicContentStyle:function(e){var t=e.topicKey,n=e.controller,o=e.style,r=e.model.getTopic(t).style,c=r?JSON.parse(r):{},i=Object(m.a)(Object(m.a)({},c),{},{contentStyle:Object(m.a)(Object(m.a)({},c.contentStyle),o)});if(!Object(ct.isEqual)(c,i)){var a=JSON.stringify(i);n.run("operation",Object(m.a)(Object(m.a)({},e),{},{opType:Yc,style:a}))}},setLinkStyle:function(e){var t=e.topicKey,n=e.controller,o=e.linkStyle,r=e.model.getTopic(t).style,c=r?JSON.parse(r):{},i=Object(m.a)(Object(m.a)({},c),{},{linkStyle:Object(m.a)(Object(m.a)({},c.linkStyle),o)});if(!Object(ct.isEqual)(c,i)){var a=JSON.stringify(i);n.run("operation",Object(m.a)(Object(m.a)({},e),{},{opType:Yc,style:a}))}},setSubLinkStyle:function(e){var t=e.topicKey,n=e.controller,o=e.subLinkStyle,r=e.model.getTopic(t).style,c=r?JSON.parse(r):{},i=Object(m.a)(Object(m.a)({},c),{},{subLinkStyle:Object(m.a)(Object(m.a)({},c.subLinkStyle),o)});if(!Object(ct.isEqual)(c,i)){var a=JSON.stringify(i);n.run("operation",Object(m.a)(Object(m.a)({},e),{},{opType:Yc,style:a}))}},getTopicThemeStyle:function(e){var t=e.topicKey,n=e.model,o=n.getTopicVisualLevel(t),r=n.config.theme;return o===Cc?r.rootTopic:o===wc?r.primaryTopic:r.normalTopic},getRandomColor:function(n){var o=n.topicKey;if(e.has(o))return e.get(o);var r=["#00CC99","#FFEE88","#A167A5","#E5F993","#F5C396","#DB995A","#83BCFF","#ED7B84","#739E82","#D3BCC0","#FFA0FD","#EFD3D7","#C6878F"],c=r[++t%r.length];return e.set(o,c),Hd("getRandomColor",o,c),c}}}function Wd(){return[Id(),{getPartTopics:function(e){var t=e.layout,n=e.model,o=e.topicKey,r=n.getTopic(o),c=r.subKeys.size,i=r.subKeys.toArray();switch(t){case jc.LEFT_TO_RIGHT:return{R:i};case jc.RIGHT_TO_LEFT:return{L:i};case jc.LEFT_AND_RIGHT:return{L:i.slice(Math.ceil(c/2),c),R:i.slice(0,Math.ceil(c/2))};case jc.TOP_TO_BOTTOM:return{B:i}}},createSubTopics:function(e){var t=e.model,n=e.topicKey,o=e.controller,r=e.topics,c=e.saveRef,i=t.getTopic(n);if(0===r.size||i.collapse)return null;var a=[];return r.forEach((function(t){var n=Object(m.a)(Object(m.a)({},e),{},{topicKey:t,key:t,ref:c(kl(t))});a.push(o.run("renderTopicWidget",n))})),{subTopics:a}},layout:function(e){var t=e.getRef,n=e.model,o=t(xl(n.editorRootTopicKey)),r=t(Ll),c=t(Il);o&&o.layout(),r&&r.layout(),c&&c.layout(),function e(o){if(o.key!==n.editorRootTopicKey){var r=t(kl(o.key));r&&r.layoutLinks()}if(!o.collapse){var c,i=Object(O.a)(o.subKeys);try{for(i.s();!(c=i.n()).done;){var a=c.value;e(n.getTopic(a))}}catch(l){i.e(l)}finally{i.f()}}}(n.getTopic(n.editorRootTopicKey))},getRelativeRect:function(e){var t=e.element,n=e.controller,o=e.getRef,r=n.run("getZoomFactor",e);return xs(t,o(Rl).bigView,r)},getRelativeRectFromViewPort:function(e){var t=e.element,n=e.controller,o=e.getRef,r=n.run("getZoomFactor",e);return xs(t,o(Rl).viewBox,r)},getRelativeVectorFromViewPort:function(e){return Ss(e.element,(0,e.getRef)(Rl).viewBox)},addZoomFactorChangeEventListener:function(e){e.controller.run("addTempValueChangeListener",Object(m.a)({key:"ZoomFactor"},e))},removeZoomFactorChangeEventListener:function(e){e.controller.run("removeTempValueChangeListener",Object(m.a)({key:"ZoomFactor"},e))},setZoomFactor:function(e){var t=e.controller,n=e.zoomFactor;return t.run("setTempValue",{key:"ZoomFactor",value:n})},getZoomFactor:function(e){return e.controller.run("getTempValue",{key:"ZoomFactor"})||1},moveTopicToCenter:function(e){var t=e.getRef,n=e.topicKey,o=e.model,r=e.moveDir,c=void 0===r?Zs:r;if(o.editorRootTopicKey!==n&&pi(o,n,o.editorRootTopicKey)!==Nc)throw new Error("moveTopicToCenter error: topicKey ".concat(n," is not the DESCENDANT of editor root topic"));var i=t(El(n)),a=t(Rl),l=a.viewBox;if(!i||!l)throw new Error("moveTopicToCenter error: topic or viewBox is null");var u=Ss(i,l);if(c===Us)a.setViewBoxScrollDelta(u[0],u[1]);else if(c===Zs){var s=l.getBoundingClientRect(),p=i.getBoundingClientRect(),d=(s.width-p.width)/2;a.setViewBoxScrollDelta(u[0]+d-200,u[1])}},focusTopicAndMoveToCenter:function(e){var t=e.controller,n=e.topicKey;t.run("operation",Object(m.a)(Object(m.a)({},e),{},{opArray:[{opType:Zc,topicKey:n,focusMode:Dc},{opType:Hc,topicKey:n}],allowUndo:!1,callback:function(o){return function(){t.run("moveTopicToCenter",Object(m.a)(Object(m.a)({},e),{},{model:o,topicKey:n}))}}}))}},Xs(),Gd(),Ps(),Js(),{getValue:function(e,t){var n=e.propKey,o=e.controller,r=e.diagramState;switch(n){case Ml:return 3;case Al:case Bl:return o.run("isOperationEnabled",e);case Nl:return o.run("getTopicTitle",e);case Fl:return r.dragDrop;case Pl:return r.rightTopPanel}return t()}},{getTopicTitle:function(e){var t=e.model,n=e.controller,o=e.topicKey,r=e.maxLength,c=t.getTopic(o).getBlock(Kc).block,i=n.run("serializeBlockData",Object(m.a)(Object(m.a)({},e),{},{block:c}));return null!=r&&(i=i.length>r?i.substr(0,r)+"...":i),i},renderTopicContentEditor:function(e){return Object(o.createElement)(Pd,Object.assign({},e))},renderTopicDescEditor:function(e){return Object(o.createElement)(Vd,Object.assign({},e))},isBlockEmpty:function(e,t){var n=e.block,o=e.controller;return n.type===Kc||n.type===Rc?null==n.data||""===o.run("serializeBlockData",e):t()},serializeBlockData:function(e,t){var n=e.block;return n.type===Kc||n.type===Rc?"string"===typeof n.data?n.data:Ne.a.serialize(n.data):t()}},{createNewModel:function(e){return hi.createEmpty()}},{getThemeOfTopic:function(e){var t=e.model.config.theme,n=t.contentStyle,o=t.rootTopic,r=t.primaryTopic,c=t.normalTopic;return{rootTopic:Object(m.a)(Object(m.a)({},o),{},{contentStyle:Object(m.a)(Object(m.a)({},n),o.contentStyle)}),primaryTopic:Object(m.a)(Object(m.a)({},r),{},{contentStyle:Object(m.a)(Object(m.a)({},n),r.contentStyle)}),normalTopic:Object(m.a)(Object(m.a)({},c),{},{contentStyle:Object(m.a)(Object(m.a)({},n),c.contentStyle)})}}},Ys()]}b()("node:Diagram"),o.Component;var Ud=n(293),Zd=n.n(Ud),Jd=n(166),Yd=n.n(Jd),qd=function(e,t){return(qd=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(e,t)};function Xd(e,t){function n(){this.constructor=e}qd(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}var $d=function(){return($d=Object.assign||function(e){for(var t,n=1,o=arguments.length;n<o;n++)for(var r in t=arguments[n])Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r]);return e}).apply(this,arguments)};var Qd,ef=b()("node:topic-content-editor"),tf=d.default.div(Qd||(Qd=function(e,t){return Object.defineProperty?Object.defineProperty(e,"raw",{value:t}):e.raw=t,e}(["\n  ",";\n"],["\n  ",";\n"])),(function(e){return!e.readOnly&&"\n    // padding: 75px\n    // min-width: 150px\n    // min-height: 150px\n  "})),nf=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Xd(t,e),t.prototype.initState=function(){e.prototype.initState.call(this);var t=this.props,n=t.controller,o="topic-desc-data-"+t.topicKey,r=this.state.content;n.run("setTempValue",{key:o,value:r})},t.prototype.getCustomizeProps=function(){var e=this.props,t=e.model,n=e.topicKey;return{block:t.getTopic(n).getBlock(Rc).block,readOnly:t.editingDescKey!==n,getRefKeyFunc:jl,placeholder:"write topic notes here"}},t.prototype.onChange=function(e){var t=this.props,n=t.controller,o="topic-desc-data-"+t.topicKey;n.run("setTempValue",{key:o,value:e}),this.setState({content:e})},t}(function(e){function t(t){var n=e.call(this,t)||this;return n.onMouseDown=function(e){e.stopPropagation()},n.onMouseMove=function(e){e.stopPropagation()},n.rootRef=function(e){return function(t){e(t),n.root=t}},n._handleClick=function(e){!n.root.contains(e.target)&&n.onClickOutSide(e)},n.initState(),n}return Xd(t,e),t.prototype.initState=function(){this.state={content:this.getContent()}},t.prototype.getContent=function(){return this.getCustomizeProps().block.data},t.prototype.onChange=function(e){this.setState({content:e})},t.prototype.getCustomizeProps=function(){return null},t.prototype.componentDidMount=function(){document.addEventListener("click",this._handleClick)},t.prototype.componentWillUnmount=function(){document.removeEventListener("click",this._handleClick)},t.prototype.onClickOutSide=function(e){},t.prototype.render=function(){var e=this.props,t=e.topicKey,n=e.saveRef,r=this.getCustomizeProps(),c=r.readOnly,i=r.getRefKeyFunc,a=r.placeholder;ef("readOnly:",c);var l=c?this.getContent():this.state.content;if(null==l)return null;var u=i(t),s=this.onMouseDown,p=this.onMouseMove,d={editorValue:l,readOnly:c,onChange:this.onChange.bind(this),placeholder:a},f={key:u,ref:this.rootRef(n(u)),readOnly:c,onMouseDown:s,onMouseMove:p};return Object(o.createElement)(tf,$d({},f),Object(o.createElement)(Zd.a,$d({},d)))},t}(Aa)),of=new Yd.a;var rf=function(){return{renderTopicDescEditor:function(e){return Object(o.createElement)(nf,$d({},e))},isBlockEmpty:function(e,t){var n=e.block,o=e.controller;return n.type===Kc||n.type===Rc?null==n.data||""===o.run("serializeBlockData",e):t()},serializeBlockData:function(e,t){var n=e.block;return n.type===Rc?"string"===typeof n.data?n.data:of.serialize(n.data):t()}}};function cf(e){return!0===(null!=(t=e)&&"object"===typeof t&&!1===Array.isArray(t))&&"[object Object]"===Object.prototype.toString.call(e);var t}var af,lf=function(e){var t,n;return!1!==cf(e)&&("function"===typeof(t=e.constructor)&&(!1!==cf(n=t.prototype)&&!1!==n.hasOwnProperty("isPrototypeOf")))};!function(e){e[e.LEFT_TO_RIGHT=0]="LEFT_TO_RIGHT",e[e.RIGHT_TO_LEFT=1]="RIGHT_TO_LEFT",e[e.LEFT_AND_RIGHT=2]="LEFT_AND_RIGHT",e[e.TOP_TO_BOTTOM=3]="TOP_TO_BOTTOM"}(af||(af={}));var uf="CONTENT",sf="NORMAL",pf="EDITING_CONTENT",df="EDITING_DESC",ff=function(e){Object(u.a)(n,e);var t=Object(s.a)(n);function n(){return Object(a.a)(this,n),t.apply(this,arguments)}return Object(l.a)(n,[{key:"data",get:function(){return this.get("data")}},{key:"type",get:function(){return this.get("type")}}],[{key:"create",value:function(e){return new n(e)}},{key:"createList",value:function(e){if(T.List.isList(e)||Array.isArray(e))return Object(T.List)(e.map(n.create));throw new Error("Block.createList only accepts Array or List, but you passed it: ".concat(e))}}]),n}(Object(T.Record)({type:null,key:null,data:null}));var bf={readOnly:!1,allowUndo:!0,layoutDir:af.LEFT_AND_RIGHT,theme:{name:"default",randomColor:!0,background:"rgb(57,60,65)",highlightColor:"#50C9CE",marginH:60,marginV:20,contentStyle:{lineHeight:"1.5"},linkStyle:{lineRadius:5,lineType:"curve",lineWidth:"3px"},rootTopic:{contentStyle:{fontSize:"34px",borderRadius:"35px",padding:"16px 18px 16px 18px"},subLinkStyle:{lineType:"curve",lineWidth:"3px",lineColor:"rgb(113, 203, 45)"}},primaryTopic:{contentStyle:{borderWidth:"1px",borderStyle:"solid",borderRadius:"20px",fontSize:"17px",padding:"10px 15px 10px 15px"},subLinkStyle:{lineType:"curve",lineWidth:"3px",lineColor:"rgb(113, 203, 45)"}},normalTopic:{contentStyle:{border:"1px solid #e8eaec",borderRadius:"20px",fontSize:"17px",padding:"4px 10px"},subLinkStyle:{lineType:"curve",lineWidth:"3px",lineColor:"white"}}}},yf=function(e){Object(u.a)(n,e);var t=Object(s.a)(n);function n(){return Object(a.a)(this,n),t.apply(this,arguments)}return Object(l.a)(n,[{key:"layoutDir",get:function(){return this.get("layoutDir")}},{key:"readOnly",get:function(){return this.get("readOnly")}},{key:"allowUndo",get:function(){return this.get("allowUndo")}},{key:"theme",get:function(){return this.get("theme")}}],[{key:"fromJSON",value:function(e){return new n(e)}}]),n}(Object(T.Record)(bf));function hf(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,(function(e){var t=16*Math.random()|0;return("x"===e?t:3&t|8).toString(16)}))}var gf=function(e){Object(u.a)(n,e);var t=Object(s.a)(n);function n(){return Object(a.a)(this,n),t.apply(this,arguments)}return Object(l.a)(n,[{key:"key",get:function(){return this.get("key")}},{key:"parentKey",get:function(){return this.get("parentKey")}},{key:"collapse",get:function(){return this.get("collapse")}},{key:"subKeys",get:function(){return this.get("subKeys")}},{key:"blocks",get:function(){return this.get("blocks")}},{key:"relations",get:function(){return this.get("relations")}},{key:"style",get:function(){return this.get("style")}},{key:"getBlock",value:function(e){var t=this.blocks.findIndex((function(t){return t.type===e}));return-1===t?{index:t,block:null}:{index:t,block:this.blocks.get(t)}}}],[{key:"fromJSON",value:function(e){var t=e.key,o=e.parentKey,r=void 0===o?null:o,c=e.blocks,i=e.subKeys,a=void 0===i?[]:i,l=e.collapse;return new n({key:t,parentKey:r,collapse:void 0!==l&&l,subKeys:Object(T.List)(a),blocks:ff.createList(c)})}},{key:"create",value:function(e){var t=e.key,o=e.parentKey,r=void 0===o?null:o,c=e.content,i=void 0===c?"":c,a=e.subKeys,l=void 0===a?[]:a,u=e.collapse,s=void 0!==u&&u,p=ff.create({type:uf,data:i,key:null});return new n({key:t,parentKey:r,blocks:Object(T.List)([p]),subKeys:Object(T.List)(l),collapse:s})}}]),n}(Object(T.Record)({key:null,parentKey:null,collapse:!1,subKeys:null,blocks:null,relations:null,style:null}));b()("modifier");var mf={topics:Object(T.Map)(),extData:Object(T.Map)(),config:new yf,rootTopicKey:null,editorRootTopicKey:null,focusKey:null,focusMode:null,formatVersion:null,zoomFactor:1},Of=function(e){Object(u.a)(n,e);var t=Object(s.a)(n);function n(){return Object(a.a)(this,n),t.apply(this,arguments)}return Object(l.a)(n,[{key:"toJS",value:function(){return{rootTopicKey:this.rootTopicKey,topics:Object.values(this.topics.toJS()),config:this.config,extData:this.extData,zoomFactor:this.zoomFactor}}},{key:"extData",get:function(){return this.get("extData")}},{key:"topics",get:function(){return this.get("topics")}},{key:"config",get:function(){return this.get("config")}},{key:"formatVersion",get:function(){return this.get("formatVersion")}},{key:"rootTopicKey",get:function(){return this.get("rootTopicKey")}},{key:"editorRootTopicKey",get:function(){return this.get("editorRootTopicKey")}},{key:"focusKey",get:function(){return this.get("focusKey")}},{key:"focusMode",get:function(){return this.get("focusMode")}},{key:"editingContentKey",get:function(){return this.focusMode===pf?this.focusKey:null}},{key:"editingDescKey",get:function(){return this.focusMode===df?this.focusKey:null}},{key:"getTopic",value:function(e){return this.topics.get(e)}},{key:"getExtDataItem",value:function(e,t){return this.extData.get(e)||new t}},{key:"getParentTopic",value:function(e){var t=this.getTopic(e);return t.parentKey?this.getTopic(t.parentKey):null}},{key:"getTopicVisualLevel",value:function(e){for(var t=this.getTopic(e),n=0;t&&t.key!==this.editorRootTopicKey;)n++,t=this.getParentTopic(t.key);return n}},{key:"rootTopic",get:function(){return this.getTopic(this.rootTopicKey)}},{key:"zoomFactor",get:function(){return this.get("zoomFactor")}}],[{key:"isModel",value:function(e){return e instanceof n}},{key:"create",value:function(){var e,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;if(null==t)return n.createEmpty();if(n.isModel(t)&&(e=t),lf(t)&&(e=n.fromJSON(t)),e)return null==e.focusKey&&(e=e.set("focusKey",e.rootTopicKey)),null==e.focusMode&&(e=e.set("focusMode",sf)),e;throw new Error("`Value.create` only accepts objects or values, but you passed it: ".concat(t))}},{key:"createEmpty",value:function(){var e=new n,t=gf.create({key:hf(),content:"RootTopic"});return e.update("topics",(function(e){return e.set(t.key,t)})).set("rootTopicKey",t.key).set("editorRootTopicKey",t.key).set("focusKey",t.key).set("focusMode",sf)}},{key:"fromJSON",value:function(e){var t=new n,o=e.topics,r=void 0===o?[]:o,c=e.config,i=void 0===c?{}:c,a=e.rootTopicKey,l=e.editorRootTopicKey;return void 0===l&&(l=a),t=(t=t.merge({rootTopicKey:a,editorRootTopicKey:l})).withMutations((function(e){r.forEach((function(t){e.update("topics",(function(e){return e.set(t.key,gf.fromJSON(t))}))})),e.set("config",yf.fromJSON(i))}))}}]),n}(Object(T.Record)(mf));b()("core:controller");var vf=function(){return(vf=Object.assign||function(e){for(var t,n=1,o=arguments.length;n<o;n++)for(var r in t=arguments[n])Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r]);return e}).apply(this,arguments)},Tf=b()("plugin:json-serializer");function jf(e){return!0===(null!=(t=e)&&"object"===typeof t&&!1===Array.isArray(t))&&"[object Object]"===Object.prototype.toString.call(e);var t}var kf=function(e){var t,n;return!1!==jf(e)&&("function"===typeof(t=e.constructor)&&(!1!==jf(n=t.prototype)&&!1!==n.hasOwnProperty("isPrototypeOf")))};var Ef;!function(e){e[e.LEFT_TO_RIGHT=0]="LEFT_TO_RIGHT",e[e.RIGHT_TO_LEFT=1]="RIGHT_TO_LEFT",e[e.LEFT_AND_RIGHT=2]="LEFT_AND_RIGHT",e[e.TOP_TO_BOTTOM=3]="TOP_TO_BOTTOM"}(Ef||(Ef={}));var xf="CONTENT",Sf="NORMAL",Cf="EDITING_CONTENT",wf="EDITING_DESC",Kf="ANCESTOR",Rf="DESCENDANT",Df="SIBLING",Lf="NONE",If=function(e){Object(u.a)(n,e);var t=Object(s.a)(n);function n(){return Object(a.a)(this,n),t.apply(this,arguments)}return Object(l.a)(n,[{key:"data",get:function(){return this.get("data")}},{key:"type",get:function(){return this.get("type")}}],[{key:"create",value:function(e){return new n(e)}},{key:"createList",value:function(e){if(T.List.isList(e)||Array.isArray(e))return Object(T.List)(e.map(n.create));throw new Error("Block.createList only accepts Array or List, but you passed it: ".concat(e))}}]),n}(Object(T.Record)({type:null,key:null,data:null}));var _f={name:"default",randomColor:!0,background:"rgb(57,60,65)",highlightColor:"#50C9CE",marginH:60,marginV:20,contentStyle:{lineHeight:"1.5"},linkStyle:{lineRadius:5,lineType:"curve",lineWidth:"3px"},rootTopic:{contentStyle:{fontSize:"34px",borderRadius:"35px",padding:"16px 18px 16px 18px"},subLinkStyle:{lineType:"curve",lineWidth:"3px",lineColor:"rgb(113, 203, 45)"}},primaryTopic:{contentStyle:{borderWidth:"1px",borderStyle:"solid",borderRadius:"20px",fontSize:"17px",padding:"10px 15px 10px 15px"},subLinkStyle:{lineType:"curve",lineWidth:"3px",lineColor:"rgb(113, 203, 45)"}},normalTopic:{contentStyle:{border:"1px solid #e8eaec",borderRadius:"20px",fontSize:"17px",padding:"4px 10px"},subLinkStyle:{lineType:"curve",lineWidth:"3px",lineColor:"white"}}},Mf={readOnly:!1,allowUndo:!0,layoutDir:Ef.LEFT_AND_RIGHT,theme:_f},Af=function(e){Object(u.a)(n,e);var t=Object(s.a)(n);function n(){return Object(a.a)(this,n),t.apply(this,arguments)}return Object(l.a)(n,[{key:"layoutDir",get:function(){return this.get("layoutDir")}},{key:"readOnly",get:function(){return this.get("readOnly")}},{key:"allowUndo",get:function(){return this.get("allowUndo")}},{key:"theme",get:function(){return this.get("theme")}}],[{key:"fromJSON",value:function(e){return new n(e)}}]),n}(Object(T.Record)(Mf));function Nf(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,(function(e){var t=16*Math.random()|0;return("x"===e?t:3&t|8).toString(16)}))}var Ff=function(e){Object(u.a)(n,e);var t=Object(s.a)(n);function n(){return Object(a.a)(this,n),t.apply(this,arguments)}return Object(l.a)(n,[{key:"key",get:function(){return this.get("key")}},{key:"parentKey",get:function(){return this.get("parentKey")}},{key:"collapse",get:function(){return this.get("collapse")}},{key:"subKeys",get:function(){return this.get("subKeys")}},{key:"blocks",get:function(){return this.get("blocks")}},{key:"relations",get:function(){return this.get("relations")}},{key:"style",get:function(){return this.get("style")}},{key:"getBlock",value:function(e){var t=this.blocks.findIndex((function(t){return t.type===e}));return-1===t?{index:t,block:null}:{index:t,block:this.blocks.get(t)}}}],[{key:"fromJSON",value:function(e){var t=e.key,o=e.parentKey,r=void 0===o?null:o,c=e.blocks,i=e.subKeys,a=void 0===i?[]:i,l=e.collapse;return new n({key:t,parentKey:r,collapse:void 0!==l&&l,subKeys:Object(T.List)(a),blocks:If.createList(c)})}},{key:"create",value:function(e){var t=e.key,o=e.parentKey,r=void 0===o?null:o,c=e.content,i=void 0===c?"":c,a=e.subKeys,l=void 0===a?[]:a,u=e.collapse,s=void 0!==u&&u,p=If.create({type:xf,data:i,key:null});return new n({key:t,parentKey:r,blocks:Object(T.List)([p]),subKeys:Object(T.List)(l),collapse:s})}}]),n}(Object(T.Record)({key:null,parentKey:null,collapse:!1,subKeys:null,blocks:null,relations:null,style:null}));function Pf(e,t){var n=e.getTopic(t),o=[];if(n.subKeys.size>0){var r,c=n.subKeys.toArray();(r=o).push.apply(r,Object(v.a)(c)),o=c.reduce((function(t,n){return t.push.apply(t,Object(v.a)(Pf(e,n))),t}),o)}return o}var Bf=b()("modifier");function zf(e){var t=e.model,n=e.topicKey,o=e.focusMode;return Bf("focus topic"),n!==t.focusKey&&(t=t.set("focusKey",n)),o!==t.focusMode&&(t=t.set("focusMode",o)),t}var Vf={addChild:function(e){var t=e.model,n=e.topicKey;Bf("addChild:",n);var o=t.getTopic(n);if(o){var r=Ff.create({key:Nf(),parentKey:o.key});return o=o.set("collapse",!1).update("subKeys",(function(e){return e.push(r.key)})),zf({model:t=t.update("topics",(function(e){return e.set(n,o).set(r.key,r)})),topicKey:r.key,focusMode:Cf})}return t},addSibling:function(e){var t=e.model,n=e.topicKey;if(n===t.rootTopicKey)return t;var o=t.getTopic(n);if(o){var r=t.getTopic(o.parentKey),c=r.subKeys.indexOf(n),i=Ff.create({key:Nf(),parentKey:r.key});return zf({model:t=t.update("topics",(function(e){return e.set(i.key,i)})).updateIn(["topics",r.key,"subKeys"],(function(e){return e.insert(c+1,i.key)})),topicKey:i.key,focusMode:Cf})}return t},toggleCollapse:function(e){var t=e.model,n=e.topicKey,o=t.getTopic(n);return o&&0!==o.subKeys.size&&(o=o.merge({collapse:!o.collapse}),t=t.updateIn(["topics",o.key,"collapse"],(function(e){return!e}))),t=zf({model:t,topicKey:n,focusMode:Sf})},collapseAll:function(e){var t=e.model,n=Pf(t,t.editorRootTopicKey);return Bf(t),t=zf({model:t=t.withMutations((function(e){n.forEach((function(t){e.setIn(["topics",t,"collapse"],!0)}))})),topicKey:t.editorRootTopicKey,focusMode:Sf})},expandAll:function(e){var t=e.model,n=Pf(t,t.editorRootTopicKey);return Bf(t),t=t.withMutations((function(e){n.forEach((function(t){e.setIn(["topics",t,"collapse"],!1)}))})),Bf(t),t},expandTo:function(e){var t=e.model,n=e.topicKey,o=function(e,t){for(var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],o=[t],r=e.getTopic(t);r.parentKey;)n?o.push(r.parentKey):o.unshift(r.parentKey),r=e.getParentTopic(r.key);return o}(t,n).filter((function(e){return e!==n}));return function(e,t,n){var o=e.getTopic(t),r=e.getTopic(n);if(o&&r){if(o.parentKey==r.parentKey)return Df;for(var c=o;c.parentKey;){if(c.parentKey===r.key)return Rf;c=e.getParentTopic(c.key)}for(c=r;c.parentKey;){if(c.parentKey===o.key)return Kf;c=e.getParentTopic(c.key)}}return Lf}(t=t.withMutations((function(e){o.forEach((function(t){e.setIn(["topics",t,"collapse"],!1)}))})),n,t.editorRootTopicKey)!==Rf&&(t=t.set("editorRootTopicKey",t.rootTopicKey)),t},focusTopic:zf,setFocusMode:function(e){var t=e.model,n=e.focusMode;return Bf("setFocusMode"),n!==t.focusMode&&(t=t.set("focusMode",n)),t},deleteTopic:function(e){var t=e.model,n=e.topicKey;if(n===t.editorRootTopicKey)return t;var o=t.getTopic(n);return o&&(t=t.withMutations((function(e){e.update("topics",(function(e){e=e.delete(n);var o=Pf(t,n);return e=e.withMutations((function(e){o.forEach((function(t){e.delete(t)}))}))})),e.updateIn(["topics",o.parentKey,"subKeys"],(function(e){return e.delete(e.indexOf(n))})),e.focusKey===n&&e.set("focusKey",null).set("focusMode",null)}))),t},setBlockData:function(e){var t=e.model,n=e.topicKey,o=e.blockType,r=e.focusMode,c=e.data,i=t.getTopic(n);if(i){var a=i.getBlock(o),l=a.index,u=a.block;-1===l?t=t.updateIn(["topics",n,"blocks"],(function(e){return e.push(If.create({type:o,data:c}))})):u.data!==c&&(t=t.updateIn(["topics",n,"blocks",l,"data"],(function(e){return c}))),r&&(t=zf({model:t,topicKey:n,focusMode:r}))}return t},deleteBlock:function(e){var t=e.model,n=e.topicKey,o=e.blockType,r=t.getTopic(n);if(r){var c=r.getBlock(o).index;-1!==c&&(t=t.updateIn(["topics",n,"blocks"],(function(e){return e.delete(c)}))),t=zf({model:t,topicKey:null,focusMode:null})}return t},setStyle:function(e){var t=e.model,n=e.topicKey,o=e.style,r=t.getTopic(n);return r&&o!==r.style&&(t=t.updateIn(["topics",n,"style"],(function(e){return o}))),t},clearAllCustomStyle:function(e){var t=e.model;return t=t.withMutations((function(e){e.topics.keySeq().forEach((function(t){e.setIn(["topics",t,"style"],null)}))}))},setTheme:function(e){var t=e.model,n=e.theme;return t=t.setIn(["config","theme"],n)},setLayoutDir:function(e){var t=e.model,n=e.layoutDir;return t.config.layoutDir===n?t:t=t.setIn(["config","layoutDir"],n)},setEditorRootTopicKey:function(e){var t=e.model,n=e.topicKey;return t.editorRootTopicKey!==n&&(t=t.set("editorRootTopicKey",n)),t.getTopic(n).collapse&&(t=t.setIn(["topics",n,"collapse"],!1)),t},setZoomFactor:function(e){var t=e.model,n=e.zoomFactor;return t.zoomFactor!==n&&(t=t.set("zoomFactor",n)),t}},Hf={topics:Object(T.Map)(),extData:Object(T.Map)(),config:new Af,rootTopicKey:null,editorRootTopicKey:null,focusKey:null,focusMode:null,formatVersion:null,zoomFactor:1};Object(T.Record)(Hf);b()("core:controller");var Gf={name:"default",randomColor:!0,background:"rgb(57,60,65)",highlightColor:"#50C9CE",marginH:60,marginV:20,contentStyle:{lineHeight:"1.5",fontSize:"16px"},linkStyle:{lineRadius:5,lineType:"curve",lineWidth:"3px"},rootTopic:{contentStyle:{fontSize:"36px"},subLinkStyle:{lineType:"curve",lineWidth:"3px"}},primaryTopic:{contentStyle:{fontSize:"24px"},subLinkStyle:{lineType:"curve",lineWidth:"3px"}},normalTopic:{subLinkStyle:{lineType:"curve",lineWidth:"3px"}}},Wf={name:"theme1",randomColor:!1,background:"rgb(250,245,205)",highlightColor:"#50C9CE",marginH:50,marginV:30,contentStyle:{lineHeight:"1.5"},linkStyle:{lineRadius:5},rootTopic:{contentStyle:{background:"rgb(221, 170, 68)",color:"#fff",fontSize:"34px",borderRadius:"5px",padding:"16px 18px 16px 18px"},subLinkStyle:{lineType:"curve",lineWidth:"2px",lineColor:"rgb(221, 170, 68)"}},primaryTopic:{contentStyle:{background:"#e8eaec",borderWidth:"2px",borderStyle:"solid",borderColor:"rgb(221, 170, 68)",borderRadius:"5px",fontSize:"17px",padding:"10px 15px 10px 15px"},subLinkStyle:{lineType:"curve",lineWidth:"2px",lineColor:"rgb(221, 170, 68)"}},normalTopic:{contentStyle:{background:"#fff",border:"1px solid #e8eaec",borderRadius:"20px",color:"rgb(187, 136, 34)",fontSize:"13px",padding:"4px 10px"},subLinkStyle:{lineType:"round",lineRadius:5,lineWidth:"1px",lineColor:"rgb(187, 136, 34)"}}},Uf={name:"theme2",randomColor:!1,background:"#f8f8f8",highlightColor:"#50C9CE",marginH:45,marginV:10,contentStyle:{lineHeight:"1.5"},linkStyle:{lineRadius:5},rootTopic:{contentStyle:{background:"#50C18A",color:"#fff",fontSize:"34px",borderRadius:"5px",padding:"16px 18px 16px 18px"},subLinkStyle:{lineType:"curve",lineWidth:"2px",lineColor:"#43a9ff"}},primaryTopic:{contentStyle:{background:"#ffffff",borderWidth:"1px",borderStyle:"solid",borderColor:"rgb(221, 170, 68)",borderRadius:"5px",color:"rgb(103,103,103)",fontSize:"14px",padding:"6px 10px 5px 10px"},subLinkStyle:{lineType:"round",lineRadius:5,lineWidth:"2px",lineColor:"#43a9ff"}},normalTopic:{contentStyle:{background:"#fff",borderRadius:"5px",color:"rgb(103,103,103)",fontSize:"13px",padding:"3px 9px 4px",boxShadow:"1px 1px 1px #ccc"},subLinkStyle:{lineType:"round",lineRadius:5,lineWidth:"1px",lineColor:"#43a9ff"}}},Zf={name:"theme3",randomColor:!1,background:"#A9DEF9",highlightColor:"#50C9CE",marginH:50,marginV:20,contentStyle:{lineHeight:"1.5"},linkStyle:{lineRadius:5},rootTopic:{contentStyle:{background:"#FF99C8",color:"#fff",fontSize:"34px",borderRadius:"5px",padding:"16px 18px 16px 18px"},subLinkStyle:{lineType:"curve",lineWidth:"2px",lineColor:"#43a9ff"}},primaryTopic:{contentStyle:{background:"#FCF6BD",borderWidth:"1px",borderStyle:"solid",borderColor:"#E4C1F9",borderRadius:"5px",color:"rgb(103,103,103)",fontSize:"14px",padding:"6px 10px 5px 10px"},subLinkStyle:{lineType:"curve",lineWidth:"2px",lineColor:"#43a9ff"}},normalTopic:{contentStyle:{background:"#E4FDE1",borderRadius:"5px",color:"rgb(103,103,103)",fontSize:"13px",padding:"3px 9px 4px",boxShadow:"1px 1px 1px #ccc"},subLinkStyle:{lineType:"round",lineRadius:5,lineWidth:"1px",lineColor:"#43a9ff"}}},Jf={name:"theme3",randomColor:!1,background:"#CCFBFE",highlightColor:"#50C9CE",marginH:50,marginV:20,contentStyle:{lineHeight:"1.5"},linkStyle:{lineRadius:5},rootTopic:{contentStyle:{background:"#CD8987",color:"#fff",fontSize:"34px",borderRadius:"5px",padding:"16px 18px 16px 18px"},subLinkStyle:{lineType:"curve",lineWidth:"2px",lineColor:"#43a9ff"}},primaryTopic:{contentStyle:{background:"#CDACA1",borderWidth:"1px",borderStyle:"solid",borderColor:"#E4C1F9",borderRadius:"5px",color:"rgb(103,103,103)",fontSize:"14px",padding:"6px 10px 5px 10px"},subLinkStyle:{lineType:"line",lineWidth:"2px",lineColor:"#43a9ff"}},normalTopic:{contentStyle:{background:"#CDCACC",borderRadius:"5px",color:"rgb(103,103,103)",fontSize:"13px",padding:"3px 9px 4px",boxShadow:"1px 1px 1px #ccc"},subLinkStyle:{lineType:"line",lineRadius:5,lineWidth:"1px",lineColor:"#43a9ff"}}};function Yf(e){return!0===(null!=(t=e)&&"object"===typeof t&&!1===Array.isArray(t))&&"[object Object]"===Object.prototype.toString.call(e);var t}var qf=function(e){var t,n;return!1!==Yf(e)&&("function"===typeof(t=e.constructor)&&(!1!==Yf(n=t.prototype)&&!1!==n.hasOwnProperty("isPrototypeOf")))};var Xf,$f=function(e,t){},Qf="L",eb="R",tb="M";!function(e){e[e.LEFT_TO_RIGHT=0]="LEFT_TO_RIGHT",e[e.RIGHT_TO_LEFT=1]="RIGHT_TO_LEFT",e[e.LEFT_AND_RIGHT=2]="LEFT_AND_RIGHT",e[e.TOP_TO_BOTTOM=3]="TOP_TO_BOTTOM"}(Xf||(Xf={}));var nb=0,ob=1,rb="CONTENT",cb="DESC",ib="NORMAL",ab="EDITING_CONTENT",lb="EDITING_DESC",ub="SHOW_POPUP",sb="DRAGGING",pb="ANCESTOR",db="DESCENDANT",fb="SIBLING",bb="NONE",yb="TOGGLE_COLLAPSE",hb="COLLAPSE_ALL",gb="EXPAND_ALL",mb="EXPAND_TO",Ob="ADD_CHILD",vb="ADD_SIBLING",Tb="DELETE_TOPIC",jb="FOCUS_TOPIC",kb="SET_FOCUS_MODE",Eb="SET_STYLE",xb="CLEAR_ALL_CUSTOM_STYLE",Sb="SET_THEME",Cb="SET_TOPIC_BLOCK",wb="DELETE_TOPIC_BLOCK",Kb="START_EDITING_CONTENT",Rb="START_EDITING_DESC",Db="DRAG_AND_DROP",Lb="SET_EDITOR_ROOT",Ib="SET_LAYOUT_DIR",_b=function(e){Object(u.a)(n,e);var t=Object(s.a)(n);function n(){return Object(a.a)(this,n),t.apply(this,arguments)}return Object(l.a)(n,[{key:"data",get:function(){return this.get("data")}},{key:"type",get:function(){return this.get("type")}}],[{key:"create",value:function(e){return new n(e)}},{key:"createList",value:function(e){if(T.List.isList(e)||Array.isArray(e))return Object(T.List)(e.map(n.create));throw new Error("Block.createList only accepts Array or List, but you passed it: ".concat(e))}}]),n}(Object(T.Record)({type:null,key:null,data:null}));var Mb={readOnly:!1,allowUndo:!0,layoutDir:Xf.LEFT_AND_RIGHT,theme:{name:"default",randomColor:!0,background:"rgb(57,60,65)",highlightColor:"#50C9CE",marginH:60,marginV:20,contentStyle:{lineHeight:"1.5"},linkStyle:{lineRadius:5,lineType:"curve",lineWidth:"3px"},rootTopic:{contentStyle:{fontSize:"34px",borderRadius:"35px",padding:"16px 18px 16px 18px"},subLinkStyle:{lineType:"curve",lineWidth:"3px",lineColor:"rgb(113, 203, 45)"}},primaryTopic:{contentStyle:{borderWidth:"1px",borderStyle:"solid",borderRadius:"20px",fontSize:"17px",padding:"10px 15px 10px 15px"},subLinkStyle:{lineType:"curve",lineWidth:"3px",lineColor:"rgb(113, 203, 45)"}},normalTopic:{contentStyle:{border:"1px solid #e8eaec",borderRadius:"20px",fontSize:"17px",padding:"4px 10px"},subLinkStyle:{lineType:"curve",lineWidth:"3px",lineColor:"white"}}}},Ab=function(e){Object(u.a)(n,e);var t=Object(s.a)(n);function n(){return Object(a.a)(this,n),t.apply(this,arguments)}return Object(l.a)(n,[{key:"layoutDir",get:function(){return this.get("layoutDir")}},{key:"readOnly",get:function(){return this.get("readOnly")}},{key:"allowUndo",get:function(){return this.get("allowUndo")}},{key:"theme",get:function(){return this.get("theme")}}],[{key:"fromJSON",value:function(e){return new n(e)}}]),n}(Object(T.Record)(Mb));function Nb(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,(function(e){var t=16*Math.random()|0;return("x"===e?t:3&t|8).toString(16)}))}var Fb=function(e){Object(u.a)(n,e);var t=Object(s.a)(n);function n(){return Object(a.a)(this,n),t.apply(this,arguments)}return Object(l.a)(n,[{key:"key",get:function(){return this.get("key")}},{key:"parentKey",get:function(){return this.get("parentKey")}},{key:"collapse",get:function(){return this.get("collapse")}},{key:"subKeys",get:function(){return this.get("subKeys")}},{key:"blocks",get:function(){return this.get("blocks")}},{key:"relations",get:function(){return this.get("relations")}},{key:"style",get:function(){return this.get("style")}},{key:"getBlock",value:function(e){var t=this.blocks.findIndex((function(t){return t.type===e}));return-1===t?{index:t,block:null}:{index:t,block:this.blocks.get(t)}}}],[{key:"fromJSON",value:function(e){var t=e.key,o=e.parentKey,r=void 0===o?null:o,c=e.blocks,i=e.subKeys,a=void 0===i?[]:i,l=e.collapse;return new n({key:t,parentKey:r,collapse:void 0!==l&&l,subKeys:Object(T.List)(a),blocks:_b.createList(c)})}},{key:"create",value:function(e){var t=e.key,o=e.parentKey,r=void 0===o?null:o,c=e.content,i=void 0===c?"":c,a=e.subKeys,l=void 0===a?[]:a,u=e.collapse,s=void 0!==u&&u,p=_b.create({type:rb,data:i,key:null});return new n({key:t,parentKey:r,blocks:Object(T.List)([p]),subKeys:Object(T.List)(l),collapse:s})}}]),n}(Object(T.Record)({key:null,parentKey:null,collapse:!1,subKeys:null,blocks:null,relations:null,style:null}));function Pb(e,t){var n=e.getTopic(t),o=[];if(n.subKeys.size>0){var r,c=n.subKeys.toArray();(r=o).push.apply(r,Object(v.a)(c)),o=c.reduce((function(t,n){return t.push.apply(t,Object(v.a)(Pb(e,n))),t}),o)}return o}function Bb(e,t,n){var o=e.getTopic(t),r=e.getTopic(n);if(o&&r){if(o.parentKey==r.parentKey)return fb;for(var c=o;c.parentKey;){if(c.parentKey===r.key)return db;c=e.getParentTopic(c.key)}for(c=r;c.parentKey;){if(c.parentKey===o.key)return pb;c=e.getParentTopic(c.key)}}return bb}var zb=b()("modifier");function Vb(e){var t=e.model,n=e.topicKey,o=e.focusMode;return zb("focus topic"),n!==t.focusKey&&(t=t.set("focusKey",n)),o!==t.focusMode&&(t=t.set("focusMode",o)),t}var Hb={addChild:function(e){var t=e.model,n=e.topicKey;zb("addChild:",n);var o=t.getTopic(n);if(o){var r=Fb.create({key:Nb(),parentKey:o.key});return o=o.set("collapse",!1).update("subKeys",(function(e){return e.push(r.key)})),Vb({model:t=t.update("topics",(function(e){return e.set(n,o).set(r.key,r)})),topicKey:r.key,focusMode:ab})}return t},addSibling:function(e){var t=e.model,n=e.topicKey;if(n===t.rootTopicKey)return t;var o=t.getTopic(n);if(o){var r=t.getTopic(o.parentKey),c=r.subKeys.indexOf(n),i=Fb.create({key:Nb(),parentKey:r.key});return Vb({model:t=t.update("topics",(function(e){return e.set(i.key,i)})).updateIn(["topics",r.key,"subKeys"],(function(e){return e.insert(c+1,i.key)})),topicKey:i.key,focusMode:ab})}return t},toggleCollapse:function(e){var t=e.model,n=e.topicKey,o=t.getTopic(n);return o&&0!==o.subKeys.size&&(o=o.merge({collapse:!o.collapse}),t=t.updateIn(["topics",o.key,"collapse"],(function(e){return!e}))),t=Vb({model:t,topicKey:n,focusMode:ib})},collapseAll:function(e){var t=e.model,n=Pb(t,t.editorRootTopicKey);return zb(t),t=Vb({model:t=t.withMutations((function(e){n.forEach((function(t){e.setIn(["topics",t,"collapse"],!0)}))})),topicKey:t.editorRootTopicKey,focusMode:ib})},expandAll:function(e){var t=e.model,n=Pb(t,t.editorRootTopicKey);return zb(t),t=t.withMutations((function(e){n.forEach((function(t){e.setIn(["topics",t,"collapse"],!1)}))})),zb(t),t},expandTo:function(e){var t=e.model,n=e.topicKey,o=function(e,t){for(var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],o=[t],r=e.getTopic(t);r.parentKey;)n?o.push(r.parentKey):o.unshift(r.parentKey),r=e.getParentTopic(r.key);return o}(t,n).filter((function(e){return e!==n}));return Bb(t=t.withMutations((function(e){o.forEach((function(t){e.setIn(["topics",t,"collapse"],!1)}))})),n,t.editorRootTopicKey)!==db&&(t=t.set("editorRootTopicKey",t.rootTopicKey)),t},focusTopic:Vb,setFocusMode:function(e){var t=e.model,n=e.focusMode;return zb("setFocusMode"),n!==t.focusMode&&(t=t.set("focusMode",n)),t},deleteTopic:function(e){var t=e.model,n=e.topicKey;if(n===t.editorRootTopicKey)return t;var o=t.getTopic(n);return o&&(t=t.withMutations((function(e){e.update("topics",(function(e){e=e.delete(n);var o=Pb(t,n);return e=e.withMutations((function(e){o.forEach((function(t){e.delete(t)}))}))})),e.updateIn(["topics",o.parentKey,"subKeys"],(function(e){return e.delete(e.indexOf(n))})),e.focusKey===n&&e.set("focusKey",null).set("focusMode",null)}))),t},setBlockData:function(e){var t=e.model,n=e.topicKey,o=e.blockType,r=e.focusMode,c=e.data,i=t.getTopic(n);if(i){var a=i.getBlock(o),l=a.index,u=a.block;-1===l?t=t.updateIn(["topics",n,"blocks"],(function(e){return e.push(_b.create({type:o,data:c}))})):u.data!==c&&(t=t.updateIn(["topics",n,"blocks",l,"data"],(function(e){return c}))),r&&(t=Vb({model:t,topicKey:n,focusMode:r}))}return t},deleteBlock:function(e){var t=e.model,n=e.topicKey,o=e.blockType,r=t.getTopic(n);if(r){var c=r.getBlock(o).index;-1!==c&&(t=t.updateIn(["topics",n,"blocks"],(function(e){return e.delete(c)}))),t=Vb({model:t,topicKey:null,focusMode:null})}return t},setStyle:function(e){var t=e.model,n=e.topicKey,o=e.style,r=t.getTopic(n);return r&&o!==r.style&&(t=t.updateIn(["topics",n,"style"],(function(e){return o}))),t},clearAllCustomStyle:function(e){var t=e.model;return t=t.withMutations((function(e){e.topics.keySeq().forEach((function(t){e.setIn(["topics",t,"style"],null)}))}))},setTheme:function(e){var t=e.model,n=e.theme;return t=t.setIn(["config","theme"],n)},setLayoutDir:function(e){var t=e.model,n=e.layoutDir;return t.config.layoutDir===n?t:t=t.setIn(["config","layoutDir"],n)},setEditorRootTopicKey:function(e){var t=e.model,n=e.topicKey;return t.editorRootTopicKey!==n&&(t=t.set("editorRootTopicKey",n)),t.getTopic(n).collapse&&(t=t.setIn(["topics",n,"collapse"],!1)),t},setZoomFactor:function(e){var t=e.model,n=e.zoomFactor;return t.zoomFactor!==n&&(t=t.set("zoomFactor",n)),t}},Gb={topics:Object(T.Map)(),extData:Object(T.Map)(),config:new Ab,rootTopicKey:null,editorRootTopicKey:null,focusKey:null,focusMode:null,formatVersion:null,zoomFactor:1},Wb=function(e){Object(u.a)(n,e);var t=Object(s.a)(n);function n(){return Object(a.a)(this,n),t.apply(this,arguments)}return Object(l.a)(n,[{key:"toJS",value:function(){return{rootTopicKey:this.rootTopicKey,topics:Object.values(this.topics.toJS()),config:this.config,extData:this.extData,zoomFactor:this.zoomFactor}}},{key:"extData",get:function(){return this.get("extData")}},{key:"topics",get:function(){return this.get("topics")}},{key:"config",get:function(){return this.get("config")}},{key:"formatVersion",get:function(){return this.get("formatVersion")}},{key:"rootTopicKey",get:function(){return this.get("rootTopicKey")}},{key:"editorRootTopicKey",get:function(){return this.get("editorRootTopicKey")}},{key:"focusKey",get:function(){return this.get("focusKey")}},{key:"focusMode",get:function(){return this.get("focusMode")}},{key:"editingContentKey",get:function(){return this.focusMode===ab?this.focusKey:null}},{key:"editingDescKey",get:function(){return this.focusMode===lb?this.focusKey:null}},{key:"getTopic",value:function(e){return this.topics.get(e)}},{key:"getExtDataItem",value:function(e,t){return this.extData.get(e)||new t}},{key:"getParentTopic",value:function(e){var t=this.getTopic(e);return t.parentKey?this.getTopic(t.parentKey):null}},{key:"getTopicVisualLevel",value:function(e){for(var t=this.getTopic(e),n=0;t&&t.key!==this.editorRootTopicKey;)n++,t=this.getParentTopic(t.key);return n}},{key:"rootTopic",get:function(){return this.getTopic(this.rootTopicKey)}},{key:"zoomFactor",get:function(){return this.get("zoomFactor")}}],[{key:"isModel",value:function(e){return e instanceof n}},{key:"create",value:function(){var e,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;if(null==t)return n.createEmpty();if(n.isModel(t)&&(e=t),qf(t)&&(e=n.fromJSON(t)),e)return null==e.focusKey&&(e=e.set("focusKey",e.rootTopicKey)),null==e.focusMode&&(e=e.set("focusMode",ib)),e;throw new Error("`Value.create` only accepts objects or values, but you passed it: ".concat(t))}},{key:"createEmpty",value:function(){var e=new n,t=Fb.create({key:Nb(),content:"RootTopic"});return e.update("topics",(function(e){return e.set(t.key,t)})).set("rootTopicKey",t.key).set("editorRootTopicKey",t.key).set("focusKey",t.key).set("focusMode",ib)}},{key:"fromJSON",value:function(e){var t=new n,o=e.topics,r=void 0===o?[]:o,c=e.config,i=void 0===c?{}:c,a=e.rootTopicKey,l=e.editorRootTopicKey;return void 0===l&&(l=a),t=(t=t.merge({rootTopicKey:a,editorRootTopicKey:l})).withMutations((function(e){r.forEach((function(t){e.update("topics",(function(e){return e.set(t.key,Fb.fromJSON(t))}))})),e.set("config",Ab.fromJSON(i))}))}}]),n}(Object(T.Record)(Gb));function Ub(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.plugins,n=void 0===t?[]:t;return Object(v.a)(n)}b()("core:controller");function Zb(e,t){if(Array.isArray(t))t.forEach((function(t){return Zb(e,t)}));else if(null!=t)for(var n in t){var o=t[n];e.middleware[n]=e.middleware[n]||[],e.middleware[n].push(o)}}function Jb(e){if(!Array.isArray(e))throw new TypeError("Middleware stack must be an array!");var t,n=Object(O.a)(e);try{for(n.s();!(t=n.n()).done;){if("function"!==typeof t.value)throw new TypeError("Middleware must be composed of functions!")}}catch(o){n.e(o)}finally{n.f()}return function(t,n){var r=-1;return function c(i){if(i<=r)throw new Error("next() called multiple times");r=i;var a=e[i];i===e.length&&(a=n);if(!a)return null;try{return a(t,c.bind(null,i+1))}catch(o){throw o}}(0)}}var Yb,qb,Xb,$b,Qb,ey,ty,ny,oy,ry,cy,iy,ay,ly,uy,sy,py,dy,fy,by,yy,hy,gy,my,Oy,vy,Ty,jy,ky,Ey,xy,Sy,Cy,wy,Ky,Ry,Dy,Ly,Iy,_y,My,Ay,Ny,Fy,Py,By,zy,Vy,Hy,Gy,Wy,Uy,Zy,Jy,Yy,qy,Xy,$y=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};Object(a.a)(this,e);var n=t.plugins,o=void 0===n?[]:n,r=t.onChange,c=t.readOnly;this.readOnly=c,this.onChange=r,this.middleware=new Map;var i=Ub({plugins:o});Zb(this,i)}return Object(l.a)(e,[{key:"run",value:function(e){var t=this.middleware,n=t[e]||[];$f(0!==n.length,"the middleware function ".concat(e," is not found!"));for(var o=Object(E.a)(Jb)(n),r=arguments.length,c=new Array(r>1?r-1:0),i=1;i<r;i++)c[i-1]=arguments[i];return o.apply(void 0,c)}},{key:"getValue",value:function(e,t){return this.run("getValue",Object(m.a)(Object(m.a)({},t),{},{propKey:e}))}},{key:"change",value:function(e,t){this.onChange(e,t),this.currentModel=e}}]),e}(),Qy=(n(761),["title"]),eh=["layout","title"],th=["layout","title"],nh=["controller","children","onClick"],oh=["text"],rh=function(e){Object(u.a)(n,e);var t=Object(s.a)(n);function n(e){return Object(a.a)(this,n),t.call(this,e)}return Object(l.a)(n,[{key:"operation",value:function(e,t){this.props.controller.run("operation",Object(m.a)({opType:e},t))}},{key:"run",value:function(e,t){this.props.controller.run(e,t)}},{key:"topic",get:function(){return this.props.model.getTopic(this.props.topicKey)}}]),n}(o.Component),ch=b()("node:drag-scroll-widget"),ih=d.default.div(Yb||(Yb=Object(Ra.a)(["\n  position: relative;\n  width: 100%;\n  height: 100%;\n  overflow: scroll;\n"]))),ah=d.default.div(qb||(qb=Object(Ra.a)(["\n  position: relative;\n  width: max-content;\n"]))),lh=function(e){Object(u.a)(n,e);var t=Object(s.a)(n);function n(e){var o;return Object(a.a)(this,n),(o=t.call(this,e)).contentResizeCallback=function(e,t){if(o.oldContentRect){var n={width:o.content.clientWidth+2*o.viewBox.clientWidth,height:o.content.clientHeight+2*o.viewBox.clientHeight};o.bigView.style.width=n.width+"px",o.bigView.style.height=n.height+"px"}o.oldContentRect=e[0].contentRect},o.contentResizeObserver=new p.a(o.contentResizeCallback),o.contentRef=function(e){e&&(o.content=e,o.contentResizeObserver.observe(o.content))},o.viewBoxRef=function(e){e&&(o.viewBox=e,o.props.enableMouseWheel||(ch("addEventListener onwheel"),o.viewBox.addEventListener("wheel",(function(e){ch("onwheel"),(e.ctrlKey||e.altKey)&&e.preventDefault()}),{passive:!1})),o.setViewBoxScroll(o.viewBox.clientWidth,o.viewBox.clientHeight))},o.bigViewRef=function(e){e&&(o.bigView=e)},o.setWidgetStyle=function(){o.content&&o.viewBox&&o.bigView&&(o.bigView.style.width=2*(o.content.clientWidth+o.viewBox.clientWidth)+"px",o.bigView.style.height=2*(o.content.clientHeight+o.viewBox.clientHeight)+"px",o.content.style.left=o.viewBox.clientWidth+"px",o.content.style.top=o.viewBox.clientHeight+"px")},o.setViewBoxScroll=function(e,t){ch("setViewBoxScroll ".concat(e," ").concat(t)),o.viewBox&&(o.viewBox.scrollLeft=e,o.viewBox.scrollTop=t)},o.setViewBoxScrollDelta=function(e,t){ch("setViewBoxScrollDelta ".concat(e," ").concat(t)),o.viewBox&&(o.viewBox.scrollLeft+=e,o.viewBox.scrollTop+=t)},o.onMouseDown=function(e){var t=o.props,n=t.mouseKey,r=t.needKeyPressed,c=t.canDragFunc;if((!c||c())&&(0===e.button&&"left"===n||2===e.button&&"right"===n)){if(r&&!e.ctrlKey)return;o._lastCoordX=o.viewBox.scrollLeft+e.nativeEvent.clientX,o._lastCoordY=o.viewBox.scrollTop+e.nativeEvent.clientY;var i=o.viewBox;i.addEventListener("mousemove",o.onMouseMove),i.addEventListener("mouseup",o.onMouseUp)}},o.onMouseUp=function(e){var t=o.viewBox;t.removeEventListener("mousemove",o.onMouseMove),t.removeEventListener("mouseup",o.onMouseUp)},o.onMouseMove=function(e){o.viewBox.scrollLeft=o._lastCoordX-e.clientX,o.viewBox.scrollTop=o._lastCoordY-e.clientY},o.handleContextMenu=function(e){e.preventDefault()},o.state={widgetStyle:{width:"10000px",height:"10000px"}},o}return Object(l.a)(n,[{key:"componentDidMount",value:function(){this.setWidgetStyle(),document.addEventListener("contextmenu",this.handleContextMenu)}},{key:"componentWillUnmount",value:function(){document.removeEventListener("contextmenu",this.handleContextMenu)}},{key:"setZoomFactor",value:function(e){this.bigView.style.transform="scale(".concat(e,")"),this.bigView.style.transformOrigin="50% 50%"}},{key:"render",value:function(){var e=Object(m.a)({},this.state.widgetStyle);return Object(o.createElement)(ih,{ref:this.viewBoxRef,onMouseDown:this.onMouseDown},Object(o.createElement)("div",{style:e,ref:this.bigViewRef},Object(o.createElement)(ah,{ref:this.contentRef,style:this.state.contentStyle},this.props.children(this.setViewBoxScroll,this.setViewBoxScrollDelta))))}}]),n}(o.Component);lh.defaultProps={mouseKey:"left",needKeyPressed:!1};var uh=b()("node:save-ref"),sh=function(e){Object(u.a)(n,e);var t=Object(s.a)(n);function n(){var e;return Object(a.a)(this,n),(e=t.apply(this,arguments)).getRef=function(t){return uh(Object(Ka.a)(e)),e[t]},e.saveRef=function(t){return function(n){n&&(e[t]=n,e.fireListener(t,n))}},e.deleteRef=function(t){uh("deleteRef:",t),delete e[t]},e.observers=new Map,e.fireListener=function(t,n){if(e.observers.has(t)){var o,r=e.observers.get(t),c=Object(O.a)(r);try{for(c.s();!(o=c.n()).done;){(0,o.value)(t,n)}}catch(i){c.e(i)}finally{c.f()}}},e.registerRefListener=function(t,n){e.observers.has(t)?e.observers.get(t).push(n):e.observers.set(t,[n])},e}return Object(l.a)(n,[{key:"render",value:function(){return this.props.children(this.saveRef,this.getRef,this.deleteRef,this.registerRefListener.bind(this))}}]),n}(o.Component),ph=d.default.div(Xb||(Xb=Object(Ra.a)(["\n  display: flex;\n  flex-direction: ",";\n  align-items: ",";\n  justify-content: ",";\n"])),(function(e){return e.flexDirection?e.flexDirection:"row"}),(function(e){return e.alignItems}),(function(e){return e.justifyContent})),dh=d.default.div($b||($b=Object(Ra.a)(["\n  margin: ",";\n"])),(function(e){return e.margin})),fh=d.default.a(Qb||(Qb=Object(Ra.a)(["\n  font-size: 20px !important;\n"]))),bh=d.default.div(ey||(ey=Object(Ra.a)(["\n  padding: 5px;\n  cursor: pointer;\n"]))),yh=d.default.div(ty||(ty=Object(Ra.a)(["\n  cursor: pointer;\n  &:hover {\n    color: #1ea7fd;\n  }\n"]))),hh=Object(d.default)(y.e)(ny||(ny=Object(Ra.a)(["\n  margin-bottom: 0px !important;\n"]))),gh=Object(d.default)(yh)(oy||(oy=Object(Ra.a)(["\n  position: absolute;\n  right: 5px;\n  top: 5px;\n  //padding: 5px;\n"]))),mh=d.default.div(ry||(ry=Object(Ra.a)(["\n  height: 16px;\n"]))),Oh=d.default.span(cy||(cy=Object(Ra.a)(["\n  margin: 0px 10px;\n  &:hover {\n    color: palevioletred;\n  }\n"]))),vh=d.default.div(iy||(iy=Object(Ra.a)(["\n  z-index: ",";\n"])),(function(e){return e.zIndex})),Th=d.default.div(ay||(ay=Object(Ra.a)(["\n  min-width: 380px;\n  max-width: 482px;\n  max-height: 470px;\n  overflow: auto;\n"]))),jh=d.default.div(ly||(ly=Object(Ra.a)(["\n  position: absolute;\n  left: 0;\n  top: 0;\n  width: 100%;\n  height: 100%;\n"]))),kh=(d.default.div(uy||(uy=Object(Ra.a)(["\n  max-height: ",";\n  overflow-y: auto;\n  overflow-x: hidden;\n"])),(function(e){return e.maxHeight||"300px"})),d.default.div(sy||(sy=Object(Ra.a)(["\n  margin-top: 10px;\n  margin-bottom: 5px;\n  font-weight: bold;\n"])))),Eh=d.default.span(py||(py=Object(Ra.a)(["\n  margin: 0 10px 0 2px;\n"]))),xh=d.default.div(dy||(dy=Object(Ra.a)(["\n  padding: 10px;\n  margin: 0 0 10px 0;\n  border: rgba(16, 22, 26, 0.15) solid 1px;\n  border-radius: 5px;\n"]))),Sh=Object(d.default)(Eh)(fy||(fy=Object(Ra.a)([""]))),Ch=d.default.div(by||(by=Object(Ra.a)(["\n  display: flex;\n  align-items: center;\n  //justify-content: center;\n  margin: 5px 0;\n"]))),wh=d.default.div(yy||(yy=Object(Ra.a)(["\n  height: 3px;\n  width: 80%;\n  margin-left: 10%;\n  margin-right: 10%;\n  margin-bottom: 2px;\n  background: ",";\n"])),(function(e){return e.color})),Kh=d.default.div(hy||(hy=Object(Ra.a)(["\n  border: 1px solid grey;\n  cursor: pointer;\n  font-weight: bold;\n"]))),Rh="show-menu",Dh="close",Lh="color-picker",Ih="notes",_h="plus",Mh="minus",Ah="collapse",Nh="expand",Fh="center",Ph="trash",Bh="layout-left-and-right";function zh(e){return"icon iconfont bm-".concat(e)}function Vh(e){return Object(o.createElement)("span",{className:zh(e)})}function Hh(e){return"content-".concat(e)}function Gh(e){return"content-editor-".concat(e)}function Wh(e){return"desc-editor-".concat(e)}function Uh(e){return"topic-widget-".concat(e)}function Zh(e){return"topic-".concat(e)}function Jh(e){return"links-".concat(e)}function Yh(e){return"links-svg-".concat(e)}function qh(e){return"collapse-".concat(e)}function Xh(e,t){return"dropArea-".concat(t,"-").concat(e)}var $h="DIAGRAM-ROOT",Qh="DragScrollWidget",eg="svg-highlight",tg="focus-highlight",ng="drop-effect",og="CENTER_ROOT_TOPIC",rg="DIAGRAM_CUSTOMIZE_BASE_Z_INDEX",cg="TOPIC_CONTEXT_MENU_ENABLED",ig="TOPIC_TITLE",ag="DRAG_DROP_STATE",lg="RIGHT_TOP_PANEL_STATE",ug="OPERATION_ENABLED",sg="CONFIRM",pg="CANCEL",dg="DEFAULT",fg="SEARCH",bg="LEFT_AND_RIGHT",yg="ONLY_LEFT",hg="ONLY_RIGHT",gg="EDIT",mg="ADD_SIBLING",Og="ADD_CHILD",vg="EDIT_NOTES",Tg="DELETE",jg="SET_AS_EDITOR_ROOT",kg="EDIT_TOPOLOGY_DIAGRAM",Eg="SET_TOPIC_REFERENCES",xg="TOPIC_STYLE",Sg="STYLE",Cg="TEXT_EDITOR",wg="LINK",Kg="LINK_TO_PARENT",Rg="SUB_LINKS",Dg="COPY_STYLE",Lg="PASTE_STYLE",Ig="CLEAR_TOPIC_STYLE",_g="CLEAR_ALL_CUSTOM_STYLE",Mg="LINE_TYPE",Ag="THEME",Ng="GLOBAL",Fg="HIGHLIGHT",Pg="RANDOM_COLOR",Bg="NORMAL_TOPIC",zg="PRIMARY_TOPIC",Vg="ROOT_TOPIC",Hg="EXPORT_THEME",Gg="IMPORT_THEME",Wg="TAGS",Ug="TAGS_MANAGER",Zg="TAG_NAME",Jg="ADD_TAG",Yg="UPDATE_TAG",qg="ALREADY_ADDED",Xg="CAN_BE_ADDED",$g="TOPICS_THAT_USE_THIS_TAG",Qg="BACKGROUND",em="COLOR",tm="BORDER",nm="WIDTH",om="RADIUS",rm="FONT_SIZE",cm="LINE_HEIGHT",im="PADDING",am="TOP",lm="BOTTOM",um="LEFT",sm="RIGHT",pm="NONE",dm="SOLID",fm="DOTTED",bm="DASHED",ym="DOUBLE",hm="ROUND",gm="CURVE",mm="LINE",Om="COLLAPSE_ALL",vm="EXPAND_ALL",Tm="CENTER_ROOT_TOPIC",jm="ZOOM",km="ZOOM_IN",Em="ZOOM_OUT",xm="RESET",Sm="RESET_ZOOM",Cm="NOTE_PLACEHOLDER",wm="TOPOLOGY_DIAGRAM_EDITOR",Km="BASIC",Rm="FLOW_GRAPH",Dm="ACTIVITY_DIAGRAM",Lm="SEQUENCE_DIAGRAM",Im="CLASS_DIAGRAM",_m="REFERENCE_TOPICS",Mm="REFERENCED_TOPICS",Am="SELECT_REF_TOPICS_TIP",Nm="TAG_NAME_OVER_MAX_TIP",Fm="DELETE_TAG_TIP",Pm="DELETE_TOPOLOGY_TIP",Bm=function(e){e.stopPropagation()};function zm(e,t){!function(e,t){var n=document.createElement("a");n.href=e,n.download=t,n.click()}("data:text/plain,".concat(encodeURIComponent(e)),t)}function Vm(e){var t=e.top,n=void 0===t?0:t,o=e.right,r=void 0===o?0:o,c=e.bottom,i=void 0===c?0:c,a=e.left,l=void 0===a?0:a;return"".concat(n,"px ").concat(r,"px ").concat(i,"px ").concat(l,"px")}function Hm(e,t){return Array.isArray(t)?t.map((function(t){return e.controller.run("getI18nText",Object(m.a)(Object(m.a)({},e),{},{key:t}))})):e.controller.run("getI18nText",Object(m.a)(Object(m.a)({},e),{},{key:t.toUpperCase()}))}function Gm(e){return(e.top+e.bottom)/2}function Wm(e,t){return(e.x+t.x)/2}function Um(e,t){return(e.y+t.y)/2}function Zm(e){return[(e.left+e.right)/2,(e.top+e.bottom)/2]}function Jm(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,o=e.getBoundingClientRect(),r=t.getBoundingClientRect(),c=Zm(r),i=Zm(o);i[0]=(i[0]-c[0])/n,i[1]=(i[1]-c[1])/n;var a=o.width/n,l=o.height/n;return{left:i[0]-a/2,right:i[0]+a/2,top:i[1]-l/2,bottom:i[1]+l/2,width:a,height:l}}function Ym(e,t){var n=e.getBoundingClientRect(),o=Zm(t.getBoundingClientRect()),r=Zm(n);return[r[0]-o[0],r[1]-o[1]]}function qm(e){return Object(o.createElement)("div",null,e.children,Object(o.createElement)(y.h,{style:{margin:"10px 0"}}))}function Xm(e){var t=e.title,n=e.layout,r=void 0===n?"h":n,c=e.color,i=e.handleColorChange,a={flexDirection:"h"===r?"row":"column",alignItems:"center"};return Object(o.createElement)(Eh,null,Object(o.createElement)(ph,Object.assign({},a),null!=t&&Object(o.createElement)(dh,{margin:"0 5px 0 0"},t),Object(o.createElement)(y.s,null,Object(o.createElement)(Kh,null,Object(o.createElement)("div",{className:zh(Lh)}),Object(o.createElement)(wh,{color:c})),Object(o.createElement)("div",null,Object(o.createElement)(rt.a,{color:c,onChangeComplete:function(e){return i(e.hex)}})))))}function $m(e){var t=e.title,n=Object(wa.a)(e,Qy);return Object(o.createElement)(Eh,null,Object(o.createElement)(y.d,Object.assign({},n),t))}function Qm(e){var t=e.layout,n=void 0===t?"h":t,r=e.title,c=Object(wa.a)(e,eh),i={flexDirection:"h"===n?"row":"column",alignItems:"center"};return Object(o.createElement)(Eh,null,Object(o.createElement)(ph,Object.assign({},i),Object(o.createElement)(dh,{margin:"0 5px 0 0"},r),Object(o.createElement)(y.q,Object.assign({},c))))}function eO(e){var t=e.layout,n=void 0===t?"h":t,r=e.title,c=Object(wa.a)(e,th),i={flexDirection:"h"===n?"row":"column",alignItems:"center"};return Object(o.createElement)(Eh,null,Object(o.createElement)(ph,Object.assign({},i),Object(o.createElement)(dh,{margin:"0 5px 0 0"},r," "),Object(o.createElement)(y.m,Object.assign({},c))))}function tO(e){var t=e.text,n=e.items,r=e.itemRenderer,c=e.onItemSelect,i=ot.a.ofType(),a={items:n,itemRenderer:r,onItemSelect:c,filterable:!1};return Object(o.createElement)(Eh,null,Object(o.createElement)(i,Object.assign({},a),Object(o.createElement)(y.d,{text:t})))}var nO=function(e){return function(t,n){var r=n.handleClick;return Object(o.createElement)(y.p,{text:"".concat(t).concat(e),key:t,onClick:r})}},oO=function(e){return function(t,n){var r=n.handleClick;return Object(o.createElement)(y.p,{text:Hm(e,t),key:t,onClick:r})}},rO=(ot.a.ofType(),Object(v.a)(Array(7).keys())),cO=d.default.div(gy||(gy=Object(Ra.a)(["\n  position: relative;\n  padding: 6px;\n  width: 40px;\n  height: 40px;\n  cursor: pointer;\n  color: ",";\n  font-size: 24px;\n  display: inline-block;\n  &:hover {\n    color: ",";\n  }\n"])),(function(e){return e.disabled?"grey":"black"}),(function(e){return e.disabled?"grey":"rgb(44, 184, 146)"}));function iO(e){var t=e.controller,n=e.children,r=e.onClick,c=Object(wa.a)(e,nh),i=e.disabled;i=i||!t.getValue(ug,e);var a=Object(m.a)({controller:t,disabled:i,onClick:function(e){i||r(e)}},c);return Object(o.createElement)(cO,Object.assign({},a),n)}var aO=b()("plugin:event");function lO(){var e={};return{handleTopicClick:function(e){aO("handleTopicClick");var t=e.controller,n=e.model,o=e.topicKey;aO(n.zoomFactor),null===n.editingDescKey&&n.editingContentKey!==o&&(n.focusKey===o&&n.focusMode===ab||t.run("operation",Object(m.a)(Object(m.a)({},e),{},{opType:jb,focusMode:ib})))},handleTopicDoubleClick:function(e){var t=e.controller;null===e.model.editingDescKey&&t.run("operation",Object(m.a)(Object(m.a)({},e),{},{opType:jb,focusMode:ab}))},handleTopicContextMenu:function(e){e.controller.run("operation",Object(m.a)(Object(m.a)({},e),{},{opType:jb,focusMode:ub}))},handleActiveModalClose:function(e){var t=e.controller,n=t.run("getActiveModalProps",e);return null==n?null:"edit-desc"===n.name?function(){t.run("operation",Object(m.a)(Object(m.a)({},e),{},{focusMode:ib,opType:jb}))}:void 0},addEventListener:function(t){var n=t.key,o=t.listener,r=t.once,c=t.controller;function i(){o(),c.run("removeEventListener",{key:n,listener:o})}e[n]||(e[n]=[]),r?(i.origin=o,e[n].push(i)):e[n].push(o)},removeEventListener:function(t){var n=t.key,o=t.listener;e[n]&&(e[n]=e[n].filter((function(e){return e!==o&&e.origin!==o})))},fireEvent:function(t){var n=t.key;e[n]&&e[n].forEach((function(e){return e()}))}}}var uO="ADD_CHILD",sO="ADD_SIBLING",pO="DELETE_TOPIC",dO="EDIT_CONTENT",fO="EDIT_NOTES",bO="SET_EDITOR_ROOT",yO=0,hO=1;function gO(){return{customizeHotKeys:function(e){var t=function(t){return function(n){!function(e,t){var n=t,o=n.topicKey,r=n.model,c=n.controller;void 0===o&&(t=Object(m.a)(Object(m.a)({},t),{},{topicKey:r.focusKey})),c.run("operation",Object(m.a)(Object(m.a)({},t),{},{opType:e}))}(t,e)}};return{topicHotKeys:new Map([[uO,{label:"add child",combo:"tab",onKeyDown:t(Ob)}],[sO,{label:"add sibling",combo:"enter",onKeyDown:t(vb)}],[pO,{label:"delete topic",combo:"del",onKeyDown:t(Tb)}],[dO,{label:"edit content",combo:"space",onKeyDown:t(Kb)}],[fO,{label:"edit notes",combo:"alt + d",onKeyDown:t(Rb)}],[bO,{label:"set editor root",combo:"alt + shift + f",onKeyDown:t(Lb)}]]),globalHotKeys:new Map}}}}function mO(){var e=new Map([[sg,"Confirm"],[pg,"Cancel"],[dg,"Default"],[fg,"Search"],[bg,"Left And Right"],[yg,"Only Left"],[hg,"Only Right"],[gg,"Edit"],[Og,"Add Child"],[mg,"Add Sibling"],[vg,"Edit Notes"],[Tg,"Delete"],[jg,"Set as Editor Root"],[kg,"Edit Topology Diagram"],[Eg,"Set Topic References"],[xg,"TopicStyle"],[Sg,"Style"],[Cg,"Text Editor"],[wg,"Link"],[Kg,"LinkToParent"],[Rg,"SubLinks"],[Dg,"Copy Style"],[Lg,"Paste Style"],[Ig,"Clear Topic Style"],[_g,"Clear All Custom Style"],[Mg,"LineType"],[Ag,"Theme"],[Ng,"Global"],[Fg,"Highlight"],[Pg,"Random Color"],[Bg,"NormalTopic"],[zg,"PrimaryTopic"],[Vg,"RootTopic"],[Hg,"Export Theme"],[Gg,"Import Theme"],[Wg,"Tags"],[Ug,"Tags Manager"],[Zg,"Tag Name"],[Jg,"Add Tag"],[Yg,"Update Tag"],[qg,"Already Added"],[Xg,"Can be Added"],[$g,"Topics that Use this Tag"],[Qg,"Background"],[em,"Color"],[tm,"Border"],[nm,"Width"],[om,"Radius"],[rm,"FontSize"],[cm,"LineHeight"],[im,"Padding"],[am,"Top"],[lm,"Bottom"],[um,"Left"],[sm,"Right"],[pm,"None"],[dm,"Solid"],[fm,"Dotted"],[bm,"Dashed"],[ym,"Double"],[hm,"Round"],[gm,"Curve"],[mm,"Line"],[Om,"Collapse All"],[vm,"Expand All"],[Tm,"Center Root Topic"],[jm,"zoom"],[km,"Zoom In"],[Em,"Zoom Out"],[xm,"Reset"],[Sm,"Reset Zoom"],[Cm,"Write topic notes here"],[wm,"Topology Diagram Editor"],[Km,"Basic"],[Rm,"Flow Graph"],[Dm,"Activity Diagram"],[Lm,"Sequence Diagram"],[Im,"Class Diagram"],[_m,"Reference Topics"],[Mm,"Referenced Topics"],[Am,"Please select the topics you want to reference. After selection, click the confirm button."],[Nm,"The length of tag name over the maximum length: 50!"],[Fm,"All the relationship about this tag will be lost if you delete this tag! Are you confirm?"],[Pm,"Are you confirm to delete this topology diagram?"]]);return{getI18nTextMap:function(){return e},getI18nText:function(e){var t=e.controller,n=e.key,o=t.run("getI18nTextMap",e);if(!o.has(n))throw new Error("i18n key ".concat(n," is not exist"));return o.get(n)}}}var OO=b()("plugin:operation");function vO(){var e=new Map([[yb,Hb.toggleCollapse],[hb,Hb.collapseAll],[gb,Hb.expandAll],[mb,Hb.expandTo],[Ob,Hb.addChild],[vb,Hb.addSibling],[Tb,Hb.deleteTopic],[jb,Hb.focusTopic],[kb,Hb.setFocusMode],[Eb,Hb.setStyle],[xb,Hb.clearAllCustomStyle],[Sb,Hb.setTheme],[Cb,Hb.setBlockData],[wb,Hb.deleteBlock],[Kb,function(e){var t=e.model,n=e.topicKey;return Hb.focusTopic({model:t,topicKey:n,focusMode:ab})}],[Rb,function(e){var t=e.model,n=e.topicKey,o=t.getTopic(n).getBlock(cb);return null!=o.block&&null!=o.block.data||(t=Hb.setBlockData({model:t,topicKey:n,blockType:cb,data:""})),t=Hb.focusTopic({model:t,topicKey:n,focusMode:lb})}],[Db,function(e){var t=e.srcKey,n=e.dstKey,o=e.dropDir,r=e.model,c=r.getTopic(t),i=r.getTopic(n),a=c.parentKey,l=r.getTopic(a).subKeys,u=l.indexOf(t);if(l=l.delete(u),"in"===o){var s=i.subKeys;s=s.push(t),r=r.withMutations((function(e){e.setIn(["topics",a,"subKeys"],l).setIn(["topics",t,"parentKey"],n).setIn(["topics",n,"subKeys"],s).setIn(["topics",n,"collapse"],!1)}))}else{var p=i.parentKey,d=r.getTopic(p).subKeys,f=d.indexOf(n);if(a===p){var b=Object(T.List)();d.forEach((function(e){e!==t&&(b=e===n?"prev"===o?b.push(t).push(e):b.push(e).push(t):b.push(e))})),r=r.withMutations((function(e){e.setIn(["topics",p,"subKeys"],b)}))}else"prev"===o?d=d.insert(f,t):"next"===o&&(d=d.insert(f+1,t)),r=r.withMutations((function(e){e.setIn(["topics",a,"subKeys"],l).setIn(["topics",t,"parentKey"],p).setIn(["topics",p,"subKeys"],d).setIn(["topics",p,"collapse"],!1)}))}return r}],[Lb,Hb.setEditorRootTopicKey],[Ib,Hb.setLayoutDir]]),t=Object(T.Stack)(),n=Object(T.Stack)(),o=!0,r=new Set;return{isOperationEnabled:function(e){return o},enableOperation:function(){o=!0},disableOperation:function(e){var t=e.whiteList;o=!1,t?r=new Set(t):r.clear()},getOpMap:function(t){return e},getAllowUndo:function(e){var t=e.model,n=e.opType,o=e.allowUndo;if(!1===(void 0===o||o))return!1;if(n)switch(n){case jb:case kb:case Kb:case Rb:return!1}switch(t.focusMode){case"EDITING_DESC":case"EDITING_CONTENT":return!1}return t.config.allowUndo},getUndoRedoStack:function(){return{undoStack:t,redoStack:n}},setUndoStack:function(e){OO("setUndoStack",e.undoStack),t=e.undoStack},setRedoStack:function(e){OO("setRedoStack",e.redoStack),n=e.redoStack},canUndo:function(e){var t=e.controller;if(!t.run("isOperationEnabled",e))return!1;var n=t.run("getUndoRedoStack",e).undoStack,o=t.run("getAllowUndo",e);return n.size>0&&o},canRedo:function(e){var t=e.controller;if(!t.run("isOperationEnabled",e))return!1;var n=t.run("getUndoRedoStack",e).redoStack,o=t.run("getAllowUndo",e);return n.size>0&&o},undo:function(e){var t=e.controller,n=e.model;if(t.run("getAllowUndo",e)){var o=t.run("getUndoRedoStack",e),r=o.undoStack,c=o.redoStack,i=r.peek();i&&(t.run("setUndoStack",Object(m.a)(Object(m.a)({},e),{},{undoStack:r.shift()})),t.run("setRedoStack",Object(m.a)(Object(m.a)({},e),{},{redoStack:c.push(n)})),OO(i),t.change(i))}},redo:function(e){var t=e.controller,n=e.model;if(t.run("getAllowUndo",e)){var o=t.run("getUndoRedoStack",e),r=o.undoStack,c=o.redoStack,i=c.peek();i&&(t.run("setUndoStack",Object(m.a)(Object(m.a)({},e),{},{undoStack:r.push(n)})),t.run("setRedoStack",Object(m.a)(Object(m.a)({},e),{},{redoStack:c.shift()})),t.change(i))}},operation:function(e){var t=e.controller,n=e.opType,o=e.model,c=e.opArray,i=e.callback;if(null!=c&&!Array.isArray(c))throw new Error("operation: the type of opArray must be array!");if(null!=n&&null!=c)throw new Error("operation: opType and opArray conflict!");if(!t.run("isOperationEnabled",e)){if(0===r.size)return;if(null!=c){var a=c.filter((function(e){return!r.has(e.opType)}));if(a&&a.length>0)return}else if(!r.has(n))return}OO("operation:",n||c.map((function(e){return e.opType}))),OO("operation:",o),OO("operation:",e);var l,u=t.run("getOpMap",e);if(t.run("beforeOperation",e),t.run("getAllowUndo",e)){var s=t.run("getUndoRedoStack",e).undoStack;t.run("setUndoStack",Object(m.a)(Object(m.a)({},e),{},{undoStack:s.push(o)}))}if(null!=c)l=c.reduce((function(e,n){var o=n.opType;if(!u.has(o))throw new Error("opType:".concat(o," not exist!"));var r=u.get(o),c=Object(m.a)(Object(m.a)({controller:t},n),{},{model:e}),i=t.run("beforeOpFunction",c);return i=r(Object(m.a)(Object(m.a)({},c),{},{model:i})),i=t.run("afterOpFunction",Object(m.a)(Object(m.a)({},c),{},{model:i}))}),o);else{if(!u.has(n))throw new Error("opType:".concat(n," not exist!"));var p=u.get(n);l=t.run("beforeOpFunction",e),l=p(Object(m.a)(Object(m.a)({},e),{},{model:l})),l=t.run("afterOpFunction",Object(m.a)(Object(m.a)({},e),{},{model:l}))}OO("newModel:",l),t.change(l,i?i(l):null),t.run("afterOperation",e)},deleteRefKey:function(e){var t=e.model,n=e.topicKey,o=e.deleteRef,r=Pb(t,n);r.push(n);var c,i=Object(O.a)(r);try{for(i.s();!(c=i.n()).done;){var a=c.value;o(Jh(a)),o(Yh(a)),o(Hh(a)),o(Gh(a)),o(Wh(a)),o(Uh(a)),o(Zh(a)),o(qh(a)),o(Xh(a,"next")),o(Xh(a,"prev"))}}catch(l){i.e(l)}finally{i.f()}},beforeOperation:function(e){},afterOperation:function(e){},beforeOpFunction:function(e){var t=e.controller,n=e.opType,o=e.model,r=e.topicKey;return n===Tb&&r!==o.editorRootTopicKey&&t.run("deleteRefKey",e),o},afterOpFunction:function(e){return e.model},openNewModel:function(e){var t=e.model,n=e.controller,o=e.newModel;n.run("deleteRefKey",Object(m.a)(Object(m.a)({},e),{},{topicKey:t.rootTopicKey})),n.run("operation",Object(m.a)(Object(m.a)({},e),{},{opType:mb,topicKey:o.focusKey,model:o,callback:function(t){return function(){n.run("moveTopicToCenter",Object(m.a)(Object(m.a)({},e),{},{model:t,topicKey:t.focusKey}))}}}))}}}var TO=function(e){Object(u.a)(n,e);var t=Object(s.a)(n);function n(){return Object(a.a)(this,n),t.apply(this,arguments)}return Object(l.a)(n,[{key:"render",value:function(){var e=this.props.controller;return Object(o.createElement)(y.n,null,e.run("customizeTopicContextMenu",this.props))}}]),n}(rh),jO=[{icon:"edit",label:gg,shortcut:"Space",rootCanUse:!0,opType:Kb},{icon:"add-sibling",label:mg,shortcut:"Enter",opType:vb},{icon:"add-child",label:Og,shortcut:"Tab",rootCanUse:!0,opType:Ob},{icon:"notes",label:vg,shortcut:"Alt + D",rootCanUse:!0,opType:Rb},{icon:"delete-node",label:Tg,shortcut:"Del",opType:Tb},{icon:"root",label:jg,shortcut:"Alt + Shift + F",opType:Lb}];function kO(){return{renderTopicContextMenu:function(e){return Object(o.createElement)(TO,Object.assign({},e))},customizeTopicContextMenu:function(e){var t=e.topicKey,n=e.model,r=e.controller,c=t===n.editorRootTopicKey;function i(t){return function(n){t.opType&&r.run("operation",Object(m.a)(Object(m.a)({},e),{},{opType:t.opType}))}}return jO.map((function(t){return c&&!t.rootCanUse?null:Object(o.createElement)(y.p,{key:t.label,icon:Vh(t.icon),text:Hm(e,t.label),labelElement:Object(o.createElement)("kbd",null,t.shortcut),onClick:i(t)})}))}}}var EO=b()("node:topic-drop-effect"),xO=d.default.svg(my||(my=Object(Ra.a)(["\n  width: 100%;\n  height: 100%;\n  position: absolute;\n  left: 0;\n  top: 0;\n  z-index: 2;\n  pointer-events: none;\n"]))),SO=function(e){Object(u.a)(n,e);var t=Object(s.a)(n);function n(){var e;return Object(a.a)(this,n),(e=t.apply(this,arguments)).state={content:null},e}return Object(l.a)(n,[{key:"layout",value:function(){var e=this.props,t=e.getRef,n=e.model,r=e.zoomFactor,c=e.diagramState.dragDrop;if(null!=c){var i=c.targetKey,a=c.targetDir;if(EO("layout",a),null!=i){var l=t("in"===a?Hh(i):Xh(i,a)),u=t("svg-drop-effect"),s=t(Qh).bigView,p=Jm(l,s,r),d=Jm(u,s,r),f=p.left-d.left-3,b=p.top-d.top-3,y=p.width+6,h=p.height+6;this.setState({content:Object(o.createElement)("g",null,Object(o.createElement)("rect",{x:f,y:b,width:y,height:h,fill:"none",stroke:n.config.theme.highlightColor,strokeDasharray:"5,5",strokeWidth:2}))})}else this.setState({content:null})}else this.setState({content:null})}},{key:"render",value:function(){var e=this.props.saveRef;return Object(o.createElement)(xO,{ref:e("svg-drop-effect")},this.state.content)}}]),n}(rh),CO=b()("plugin:drag-and-drop"),wO=d.default.div(Oy||(Oy=Object(Ra.a)(["\n  height: ",";\n  width: 100%;\n  margin: 5px 0px;\n"])),(function(e){return"".concat(e.height,"px")}));function KO(){return{renderTopicDropArea:function(e){var t=e.topicKey,n=e.dropDir,r=e.saveRef,c=e.controller,i=e.model,a={onDragEnter:function(o){CO("onDragEnter",t,n),c.run("handleTopicDragEnter",Object(m.a)(Object(m.a)({},e),{},{ev:o,dropDir:n}))},onDragLeave:function(o){CO("onDragLeave",t,n),c.run("handleTopicDragLeave",Object(m.a)(Object(m.a)({},e),{},{ev:o,dropDir:n}))},onDragOver:function(e){e.preventDefault()},onDrop:function(o){CO("onDrop",t,n),c.run("handleTopicDrop",Object(m.a)(Object(m.a)({},e),{},{ev:o,dropDir:n}))}};return Object(o.createElement)(wO,Object.assign({height:i.config.theme.marginV/2,ref:r(Xh(t,n))},a))},renderDragAndDropEffect:function(e){CO("renderDragAndDropEffect");var t=e.saveRef;return Object(o.createElement)(SO,Object.assign({ref:t(ng)},e))},handleTopicDragStart:function(e){var t=e.controller;e.ev.stopPropagation(),t.run("operation",Object(m.a)(Object(m.a)({},e),{},{opType:jb,focusMode:sb}))},canDrop:function(e){var t=e.srcKey,n=e.dstKey,o=e.model,r=e.dropDir;return t!==o.editorRootTopicKey&&t!==n&&Bb(o,t,n)!==pb&&((n!==o.editorRootTopicKey||"in"===r)&&(o.getTopic(t).parentKey!==n||"in"!==r))},handleTopicDragEnter:function(e){var t=e.dropDir,n=e.topicKey,o=e.controller,r=e.model,c=e.diagramState,i=e.setDiagramState;CO("handleTopicDragEnter:",n,t),o.run("canDrop",Object(m.a)(Object(m.a)({},e),{},{srcKey:r.focusKey,dstKey:n}))&&i(Object(m.a)(Object(m.a)({},c),{},{dragDrop:{targetKey:n,targetDir:t}}))},handleTopicDragLeave:function(e){var t=e.topicKey,n=e.dropDir,o=e.getRef,r=e.ev,c=e.diagramState,i=e.setDiagramState,a=r.nativeEvent.relatedTarget;CO("handleTopicDragLeave:",t,n);var l=o(Hh(t));l==a||l.contains(a)||i(Object(m.a)(Object(m.a)({},c),{},{dragDrop:null}))},handleTopicDrop:function(e){CO("handleTopicDrop");var t=e,n=t.controller,o=t.topicKey,r=t.model,c=t.diagramState,i=t.setDiagramState;e=Object(m.a)(Object(m.a)({},e),{},{srcKey:r.focusKey,dstKey:o}),i(Object(m.a)(Object(m.a)({},c),{},{dragDrop:null})),n.run("canDrop",e)&&n.run("operation",Object(m.a)(Object(m.a)({},e),{},{opType:Db}))}}}function RO(e,t,n,o){var r,c=arguments.length,i=c<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)i=Reflect.decorate(e,t,n,o);else for(var a=e.length-1;a>=0;a--)(r=e[a])&&(i=(c<3?r(i):c>3?r(t,n,i):r(t,n))||i);return c>3&&i&&Object.defineProperty(t,n,i),i}var DO=d.default.div(vy||(vy=Object(Ra.a)(["\n  position: relative;\n  display: flex;\n  align-items: center;\n  padding: 5px;\n"]))),LO=d.default.div(Ty||(Ty=Object(Ra.a)(["\n  width: 100%;\n  height: 100%;\n  background: ",";\n"])),(function(e){return e.theme.background})),IO=function(e){Object(u.a)(n,e);var t=Object(s.a)(n);function n(e){var o;return Object(a.a)(this,n),(o=t.call(this,e)).setZoomFactor=function(e){o.dragScrollWidget.setZoomFactor(e)},o.onWheel=function(e){if(e.altKey||e.ctrlKey){var t=o.props.controller,n=t.run("getZoomFactor",o.props);(n-=e.nativeEvent.deltaY>0?.1:-.1)<.5&&(n=.5),n>4&&(n=4),t.run("setZoomFactor",Object(m.a)(Object(m.a)({},o.props),{},{zoomFactor:n}))}},o}return Object(l.a)(n,[{key:"renderHotkeys",value:function(){var e=this.props,t=e.controller,n=e.model,r=t.run("customizeHotKeys",e);if(null===r)return null;if(!(r.topicHotKeys instanceof Map&&r.globalHotKeys instanceof Map))throw new TypeError("topicHotKeys and globalHotKeys must be a Map");var c=[];return n.focusMode!==ib&&n.focusMode!==ub||r.topicHotKeys.forEach((function(e,t){c.push(Object(o.createElement)(y.j,Object.assign({key:t},e,{global:!0})))})),r.globalHotKeys.forEach((function(e,t){c.push(Object(o.createElement)(y.j,Object.assign({key:t},e,{global:!0})))})),Object(o.createElement)(y.k,null,c)}},{key:"componentDidMount",value:function(){var e=this.props,t=e.getRef,n=e.model;e.controller.run("addZoomFactorChangeEventListener",Object(m.a)(Object(m.a)({},this.props),{},{listener:this.setZoomFactor}));var o=t(Zh(n.editorRootTopicKey)),r=t("node-layer"),c=o.getBoundingClientRect(),i=r.getBoundingClientRect();this.dragScrollWidget.setViewBoxScrollDelta(0,c.top-i.top-this.dragScrollWidget.viewBox.getBoundingClientRect().height/2+c.height),this.layout()}},{key:"componentWillUnmount",value:function(){this.props.controller.run("removeZoomFactorChangeEventListener",Object(m.a)(Object(m.a)({},this.props),{},{listener:this.setZoomFactor}))}},{key:"dragScrollWidget",get:function(){return this.props.getRef(Qh)}},{key:"componentDidUpdate",value:function(){this.props.controller.run("fireEvent",Object(m.a)(Object(m.a)({},this.props),{},{key:og})),this.layout()}},{key:"layout",value:function(){this.props.controller.run("layout",this.props)}},{key:"render",value:function(){var e=this,t=this.props,n=t.saveRef,r=t.model,c=t.controller,i=r.editorRootTopicKey;return Object(o.createElement)(LO,{onWheel:this.onWheel},Object(o.createElement)(lh,Object.assign({},this.state,{enableMouseWheel:!1,zoomFactor:r.zoomFactor,ref:n(Qh)}),(function(t,r){var a=Object(m.a)(Object(m.a)({},e.props),{},{topicKey:i,setViewBoxScroll:t,setViewBoxScrollDelta:r});return Object(o.createElement)(DO,{ref:n("node-layer")},c.run("renderRootWidget",a))})))}}]),n}(o.PureComponent);IO=RO([y.l],IO);var _O=d.default.div(jy||(jy=Object(Ra.a)(["\n  display: flex;\n  flex-direction: column;\n  width: 100%;\n  height: 100%;\n"]))),MO=d.default.div(ky||(ky=Object(Ra.a)(["\n  width: 100%;\n  //height: 100%;\n  overflow: auto;\n  flex-grow: 1;\n  background: ",";\n  position: relative;\n"])),(function(e){return e.theme.background}));function AO(e){var t=e.controller,n=e.saveRef,r=Object(o.useState)(t.run("getInitialDiagramState",e)),c=Object(Ca.a)(r,2),i=c[0],a=c[1],l=Object(m.a)(Object(m.a)({},e),{},{diagramState:i,setDiagramState:a});return Object(o.createElement)(_O,null,t.run("renderToolbar",e),Object(o.createElement)(MO,{ref:n($h)},Object(o.createElement)(IO,Object.assign({},l)),t.run("renderDiagramCustomize",l)))}var NO=Object(d.default)(vh)(Ey||(Ey=Object(Ra.a)(["\n  position: absolute;\n  width: 20%;\n  padding: 0 5px;\n  background: white;\n  left: 30px;\n  top: 20px;\n  border-radius: 2px;\n"]))),FO=d.default.div(xy||(xy=Object(Ra.a)(["\n  max-width: 600px;\n"]))),PO=d.default.span(Sy||(Sy=Object(Ra.a)([""]))),BO=function(e){Object(u.a)(n,e);var t=Object(s.a)(n);function n(e){var r;return Object(a.a)(this,n),(r=t.call(this,e)).setEditorRootTopicKey=function(e){return function(){var t=r.props,n=t.model,o=t.controller;n.editorRootTopicKey!==e&&o.run("operation",Object(m.a)(Object(m.a)({},r.props),{},{opType:Lb,topicKey:e}))}},r.breadcrumbRenderer=function(e){var t=e.text,n=Object(wa.a)(e,oh),r=t.length>8,c=r?t.substr(0,8)+"...":t,i={content:Object(o.createElement)(FO,null,t),position:y.u.BOTTOM_RIGHT},a=Object(o.createElement)(y.b,Object.assign({},n),Object(o.createElement)(PO,null,c));return r?Object(o.createElement)(y.x,Object.assign({},i),a):a},r}return Object(l.a)(n,[{key:"render",value:function(){var e=this.props,t=e.model,n=e.controller,r=e.zIndex,c=t.editorRootTopicKey;if(c===t.rootTopicKey)return null;for(var i=[],a=t.getTopic(c);null!=a;){var l=n.getValue(ig,Object(m.a)(Object(m.a)({},e),{},{topicKey:a.key}));i.unshift({text:l,onClick:this.setEditorRootTopicKey(a.key)}),a=t.getTopic(a.parentKey)}var u={items:i,breadcrumbRenderer:this.breadcrumbRenderer};return Object(o.createElement)(NO,{zIndex:r},Object(o.createElement)(y.c,Object.assign({},u)))}}]),n}(rh),zO=function(e){Object(u.a)(n,e);var t=Object(s.a)(n);function n(){var e;return Object(a.a)(this,n),(e=t.apply(this,arguments)).handleClose=function(){var t=e.props.controller.run("handleActiveModalClose",e.props);t&&t()},e}return Object(l.a)(n,[{key:"render",value:function(){var e=this.props.controller,t=e.run("renderModal",this.props),n=e.run("getActiveModalProps",this.props);return Object(o.createElement)(y.g,{onClose:this.handleClose,isOpen:null!==t,autoFocus:!0,enforceFocus:!0,usePortal:!0,title:n&&n.title,style:n&&n.style},Object(o.createElement)("div",{className:h.a.DIALOG_BODY,style:{minHeight:0}},t))}}]),n}(rh),VO=d.default.svg(Cy||(Cy=Object(Ra.a)(["\n  width: 100%;\n  height: 100%;\n  position: absolute;\n  left: 0;\n  top: 0;\n  z-index: 1;\n  pointer-events: none;\n"]))),HO=b()("node:root-sub-links"),GO=function(e){Object(u.a)(n,e);var t=Object(s.a)(n);function n(){var e;return Object(a.a)(this,n),(e=t.apply(this,arguments)).state={curves:[]},e}return Object(l.a)(n,[{key:"layout",value:function(){var e,t,n,r=this.props,c=r.model,i=r.getRef,a=r.topicKey,l=r.zoomFactor,u=r.controller,s=c.getTopic(a),p=i(Hh(a)),d=i(Yh(a)),f=i(Qh).bigView,b=Jm(p,f,l),y=Jm(d,f,l);e={x:(n=b,(n.left+n.right)/2-y.left),y:Gm(b)-y.top};var h=[];s.subKeys.forEach((function(n){var c,a=u.run("getLinkStyle",Object(m.a)(Object(m.a)({},r),{},{topicKey:n})),s=a.lineType,p=Jm(i(Hh(n)),f,l);if(t={x:(t=p.left>b.right?{x:p.left,y:Gm(p)}:{x:p.right,y:Gm(p)}).x-y.left,y:t.y-y.top},"curve"===s)c="M ".concat(e.x," ").concat(e.y," C ").concat(e.x," ").concat(Um(e,t)," ").concat(Wm(e,t)," ").concat(t.y," ").concat(t.x," ").concat(t.y);else if("line"===s)c="M ".concat(e.x," ").concat(e.y," L ").concat(t.x," ").concat(t.y);else if("round"===s){var d=t.y>e.y?1:-1,g=t.x>e.x?1:-1,O=a.lineRadius;if(null==O)throw new Error("link line type is round, but lineRadius is not provided!");c=t.y===e.y?"M ".concat(e.x," ").concat(e.y," H ").concat(t.x):"M ".concat(e.x," ").concat(e.y,"  V ").concat(t.y-d*O," A ").concat(O," ").concat(O," 0 0 ").concat(d*g===1?0:1," ").concat(e.x+O*g," ").concat(t.y," H ").concat(t.x)}h.push(Object(o.createElement)("path",{key:"link-".concat(n),d:c,strokeWidth:a.lineWidth,stroke:a.lineColor,fill:"none"}))})),this.setState({curves:h})}},{key:"render",value:function(){HO("render");var e=this.props,t=e.topicKey,n=e.saveRef;return Object(o.createElement)(VO,{ref:n(Yh(t))},Object(o.createElement)("g",null,this.state.curves))}}]),n}(rh),WO=b()("RootNode"),UO=d.default.div(wy||(wy=Object(Ra.a)(["\n  display: flex;\n  position: relative;\n\n  align-items: ",";\n  flex-direction: column;\n\n  padding: ",";\n"])),(function(e){return e.topicDirection===Qf?"flex-end":"flex-start"}),(function(e){return e.topicDirection===Qf?"15px 60px 15px 0px":"15px 0px 15px 60px"})),ZO=d.default.div(Ky||(Ky=Object(Ra.a)(["\n  display: flex;\n  position: relative;\n  align-items: center;\n  z-index: 3;\n"]))),JO=function(e){Object(u.a)(n,e);var t=Object(s.a)(n);function n(){return Object(a.a)(this,n),t.apply(this,arguments)}return Object(l.a)(n,[{key:"renderPartTopics",value:function(e,t){var n=this.props,r=n.controller,c=n.saveRef,i=r.run("createSubTopics",Object(m.a)(Object(m.a)({},this.props),{},{dir:t,isRoot:!0,topics:e}));if(!i)return null;var a=i.subTopics,l="bm-layer-".concat(t===Qf?"left":"right");return Object(o.createElement)(UO,{topicDirection:t,ref:c(l)},a)}},{key:"render",value:function(){WO("render");var e=this.props,t=e.model,n=e.topicKey,r=e.saveRef,c=e.controller,i=c.run("getTopicContentStyle",e),a=t.config,l=c.run("renderTopicContent",Object(m.a)(Object(m.a)({},e),{},{topicStyle:i,dir:tb})),u=c.run("getPartTopics",{layout:a.layoutDir,model:t,topicKey:n}),s=Object(o.createElement)(ZO,{ref:r(Zh(n))},l),p=c.run("renderRootWidgetOtherChildren",e);switch(a.layoutDir){case Xf.LEFT_AND_RIGHT:return Object(o.createElement)(o.Fragment,null,this.renderPartTopics(u.L,"L"),s,this.renderPartTopics(u.R,"R"),p);case Xf.LEFT_TO_RIGHT:return Object(o.createElement)(o.Fragment,null,s,this.renderPartTopics(u.R,"R"),p);case Xf.RIGHT_TO_LEFT:return Object(o.createElement)(o.Fragment,null,this.renderPartTopics(u.L,"L"),s,p);case Xf.TOP_TO_BOTTOM:return Object(o.createElement)(o.Fragment,null,s,this.renderPartTopics(u.B,"B"),p)}return null}}]),n}(o.Component),YO=d.default.div(Ry||(Ry=Object(Ra.a)(["\n  position: absolute;\n  top: calc(50% - 10px);\n  ",";\n  border-radius: 50%;\n  width: 20px;\n  height: 20px;\n  text-align: center;\n  //@ts-ignore\n  background: ",";\n  cursor: pointer;\n  padding: 0;\n  font-size: 14px;\n  line-height: 20px;\n  border: 0;\n  z-index: 2;\n"])),(function(e){var t=e.dir;return t===eb?Object(d.css)(Dy||(Dy=Object(Ra.a)(["\n        right: -25px;\n      "]))):t===Qf?Object(d.css)(Ly||(Ly=Object(Ra.a)(["\n        left: -25px;\n      "]))):void 0}),(function(e){return e.background}));function qO(e){var t=e.model,n=e.topicKey,r=e.topicStyle,c=e.dir,i=e.saveRef,a=e.onClickCollapse,l=t.getTopic(n);return l.subKeys.size>0?Object(o.createElement)(YO,{ref:i(qh(n)),onClick:a,background:r.background,dir:c,className:nt()(Object(Sa.a)({icon:!0,iconfont:!0},"bm-".concat(l.collapse?"plus":"minus"),!0))}):null}var XO=b()("node:topic-content2"),$O=d.default.div(Iy||(Iy=Object(Ra.a)(["\n  position: relative;\n"]))),QO=d.default.div(_y||(_y=Object(Ra.a)(["\n  position: absolute;\n  left: 0;\n  top: 0;\n  width: auto;\n  z-index: 10;\n  color: black;\n"]))),ev=function(e){XO("cancelEvent"),e.preventDefault(),e.stopPropagation()};function tv(e){var t,n=e.controller,r=e.model,c=e.topicKey,i=e.getRef,a=r.editingContentKey!==c,l=n.run("renderTopicContentEditor",Object(m.a)(Object(m.a)({},e),{},{readOnly:a}));if(a)t=l;else{var u,s={width:50,height:40},d=i("content-editor-".concat(c));d&&(s=d.getBoundingClientRect());var f=new p.a((function(e,t){var n=e[0].contentRect;u.style.left=(s.width-n.width)/2+"px",u.style.top=(s.height-n.height)/2+"px"}));XO(s),t=Object(o.createElement)(o.Fragment,null,Object(o.createElement)("div",{style:{width:s.width,height:s.height}}),Object(o.createElement)(QO,{ref:function(e){e&&(u=e,f.observe(u))}},l))}return Object(o.createElement)($O,{onDragEnter:ev,onDragOver:ev},t)}var nv=b()("node:topic-content-widget"),ov=d.default.div(My||(My=Object(Ra.a)(["\n  display: flex;\n  align-items: center;\n  cursor: pointer;\n  //overflow: hidden;\n  position: relative;\n"]))),rv=d.default.div(Ay||(Ay=Object(Ra.a)(["\n  position: relative;\n"]))),cv=function(e){Object(u.a)(n,e);var t=Object(s.a)(n);function n(e){var o;return Object(a.a)(this,n),(o=t.call(this,e)).onDragStart=function(e){o.run("handleTopicDragStart",Object(m.a)(Object(m.a)({},o.props),{},{ev:e}))},o.onDragOver=function(e){e.preventDefault()},o.onDragEnter=function(e){nv("onDragEnter",o.props.topicKey),o.run("handleTopicDragEnter",Object(m.a)(Object(m.a)({},o.props),{},{ev:e,dropDir:"in"}))},o.onDragLeave=function(e){o.run("handleTopicDragLeave",Object(m.a)(Object(m.a)({},o.props),{},{ev:e,dropDir:"in"}))},o.onDrop=function(e){nv("onDrop"),o.run("handleTopicDrop",Object(m.a)(Object(m.a)({},o.props),{},{ev:e,dropDir:"in"}))},o.onClick=function(e){var t=o.props.controller;o.handleTopicClickTimeout=setTimeout((function(){t.run("handleTopicClick",Object(m.a)(Object(m.a)({},o.props),{},{ev:e}))}),200)},o.onDoubleClick=function(e){clearTimeout(o.handleTopicClickTimeout),o.props.controller.run("handleTopicDoubleClick",Object(m.a)(Object(m.a)({},o.props),{},{ev:e}))},o.needRelocation=!1,o.onClickCollapse=function(e){e.stopPropagation();var t=o.props,n=t.topicKey,r=t.getRef;o.needRelocation=!0;var c=r(qh(n)).getBoundingClientRect();nv("oldRect",c),o.oldCollapseIconVector=[c.left+c.width/2,c.top+c.height/2],nv("oldCollapseIconVector",o.oldCollapseIconVector),o.operation(yb,o.props)},o.state={dragEnter:!1},o}return Object(l.a)(n,[{key:"renderContextMenu",value:function(){var e=this.props.controller;if(e.getValue(cg,Object(m.a)({},this.props)))return this.operation(jb,Object(m.a)(Object(m.a)({},this.props),{},{focusMode:ub})),e.run("renderTopicContextMenu",this.props)}},{key:"onContextMenuClose",value:function(){}},{key:"componentDidUpdate",value:function(){if(this.needRelocation){var e=this.props,t=e.getRef,n=e.topicKey,o=e.setViewBoxScrollDelta,r=t(qh(n)).getBoundingClientRect(),c=[r.left+r.width/2,r.top+r.height/2];nv("newVector:",c),nv("oldVector:",this.oldCollapseIconVector);var i=[c[0]-this.oldCollapseIconVector[0],c[1]-this.oldCollapseIconVector[1]];nv("vector",i),o(i[0],i[1]),this.needRelocation=!1}}},{key:"render",value:function(){var e=this.props,t=e.saveRef,n=e.topicKey,r=e.model,c=e.controller,i=e.topicStyle,a=e.dir;nv("render",n,r.focusMode);var l=c.run("isOperationEnabled",e)&&r.editingContentKey!==n,u=c.run("renderTopicCollapseIcon",Object(m.a)(Object(m.a)({},e),{},{onClickCollapse:this.onClickCollapse.bind(this)})),s=c.run("renderTopicDropArea",Object(m.a)(Object(m.a)({},e),{},{dropDir:"prev"})),p=c.run("renderTopicDropArea",Object(m.a)(Object(m.a)({},e),{},{dropDir:"next"})),d={onDragEnter:this.onDragEnter,onDragLeave:this.onDragLeave,onDragOver:this.onDragOver,onDrop:this.onDrop};return Object(o.createElement)(rv,null,s,Object(o.createElement)(ov,Object.assign({style:i,draggable:l,ref:t(Hh(n)),onDragStart:this.onDragStart,onClick:this.onClick,onDoubleClick:this.onDoubleClick},d),c.run("renderTopicBlocks",e),c.run("renderTopicContentOthers",e)),p,a!==tb&&u)}}]),n}(rh);cv=RO([y.f],cv);var iv=b()("node:topic-desc"),av=d.default.div(Ny||(Ny=Object(Ra.a)(["\n  overflow: auto;\n"])));function lv(e){var t=e.controller,n=e.model,r=e.topicKey,c=e.getRef,i=n.editingDescKey===r;iv("isEditing",i);var a=n.getTopic(r).getBlock(cb);if(!i&&t.run("isBlockEmpty",Object(m.a)(Object(m.a)({},e),{},{block:a.block})))return null;var l=t.run("renderTopicDescEditor",e),u=c($h),s={maxWidth:"800px",maxHeight:"600px"};if(u){var p=u.getBoundingClientRect();s.maxWidth="".concat(.6*p.width,"px"),s.maxHeight="".concat(.8*p.height,"px")}var d={autoFocus:!1,content:Object(o.createElement)(av,{onClick:Bm,classname:h.a.POPOVER_DISMISS,style:s},l),target:Object(o.createElement)(Oh,{onClick:function(n){n.stopPropagation(),t.run("operation",Object(m.a)(Object(m.a)({},e),{},{opType:Rb}))},className:zh(Ih),tabIndex:-1}),interactionKind:y.t.HOVER,hoverOpenDelay:500};return a.block&&Object(o.createElement)(y.s,Object.assign({},d))}var uv=d.default.svg(Fy||(Fy=Object(Ra.a)(["\n  width: 100%;\n  height: 100%;\n  position: absolute;\n  left: 0;\n  top: 0;\n  z-index: 2;\n  pointer-events: none;\n"]))),sv=function(e){Object(u.a)(n,e);var t=Object(s.a)(n);function n(){var e;return Object(a.a)(this,n),(e=t.apply(this,arguments)).state={content:null},e}return Object(l.a)(n,[{key:"layout",value:function(){var e=this.props,t=e.getRef,n=e.model,r=e.zoomFactor,c=n.focusKey,i=n.focusMode;if(c&&i!==ab){var a=t(Hh(c)),l=t(Qh).bigView,u=t(eg),s=Jm(a,l,r),p=Jm(u,l,r),d=s.left-p.left-3,f=s.top-p.top-3,b=s.width+6,y=s.height+6;this.setState({content:Object(o.createElement)("rect",{x:d,y:f,width:b,height:y,fill:"none",stroke:n.config.theme.highlightColor,strokeWidth:2})})}else this.setState({content:null})}},{key:"render",value:function(){var e=this.props.saveRef;return Object(o.createElement)(uv,{ref:e(eg)},this.state.content)}}]),n}(rh),pv=d.default.svg(Py||(Py=Object(Ra.a)(["\n  width: 100%;\n  height: 100%;\n  position: absolute;\n  left: 0;\n  top: 0;\n  z-index: 1;\n  pointer-events: none;\n"]))),dv=b()("node:topic-sub-links"),fv=function(e){Object(u.a)(n,e);var t=Object(s.a)(n);function n(){var e;return Object(a.a)(this,n),(e=t.apply(this,arguments)).state={curves:[]},e}return Object(l.a)(n,[{key:"layout",value:function(){var e,t,n,r=this.props,c=r.model,i=r.getRef,a=r.topicKey,l=r.dir,u=r.controller,s=u.run("getZoomFactor",r),p=c.getTopic(a),d=i(Hh(a)),f=i(Yh(a)),b=i(qh(a)),y=i(Qh).bigView,h=Jm(f,y,s),g=Jm(b,y,s),O=Jm(d,y,s);dv(a),dv("svgRect",h),dv("collapseRect",g),dv("contentRect",O),l===eb?(e={x:0,y:Gm(O)-h.top},t={x:g.right-h.left+10,y:e.y}):l===Qf&&(e={x:h.right-h.left,y:Gm(O)-h.top},t={x:g.left-h.left-10,y:e.y});var v=[];p.subKeys.forEach((function(c){var a,d=u.run("getLinkStyle",Object(m.a)(Object(m.a)({},r),{},{topicKey:c})),f=i(Hh(c));if(f){var b=Jm(f,y,s);l===eb&&(n={x:b.left-h.left,y:Gm(b)-h.top}),l===Qf&&(n={x:b.right-h.left,y:Gm(b)-h.top});var g=d.lineType;if("curve"===g)a="M ".concat(e.x," ").concat(e.y," L ").concat(t.x," ").concat(t.y," C ").concat(t.x," ").concat(Um(t,n)," ").concat(Wm(t,n)," ").concat(n.y," ").concat(n.x," ").concat(n.y);else if("round"===g){var O=n.y>e.y?1:-1,T=n.x>e.x?1:-1,j=d.lineRadius;a=1===p.subKeys.size||Math.abs(n.y-e.y)<=1?"M ".concat(e.x," ").concat(e.y," L ").concat(n.x," ").concat(n.y):"M ".concat(e.x," ").concat(e.y," H ").concat(t.x," V ").concat(n.y-O*j," A ").concat(j," ").concat(j," 0 0 ").concat(O*T===1?0:1," ").concat(t.x+j*T," ").concat(n.y," H ").concat(n.x)}else"line"===g&&(a="M ".concat(e.x," ").concat(e.y," H ").concat(t.x," L ").concat(n.x," ").concat(n.y));v.push(Object(o.createElement)("path",{key:"link-".concat(c),d:a,strokeWidth:d.lineWidth,stroke:d.lineColor,fill:"none"}))}})),this.setState({curves:v})}},{key:"render",value:function(){var e=this.props,t=e.topicKey,n=e.saveRef;return Object(o.createElement)(pv,{ref:n(Yh(t))},Object(o.createElement)("g",null,this.state.curves))}}]),n}(rh),bv=b()("node:topic-widget"),yv=d.default.div(By||(By=Object(Ra.a)(["\n  display: flex;\n  align-items: center;\n  flex-direction: ",";\n"])),(function(e){return e.topicDirection===eb?"row":"row-reverse"})),hv=d.default.div(zy||(zy=Object(Ra.a)(["\n  position: relative;\n  padding: ",";\n"])),(function(e){return e.dir===eb?"0 0 0 ".concat(e.marginH,"px"):"0 ".concat(e.marginH,"px 0 0")})),gv=d.default.div(Vy||(Vy=Object(Ra.a)(["\n  display: flex;\n  position: relative;\n  align-items: center;\n\n  flex-direction: ",";\n"])),(function(e){return e.topicDirection===eb?"row":"row-reverse"})),mv=function(e){Object(u.a)(n,e);var t=Object(s.a)(n);function n(){return Object(a.a)(this,n),t.apply(this,arguments)}return Object(l.a)(n,[{key:"renderSubTopics",value:function(){var e=this.props,t=e.controller,n=e.model,r=e.topicKey,c=e.dir,i=n.getTopic(r).subKeys.toArray(),a=t.run("createSubTopics",Object(m.a)(Object(m.a)({},e),{},{topics:i}));if(!a)return null;var l=a.subTopics,u=t.run("renderSubLinks",e);return Object(o.createElement)(hv,{dir:c,marginH:n.config.theme.marginH},l," ",u)}},{key:"layoutLinks",value:function(){var e=this.props,t=e.getRef,n=e.topicKey,o=e.model.getTopic(n);if(0!==o.subKeys.size&&!o.collapse){bv("layoutLinks",n);var r=t(Jh(n));r&&r.layout()}}},{key:"render",value:function(){var e=this.props,t=e.controller,n=e.topicKey,r=e.dir,c=e.saveRef;bv("render",n);var i=t.run("getTopicContentStyle",e),a=Object(m.a)(Object(m.a)({},e),{},{topicStyle:i}),l=t.run("renderTopicContent",a);return Object(o.createElement)(yv,{topicDirection:r},Object(o.createElement)(gv,{topicDirection:r,ref:c(Zh(n))},l),this.renderSubTopics())}}]),n}(o.Component),Ov=b()("node:view-port-viewer"),vv=Object(d.default)(vh)(Hy||(Hy=Object(Ra.a)(["\n  position: absolute;\n  background: white;\n  right: 30px;\n  bottom: 20px;\n  border-radius: 2px;\n  display: flex;\n  flex-direction: row;\n  user-select: none;\n"]))),Tv=Object(d.default)(yh)(Gy||(Gy=Object(Ra.a)(["\n  margin: 10px;\n"]))),jv=d.default.span(Wy||(Wy=Object(Ra.a)(["\n  display: inline-block;\n  width: 80px;\n  height: 18px;\n"]))),kv=function(e){return Object(o.createElement)(y.x,{content:e.tooltip,position:g.a.TOP,className:h.a.ICON},Object(o.createElement)(Tv,{onClick:e.onClick,tabIndex:-1},e.children))},Ev=function(e){Object(u.a)(n,e);var t=Object(s.a)(n);function n(e){var o;return Object(a.a)(this,n),(o=t.call(this,e)).zoomFactorChange=function(e){Ov("zoomFactorChange",e),o.setState({zoomFactor:e})},o.onClickResetZoom=function(e){var t=o.props;t.controller.run("setZoomFactor",Object(m.a)(Object(m.a)({},t),{},{zoomFactor:1}))},o.onClickAddZoom=function(e){var t=o.props,n=t.controller,r=n.run("getZoomFactor",t);n.run("setZoomFactor",Object(m.a)(Object(m.a)({},t),{},{zoomFactor:r+.1}))},o.onClickMinusZoom=function(e){var t=o.props,n=t.controller,r=n.run("getZoomFactor",t);n.run("setZoomFactor",Object(m.a)(Object(m.a)({},t),{},{zoomFactor:r-.1}))},o.onClickCollapseAll=function(e){var t=o.props,n=t.controller;n.run("addEventListener",Object(m.a)(Object(m.a)({},t),{},{key:og,listener:o.centerRootTopic,once:!0})),n.run("operation",Object(m.a)(Object(m.a)({},t),{},{opType:hb}))},o.onClickExpandAll=function(e){var t=o.props,n=t.controller;n.run("addEventListener",Object(m.a)(Object(m.a)({},t),{},{key:og,listener:o.centerRootTopic,once:!0})),n.run("operation",Object(m.a)(Object(m.a)({},t),{},{opType:gb}))},o.centerRootTopic=function(){var e=o.props,t=e.model;e.controller.run("moveTopicToCenter",Object(m.a)(Object(m.a)({},o.props),{},{topicKey:t.editorRootTopicKey}))},o}return Object(l.a)(n,[{key:"componentDidMount",value:function(){var e=this.props;e.controller.run("addZoomFactorChangeEventListener",Object(m.a)(Object(m.a)({},e),{},{listener:this.zoomFactorChange}))}},{key:"componentWillUnmount",value:function(){var e=this.props;e.controller.run("removeZoomFactorChangeEventListener",Object(m.a)(Object(m.a)({},e),{},{listener:this.zoomFactorChange}))}},{key:"render",value:function(){Ov("render");var e=this.props,t=e.controller,n=e.zIndex,r=t.run("getZoomFactor",e);return Object(o.createElement)(vv,{zIndex:n},Object(o.createElement)(kv,{onClick:this.onClickCollapseAll,tooltip:Hm(e,Om)},Vh(Ah)),Object(o.createElement)(kv,{onClick:this.onClickExpandAll,tooltip:Hm(e,vm)},Vh(Nh)),Object(o.createElement)(kv,{onClick:this.centerRootTopic,tooltip:Hm(e,Tm)},Vh(Fh)),Object(o.createElement)(kv,{onClick:this.onClickMinusZoom,tooltip:Hm(e,km)},Vh(Mh)),Object(o.createElement)(kv,{onClick:this.onClickResetZoom,tooltip:Hm(e,xm)},Object(o.createElement)(jv,null,"".concat(Hm(e,jm),":").concat(Math.floor(100*r),"%"))),Object(o.createElement)(kv,{onClick:this.onClickAddZoom,tooltip:Hm(e,Em)},Vh(_h)))}}]),n}(rh),xv=d.default.div(Uy||(Uy=Object(Ra.a)(["\n  overflow: auto;\n  padding: 0px 0px 0px 20px;\n  background: #88888850;\n"])));function Sv(e){var t=e.controller,n=e.model,r=e.topicKey;if(n.focusMode===lb){var c=t.run("renderTopicDescEditor",e);return Object(o.createElement)(y.i,{key:"drawer",title:Hm(e,vg),icon:Vh("note"),isOpen:!0,hasBackdrop:!0,backdropProps:{onMouseDown:Bm},isCloseButtonShown:!1,onClose:function(n){n.stopPropagation();var o="topic-desc-data-".concat(r),c=t.run("deleteTempValue",{key:o});t.run("operation",Object(m.a)(Object(m.a)({},e),{},{opType:Cb,topicKey:r,blockType:cb,data:c,focusMode:ib}))},size:"70%"},Object(o.createElement)(xv,null,c))}}function Cv(e){var t=e.theme,n=e.children;return Object(o.createElement)(d.ThemeProvider,{theme:t},Object(o.createElement)(o.Fragment,null,n))}var wv=b()("plugin:rendering");function Kv(){var e;return{getDiagramProps:function(){return e},renderDiagram:function(t){var n=t.model;return Object(o.createElement)(sh,null,(function(r,c,i){return e=Object(m.a)(Object(m.a)({},t),{},{saveRef:r,getRef:c,deleteRef:i}),wv("renderDiagram",n),Object(o.createElement)(Cv,{theme:n.config.theme},Object(o.createElement)(AO,e))}))},renderDrawer:Sv,getInitialDiagramState:function(e){return{rightTopPanel:{isOpen:!1,selectedTabId:"topic-style"}}},renderDiagramCustomize:function(e){var t=e.controller,n=e.model,o=t.getValue(rg),r=Object(m.a)(Object(m.a)({},e),{},{zIndex:o,topicKey:n.focusKey});return[t.run("renderEditorRootBreadcrumbs",r),t.run("renderRightTopPanel",r),t.run("renderModals",Object(m.a)(Object(m.a)({},r),{},{zIndex:o+1})),t.run("renderDrawer",Object(m.a)(Object(m.a)({},r),{},{zIndex:o+1})),t.run("renderViewPortViewer",r)]},renderEditorRootBreadcrumbs:function(e){return Object(o.createElement)(BO,Object.assign({key:"EditorRootBreadcrumbs"},e))},renderModals:function(e){return Object(o.createElement)(zO,Object.assign({key:"modals"},e))},renderModal:function(e){return null},getActiveModalProps:function(e){return null},renderDoc:function(e){return e.children},renderRootWidget:function(e){return Object(o.createElement)(JO,Object.assign({},e))},renderTopicWidget:function(e){return Object(o.createElement)(mv,Object.assign({},e))},renderTopicContent:function(e){return Object(o.createElement)(cv,Object.assign({},e))},renderTopicCollapseIcon:function(e){return Object(o.createElement)(qO,Object.assign({},e))},renderTopicContentOthers:function(e){return[]},renderTopicBlocks:function(e){var t=e.model,n=e.topicKey,r=e.controller,c=t.getTopic(n).blocks,i=[],a=0;return c.forEach((function(t){var n=r.run("renderTopicBlock",Object(m.a)(Object(m.a)({},e),{},{block:t,blockKey:"block-".concat(a)}));n&&(i.push(Object(o.createElement)(o.Fragment,{key:"block-".concat(a)},n)),a++)})),i},renderTopicBlock:function(e){var t=e.controller;switch(e.block.type){case rb:return t.run("renderTopicBlockContent",e);case cb:return t.run("renderTopicBlockDesc",e)}return null},renderTopicBlockContent:function(e){return Object(o.createElement)(tv,Object.assign({},e))},renderTopicBlockDesc:function(e){return Object(o.createElement)(lv,Object.assign({},e))},renderSubLinks:function(e){var t=e.saveRef,n=e.topicKey,r=e.model.getTopic(n);return 0===r.subKeys.size||r.collapse?null:Object(o.createElement)(fv,Object.assign({ref:t(Jh(n))},e))},renderRootSubLinks:function(e){var t=e.saveRef,n=e.topicKey;return Object(o.createElement)(GO,Object.assign({ref:t(Jh(n))},e))},renderFocusItemHighlight:function(e){var t=e.saveRef;return Object(o.createElement)(sv,Object.assign({ref:t(tg)},e))},renderRootWidgetOtherChildren:function(e){var t=e.controller,n=t.run("getZoomFactor",e);return e=Object(m.a)(Object(m.a)({},e),{},{zoomFactor:n}),Object(o.createElement)(o.Fragment,null,t.run("renderRootSubLinks",e),t.run("renderFocusItemHighlight",e),t.run("renderDragAndDropEffect",e))},renderViewPortViewer:function(e){return Object(o.createElement)(Ev,Object.assign({key:"view-port-viewer"},e))}}}var Rv=Object(d.default)(vh)(Zy||(Zy=Object(Ra.a)(["\n  position: absolute;\n  background: white;\n  right: 30px;\n  top: 20px;\n  border-radius: 2px;\n  user-select: none;\n"]))),Dv=Object(d.default)(y.w)(Jy||(Jy=Object(Ra.a)(["\n  padding: 0px 10px;\n"])));function Lv(e){var t=e.controller,n=e.zIndex,r=e.diagramState,c=e.setDiagramState,i=r.rightTopPanel,a=i.isOpen,l=i.selectedTabId,u=function(e){c(Object(m.a)(Object(m.a)({},r),{},{rightTopPanel:Object(m.a)(Object(m.a)({},i),e)}))};if(!a)return Object(o.createElement)(Rv,{zIndex:n},Object(o.createElement)(bh,{onClick:function(){u({isOpen:!0})}},Object(o.createElement)(fh,{className:zh(Rh)})));return Object(o.createElement)(Rv,{zIndex:n},Object(o.createElement)(mh,null,Object(o.createElement)(gh,{className:zh(Dh),onClick:function(){u({isOpen:!1})}})),Object(o.createElement)(Dv,{id:"tabs",selectedTabId:l,onChange:function(e){u({selectedTabId:e})}},t.run("renderRightTopPanelTabs",e)))}var Iv=Object(v.a)(Array(7).keys()),_v=[0,5,10,15,20,25,30,35],Mv=["none","solid","dotted","dashed","double"];function Av(e){var t=e.contentStyle,n=e.setContentStyle;return Object(o.createElement)(qm,null,Object(o.createElement)(kh,null,Hm(e,tm)),Object(o.createElement)(Ch,null,Object(o.createElement)(tO,{text:"".concat(Hm(e,nm),": ").concat(t.borderWidth?t.borderWidth:Hm(e,dg)),items:Iv,itemRenderer:nO("px"),onItemSelect:function(e){n({borderWidth:"".concat(e,"px")})}}),Object(o.createElement)(tO,{text:"".concat(Hm(e,Sg),": ").concat(t.borderStyle?Hm(e,t.borderStyle):Hm(e,pm)),items:Mv,itemRenderer:oO(e),onItemSelect:function(e){n({borderStyle:e})}}),Object(o.createElement)(tO,{text:"".concat(Hm(e,om),": ").concat(t.borderRadius),items:_v,itemRenderer:nO("px"),onItemSelect:function(e){n({borderRadius:"".concat(e,"px")})}}),Object(o.createElement)(Xm,{color:t.borderColor,handleColorChange:function(e){n({borderColor:e})}})))}var Nv=["curve","round","line"];function Fv(e){var t=e.showLinkStyle,n=void 0===t||t,r=e.showSubLinkStyle,c=void 0===r||r,i=e.linkStyle,a=void 0===i?{}:i,l=e.subLinkStyle,u=void 0===l?{}:l,s=e.setLinkStyle,p=e.setSubLinkStyle;return Object(o.createElement)(qm,null,Object(o.createElement)(kh,null,Hm(e,wg)),n&&Object(o.createElement)(Ch,{alignItems:"center"},Object(o.createElement)(dh,{margin:"0 5px 0 0"},Hm(e,Kg)+":"," "),Object(o.createElement)(tO,{text:"".concat(Hm(e,nm),": ").concat(a?a.lineWidth:"0px"),items:rO,itemRenderer:nO("px"),onItemSelect:function(e){s({lineWidth:"".concat(e,"px")})}}),Object(o.createElement)(tO,{text:"".concat(Hm(e,Mg),": ").concat(Hm(e,a.lineType)),items:Nv,itemRenderer:oO(e),onItemSelect:function(e){s({lineType:e})}}),Object(o.createElement)(Xm,{color:a.lineColor,handleColorChange:function(e){s({lineColor:e})}})),c&&Object(o.createElement)(Ch,{alignItems:"center"},Object(o.createElement)(dh,{margin:"0 5px 0 0"},Hm(e,Rg)+": "),Object(o.createElement)(tO,{text:"".concat(Hm(e,nm),": ").concat(u?u.lineWidth:"0px"),items:rO,itemRenderer:nO("px"),onItemSelect:function(e){p({lineWidth:"".concat(e,"px")})}}),Object(o.createElement)(tO,{text:"".concat(Hm(e,Mg),": ").concat(Hm(e,u.lineType)),items:Nv,itemRenderer:oO(e),onItemSelect:function(e){p({lineType:e})}}),Object(o.createElement)(Xm,{color:u.lineColor,handleColorChange:function(e){p({lineColor:e})}})))}function Pv(e){var t=e.contentStyle,n=e.setContentStyle,r={title:"".concat(Hm(e,rm),":"),min:12,max:100,value:parseInt(t.fontSize),style:{width:50},onValueChange:function(e){n({fontSize:e})}},c={title:"".concat(Hm(e,cm),":"),style:{width:50},value:t.lineHeight||"",onChange:function(e){n({lineHeight:e.target.value})}};return Object(o.createElement)(qm,null,Object(o.createElement)(kh,null,Hm(e,Cg)),Object(o.createElement)(ph,null,Object(o.createElement)(Qm,Object.assign({},r)),Object(o.createElement)(eO,Object.assign({},c)),Object(o.createElement)(Xm,{color:t.color,handleColorChange:function(e){n({color:e})}})))}var Bv,zv=b()("node:style-editor");function Vv(e){var t=e.controller,n=e.model,r=e.topicKey,c=n.getTopic(r),i=function(n){t.run("setTopicContentStyle",Object(m.a)(Object(m.a)({},e),{},{style:n}))};if(!n.focusKey)return null;var a=t.run("getTopicContentStyle",e),l=t.run("getLinkStyle",e),u=t.run("getSubLinkStyle",e),s=Object(m.a)(Object(m.a)({},e),{},{linkStyle:l,subLinkStyle:u,setLinkStyle:function(n){t.run("setLinkStyle",Object(m.a)(Object(m.a)({},e),{},{linkStyle:n}))},setSubLinkStyle:function(n){t.run("setSubLinkStyle",Object(m.a)(Object(m.a)({},e),{},{subLinkStyle:n}))}}),p=Object(m.a)(Object(m.a)({},e),{},{contentStyle:a,setContentStyle:i});return Object(o.createElement)(Th,null,Object(o.createElement)(Av,Object.assign({},p)),Object(o.createElement)(Pv,Object.assign({},p)),Object(o.createElement)(qm,null,Object(o.createElement)(kh,null,Hm(e,Qg)),Object(o.createElement)(Xm,{color:a.background,handleColorChange:function(e){i({background:e})}})),Object(o.createElement)(Fv,Object.assign({},s)),Object(o.createElement)(qm,null,Object(o.createElement)($m,{title:Hm(e,Ig),onClick:function(){c.style&&t.run("operation",Object(m.a)(Object(m.a)({},e),{},{opType:Eb,style:null}))}}),Object(o.createElement)($m,{title:Hm(e,Dg),onClick:function(){Bv=t.run("getTopicStyle",e),zv(Bv)}}),Object(o.createElement)($m,{title:Hm(e,Lg),onClick:function(){Bv&&t.run("operation",Object(m.a)(Object(m.a)({},e),{},{opType:Eb,style:JSON.stringify(Bv)}))}})),function(e){var t=e.controller;return Object(o.createElement)(qm,null,Object(o.createElement)(Eh,null,Object(o.createElement)(y.d,{onClick:function(n){t.run("operation",Object(m.a)(Object(m.a)({},e),{},{opType:xb}))}},Hm(e,_g))))}(e))}var Hv=n(109);function Gv(e){var t=e.contentStyle,n=e.setContentStyle,r=Hv("padding",t.padding||"0"),c={layout:"v",min:0,max:99,style:{width:38}},i=parseInt(r["padding-top"]),a=parseInt(r["padding-right"]),l=parseInt(r["padding-bottom"]),u=parseInt(r["padding-left"]),s={top:i,right:a,bottom:l,left:u},p=function(e){return function(t){n({padding:Vm(Object(m.a)(Object(m.a)({},s),{},Object(Sa.a)({},e,t)))})}},d=Object(m.a)(Object(m.a)({},c),{},{title:Hm(e,am),value:i,onValueChange:p("top")}),f=Object(m.a)(Object(m.a)({},c),{},{title:Hm(e,sm),value:a,onValueChange:p("right")}),b=Object(m.a)(Object(m.a)({},c),{},{title:Hm(e,lm),value:l,onValueChange:p("bottom")}),y=Object(m.a)(Object(m.a)({},c),{},{title:Hm(e,um),value:u,onValueChange:p("left")});return Object(o.createElement)(qm,null,Object(o.createElement)(kh,null,Hm(e,im)),Object(o.createElement)(Ch,null,Object(o.createElement)(Qm,Object.assign({},d)),Object(o.createElement)(Qm,Object.assign({},f)),Object(o.createElement)(Qm,Object.assign({},b)),Object(o.createElement)(Qm,Object.assign({},y))))}var Wv=d.default.div(Yy||(Yy=Object(Ra.a)(["\n  height: 250px;\n  overflow: auto;\n"])));function Uv(e){var t=e.topicStyle,n=e.setTopicStyle,r=t.contentStyle,c=void 0===r?{}:r,i=t.linkStyle,a=void 0===i?{}:i,l=t.subLinkStyle,u=void 0===l?{}:l,s=function(e){n({contentStyle:e})},p=Object(m.a)(Object(m.a)({},e),{},{contentStyle:c,setContentStyle:s}),d=Object(m.a)(Object(m.a)({},e),{},{showLinkStyle:!1,linkStyle:a,subLinkStyle:u,setLinkStyle:function(e){n({linkStyle:e})},setSubLinkStyle:function(e){n({subLinkStyle:e})}});return Object(o.createElement)(Wv,null,Object(o.createElement)(Av,Object.assign({},p)),Object(o.createElement)(Gv,Object.assign({},p)),Object(o.createElement)(Pv,Object.assign({},p)),Object(o.createElement)(qm,null,Object(o.createElement)(kh,null,Hm(e,Qg)),Object(o.createElement)(Xm,{color:c.background,handleColorChange:function(e){s({background:e})}})),Object(o.createElement)(Fv,Object.assign({},d)))}b()("node:theme-editor");var Zv="normal";function Jv(e){var t,n=Object(o.useState)(!1),r=Object(Ca.a)(n,2),c=r[0],i=r[1],a=e.model,l=e.controller,u=Object(ct.cloneDeep)(a.config.theme),s=l.run("getThemeOfTopic",Object(m.a)(Object(m.a)({},e),{},{isClone:!0})),p=s.rootTopic,d=s.primaryTopic,f=s.normalTopic,b=function(t){l.run("operation",Object(m.a)(Object(m.a)({},e),{},{opType:Sb,theme:t}))},h=(t=function(e){b(Object(ct.merge)(u,{randomColor:e}))},function(e){return t(e.target.checked)}),g=Object(m.a)(Object(m.a)({},e),{},{topicStyle:p,setTopicStyle:function(e){b(Object(ct.merge)(u,{rootTopic:e}))}}),O=Object(o.createElement)(Uv,Object.assign({},g)),v=Object(m.a)(Object(m.a)({},e),{},{topicStyle:d,setTopicStyle:function(e){b(Object(ct.merge)(u,{primaryTopic:e}))}}),T=Object(o.createElement)(Uv,Object.assign({},v)),j=Object(m.a)(Object(m.a)({},e),{},{topicStyle:f,setTopicStyle:function(e){b(Object(ct.merge)(u,{normalTopic:e}))}}),k=Object(o.createElement)(Uv,Object.assign({},j)),E={id:Zv,handleTabIdChange:function(e){Zv=e}},x=Object(o.createElement)(xh,null,Object(o.createElement)(y.w,Object.assign({},E),Object(o.createElement)(y.v,{id:"normal",title:Hm(e,Bg),panel:k}),Object(o.createElement)(y.v,{id:"primary",title:Hm(e,zg),panel:T}),Object(o.createElement)(y.v,{id:"root",title:Hm(e,Vg),panel:O}))),S={isOpen:c,onClose:function(e){i(!1)}},C=Object(o.createElement)(y.a,Object.assign({},S),Object(o.createElement)("p",null,"File format error"));return Object(o.createElement)(Th,null,Object(o.createElement)(qm,null,Object(o.createElement)(kh,null,Hm(e,Ng)),Object(o.createElement)(Ch,null,Object(o.createElement)(Sh,null,Hm(e,Qg)+":"),Object(o.createElement)(Xm,{color:u.background,handleColorChange:function(e){b(Object(ct.merge)(u,{background:e}))}}),Object(o.createElement)(Sh,null,Hm(e,Fg)+":"),Object(o.createElement)(Xm,{color:u.highlightColor,handleColorChange:function(e){b(Object(ct.merge)(u,{highlightColor:e}))}}),Object(o.createElement)(Sh,null,Hm(e,Pg)+":"),Object(o.createElement)(hh,{checked:u.randomColor,onChange:h}))),x,Object(o.createElement)(qm,null,Object(o.createElement)($m,{title:Hm(e,Hg),onClick:function(e){zm(JSON.stringify(u),"blink-mind-theme.json")}}),Object(o.createElement)($m,{title:Hm(e,Gg),onClick:function(e){(function(e){var t=document.createElement("input");return t.type="file",t.accept=e,new Promise((function(e,n){t.addEventListener("change",(function(t){var o=t.target.files[0],r=new FileReader;r.onload=function(t){var n=t.target.result;e(n)},r.onerror=function(e){n(e.target.error)},r.readAsText(o)})),t.click()}))})(".json,.txt").then((function(e){var t,n=JSON.parse(e);null!=(t=n).name&&null!=t.background&&null!=t.highlightColor?b(n):i(!0)}))}})),C)}function Yv(){return{renderRightTopPanel:function(e){var t=Object(m.a)(Object(m.a)({},e),{},{key:"right-top-panel"});return Object(o.createElement)(Lv,Object.assign({},t))},renderRightTopPanelTabs:function(e){var t=e.controller;return[t.run("renderTopicStyleEditor",e),t.run("renderThemeEditor",e)]},renderTopicStyleEditor:function(e){var t={id:"topic-style",key:"topic-style",title:Hm(e,xg),panel:Object(o.createElement)(Vv,Object.assign({},e))};return Object(o.createElement)(y.v,Object.assign({},t))},renderThemeEditor:function(e){var t={id:"theme-editor",key:"theme-editor",title:Hm(e,Ag),panel:Object(o.createElement)(Jv,Object.assign({},e))};return Object(o.createElement)(y.v,Object.assign({},t))}}}var qv=d.default.div(qy||(qy=Object(Ra.a)(["\n  box-shadow: rgb(170, 170, 170) 0 0 2px;\n  background: white;\n  .iconfont {\n    font-size: 28px !important;\n  }\n"])));function Xv(e){var t=e.controller;return Object(o.createElement)(qv,null,t.run("renderToolbarItems",e))}function $v(e){var t=[[Xf.LEFT_AND_RIGHT,Hm(e,bg),"layout-left-and-right"],[Xf.LEFT_TO_RIGHT,Hm(e,hg),"layout-right"],[Xf.RIGHT_TO_LEFT,Hm(e,yg),"layout-left"]];return Object(o.createElement)(iO,Object.assign({className:zh(Bh)},e),Object(o.createElement)(y.s,{enforceFocus:!1},Object(o.createElement)(jh,null),Object(o.createElement)(y.n,null,t.map((function(t){return Object(o.createElement)(y.p,{key:t[1],icon:Vh(t[2]),text:t[1],onClick:(n=t[0],function(t){e.controller.run("operation",Object(m.a)(Object(m.a)({},e),{},{opType:Ib,layoutDir:n}))})});var n})))))}function Qv(){return{renderToolbar:function(e){return Object(o.createElement)(Xv,Object.assign({},e))},renderToolbarItems:function(e){var t=e.controller.run("customizeToolbar",e);return t.sort((function(e,t){return e.order-t.order})),t.map((function(t){return Object(o.createElement)(t.element,Object(m.a)(Object(m.a)({},e),{},{key:t.order.toString()}))}))},customizeToolbar:function(e){return[{order:100,element:$v}]}}}var eT=b()("plugin:utils");function tT(){var e=new Map,t=new Map;return{addTempValueChangeListener:function(e){var n=e.key,o=e.listener;t.has(n)||t.set(n,[]),t.get(n).push(o)},removeTempValueChangeListener:function(e){var n=e.key,o=e.listener;t.has(n)&&(t[n]=t.get(n).filter((function(e){return e!==o})))},getTempValue:function(t){var n=t.key;return eT("getTempValue",n),e.get(n)},setTempValue:function(n){var o=n.key,r=n.value;if(eT("setTempValue",o),e.set(o,r),t.has(o)){var c,i=t.get(o),a=Object(O.a)(i);try{for(a.s();!(c=a.n()).done;){(0,c.value)(r)}}catch(l){a.e(l)}finally{a.f()}}},deleteTempValue:function(t){var n=t.key;eT("deleteTempValue",n);var o=e.get(n);return e.delete(n),o}}}function nT(){return[Kv(),tT(),kO(),Yv(),Qv(),KO()]}var oT=b()("node:text-editor"),rT=d.default.div(Xy||(Xy=Object(Ra.a)(["\n  padding: 6px;\n  background-color: ",";\n  cursor: ",";\n  min-width: 50px;\n"])),(function(e){return e.readOnly?null:"white"}),(function(e){return e.readOnly?"pointer":"text"})),cT=function(e){Object(u.a)(n,e);var t=Object(s.a)(n);function n(e){var o;return Object(a.a)(this,n),(o=t.call(this,e)).state={content:null},o.onMouseDown=function(e){e.stopPropagation()},o.onMouseMove=function(e){},o.onKeyDown=function(e){},o._handleClick=function(e){!o.root.contains(e.target)&&o.onClickOutSide(e)},o.rootRef=function(e){return function(t){e(t),o.root=t}},o.initState(),o}return Object(l.a)(n,[{key:"onChange",value:function(e){var t=e.value;oT("onChange",t),this.setState({content:t})}},{key:"componentDidMount",value:function(){this.props.readOnly||document.addEventListener("click",this._handleClick)}},{key:"componentWillUnmount",value:function(){this.props.readOnly||document.removeEventListener("click",this._handleClick)}},{key:"onClickOutSide",value:function(e){}},{key:"getCustomizeProps",value:function(){return null}},{key:"getContent",value:function(){var e=this.getCustomizeProps().block.data;return null==e?null:("string"===typeof e&&(e=Ne.a.deserialize(e)),e)}},{key:"initState",value:function(){var e=this.getContent();this.state={content:e}}},{key:"render",value:function(){var e=this.props,t=e.topicKey,n=e.saveRef,r=this.getCustomizeProps(),c=r.readOnly,i=r.getRefKeyFunc,a=r.placeholder,l=r.style;oT(c);var u=i(t),s=c?this.getContent():this.state.content,p=this.onMouseDown,d=this.onMouseMove,f=this.onKeyDown,b={value:s,readOnly:c,onChange:this.onChange.bind(this),placeholder:a,style:l},y={key:u,readOnly:c,ref:this.rootRef(n(u)),onMouseDown:p,onMouseMove:d,onKeyDown:f};return Object(o.createElement)(rT,Object.assign({},y),Object(o.createElement)(Fe.Editor,Object.assign({},b,{autoFocus:!0})))}}]),n}(o.PureComponent),iT=b()("node:topic-content-editor");function aT(e){return"content-editor-".concat(e)}var lT=function(e){Object(u.a)(n,e);var t=Object(s.a)(n);function n(e){var o;return Object(a.a)(this,n),(o=t.call(this,e)).onKeyDown=function(e){e.nativeEvent.ctrlKey&&"Enter"===e.nativeEvent.code&&o.save()},o}return Object(l.a)(n,[{key:"getCustomizeProps",value:function(){var e=this.props,t=e.model,n=e.topicKey,o=e.readOnly;return{block:t.getTopic(n).getBlock(rb).block,readOnly:o,getRefKeyFunc:aT,placeholder:"new",style:{whiteSpace:"pre"}}}},{key:"onClickOutSide",value:function(e){iT("onClickOutSide"),this.save()}},{key:"save",value:function(){var e=this.props,t=e.model,n=e.topicKey;t.editingContentKey!==n||this.props.controller.run("operation",Object(m.a)(Object(m.a)({},this.props),{},{opType:Cb,blockType:rb,data:this.state.content,focusMode:ib}))}}]),n}(cT),uT=b()("node:topic-desc-editor");function sT(e){return"desc-editor-".concat(e)}var pT=function(e){Object(u.a)(n,e);var t=Object(s.a)(n);function n(e){var o;return Object(a.a)(this,n),o=t.call(this,e),uT("constructor"),o}return Object(l.a)(n,[{key:"initState",value:function(){Object(Ea.a)(Object(xa.a)(n.prototype),"initState",this).call(this);var e=this.props,t=e.controller,o=e.topicKey,r="topic-desc-data-".concat(o),c=this.state.content;t.run("setTempValue",{key:r,value:c})}},{key:"getCustomizeProps",value:function(){var e=this.props,t=e.model,n=e.topicKey;return{block:t.getTopic(n).getBlock(cb).block,readOnly:t.editingDescKey!==n,getRefKeyFunc:sT,placeholder:"write topic notes here"}}},{key:"onChange",value:function(e){var t=e.value;uT("onChange");var n=this.props,o=n.controller,r=n.topicKey;if(!(n.model.editingDescKey!==r)){var c="topic-desc-data-".concat(r);o.run("setTempValue",{key:c,value:t}),this.setState({content:t})}}}]),n}(cT);var dT=b()("plugin:StylePlugin");function fT(){var e=new Map,t=0;return{getTopicStyle:function(e){var t=e.controller;return{contentStyle:t.run("getTopicContentStyle",e),linkStyle:t.run("getLinkStyle",e),subLinkStyle:t.run("getSubLinkStyle",e)}},getTopicContentStyle:function(e){var t=e.topicKey,n=e.model,o=e.controller;dT("getTopicContentStyle:",t,n);var r,c=n.getTopicVisualLevel(t),i=n.config.theme;if(r=c===nb?i.rootTopic:c===ob?i.primaryTopic:i.normalTopic,r=Object(m.a)(Object(m.a)({},i.contentStyle),r.contentStyle),i.randomColor){var a=o.run("getRandomColor",e);r=Object(m.a)(Object(m.a)({},r),{},{background:a,borderColor:a,subLinkStyle:Object(m.a)(Object(m.a)({},r.subLinkStyle),{},{lineColor:a})})}var l=n.getTopic(t);if(!l.style)return r;var u=JSON.parse(l.style);return Object(m.a)(Object(m.a)({},r),u.contentStyle)},getLinkStyle:function(e){var t=e.topicKey,n=e.model,o=e.controller;dT("getLinkStyle",t);var r,c=n.getTopicVisualLevel(t),i=n.config.theme,a=i.linkStyle;r=c===nb?i.rootTopic.linkStyle:c===ob?i.primaryTopic.linkStyle:i.normalTopic.linkStyle,a=Object(m.a)(Object(m.a)({},a),r);var l=n.getTopic(t);if(null!=l.parentKey){var u=o.run("getSubLinkStyle",Object(m.a)(Object(m.a)({},e),{},{topicKey:l.parentKey}));a=Object(m.a)(Object(m.a)({},a),u)}if(!l.style)return a;var s=JSON.parse(l.style);return Object(m.a)(Object(m.a)({},a),s.linkStyle)},getSubLinkStyle:function(e){var t=e.topicKey,n=e.model,o=e.controller;dT("getLinkStyle",t);var r,c=n.getTopicVisualLevel(t),i=n.config.theme,a=i.linkStyle;r=c===nb?i.rootTopic.subLinkStyle:c===ob?i.primaryTopic.subLinkStyle:i.normalTopic.subLinkStyle,a=Object(m.a)(Object(m.a)({},a),r);var l=n.getTopic(t);if(i.randomColor){var u=o.run("getRandomColor",e);dT(u),a=Object(m.a)(Object(m.a)({},a),{},{lineColor:u})}if(!l.style)return a;var s=JSON.parse(l.style);return Object(m.a)(Object(m.a)({},a),s.subLinkStyle)},setTopicContentStyle:function(e){var t=e.topicKey,n=e.controller,o=e.style,r=e.model.getTopic(t).style,c=r?JSON.parse(r):{},i=Object(m.a)(Object(m.a)({},c),{},{contentStyle:Object(m.a)(Object(m.a)({},c.contentStyle),o)});if(!Object(ct.isEqual)(c,i)){var a=JSON.stringify(i);n.run("operation",Object(m.a)(Object(m.a)({},e),{},{opType:Eb,style:a}))}},setLinkStyle:function(e){var t=e.topicKey,n=e.controller,o=e.linkStyle,r=e.model.getTopic(t).style,c=r?JSON.parse(r):{},i=Object(m.a)(Object(m.a)({},c),{},{linkStyle:Object(m.a)(Object(m.a)({},c.linkStyle),o)});if(!Object(ct.isEqual)(c,i)){var a=JSON.stringify(i);n.run("operation",Object(m.a)(Object(m.a)({},e),{},{opType:Eb,style:a}))}},setSubLinkStyle:function(e){var t=e.topicKey,n=e.controller,o=e.subLinkStyle,r=e.model.getTopic(t).style,c=r?JSON.parse(r):{},i=Object(m.a)(Object(m.a)({},c),{},{subLinkStyle:Object(m.a)(Object(m.a)({},c.subLinkStyle),o)});if(!Object(ct.isEqual)(c,i)){var a=JSON.stringify(i);n.run("operation",Object(m.a)(Object(m.a)({},e),{},{opType:Eb,style:a}))}},getTopicThemeStyle:function(e){var t=e.topicKey,n=e.model,o=n.getTopicVisualLevel(t),r=n.config.theme;return o===nb?r.rootTopic:o===ob?r.primaryTopic:r.normalTopic},getRandomColor:function(n){var o=n.topicKey;if(e.has(o))return e.get(o);var r=["#00CC99","#FFEE88","#A167A5","#E5F993","#F5C396","#DB995A","#83BCFF","#ED7B84","#739E82","#D3BCC0","#FFA0FD","#EFD3D7","#C6878F"],c=r[++t%r.length];return e.set(o,c),dT("getRandomColor",o,c),c}}}function bT(){return[nT(),{getPartTopics:function(e){var t=e.layout,n=e.model,o=e.topicKey,r=n.getTopic(o),c=r.subKeys.size,i=r.subKeys.toArray();switch(t){case Xf.LEFT_TO_RIGHT:return{R:i};case Xf.RIGHT_TO_LEFT:return{L:i};case Xf.LEFT_AND_RIGHT:return{L:i.slice(Math.ceil(c/2),c),R:i.slice(0,Math.ceil(c/2))};case Xf.TOP_TO_BOTTOM:return{B:i}}},createSubTopics:function(e){var t=e.model,n=e.topicKey,o=e.controller,r=e.topics,c=e.saveRef,i=t.getTopic(n);if(0===r.size||i.collapse)return null;var a=[];return r.forEach((function(t){var n=Object(m.a)(Object(m.a)({},e),{},{topicKey:t,key:t,ref:c(Uh(t))});a.push(o.run("renderTopicWidget",n))})),{subTopics:a}},layout:function(e){var t=e.getRef,n=e.model,o=t(Jh(n.editorRootTopicKey)),r=t(tg),c=t(ng);o&&o.layout(),r&&r.layout(),c&&c.layout(),function e(o){if(o.key!==n.editorRootTopicKey){var r=t(Uh(o.key));r&&r.layoutLinks()}if(!o.collapse){var c,i=Object(O.a)(o.subKeys);try{for(i.s();!(c=i.n()).done;){var a=c.value;e(n.getTopic(a))}}catch(l){i.e(l)}finally{i.f()}}}(n.getTopic(n.editorRootTopicKey))},getRelativeRect:function(e){var t=e.element,n=e.controller,o=e.getRef,r=n.run("getZoomFactor",e);return Jm(t,o(Qh).bigView,r)},getRelativeRectFromViewPort:function(e){var t=e.element,n=e.controller,o=e.getRef,r=n.run("getZoomFactor",e);return Jm(t,o(Qh).viewBox,r)},getRelativeVectorFromViewPort:function(e){return Ym(e.element,(0,e.getRef)(Qh).viewBox)},addZoomFactorChangeEventListener:function(e){e.controller.run("addTempValueChangeListener",Object(m.a)({key:"ZoomFactor"},e))},removeZoomFactorChangeEventListener:function(e){e.controller.run("removeTempValueChangeListener",Object(m.a)({key:"ZoomFactor"},e))},setZoomFactor:function(e){var t=e.controller,n=e.zoomFactor;return t.run("setTempValue",{key:"ZoomFactor",value:n})},getZoomFactor:function(e){return e.controller.run("getTempValue",{key:"ZoomFactor"})||1},moveTopicToCenter:function(e){var t=e.getRef,n=e.topicKey,o=e.model,r=e.moveDir,c=void 0===r?hO:r;if(o.editorRootTopicKey!==n&&Bb(o,n,o.editorRootTopicKey)!==db)throw new Error("moveTopicToCenter error: topicKey ".concat(n," is not the DESCENDANT of editor root topic"));var i=t(Zh(n)),a=t(Qh),l=a.viewBox;if(!i||!l)throw new Error("moveTopicToCenter error: topic or viewBox is null");var u=Ym(i,l);if(c===yO)a.setViewBoxScrollDelta(u[0],u[1]);else if(c===hO){var s=l.getBoundingClientRect(),p=i.getBoundingClientRect(),d=(s.width-p.width)/2;a.setViewBoxScrollDelta(u[0]+d-200,u[1])}},focusTopicAndMoveToCenter:function(e){var t=e.controller,n=e.topicKey;t.run("operation",Object(m.a)(Object(m.a)({},e),{},{opArray:[{opType:jb,topicKey:n,focusMode:ib},{opType:mb,topicKey:n}],allowUndo:!1,callback:function(o){return function(){t.run("moveTopicToCenter",Object(m.a)(Object(m.a)({},e),{},{model:o,topicKey:n}))}}}))}},vO(),fT(),lO(),gO(),{getValue:function(e,t){var n=e.propKey,o=e.controller,r=e.diagramState;switch(n){case rg:return 3;case cg:case ug:return o.run("isOperationEnabled",e);case ig:return o.run("getTopicTitle",e);case ag:return r.dragDrop;case lg:return r.rightTopPanel}return t()}},{getTopicTitle:function(e){var t=e.model,n=e.controller,o=e.topicKey,r=e.maxLength,c=t.getTopic(o).getBlock(rb).block,i=n.run("serializeBlockData",Object(m.a)(Object(m.a)({},e),{},{block:c}));return null!=r&&(i=i.length>r?i.substr(0,r)+"...":i),i},renderTopicContentEditor:function(e){return Object(o.createElement)(lT,Object.assign({},e))},renderTopicDescEditor:function(e){return Object(o.createElement)(pT,Object.assign({},e))},isBlockEmpty:function(e,t){var n=e.block,o=e.controller;return n.type===rb||n.type===cb?null==n.data||""===o.run("serializeBlockData",e):t()},serializeBlockData:function(e,t){var n=e.block;return n.type===rb||n.type===cb?"string"===typeof n.data?n.data:Ne.a.serialize(n.data):t()}},{createNewModel:function(e){return Wb.createEmpty()}},{getThemeOfTopic:function(e){var t=e.model.config.theme,n=t.contentStyle,o=t.rootTopic,r=t.primaryTopic,c=t.normalTopic;return{rootTopic:Object(m.a)(Object(m.a)({},o),{},{contentStyle:Object(m.a)(Object(m.a)({},n),o.contentStyle)}),primaryTopic:Object(m.a)(Object(m.a)({},r),{},{contentStyle:Object(m.a)(Object(m.a)({},n),r.contentStyle)}),normalTopic:Object(m.a)(Object(m.a)({},c),{},{contentStyle:Object(m.a)(Object(m.a)({},n),c.contentStyle)})}}},mO()]}b()("node:Diagram"),o.Component;var yT=n(299),hT=n(30),gT=n(24),mT=(n(847),n(42)),OT=n(76),vT=n(62),TT=function(e,t){return(TT=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(e,t)};function jT(e,t){function n(){this.constructor=e}TT(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}var kT=function(){return(kT=Object.assign||function(e){for(var t,n=1,o=arguments.length;n<o;n++)for(var r in t=arguments[n])Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r]);return e}).apply(this,arguments)};function ET(e,t){return Object.defineProperty?Object.defineProperty(e,"raw",{value:t}):e.raw=t,e}function xT(e){var t=e.controller,n=e.model,r=e.topicKey,c=n.focusKey===r&&"FOCUS_MODE_EDITING_TOPOLOGY"===n.focusMode,i=n.getTopic(r).getBlock("TOPOLOGY").block;if(!c&&!i)return null;var a={className:zh("topology"),onClick:function(n){n.stopPropagation(),t.run("operation",kT(kT({},e),{opType:"OP_TYPE_START_EDITING_TOPOLOGY"}))},tabIndex:-1};return Object(o.createElement)(Oh,kT({},a))}var ST,CT,wT,KT,RT,DT,LT,IT,_T,MT,AT=[{group:"Basic",children:[{name:"rectangle",icon:"icon-rect",data:{text:"Topology",rect:{width:100,height:100},paddingLeft:10,paddingRight:10,paddingTop:10,paddingBottom:10,name:"rectangle",icon:"\ue64d",iconFamily:"topology",iconColor:"#2f54eb"}},{name:"rectangle",icon:"icon-rectangle",data:{text:"rectangle",rect:{width:200,height:50},paddingLeft:10,paddingRight:10,paddingTop:10,paddingBottom:10,borderRadius:.1,name:"rectangle"}},{name:"circle",icon:"icon-circle",data:{text:"circle",rect:{width:100,height:100},name:"circle",textMaxLine:1}},{name:"triangle",icon:"icon-triangle",data:{text:"triangle",rect:{width:100,height:100},name:"triangle"}},{name:"diamond",icon:"icon-diamond",data:{text:"diamond",rect:{width:100,height:100},name:"diamond"}},{name:"pentagon",icon:"icon-pentagon",data:{text:"pentagon",rect:{width:100,height:100},name:"pentagon"}},{name:"hexagon",icon:"icon-hexagon",data:{text:"hexagon",rect:{width:100,height:100},paddingTop:10,paddingBottom:10,name:"hexagon"}},{name:"pentagram",icon:"icon-pentagram",data:{text:"pentagram",rect:{width:100,height:100},name:"pentagram"}},{name:"left arrow",icon:"icon-arrow-left",data:{text:"",rect:{width:200,height:100},name:"leftArrow"}},{name:"right arrow",icon:"icon-arrow-right",data:{text:"",rect:{width:200,height:100},name:"rightArrow"}},{name:"bidirectional arrow",icon:"icon-twoway-arrow",data:{text:"",rect:{width:200,height:100},name:"twowayArrow"}},{name:"line",icon:"icon-line",data:{text:"line",rect:{width:100,height:100},name:"line"}},{name:"cloud",icon:"icon-cloud",data:{text:"cloud",rect:{width:100,height:100},name:"cloud"}},{name:"message",icon:"icon-msg",data:{text:"message",rect:{width:100,height:100},paddingLeft:10,paddingRight:10,paddingTop:10,paddingBottom:10,name:"message"}},{name:"file",icon:"icon-file",data:{text:"file",rect:{width:80,height:100},paddingLeft:10,paddingRight:10,paddingTop:10,paddingBottom:10,name:"file"}},{name:"text",icon:"icon-text",data:{text:"text",rect:{width:160,height:30},name:"text"}},{name:"image",icon:"icon-image",data:{text:"",rect:{width:100,height:100},name:"image",image:"/assets/img/logo.png"}},{name:"cube",icon:"icon-cube",data:{rect:{width:50,height:70},is3D:!0,z:10,zRotate:15,fillStyle:"#ddd",name:"cube",icon:"\ue63c",iconFamily:"topology",iconColor:"#777",iconSize:30}},{name:"people",icon:"icon-people",data:{rect:{width:70,height:100},name:"people"}},{name:"multi media",icon:"icon-pc",data:{text:"multi media",rect:{width:200,height:200},paddingLeft:10,paddingRight:10,paddingTop:10,paddingBottom:10,name:"div"}}]},{group:"Flow Graph",children:[{name:"start/end",icon:"icon-flow-start",data:{text:"start",rect:{width:120,height:40},borderRadius:.5,name:"rectangle"}},{name:"flow",icon:"icon-rectangle",data:{text:"flow",rect:{width:120,height:40},name:"rectangle"}},{name:"judgement",icon:"icon-diamond",data:{text:"judgement",rect:{width:120,height:60},name:"diamond"}},{name:"data",icon:"icon-flow-data",data:{text:"data",rect:{width:120,height:50},name:"flowData"}},{name:"prepare",icon:"icon-flow-ready",data:{text:"prepare",rect:{width:120,height:50},name:"hexagon"}},{name:"sub flow",icon:"icon-flow-subprocess",data:{text:"sub flow",rect:{width:120,height:50},name:"flowSubprocess"}},{name:"database",icon:"icon-db",data:{text:"database",rect:{width:80,height:120},name:"flowDb"}},{name:"document",icon:"icon-flow-document",data:{text:"document",rect:{width:120,height:100},name:"flowDocument"}},{name:"internal storage",icon:"icon-internal-storage",data:{text:"internal storage",rect:{width:120,height:80},name:"flowInternalStorage"}},{name:"external storage",icon:"icon-extern-storage",data:{text:"external storage",rect:{width:120,height:80},name:"flowExternStorage"}},{name:"queue",icon:"icon-flow-queue",data:{text:"queue",rect:{width:100,height:100},name:"flowQueue"}},{name:"input manually",icon:"icon-flow-manually",data:{text:"input manually",rect:{width:120,height:80},name:"flowManually"}},{name:"display",icon:"icon-flow-display",data:{text:"display",rect:{width:120,height:80},name:"flowDisplay"}},{name:"parallel",icon:"icon-flow-parallel",data:{text:"parallel",rect:{width:120,height:50},name:"flowParallel"}},{name:"comment",icon:"icon-flow-comment",data:{text:"comment",rect:{width:100,height:100},name:"flowComment"}}]},{group:"Activity Diagram",children:[{name:"start",icon:"icon-inital",data:{text:"",rect:{width:30,height:30},name:"circle",fillStyle:"#555",strokeStyle:"transparent"}},{name:"end",icon:"icon-final",data:{text:"",rect:{width:30,height:30},name:"activityFinal"}},{name:"action",icon:"icon-action",data:{text:"action",rect:{width:120,height:50},borderRadius:.25,name:"rectangle"}},{name:"decision/merge",icon:"icon-diamond",data:{text:"\u51b3\u7b56",rect:{width:120,height:50},name:"diamond"}},{name:"vertical swimming lane",icon:"icon-swimlane-v",data:{text:"vertical swimming lane",rect:{width:200,height:500},name:"swimlaneV"}},{name:"horizontal swimming lane",icon:"icon-swimlane-h",data:{text:"horizontal swimming lane",rect:{width:500,height:200},name:"swimlaneH"}},{name:"vertical fork/merge",icon:"icon-fork-v",data:{text:"",rect:{width:10,height:150},name:"forkV",fillStyle:"#555",strokeStyle:"transparent"}},{name:"horizontal fork/merge",icon:"icon-fork",data:{text:"",rect:{width:150,height:10},name:"forkH",fillStyle:"#555",strokeStyle:"transparent"}}]},{group:"Sequence Diagram && Class Diagram",children:[{name:"lifeline",icon:"icon-lifeline",data:{text:"lifeline",rect:{width:150,height:400},name:"lifeline"}},{name:"activation",icon:"icon-focus",data:{text:"",rect:{width:12,height:200},name:"sequenceFocus"}},{name:"simple class",icon:"icon-simple-class",data:{text:"Topolgoy",rect:{width:270,height:200},paddingTop:40,font:{fontFamily:"Arial",color:"#222",fontWeight:"bold"},fillStyle:"#ffffba",strokeStyle:"#7e1212",name:"simpleClass",children:[{text:"- name: string\n+ setName(name: string): void",name:"text",paddingLeft:10,paddingRight:10,paddingTop:10,paddingBottom:10,rectInParent:{x:0,y:0,width:"100%",height:"100%",rotate:0},font:{fontFamily:"Arial",color:"#222",textAlign:"left",textBaseline:"top"}}]}},{name:"class",icon:"icon-class",data:{text:"Topolgoy",rect:{width:270,height:200},paddingTop:40,font:{fontFamily:"Arial",color:"#222",fontWeight:"bold"},fillStyle:"#ffffba",strokeStyle:"#7e1212",name:"interfaceClass",children:[{text:"- name: string",name:"text",paddingLeft:10,paddingRight:10,paddingTop:10,paddingBottom:10,rectInParent:{x:0,y:0,width:"100%",height:"50%",rotate:0},font:{fontFamily:"Arial",color:"#222",textAlign:"left",textBaseline:"top"}},{text:"+ setName(name: string): void",name:"text",paddingLeft:10,paddingRight:10,paddingTop:10,paddingBottom:10,rectInParent:{x:0,y:"50%",width:"100%",height:"50%",rotate:0},font:{fontFamily:"Arial",color:"#222",textAlign:"left",textBaseline:"top"}}]}}]}],NT=d.default.div(ST||(ST=ET(["\n  position: relative;\n  display: flex;\n  width: 100%;\n  height: 100%;\n"],["\n  position: relative;\n  display: flex;\n  width: 100%;\n  height: 100%;\n"]))),FT=d.default.div(CT||(CT=ET(["\n  flex: 1;\n  width: initial;\n  position: relative;\n  overflow: auto;\n  background: #fff;\n"],["\n  flex: 1;\n  width: initial;\n  position: relative;\n  overflow: auto;\n  background: #fff;\n"]))),PT=d.default.div(wT||(wT=ET(["\n  flex-shrink: 0;\n  width: 1.75rem;\n  background-color: #f8f8f8;\n  border-right: 1px solid #d9d9d9;\n  overflow-y: auto;\n"],["\n  flex-shrink: 0;\n  width: 1.75rem;\n  background-color: #f8f8f8;\n  border-right: 1px solid #d9d9d9;\n  overflow-y: auto;\n"]))),BT=d.default.div(KT||(KT=ET(["\n  color: #0d1a26;\n  font-weight: 600;\n  font-size: 0.12rem;\n  padding: 0.05rem 0.1rem;\n  margin-top: 0.08rem;\n  border-bottom: 1px solid #ddd;\n\n  &:first-child {\n    border-top: none;\n  }\n"],["\n  color: #0d1a26;\n  font-weight: 600;\n  font-size: 0.12rem;\n  padding: 0.05rem 0.1rem;\n  margin-top: 0.08rem;\n  border-bottom: 1px solid #ddd;\n\n  &:first-child {\n    border-top: none;\n  }\n"]))),zT=d.default.div(RT||(RT=ET(["\n  padding: 0.1rem 0;\n  a {\n    display: inline-block;\n    color: @text-color;\n    line-height: 1;\n    width: 0.4rem;\n    height: 0.4rem;\n    text-align: center;\n    text-decoration: none !important;\n\n    .iconfont {\n      font-size: 0.24rem;\n    }\n  }\n"],["\n  padding: 0.1rem 0;\n  a {\n    display: inline-block;\n    color: @text-color;\n    line-height: 1;\n    width: 0.4rem;\n    height: 0.4rem;\n    text-align: center;\n    text-decoration: none !important;\n\n    .iconfont {\n      font-size: 0.24rem;\n    }\n  }\n"]))),VT=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.state={id:"",data:null,toolsConfig:AT,iconfont:{fontSize:"0.24rem"}},t.canvasOptions={},t.handleContextMenu=function(e){e.preventDefault(),e.stopPropagation()},t.onMessage=function(e,n){var o=(0,t.props.getRef)("TOPOLOGY_DIAGRAM_UTIL");switch(e){case"resize":case"scale":case"locked":t.topology&&o&&o.setCanvasData(t.topology.data)}},t}return jT(t,e),t.prototype.canvasRegister=function(){Object(hT.registerNode)("flowData",gT.flowData,gT.flowDataAnchors,gT.flowDataIconRect,gT.flowDataTextRect),Object(hT.registerNode)("flowSubprocess",gT.flowSubprocess,null,gT.flowSubprocessIconRect,gT.flowSubprocessTextRect),Object(hT.registerNode)("flowDb",gT.flowDb,null,gT.flowDbIconRect,gT.flowDbTextRect),Object(hT.registerNode)("flowDocument",gT.flowDocument,gT.flowDocumentAnchors,gT.flowDocumentIconRect,gT.flowDocumentTextRect),Object(hT.registerNode)("flowInternalStorage",gT.flowInternalStorage,null,gT.flowInternalStorageIconRect,gT.flowInternalStorageTextRect),Object(hT.registerNode)("flowExternStorage",gT.flowExternStorage,gT.flowExternStorageAnchors,gT.flowExternStorageIconRect,gT.flowExternStorageTextRect),Object(hT.registerNode)("flowQueue",gT.flowQueue,null,gT.flowQueueIconRect,gT.flowQueueTextRect),Object(hT.registerNode)("flowManually",gT.flowManually,gT.flowManuallyAnchors,gT.flowManuallyIconRect,gT.flowManuallyTextRect),Object(hT.registerNode)("flowDisplay",gT.flowDisplay,gT.flowDisplayAnchors,gT.flowDisplayIconRect,gT.flowDisplayTextRect),Object(hT.registerNode)("flowParallel",gT.flowParallel,gT.flowParallelAnchors,null,null),Object(hT.registerNode)("flowComment",gT.flowComment,gT.flowCommentAnchors,null,null),Object(hT.registerNode)("activityFinal",mT.activityFinal,null,mT.activityFinalIconRect,mT.activityFinalTextRect),Object(hT.registerNode)("swimlaneV",mT.swimlaneV,null,mT.swimlaneVIconRect,mT.swimlaneVTextRect),Object(hT.registerNode)("swimlaneH",mT.swimlaneH,null,mT.swimlaneHIconRect,mT.swimlaneHTextRect),Object(hT.registerNode)("forkH",mT.fork,mT.forkHAnchors,mT.forkIconRect,mT.forkTextRect),Object(hT.registerNode)("forkV",mT.fork,mT.forkVAnchors,mT.forkIconRect,mT.forkTextRect),Object(hT.registerNode)("simpleClass",OT.simpleClass,null,OT.simpleClassIconRect,OT.simpleClassTextRect),Object(hT.registerNode)("interfaceClass",OT.interfaceClass,null,OT.interfaceClassIconRect,OT.interfaceClassTextRect),Object(hT.registerNode)("lifeline",vT.lifeline,vT.lifelineAnchors,vT.lifelineIconRect,vT.lifelineTextRect),Object(hT.registerNode)("sequenceFocus",vT.sequenceFocus,vT.sequenceFocusAnchors,vT.sequenceFocusIconRect,vT.sequenceFocusTextRect)},t.prototype.componentDidMount=function(){this.canvasRegister(),this.canvasOptions.on=this.onMessage,this.topology=new yT.Topology("topology-canvas",this.canvasOptions),this.openData()},t.prototype.componentDidUpdate=function(){this.openData()},t.prototype.openData=function(){var e=this.props,t=e.model,n=e.topicKey,o=t.getTopic(n).getBlock("TOPOLOGY").block;o&&o.data&&""!==o.data&&(this.setState({data:o.data}),this.topology.open(o.data))},t.prototype.onDrag=function(e,t){e.dataTransfer.setData("Text",JSON.stringify(t.data))},t.prototype.renderTools=function(){var e=this;return Object(o.createElement)(PT,null,this.state.toolsConfig.map((function(t,n){return Object(o.createElement)("div",{key:n},Object(o.createElement)(BT,null,t.group),Object(o.createElement)(zT,null,t.children.map((function(t,n){return Object(o.createElement)("a",{key:n,title:t.name,draggable:!0,onDragStart:function(n){e.onDrag(n,t)}},Object(o.createElement)("i",{className:"iconfont "+t.icon,style:e.state.iconfont}))}))))})))},t.prototype.render=function(){return Object(o.createElement)(NT,null,this.renderTools(),Object(o.createElement)(FT,{id:"topology-canvas",onContextMenu:this.handleContextMenu}))},t}(rh),HT=d.default.div(DT||(DT=ET(["\n  position: absolute;\n  background: white;\n  right: 30px;\n  bottom: 20px;\n  border-radius: 2px;\n  z-index: 3;\n  display: flex;\n  flex-direction: row;\n  user-select: none;\n"],["\n  position: absolute;\n  background: white;\n  right: 30px;\n  bottom: 20px;\n  border-radius: 2px;\n  z-index: 3;\n  display: flex;\n  flex-direction: row;\n  user-select: none;\n"]))),GT=Object(d.default)(yh)(LT||(LT=ET(["\n  margin: 10px;\n"],["\n  margin: 10px;\n"]))),WT=function(e){return Object(o.createElement)(y.x,{content:e.tooltip,position:g.a.TOP,className:h.a.ICON},Object(o.createElement)(GT,{onClick:e.onClick},e.children))},UT=d.default.span(IT||(IT=ET(["\n  display: inline-block;\n  width: 80px;\n  height: 18px;\n"],["\n  display: inline-block;\n  width: 80px;\n  height: 18px;\n"]))),ZT=function(e){function t(t){var n=e.call(this,t)||this;return n.setCanvasData=function(e){n.setState({canvasData:e})},n.onClickResetZoom=function(e){n.getTopology().scaleTo(1)},n.state={deleteConfirm:!1,canvasData:null},n}return jT(t,e),t.prototype.getTopology=function(){return(0,this.props.getRef)("TOPOLOGY_DIAGRAM").topology},t.prototype.render=function(){var e=this,t=this.props,n=t.controller,r={isOpen:this.state.deleteConfirm,cancelButtonText:"cancel",onConfirm:function(e){n.run("operation",kT(kT({},t),{opType:wb,blockType:"TOPOLOGY"}))},onCancel:function(t){e.setState({deleteConfirm:!1})},onClose:function(t){e.setState({deleteConfirm:!1})}},c=this.state.canvasData,i=c?c.scale:1;return Object(o.createElement)(HT,null,Object(o.createElement)(WT,{onClick:this.onClickResetZoom,tooltip:"reset zoom"},Object(o.createElement)(UT,null,"zoom:"+Math.floor(100*i)+"%")),Object(o.createElement)(WT,{onClick:function(t){e.setState({deleteConfirm:!0})},tooltip:"delete this diagram"},Vh(Ph)),Object(o.createElement)(y.a,kT({},r),Object(o.createElement)("p",null,"Are you confirm to delete this topology diagram?")))},t}(o.Component),JT=d.default.div(_T||(_T=ET(["\n  position: relative;\n  overflow: auto;\n  padding: 0px 0px 0px 5px;\n  background: #88888850;\n  height: 100%;\n"],["\n  position: relative;\n  overflow: auto;\n  padding: 0px 0px 0px 5px;\n  background: #88888850;\n  height: 100%;\n"]))),YT=d.default.span(MT||(MT=ET(["\n  padding: 0px 20px;\n"],["\n  padding: 0px 20px;\n"])));function qT(e){var t=e.controller,n=e.topicKey,r=e.getRef,c=e.saveRef,i=kT(kT({},e),{ref:c("TOPOLOGY_DIAGRAM")}),a=kT(kT({},e),{ref:c("TOPOLOGY_DIAGRAM_UTIL")});return Object(o.createElement)(y.i,{title:Object(o.createElement)(YT,null,"Topology Diagram Editor"),icon:Vh("topology"),isOpen:!0,hasBackdrop:!0,backdropClassName:"backdrop",backdropProps:{onMouseDown:Bm},canOutsideClickClose:!1,isCloseButtonShown:!0,onClose:function(o){o.stopPropagation();var c=r("TOPOLOGY_DIAGRAM").topology.data;t.run("operation",kT(kT({},e),{opType:Cb,topicKey:n,blockType:"TOPOLOGY",data:c,focusMode:ib}))},size:"100%"},Object(o.createElement)(JT,{onClick:Bm,onDoubleClick:Bm},Object(o.createElement)(VT,kT({},i)),Object(o.createElement)(ZT,kT({},a))))}function XT(e){var t=e.model,n=e.topicKey,o=t.getTopic(n).getBlock("TOPOLOGY").block;return null!=o&&null!=o.data||(t=Hb.setBlockData({model:t,topicKey:n,blockType:"TOPOLOGY",data:""})),t=Hb.focusTopic({model:t,topicKey:n,focusMode:"FOCUS_MODE_EDITING_TOPOLOGY"})}var $T=function(){return{renderTopicBlock:function(e,t){var n=e.controller;return"TOPOLOGY"===e.block.type?n.run("renderTopicBlockTopology",e):t()},renderTopicBlockTopology:function(e){return Object(o.createElement)(xT,kT({},e))},renderDrawer:function(e,t){var n=e.model;if("FOCUS_MODE_EDITING_TOPOLOGY"===n.focusMode){var r=kT(kT({},e),{topicKey:n.focusKey,key:"topology-drawer"});return Object(o.createElement)(qT,kT({},r))}return t()},customizeTopicContextMenu:function(e,t){var n=e.controller;return Object(o.createElement)(o.Fragment,null,t(),Object(o.createElement)(y.o,null),Object(o.createElement)(y.p,{icon:Vh("topology"),text:"Edit Topology Diagram",onClick:function(t){n.run("operation",kT(kT({},e),{opType:"OP_TYPE_START_EDITING_TOPOLOGY"}))}}))},getOpMap:function(e,t){var n=t();return n.set("OP_TYPE_START_EDITING_TOPOLOGY",XT),n}}};function QT(e){return!0===(null!=(t=e)&&"object"===typeof t&&!1===Array.isArray(t))&&"[object Object]"===Object.prototype.toString.call(e);var t}var ej=function(e){var t,n;return!1!==QT(e)&&("function"===typeof(t=e.constructor)&&(!1!==QT(n=t.prototype)&&!1!==n.hasOwnProperty("isPrototypeOf")))};var tj,nj=function(e,t){},oj="L",rj="R",cj="M";!function(e){e[e.LEFT_TO_RIGHT=0]="LEFT_TO_RIGHT",e[e.RIGHT_TO_LEFT=1]="RIGHT_TO_LEFT",e[e.LEFT_AND_RIGHT=2]="LEFT_AND_RIGHT",e[e.TOP_TO_BOTTOM=3]="TOP_TO_BOTTOM"}(tj||(tj={}));var ij=0,aj=1,lj="CONTENT",uj="DESC",sj="NORMAL",pj="EDITING_CONTENT",dj="EDITING_DESC",fj="SHOW_POPUP",bj="DRAGGING",yj="ANCESTOR",hj="DESCENDANT",gj="SIBLING",mj="NONE",Oj="TOGGLE_COLLAPSE",vj="COLLAPSE_ALL",Tj="EXPAND_ALL",jj="EXPAND_TO",kj="ADD_CHILD",Ej="ADD_SIBLING",xj="DELETE_TOPIC",Sj="FOCUS_TOPIC",Cj="SET_FOCUS_MODE",wj="SET_STYLE",Kj="CLEAR_ALL_CUSTOM_STYLE",Rj="SET_THEME",Dj="SET_TOPIC_BLOCK",Lj="DELETE_TOPIC_BLOCK",Ij="START_EDITING_CONTENT",_j="START_EDITING_DESC",Mj="DRAG_AND_DROP",Aj="SET_EDITOR_ROOT",Nj="SET_LAYOUT_DIR",Fj=function(e){Object(u.a)(n,e);var t=Object(s.a)(n);function n(){return Object(a.a)(this,n),t.apply(this,arguments)}return Object(l.a)(n,[{key:"data",get:function(){return this.get("data")}},{key:"type",get:function(){return this.get("type")}}],[{key:"create",value:function(e){return new n(e)}},{key:"createList",value:function(e){if(T.List.isList(e)||Array.isArray(e))return Object(T.List)(e.map(n.create));throw new Error("Block.createList only accepts Array or List, but you passed it: ".concat(e))}}]),n}(Object(T.Record)({type:null,key:null,data:null}));var Pj={readOnly:!1,allowUndo:!0,layoutDir:tj.LEFT_AND_RIGHT,theme:{name:"default",randomColor:!0,background:"rgb(57,60,65)",highlightColor:"#50C9CE",marginH:60,marginV:20,contentStyle:{lineHeight:"1.5"},linkStyle:{lineRadius:5,lineType:"curve",lineWidth:"3px"},rootTopic:{contentStyle:{fontSize:"34px",borderRadius:"35px",padding:"16px 18px 16px 18px"},subLinkStyle:{lineType:"curve",lineWidth:"3px",lineColor:"rgb(113, 203, 45)"}},primaryTopic:{contentStyle:{borderWidth:"1px",borderStyle:"solid",borderRadius:"20px",fontSize:"17px",padding:"10px 15px 10px 15px"},subLinkStyle:{lineType:"curve",lineWidth:"3px",lineColor:"rgb(113, 203, 45)"}},normalTopic:{contentStyle:{border:"1px solid #e8eaec",borderRadius:"20px",fontSize:"17px",padding:"4px 10px"},subLinkStyle:{lineType:"curve",lineWidth:"3px",lineColor:"white"}}}},Bj=function(e){Object(u.a)(n,e);var t=Object(s.a)(n);function n(){return Object(a.a)(this,n),t.apply(this,arguments)}return Object(l.a)(n,[{key:"layoutDir",get:function(){return this.get("layoutDir")}},{key:"readOnly",get:function(){return this.get("readOnly")}},{key:"allowUndo",get:function(){return this.get("allowUndo")}},{key:"theme",get:function(){return this.get("theme")}}],[{key:"fromJSON",value:function(e){return new n(e)}}]),n}(Object(T.Record)(Pj));function zj(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,(function(e){var t=16*Math.random()|0;return("x"===e?t:3&t|8).toString(16)}))}var Vj=function(e){Object(u.a)(n,e);var t=Object(s.a)(n);function n(){return Object(a.a)(this,n),t.apply(this,arguments)}return Object(l.a)(n,[{key:"key",get:function(){return this.get("key")}},{key:"parentKey",get:function(){return this.get("parentKey")}},{key:"collapse",get:function(){return this.get("collapse")}},{key:"subKeys",get:function(){return this.get("subKeys")}},{key:"blocks",get:function(){return this.get("blocks")}},{key:"relations",get:function(){return this.get("relations")}},{key:"style",get:function(){return this.get("style")}},{key:"getBlock",value:function(e){var t=this.blocks.findIndex((function(t){return t.type===e}));return-1===t?{index:t,block:null}:{index:t,block:this.blocks.get(t)}}}],[{key:"fromJSON",value:function(e){var t=e.key,o=e.parentKey,r=void 0===o?null:o,c=e.blocks,i=e.subKeys,a=void 0===i?[]:i,l=e.collapse;return new n({key:t,parentKey:r,collapse:void 0!==l&&l,subKeys:Object(T.List)(a),blocks:Fj.createList(c)})}},{key:"create",value:function(e){var t=e.key,o=e.parentKey,r=void 0===o?null:o,c=e.content,i=void 0===c?"":c,a=e.subKeys,l=void 0===a?[]:a,u=e.collapse,s=void 0!==u&&u,p=Fj.create({type:lj,data:i,key:null});return new n({key:t,parentKey:r,blocks:Object(T.List)([p]),subKeys:Object(T.List)(l),collapse:s})}}]),n}(Object(T.Record)({key:null,parentKey:null,collapse:!1,subKeys:null,blocks:null,relations:null,style:null}));function Hj(e,t){var n=e.getTopic(t),o=[];if(n.subKeys.size>0){var r,c=n.subKeys.toArray();(r=o).push.apply(r,Object(v.a)(c)),o=c.reduce((function(t,n){return t.push.apply(t,Object(v.a)(Hj(e,n))),t}),o)}return o}function Gj(e,t,n){var o=e.getTopic(t),r=e.getTopic(n);if(o&&r){if(o.parentKey==r.parentKey)return gj;for(var c=o;c.parentKey;){if(c.parentKey===r.key)return hj;c=e.getParentTopic(c.key)}for(c=r;c.parentKey;){if(c.parentKey===o.key)return yj;c=e.getParentTopic(c.key)}}return mj}var Wj=b()("modifier");function Uj(e){var t=e.model,n=e.topicKey,o=e.focusMode;return Wj("focus topic"),n!==t.focusKey&&(t=t.set("focusKey",n)),o!==t.focusMode&&(t=t.set("focusMode",o)),t}var Zj={addChild:function(e){var t=e.model,n=e.topicKey;Wj("addChild:",n);var o=t.getTopic(n);if(o){var r=Vj.create({key:zj(),parentKey:o.key});return o=o.set("collapse",!1).update("subKeys",(function(e){return e.push(r.key)})),Uj({model:t=t.update("topics",(function(e){return e.set(n,o).set(r.key,r)})),topicKey:r.key,focusMode:pj})}return t},addSibling:function(e){var t=e.model,n=e.topicKey;if(n===t.rootTopicKey)return t;var o=t.getTopic(n);if(o){var r=t.getTopic(o.parentKey),c=r.subKeys.indexOf(n),i=Vj.create({key:zj(),parentKey:r.key});return Uj({model:t=t.update("topics",(function(e){return e.set(i.key,i)})).updateIn(["topics",r.key,"subKeys"],(function(e){return e.insert(c+1,i.key)})),topicKey:i.key,focusMode:pj})}return t},toggleCollapse:function(e){var t=e.model,n=e.topicKey,o=t.getTopic(n);return o&&0!==o.subKeys.size&&(o=o.merge({collapse:!o.collapse}),t=t.updateIn(["topics",o.key,"collapse"],(function(e){return!e}))),t=Uj({model:t,topicKey:n,focusMode:sj})},collapseAll:function(e){var t=e.model,n=Hj(t,t.editorRootTopicKey);return Wj(t),t=Uj({model:t=t.withMutations((function(e){n.forEach((function(t){e.setIn(["topics",t,"collapse"],!0)}))})),topicKey:t.editorRootTopicKey,focusMode:sj})},expandAll:function(e){var t=e.model,n=Hj(t,t.editorRootTopicKey);return Wj(t),t=t.withMutations((function(e){n.forEach((function(t){e.setIn(["topics",t,"collapse"],!1)}))})),Wj(t),t},expandTo:function(e){var t=e.model,n=e.topicKey,o=function(e,t){for(var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],o=[t],r=e.getTopic(t);r.parentKey;)n?o.push(r.parentKey):o.unshift(r.parentKey),r=e.getParentTopic(r.key);return o}(t,n).filter((function(e){return e!==n}));return Gj(t=t.withMutations((function(e){o.forEach((function(t){e.setIn(["topics",t,"collapse"],!1)}))})),n,t.editorRootTopicKey)!==hj&&(t=t.set("editorRootTopicKey",t.rootTopicKey)),t},focusTopic:Uj,setFocusMode:function(e){var t=e.model,n=e.focusMode;return Wj("setFocusMode"),n!==t.focusMode&&(t=t.set("focusMode",n)),t},deleteTopic:function(e){var t=e.model,n=e.topicKey;if(n===t.editorRootTopicKey)return t;var o=t.getTopic(n);return o&&(t=t.withMutations((function(e){e.update("topics",(function(e){e=e.delete(n);var o=Hj(t,n);return e=e.withMutations((function(e){o.forEach((function(t){e.delete(t)}))}))})),e.updateIn(["topics",o.parentKey,"subKeys"],(function(e){return e.delete(e.indexOf(n))})),e.focusKey===n&&e.set("focusKey",null).set("focusMode",null)}))),t},setBlockData:function(e){var t=e.model,n=e.topicKey,o=e.blockType,r=e.focusMode,c=e.data,i=t.getTopic(n);if(i){var a=i.getBlock(o),l=a.index,u=a.block;-1===l?t=t.updateIn(["topics",n,"blocks"],(function(e){return e.push(Fj.create({type:o,data:c}))})):u.data!==c&&(t=t.updateIn(["topics",n,"blocks",l,"data"],(function(e){return c}))),r&&(t=Uj({model:t,topicKey:n,focusMode:r}))}return t},deleteBlock:function(e){var t=e.model,n=e.topicKey,o=e.blockType,r=t.getTopic(n);if(r){var c=r.getBlock(o).index;-1!==c&&(t=t.updateIn(["topics",n,"blocks"],(function(e){return e.delete(c)}))),t=Uj({model:t,topicKey:null,focusMode:null})}return t},setStyle:function(e){var t=e.model,n=e.topicKey,o=e.style,r=t.getTopic(n);return r&&o!==r.style&&(t=t.updateIn(["topics",n,"style"],(function(e){return o}))),t},clearAllCustomStyle:function(e){var t=e.model;return t=t.withMutations((function(e){e.topics.keySeq().forEach((function(t){e.setIn(["topics",t,"style"],null)}))}))},setTheme:function(e){var t=e.model,n=e.theme;return t=t.setIn(["config","theme"],n)},setLayoutDir:function(e){var t=e.model,n=e.layoutDir;return t.config.layoutDir===n?t:t=t.setIn(["config","layoutDir"],n)},setEditorRootTopicKey:function(e){var t=e.model,n=e.topicKey;return t.editorRootTopicKey!==n&&(t=t.set("editorRootTopicKey",n)),t.getTopic(n).collapse&&(t=t.setIn(["topics",n,"collapse"],!1)),t},setZoomFactor:function(e){var t=e.model,n=e.zoomFactor;return t.zoomFactor!==n&&(t=t.set("zoomFactor",n)),t}},Jj={topics:Object(T.Map)(),extData:Object(T.Map)(),config:new Bj,rootTopicKey:null,editorRootTopicKey:null,focusKey:null,focusMode:null,formatVersion:null,zoomFactor:1},Yj=function(e){Object(u.a)(n,e);var t=Object(s.a)(n);function n(){return Object(a.a)(this,n),t.apply(this,arguments)}return Object(l.a)(n,[{key:"toJS",value:function(){return{rootTopicKey:this.rootTopicKey,topics:Object.values(this.topics.toJS()),config:this.config,extData:this.extData,zoomFactor:this.zoomFactor}}},{key:"extData",get:function(){return this.get("extData")}},{key:"topics",get:function(){return this.get("topics")}},{key:"config",get:function(){return this.get("config")}},{key:"formatVersion",get:function(){return this.get("formatVersion")}},{key:"rootTopicKey",get:function(){return this.get("rootTopicKey")}},{key:"editorRootTopicKey",get:function(){return this.get("editorRootTopicKey")}},{key:"focusKey",get:function(){return this.get("focusKey")}},{key:"focusMode",get:function(){return this.get("focusMode")}},{key:"editingContentKey",get:function(){return this.focusMode===pj?this.focusKey:null}},{key:"editingDescKey",get:function(){return this.focusMode===dj?this.focusKey:null}},{key:"getTopic",value:function(e){return this.topics.get(e)}},{key:"getExtDataItem",value:function(e,t){return this.extData.get(e)||new t}},{key:"getParentTopic",value:function(e){var t=this.getTopic(e);return t.parentKey?this.getTopic(t.parentKey):null}},{key:"getTopicVisualLevel",value:function(e){for(var t=this.getTopic(e),n=0;t&&t.key!==this.editorRootTopicKey;)n++,t=this.getParentTopic(t.key);return n}},{key:"rootTopic",get:function(){return this.getTopic(this.rootTopicKey)}},{key:"zoomFactor",get:function(){return this.get("zoomFactor")}}],[{key:"isModel",value:function(e){return e instanceof n}},{key:"create",value:function(){var e,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;if(null==t)return n.createEmpty();if(n.isModel(t)&&(e=t),ej(t)&&(e=n.fromJSON(t)),e)return null==e.focusKey&&(e=e.set("focusKey",e.rootTopicKey)),null==e.focusMode&&(e=e.set("focusMode",sj)),e;throw new Error("`Value.create` only accepts objects or values, but you passed it: ".concat(t))}},{key:"createEmpty",value:function(){var e=new n,t=Vj.create({key:zj(),content:"RootTopic"});return e.update("topics",(function(e){return e.set(t.key,t)})).set("rootTopicKey",t.key).set("editorRootTopicKey",t.key).set("focusKey",t.key).set("focusMode",sj)}},{key:"fromJSON",value:function(e){var t=new n,o=e.topics,r=void 0===o?[]:o,c=e.config,i=void 0===c?{}:c,a=e.rootTopicKey,l=e.editorRootTopicKey;return void 0===l&&(l=a),t=(t=t.merge({rootTopicKey:a,editorRootTopicKey:l})).withMutations((function(e){r.forEach((function(t){e.update("topics",(function(e){return e.set(t.key,Vj.fromJSON(t))}))})),e.set("config",Bj.fromJSON(i))}))}}]),n}(Object(T.Record)(Jj));function qj(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.plugins,n=void 0===t?[]:t;return Object(v.a)(n)}b()("core:controller");function Xj(e,t){if(Array.isArray(t))t.forEach((function(t){return Xj(e,t)}));else if(null!=t)for(var n in t){var o=t[n];e.middleware[n]=e.middleware[n]||[],e.middleware[n].push(o)}}function $j(e){if(!Array.isArray(e))throw new TypeError("Middleware stack must be an array!");var t,n=Object(O.a)(e);try{for(n.s();!(t=n.n()).done;){if("function"!==typeof t.value)throw new TypeError("Middleware must be composed of functions!")}}catch(o){n.e(o)}finally{n.f()}return function(t,n){var r=-1;return function c(i){if(i<=r)throw new Error("next() called multiple times");r=i;var a=e[i];i===e.length&&(a=n);if(!a)return null;try{return a(t,c.bind(null,i+1))}catch(o){throw o}}(0)}}var Qj,ek,tk,nk,ok,rk,ck,ik,ak,lk,uk,sk,pk,dk,fk,bk,yk,hk,gk,mk,Ok,vk,Tk,jk,kk,Ek,xk,Sk,Ck,wk,Kk,Rk,Dk,Lk,Ik,_k,Mk,Ak,Nk,Fk,Pk,Bk,zk,Vk,Hk,Gk,Wk,Uk,Zk,Jk,Yk,qk,Xk,$k,Qk,eE,tE,nE=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};Object(a.a)(this,e);var n=t.plugins,o=void 0===n?[]:n,r=t.onChange,c=t.readOnly;this.readOnly=c,this.onChange=r,this.middleware=new Map;var i=qj({plugins:o});Xj(this,i)}return Object(l.a)(e,[{key:"run",value:function(e){var t=this.middleware,n=t[e]||[];nj(0!==n.length,"the middleware function ".concat(e," is not found!"));for(var o=Object(E.a)($j)(n),r=arguments.length,c=new Array(r>1?r-1:0),i=1;i<r;i++)c[i-1]=arguments[i];return o.apply(void 0,c)}},{key:"getValue",value:function(e,t){return this.run("getValue",Object(m.a)(Object(m.a)({},t),{},{propKey:e}))}},{key:"change",value:function(e,t){this.onChange(e,t),this.currentModel=e}}]),e}(),oE=(n(868),["title"]),rE=["layout","title"],cE=["layout","title"],iE=["controller","children","onClick"],aE=["text"],lE=function(e){Object(u.a)(n,e);var t=Object(s.a)(n);function n(e){return Object(a.a)(this,n),t.call(this,e)}return Object(l.a)(n,[{key:"operation",value:function(e,t){this.props.controller.run("operation",Object(m.a)({opType:e},t))}},{key:"run",value:function(e,t){this.props.controller.run(e,t)}},{key:"topic",get:function(){return this.props.model.getTopic(this.props.topicKey)}}]),n}(o.Component),uE=b()("node:drag-scroll-widget"),sE=d.default.div(Qj||(Qj=Object(Ra.a)(["\n  position: relative;\n  width: 100%;\n  height: 100%;\n  overflow: scroll;\n"]))),pE=d.default.div(ek||(ek=Object(Ra.a)(["\n  position: relative;\n  width: max-content;\n"]))),dE=function(e){Object(u.a)(n,e);var t=Object(s.a)(n);function n(e){var o;return Object(a.a)(this,n),(o=t.call(this,e)).contentResizeCallback=function(e,t){if(o.oldContentRect){var n={width:o.content.clientWidth+2*o.viewBox.clientWidth,height:o.content.clientHeight+2*o.viewBox.clientHeight};o.bigView.style.width=n.width+"px",o.bigView.style.height=n.height+"px"}o.oldContentRect=e[0].contentRect},o.contentResizeObserver=new p.a(o.contentResizeCallback),o.contentRef=function(e){e&&(o.content=e,o.contentResizeObserver.observe(o.content))},o.viewBoxRef=function(e){e&&(o.viewBox=e,o.props.enableMouseWheel||(uE("addEventListener onwheel"),o.viewBox.addEventListener("wheel",(function(e){uE("onwheel"),(e.ctrlKey||e.altKey)&&e.preventDefault()}),{passive:!1})),o.setViewBoxScroll(o.viewBox.clientWidth,o.viewBox.clientHeight))},o.bigViewRef=function(e){e&&(o.bigView=e)},o.setWidgetStyle=function(){o.content&&o.viewBox&&o.bigView&&(o.bigView.style.width=2*(o.content.clientWidth+o.viewBox.clientWidth)+"px",o.bigView.style.height=2*(o.content.clientHeight+o.viewBox.clientHeight)+"px",o.content.style.left=o.viewBox.clientWidth+"px",o.content.style.top=o.viewBox.clientHeight+"px")},o.setViewBoxScroll=function(e,t){uE("setViewBoxScroll ".concat(e," ").concat(t)),o.viewBox&&(o.viewBox.scrollLeft=e,o.viewBox.scrollTop=t)},o.setViewBoxScrollDelta=function(e,t){uE("setViewBoxScrollDelta ".concat(e," ").concat(t)),o.viewBox&&(o.viewBox.scrollLeft+=e,o.viewBox.scrollTop+=t)},o.onMouseDown=function(e){var t=o.props,n=t.mouseKey,r=t.needKeyPressed,c=t.canDragFunc;if((!c||c())&&(0===e.button&&"left"===n||2===e.button&&"right"===n)){if(r&&!e.ctrlKey)return;o._lastCoordX=o.viewBox.scrollLeft+e.nativeEvent.clientX,o._lastCoordY=o.viewBox.scrollTop+e.nativeEvent.clientY;var i=o.viewBox;i.addEventListener("mousemove",o.onMouseMove),i.addEventListener("mouseup",o.onMouseUp)}},o.onMouseUp=function(e){var t=o.viewBox;t.removeEventListener("mousemove",o.onMouseMove),t.removeEventListener("mouseup",o.onMouseUp)},o.onMouseMove=function(e){o.viewBox.scrollLeft=o._lastCoordX-e.clientX,o.viewBox.scrollTop=o._lastCoordY-e.clientY},o.handleContextMenu=function(e){e.preventDefault()},o.state={widgetStyle:{width:"10000px",height:"10000px"}},o}return Object(l.a)(n,[{key:"componentDidMount",value:function(){this.setWidgetStyle(),document.addEventListener("contextmenu",this.handleContextMenu)}},{key:"componentWillUnmount",value:function(){document.removeEventListener("contextmenu",this.handleContextMenu)}},{key:"setZoomFactor",value:function(e){this.bigView.style.transform="scale(".concat(e,")"),this.bigView.style.transformOrigin="50% 50%"}},{key:"render",value:function(){var e=Object(m.a)({},this.state.widgetStyle);return Object(o.createElement)(sE,{ref:this.viewBoxRef,onMouseDown:this.onMouseDown},Object(o.createElement)("div",{style:e,ref:this.bigViewRef},Object(o.createElement)(pE,{ref:this.contentRef,style:this.state.contentStyle},this.props.children(this.setViewBoxScroll,this.setViewBoxScrollDelta))))}}]),n}(o.Component);dE.defaultProps={mouseKey:"left",needKeyPressed:!1};var fE=b()("node:save-ref"),bE=function(e){Object(u.a)(n,e);var t=Object(s.a)(n);function n(){var e;return Object(a.a)(this,n),(e=t.apply(this,arguments)).getRef=function(t){return fE(Object(Ka.a)(e)),e[t]},e.saveRef=function(t){return function(n){n&&(e[t]=n,e.fireListener(t,n))}},e.deleteRef=function(t){fE("deleteRef:",t),delete e[t]},e.observers=new Map,e.fireListener=function(t,n){if(e.observers.has(t)){var o,r=e.observers.get(t),c=Object(O.a)(r);try{for(c.s();!(o=c.n()).done;){(0,o.value)(t,n)}}catch(i){c.e(i)}finally{c.f()}}},e.registerRefListener=function(t,n){e.observers.has(t)?e.observers.get(t).push(n):e.observers.set(t,[n])},e}return Object(l.a)(n,[{key:"render",value:function(){return this.props.children(this.saveRef,this.getRef,this.deleteRef,this.registerRefListener.bind(this))}}]),n}(o.Component),yE=d.default.div(tk||(tk=Object(Ra.a)(["\n  display: flex;\n  flex-direction: ",";\n  align-items: ",";\n  justify-content: ",";\n"])),(function(e){return e.flexDirection?e.flexDirection:"row"}),(function(e){return e.alignItems}),(function(e){return e.justifyContent})),hE=d.default.div(nk||(nk=Object(Ra.a)(["\n  margin: ",";\n"])),(function(e){return e.margin})),gE=d.default.a(ok||(ok=Object(Ra.a)(["\n  font-size: 20px !important;\n"]))),mE=d.default.div(rk||(rk=Object(Ra.a)(["\n  padding: 5px;\n  cursor: pointer;\n"]))),OE=d.default.div(ck||(ck=Object(Ra.a)(["\n  cursor: pointer;\n  &:hover {\n    color: #1ea7fd;\n  }\n"]))),vE=Object(d.default)(y.e)(ik||(ik=Object(Ra.a)(["\n  margin-bottom: 0px !important;\n"]))),TE=Object(d.default)(OE)(ak||(ak=Object(Ra.a)(["\n  position: absolute;\n  right: 5px;\n  top: 5px;\n  //padding: 5px;\n"]))),jE=d.default.div(lk||(lk=Object(Ra.a)(["\n  height: 16px;\n"]))),kE=d.default.span(uk||(uk=Object(Ra.a)(["\n  margin: 0px 10px;\n  &:hover {\n    color: palevioletred;\n  }\n"]))),EE=d.default.div(sk||(sk=Object(Ra.a)(["\n  z-index: ",";\n"])),(function(e){return e.zIndex})),xE=d.default.div(pk||(pk=Object(Ra.a)(["\n  min-width: 380px;\n  max-width: 482px;\n  max-height: 470px;\n  overflow: auto;\n"]))),SE=d.default.div(dk||(dk=Object(Ra.a)(["\n  position: absolute;\n  left: 0;\n  top: 0;\n  width: 100%;\n  height: 100%;\n"]))),CE=(d.default.div(fk||(fk=Object(Ra.a)(["\n  max-height: ",";\n  overflow-y: auto;\n  overflow-x: hidden;\n"])),(function(e){return e.maxHeight||"300px"})),d.default.div(bk||(bk=Object(Ra.a)(["\n  margin-top: 10px;\n  margin-bottom: 5px;\n  font-weight: bold;\n"])))),wE=d.default.span(yk||(yk=Object(Ra.a)(["\n  margin: 0 10px 0 2px;\n"]))),KE=d.default.div(hk||(hk=Object(Ra.a)(["\n  padding: 10px;\n  margin: 0 0 10px 0;\n  border: rgba(16, 22, 26, 0.15) solid 1px;\n  border-radius: 5px;\n"]))),RE=Object(d.default)(wE)(gk||(gk=Object(Ra.a)([""]))),DE=d.default.div(mk||(mk=Object(Ra.a)(["\n  display: flex;\n  align-items: center;\n  //justify-content: center;\n  margin: 5px 0;\n"]))),LE=d.default.div(Ok||(Ok=Object(Ra.a)(["\n  height: 3px;\n  width: 80%;\n  margin-left: 10%;\n  margin-right: 10%;\n  margin-bottom: 2px;\n  background: ",";\n"])),(function(e){return e.color})),IE=d.default.div(vk||(vk=Object(Ra.a)(["\n  border: 1px solid grey;\n  cursor: pointer;\n  font-weight: bold;\n"]))),_E="show-menu",ME="close",AE="color-picker",NE="notes",FE="plus",PE="minus",BE="collapse",zE="expand",VE="center",HE="layout-left-and-right";function GE(e){return"icon iconfont bm-".concat(e)}function WE(e){return Object(o.createElement)("span",{className:GE(e)})}function UE(e){return"content-".concat(e)}function ZE(e){return"content-editor-".concat(e)}function JE(e){return"desc-editor-".concat(e)}function YE(e){return"topic-widget-".concat(e)}function qE(e){return"topic-".concat(e)}function XE(e){return"links-".concat(e)}function $E(e){return"links-svg-".concat(e)}function QE(e){return"collapse-".concat(e)}function ex(e,t){return"dropArea-".concat(t,"-").concat(e)}var tx="DIAGRAM-ROOT",nx="DragScrollWidget",ox="svg-highlight",rx="focus-highlight",cx="drop-effect",ix="CENTER_ROOT_TOPIC",ax="DIAGRAM_CUSTOMIZE_BASE_Z_INDEX",lx="TOPIC_CONTEXT_MENU_ENABLED",ux="TOPIC_TITLE",sx="DRAG_DROP_STATE",px="RIGHT_TOP_PANEL_STATE",dx="OPERATION_ENABLED",fx="CONFIRM",bx="CANCEL",yx="DEFAULT",hx="SEARCH",gx="LEFT_AND_RIGHT",mx="ONLY_LEFT",Ox="ONLY_RIGHT",vx="EDIT",Tx="ADD_SIBLING",jx="ADD_CHILD",kx="EDIT_NOTES",Ex="DELETE",xx="SET_AS_EDITOR_ROOT",Sx="EDIT_TOPOLOGY_DIAGRAM",Cx="SET_TOPIC_REFERENCES",wx="TOPIC_STYLE",Kx="STYLE",Rx="TEXT_EDITOR",Dx="LINK",Lx="LINK_TO_PARENT",Ix="SUB_LINKS",_x="COPY_STYLE",Mx="PASTE_STYLE",Ax="CLEAR_TOPIC_STYLE",Nx="CLEAR_ALL_CUSTOM_STYLE",Fx="LINE_TYPE",Px="THEME",Bx="GLOBAL",zx="HIGHLIGHT",Vx="RANDOM_COLOR",Hx="NORMAL_TOPIC",Gx="PRIMARY_TOPIC",Wx="ROOT_TOPIC",Ux="EXPORT_THEME",Zx="IMPORT_THEME",Jx="TAGS",Yx="TAGS_MANAGER",qx="TAG_NAME",Xx="ADD_TAG",$x="UPDATE_TAG",Qx="ALREADY_ADDED",eS="CAN_BE_ADDED",tS="TOPICS_THAT_USE_THIS_TAG",nS="BACKGROUND",oS="COLOR",rS="BORDER",cS="WIDTH",iS="RADIUS",aS="FONT_SIZE",lS="LINE_HEIGHT",uS="PADDING",sS="TOP",pS="BOTTOM",dS="LEFT",fS="RIGHT",bS="NONE",yS="SOLID",hS="DOTTED",gS="DASHED",mS="DOUBLE",OS="ROUND",vS="CURVE",TS="LINE",jS="COLLAPSE_ALL",kS="EXPAND_ALL",ES="CENTER_ROOT_TOPIC",xS="ZOOM",SS="ZOOM_IN",CS="ZOOM_OUT",wS="RESET",KS="RESET_ZOOM",RS="NOTE_PLACEHOLDER",DS="TOPOLOGY_DIAGRAM_EDITOR",LS="BASIC",IS="FLOW_GRAPH",_S="ACTIVITY_DIAGRAM",MS="SEQUENCE_DIAGRAM",AS="CLASS_DIAGRAM",NS="REFERENCE_TOPICS",FS="REFERENCED_TOPICS",PS="SELECT_REF_TOPICS_TIP",BS="TAG_NAME_OVER_MAX_TIP",zS="DELETE_TAG_TIP",VS="DELETE_TOPOLOGY_TIP",HS=function(e){e.stopPropagation()};function GS(e,t){!function(e,t){var n=document.createElement("a");n.href=e,n.download=t,n.click()}("data:text/plain,".concat(encodeURIComponent(e)),t)}function WS(e){var t=e.top,n=void 0===t?0:t,o=e.right,r=void 0===o?0:o,c=e.bottom,i=void 0===c?0:c,a=e.left,l=void 0===a?0:a;return"".concat(n,"px ").concat(r,"px ").concat(i,"px ").concat(l,"px")}function US(e,t){return Array.isArray(t)?t.map((function(t){return e.controller.run("getI18nText",Object(m.a)(Object(m.a)({},e),{},{key:t}))})):e.controller.run("getI18nText",Object(m.a)(Object(m.a)({},e),{},{key:t.toUpperCase()}))}function ZS(e){return(e.top+e.bottom)/2}function JS(e,t){return(e.x+t.x)/2}function YS(e,t){return(e.y+t.y)/2}function qS(e){return[(e.left+e.right)/2,(e.top+e.bottom)/2]}function XS(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,o=e.getBoundingClientRect(),r=t.getBoundingClientRect(),c=qS(r),i=qS(o);i[0]=(i[0]-c[0])/n,i[1]=(i[1]-c[1])/n;var a=o.width/n,l=o.height/n;return{left:i[0]-a/2,right:i[0]+a/2,top:i[1]-l/2,bottom:i[1]+l/2,width:a,height:l}}function $S(e,t){var n=e.getBoundingClientRect(),o=qS(t.getBoundingClientRect()),r=qS(n);return[r[0]-o[0],r[1]-o[1]]}function QS(e){return Object(o.createElement)("div",null,e.children,Object(o.createElement)(y.h,{style:{margin:"10px 0"}}))}function eC(e){var t=e.title,n=e.layout,r=void 0===n?"h":n,c=e.color,i=e.handleColorChange,a={flexDirection:"h"===r?"row":"column",alignItems:"center"};return Object(o.createElement)(wE,null,Object(o.createElement)(yE,Object.assign({},a),null!=t&&Object(o.createElement)(hE,{margin:"0 5px 0 0"},t),Object(o.createElement)(y.s,null,Object(o.createElement)(IE,null,Object(o.createElement)("div",{className:GE(AE)}),Object(o.createElement)(LE,{color:c})),Object(o.createElement)("div",null,Object(o.createElement)(rt.a,{color:c,onChangeComplete:function(e){return i(e.hex)}})))))}function tC(e){var t=e.title,n=Object(wa.a)(e,oE);return Object(o.createElement)(wE,null,Object(o.createElement)(y.d,Object.assign({},n),t))}function nC(e){var t=e.layout,n=void 0===t?"h":t,r=e.title,c=Object(wa.a)(e,rE),i={flexDirection:"h"===n?"row":"column",alignItems:"center"};return Object(o.createElement)(wE,null,Object(o.createElement)(yE,Object.assign({},i),Object(o.createElement)(hE,{margin:"0 5px 0 0"},r),Object(o.createElement)(y.q,Object.assign({},c))))}function oC(e){var t=e.layout,n=void 0===t?"h":t,r=e.title,c=Object(wa.a)(e,cE),i={flexDirection:"h"===n?"row":"column",alignItems:"center"};return Object(o.createElement)(wE,null,Object(o.createElement)(yE,Object.assign({},i),Object(o.createElement)(hE,{margin:"0 5px 0 0"},r," "),Object(o.createElement)(y.m,Object.assign({},c))))}function rC(e){var t=e.text,n=e.items,r=e.itemRenderer,c=e.onItemSelect,i=ot.a.ofType(),a={items:n,itemRenderer:r,onItemSelect:c,filterable:!1};return Object(o.createElement)(wE,null,Object(o.createElement)(i,Object.assign({},a),Object(o.createElement)(y.d,{text:t})))}var cC=function(e){return function(t,n){var r=n.handleClick;return Object(o.createElement)(y.p,{text:"".concat(t).concat(e),key:t,onClick:r})}},iC=function(e){return function(t,n){var r=n.handleClick;return Object(o.createElement)(y.p,{text:US(e,t),key:t,onClick:r})}},aC=(ot.a.ofType(),Object(v.a)(Array(7).keys())),lC=d.default.div(Tk||(Tk=Object(Ra.a)(["\n  position: relative;\n  padding: 6px;\n  width: 40px;\n  height: 40px;\n  cursor: pointer;\n  color: ",";\n  font-size: 24px;\n  display: inline-block;\n  &:hover {\n    color: ",";\n  }\n"])),(function(e){return e.disabled?"grey":"black"}),(function(e){return e.disabled?"grey":"rgb(44, 184, 146)"}));function uC(e){var t=e.controller,n=e.children,r=e.onClick,c=Object(wa.a)(e,iE),i=e.disabled;i=i||!t.getValue(dx,e);var a=Object(m.a)({controller:t,disabled:i,onClick:function(e){i||r(e)}},c);return Object(o.createElement)(lC,Object.assign({},a),n)}var sC=b()("plugin:event");function pC(){var e={};return{handleTopicClick:function(e){sC("handleTopicClick");var t=e.controller,n=e.model,o=e.topicKey;sC(n.zoomFactor),null===n.editingDescKey&&n.editingContentKey!==o&&(n.focusKey===o&&n.focusMode===pj||t.run("operation",Object(m.a)(Object(m.a)({},e),{},{opType:Sj,focusMode:sj})))},handleTopicDoubleClick:function(e){var t=e.controller;null===e.model.editingDescKey&&t.run("operation",Object(m.a)(Object(m.a)({},e),{},{opType:Sj,focusMode:pj}))},handleTopicContextMenu:function(e){e.controller.run("operation",Object(m.a)(Object(m.a)({},e),{},{opType:Sj,focusMode:fj}))},handleActiveModalClose:function(e){var t=e.controller,n=t.run("getActiveModalProps",e);return null==n?null:"edit-desc"===n.name?function(){t.run("operation",Object(m.a)(Object(m.a)({},e),{},{focusMode:sj,opType:Sj}))}:void 0},addEventListener:function(t){var n=t.key,o=t.listener,r=t.once,c=t.controller;function i(){o(),c.run("removeEventListener",{key:n,listener:o})}e[n]||(e[n]=[]),r?(i.origin=o,e[n].push(i)):e[n].push(o)},removeEventListener:function(t){var n=t.key,o=t.listener;e[n]&&(e[n]=e[n].filter((function(e){return e!==o&&e.origin!==o})))},fireEvent:function(t){var n=t.key;e[n]&&e[n].forEach((function(e){return e()}))}}}var dC="ADD_CHILD",fC="ADD_SIBLING",bC="DELETE_TOPIC",yC="EDIT_CONTENT",hC="EDIT_NOTES",gC="SET_EDITOR_ROOT",mC=0,OC=1;function vC(){return{customizeHotKeys:function(e){var t=function(t){return function(n){!function(e,t){var n=t,o=n.topicKey,r=n.model,c=n.controller;void 0===o&&(t=Object(m.a)(Object(m.a)({},t),{},{topicKey:r.focusKey})),c.run("operation",Object(m.a)(Object(m.a)({},t),{},{opType:e}))}(t,e)}};return{topicHotKeys:new Map([[dC,{label:"add child",combo:"tab",onKeyDown:t(kj)}],[fC,{label:"add sibling",combo:"enter",onKeyDown:t(Ej)}],[bC,{label:"delete topic",combo:"del",onKeyDown:t(xj)}],[yC,{label:"edit content",combo:"space",onKeyDown:t(Ij)}],[hC,{label:"edit notes",combo:"alt + d",onKeyDown:t(_j)}],[gC,{label:"set editor root",combo:"alt + shift + f",onKeyDown:t(Aj)}]]),globalHotKeys:new Map}}}}function TC(){var e=new Map([[fx,"Confirm"],[bx,"Cancel"],[yx,"Default"],[hx,"Search"],[gx,"Left And Right"],[mx,"Only Left"],[Ox,"Only Right"],[vx,"Edit"],[jx,"Add Child"],[Tx,"Add Sibling"],[kx,"Edit Notes"],[Ex,"Delete"],[xx,"Set as Editor Root"],[Sx,"Edit Topology Diagram"],[Cx,"Set Topic References"],[wx,"TopicStyle"],[Kx,"Style"],[Rx,"Text Editor"],[Dx,"Link"],[Lx,"LinkToParent"],[Ix,"SubLinks"],[_x,"Copy Style"],[Mx,"Paste Style"],[Ax,"Clear Topic Style"],[Nx,"Clear All Custom Style"],[Fx,"LineType"],[Px,"Theme"],[Bx,"Global"],[zx,"Highlight"],[Vx,"Random Color"],[Hx,"NormalTopic"],[Gx,"PrimaryTopic"],[Wx,"RootTopic"],[Ux,"Export Theme"],[Zx,"Import Theme"],[Jx,"Tags"],[Yx,"Tags Manager"],[qx,"Tag Name"],[Xx,"Add Tag"],[$x,"Update Tag"],[Qx,"Already Added"],[eS,"Can be Added"],[tS,"Topics that Use this Tag"],[nS,"Background"],[oS,"Color"],[rS,"Border"],[cS,"Width"],[iS,"Radius"],[aS,"FontSize"],[lS,"LineHeight"],[uS,"Padding"],[sS,"Top"],[pS,"Bottom"],[dS,"Left"],[fS,"Right"],[bS,"None"],[yS,"Solid"],[hS,"Dotted"],[gS,"Dashed"],[mS,"Double"],[OS,"Round"],[vS,"Curve"],[TS,"Line"],[jS,"Collapse All"],[kS,"Expand All"],[ES,"Center Root Topic"],[xS,"zoom"],[SS,"Zoom In"],[CS,"Zoom Out"],[wS,"Reset"],[KS,"Reset Zoom"],[RS,"Write topic notes here"],[DS,"Topology Diagram Editor"],[LS,"Basic"],[IS,"Flow Graph"],[_S,"Activity Diagram"],[MS,"Sequence Diagram"],[AS,"Class Diagram"],[NS,"Reference Topics"],[FS,"Referenced Topics"],[PS,"Please select the topics you want to reference. After selection, click the confirm button."],[BS,"The length of tag name over the maximum length: 50!"],[zS,"All the relationship about this tag will be lost if you delete this tag! Are you confirm?"],[VS,"Are you confirm to delete this topology diagram?"]]);return{getI18nTextMap:function(){return e},getI18nText:function(e){var t=e.controller,n=e.key,o=t.run("getI18nTextMap",e);if(!o.has(n))throw new Error("i18n key ".concat(n," is not exist"));return o.get(n)}}}var jC=b()("plugin:operation");function kC(){var e=new Map([[Oj,Zj.toggleCollapse],[vj,Zj.collapseAll],[Tj,Zj.expandAll],[jj,Zj.expandTo],[kj,Zj.addChild],[Ej,Zj.addSibling],[xj,Zj.deleteTopic],[Sj,Zj.focusTopic],[Cj,Zj.setFocusMode],[wj,Zj.setStyle],[Kj,Zj.clearAllCustomStyle],[Rj,Zj.setTheme],[Dj,Zj.setBlockData],[Lj,Zj.deleteBlock],[Ij,function(e){var t=e.model,n=e.topicKey;return Zj.focusTopic({model:t,topicKey:n,focusMode:pj})}],[_j,function(e){var t=e.model,n=e.topicKey,o=t.getTopic(n).getBlock(uj);return null!=o.block&&null!=o.block.data||(t=Zj.setBlockData({model:t,topicKey:n,blockType:uj,data:""})),t=Zj.focusTopic({model:t,topicKey:n,focusMode:dj})}],[Mj,function(e){var t=e.srcKey,n=e.dstKey,o=e.dropDir,r=e.model,c=r.getTopic(t),i=r.getTopic(n),a=c.parentKey,l=r.getTopic(a).subKeys,u=l.indexOf(t);if(l=l.delete(u),"in"===o){var s=i.subKeys;s=s.push(t),r=r.withMutations((function(e){e.setIn(["topics",a,"subKeys"],l).setIn(["topics",t,"parentKey"],n).setIn(["topics",n,"subKeys"],s).setIn(["topics",n,"collapse"],!1)}))}else{var p=i.parentKey,d=r.getTopic(p).subKeys,f=d.indexOf(n);if(a===p){var b=Object(T.List)();d.forEach((function(e){e!==t&&(b=e===n?"prev"===o?b.push(t).push(e):b.push(e).push(t):b.push(e))})),r=r.withMutations((function(e){e.setIn(["topics",p,"subKeys"],b)}))}else"prev"===o?d=d.insert(f,t):"next"===o&&(d=d.insert(f+1,t)),r=r.withMutations((function(e){e.setIn(["topics",a,"subKeys"],l).setIn(["topics",t,"parentKey"],p).setIn(["topics",p,"subKeys"],d).setIn(["topics",p,"collapse"],!1)}))}return r}],[Aj,Zj.setEditorRootTopicKey],[Nj,Zj.setLayoutDir]]),t=Object(T.Stack)(),n=Object(T.Stack)(),o=!0,r=new Set;return{isOperationEnabled:function(e){return o},enableOperation:function(){o=!0},disableOperation:function(e){var t=e.whiteList;o=!1,t?r=new Set(t):r.clear()},getOpMap:function(t){return e},getAllowUndo:function(e){var t=e.model,n=e.opType,o=e.allowUndo;if(!1===(void 0===o||o))return!1;if(n)switch(n){case Sj:case Cj:case Ij:case _j:return!1}switch(t.focusMode){case"EDITING_DESC":case"EDITING_CONTENT":return!1}return t.config.allowUndo},getUndoRedoStack:function(){return{undoStack:t,redoStack:n}},setUndoStack:function(e){jC("setUndoStack",e.undoStack),t=e.undoStack},setRedoStack:function(e){jC("setRedoStack",e.redoStack),n=e.redoStack},canUndo:function(e){var t=e.controller;if(!t.run("isOperationEnabled",e))return!1;var n=t.run("getUndoRedoStack",e).undoStack,o=t.run("getAllowUndo",e);return n.size>0&&o},canRedo:function(e){var t=e.controller;if(!t.run("isOperationEnabled",e))return!1;var n=t.run("getUndoRedoStack",e).redoStack,o=t.run("getAllowUndo",e);return n.size>0&&o},undo:function(e){var t=e.controller,n=e.model;if(t.run("getAllowUndo",e)){var o=t.run("getUndoRedoStack",e),r=o.undoStack,c=o.redoStack,i=r.peek();i&&(t.run("setUndoStack",Object(m.a)(Object(m.a)({},e),{},{undoStack:r.shift()})),t.run("setRedoStack",Object(m.a)(Object(m.a)({},e),{},{redoStack:c.push(n)})),jC(i),t.change(i))}},redo:function(e){var t=e.controller,n=e.model;if(t.run("getAllowUndo",e)){var o=t.run("getUndoRedoStack",e),r=o.undoStack,c=o.redoStack,i=c.peek();i&&(t.run("setUndoStack",Object(m.a)(Object(m.a)({},e),{},{undoStack:r.push(n)})),t.run("setRedoStack",Object(m.a)(Object(m.a)({},e),{},{redoStack:c.shift()})),t.change(i))}},operation:function(e){var t=e.controller,n=e.opType,o=e.model,c=e.opArray,i=e.callback;if(null!=c&&!Array.isArray(c))throw new Error("operation: the type of opArray must be array!");if(null!=n&&null!=c)throw new Error("operation: opType and opArray conflict!");if(!t.run("isOperationEnabled",e)){if(0===r.size)return;if(null!=c){var a=c.filter((function(e){return!r.has(e.opType)}));if(a&&a.length>0)return}else if(!r.has(n))return}jC("operation:",n||c.map((function(e){return e.opType}))),jC("operation:",o),jC("operation:",e);var l,u=t.run("getOpMap",e);if(t.run("beforeOperation",e),t.run("getAllowUndo",e)){var s=t.run("getUndoRedoStack",e).undoStack;t.run("setUndoStack",Object(m.a)(Object(m.a)({},e),{},{undoStack:s.push(o)}))}if(null!=c)l=c.reduce((function(e,n){var o=n.opType;if(!u.has(o))throw new Error("opType:".concat(o," not exist!"));var r=u.get(o),c=Object(m.a)(Object(m.a)({controller:t},n),{},{model:e}),i=t.run("beforeOpFunction",c);return i=r(Object(m.a)(Object(m.a)({},c),{},{model:i})),i=t.run("afterOpFunction",Object(m.a)(Object(m.a)({},c),{},{model:i}))}),o);else{if(!u.has(n))throw new Error("opType:".concat(n," not exist!"));var p=u.get(n);l=t.run("beforeOpFunction",e),l=p(Object(m.a)(Object(m.a)({},e),{},{model:l})),l=t.run("afterOpFunction",Object(m.a)(Object(m.a)({},e),{},{model:l}))}jC("newModel:",l),t.change(l,i?i(l):null),t.run("afterOperation",e)},deleteRefKey:function(e){var t=e.model,n=e.topicKey,o=e.deleteRef,r=Hj(t,n);r.push(n);var c,i=Object(O.a)(r);try{for(i.s();!(c=i.n()).done;){var a=c.value;o(XE(a)),o($E(a)),o(UE(a)),o(ZE(a)),o(JE(a)),o(YE(a)),o(qE(a)),o(QE(a)),o(ex(a,"next")),o(ex(a,"prev"))}}catch(l){i.e(l)}finally{i.f()}},beforeOperation:function(e){},afterOperation:function(e){},beforeOpFunction:function(e){var t=e.controller,n=e.opType,o=e.model,r=e.topicKey;return n===xj&&r!==o.editorRootTopicKey&&t.run("deleteRefKey",e),o},afterOpFunction:function(e){return e.model},openNewModel:function(e){var t=e.model,n=e.controller,o=e.newModel;n.run("deleteRefKey",Object(m.a)(Object(m.a)({},e),{},{topicKey:t.rootTopicKey})),n.run("operation",Object(m.a)(Object(m.a)({},e),{},{opType:jj,topicKey:o.focusKey,model:o,callback:function(t){return function(){n.run("moveTopicToCenter",Object(m.a)(Object(m.a)({},e),{},{model:t,topicKey:t.focusKey}))}}}))}}}var EC=function(e){Object(u.a)(n,e);var t=Object(s.a)(n);function n(){return Object(a.a)(this,n),t.apply(this,arguments)}return Object(l.a)(n,[{key:"render",value:function(){var e=this.props.controller;return Object(o.createElement)(y.n,null,e.run("customizeTopicContextMenu",this.props))}}]),n}(lE),xC=[{icon:"edit",label:vx,shortcut:"Space",rootCanUse:!0,opType:Ij},{icon:"add-sibling",label:Tx,shortcut:"Enter",opType:Ej},{icon:"add-child",label:jx,shortcut:"Tab",rootCanUse:!0,opType:kj},{icon:"notes",label:kx,shortcut:"Alt + D",rootCanUse:!0,opType:_j},{icon:"delete-node",label:Ex,shortcut:"Del",opType:xj},{icon:"root",label:xx,shortcut:"Alt + Shift + F",opType:Aj}];function SC(){return{renderTopicContextMenu:function(e){return Object(o.createElement)(EC,Object.assign({},e))},customizeTopicContextMenu:function(e){var t=e.topicKey,n=e.model,r=e.controller,c=t===n.editorRootTopicKey;function i(t){return function(n){t.opType&&r.run("operation",Object(m.a)(Object(m.a)({},e),{},{opType:t.opType}))}}return xC.map((function(t){return c&&!t.rootCanUse?null:Object(o.createElement)(y.p,{key:t.label,icon:WE(t.icon),text:US(e,t.label),labelElement:Object(o.createElement)("kbd",null,t.shortcut),onClick:i(t)})}))}}}var CC=b()("node:topic-drop-effect"),wC=d.default.svg(jk||(jk=Object(Ra.a)(["\n  width: 100%;\n  height: 100%;\n  position: absolute;\n  left: 0;\n  top: 0;\n  z-index: 2;\n  pointer-events: none;\n"]))),KC=function(e){Object(u.a)(n,e);var t=Object(s.a)(n);function n(){var e;return Object(a.a)(this,n),(e=t.apply(this,arguments)).state={content:null},e}return Object(l.a)(n,[{key:"layout",value:function(){var e=this.props,t=e.getRef,n=e.model,r=e.zoomFactor,c=e.diagramState.dragDrop;if(null!=c){var i=c.targetKey,a=c.targetDir;if(CC("layout",a),null!=i){var l=t("in"===a?UE(i):ex(i,a)),u=t("svg-drop-effect"),s=t(nx).bigView,p=XS(l,s,r),d=XS(u,s,r),f=p.left-d.left-3,b=p.top-d.top-3,y=p.width+6,h=p.height+6;this.setState({content:Object(o.createElement)("g",null,Object(o.createElement)("rect",{x:f,y:b,width:y,height:h,fill:"none",stroke:n.config.theme.highlightColor,strokeDasharray:"5,5",strokeWidth:2}))})}else this.setState({content:null})}else this.setState({content:null})}},{key:"render",value:function(){var e=this.props.saveRef;return Object(o.createElement)(wC,{ref:e("svg-drop-effect")},this.state.content)}}]),n}(lE),RC=b()("plugin:drag-and-drop"),DC=d.default.div(kk||(kk=Object(Ra.a)(["\n  height: ",";\n  width: 100%;\n  margin: 5px 0px;\n"])),(function(e){return"".concat(e.height,"px")}));function LC(){return{renderTopicDropArea:function(e){var t=e.topicKey,n=e.dropDir,r=e.saveRef,c=e.controller,i=e.model,a={onDragEnter:function(o){RC("onDragEnter",t,n),c.run("handleTopicDragEnter",Object(m.a)(Object(m.a)({},e),{},{ev:o,dropDir:n}))},onDragLeave:function(o){RC("onDragLeave",t,n),c.run("handleTopicDragLeave",Object(m.a)(Object(m.a)({},e),{},{ev:o,dropDir:n}))},onDragOver:function(e){e.preventDefault()},onDrop:function(o){RC("onDrop",t,n),c.run("handleTopicDrop",Object(m.a)(Object(m.a)({},e),{},{ev:o,dropDir:n}))}};return Object(o.createElement)(DC,Object.assign({height:i.config.theme.marginV/2,ref:r(ex(t,n))},a))},renderDragAndDropEffect:function(e){RC("renderDragAndDropEffect");var t=e.saveRef;return Object(o.createElement)(KC,Object.assign({ref:t(cx)},e))},handleTopicDragStart:function(e){var t=e.controller;e.ev.stopPropagation(),t.run("operation",Object(m.a)(Object(m.a)({},e),{},{opType:Sj,focusMode:bj}))},canDrop:function(e){var t=e.srcKey,n=e.dstKey,o=e.model,r=e.dropDir;return t!==o.editorRootTopicKey&&t!==n&&Gj(o,t,n)!==yj&&((n!==o.editorRootTopicKey||"in"===r)&&(o.getTopic(t).parentKey!==n||"in"!==r))},handleTopicDragEnter:function(e){var t=e.dropDir,n=e.topicKey,o=e.controller,r=e.model,c=e.diagramState,i=e.setDiagramState;RC("handleTopicDragEnter:",n,t),o.run("canDrop",Object(m.a)(Object(m.a)({},e),{},{srcKey:r.focusKey,dstKey:n}))&&i(Object(m.a)(Object(m.a)({},c),{},{dragDrop:{targetKey:n,targetDir:t}}))},handleTopicDragLeave:function(e){var t=e.topicKey,n=e.dropDir,o=e.getRef,r=e.ev,c=e.diagramState,i=e.setDiagramState,a=r.nativeEvent.relatedTarget;RC("handleTopicDragLeave:",t,n);var l=o(UE(t));l==a||l.contains(a)||i(Object(m.a)(Object(m.a)({},c),{},{dragDrop:null}))},handleTopicDrop:function(e){RC("handleTopicDrop");var t=e,n=t.controller,o=t.topicKey,r=t.model,c=t.diagramState,i=t.setDiagramState;e=Object(m.a)(Object(m.a)({},e),{},{srcKey:r.focusKey,dstKey:o}),i(Object(m.a)(Object(m.a)({},c),{},{dragDrop:null})),n.run("canDrop",e)&&n.run("operation",Object(m.a)(Object(m.a)({},e),{},{opType:Mj}))}}}function IC(e,t,n,o){var r,c=arguments.length,i=c<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)i=Reflect.decorate(e,t,n,o);else for(var a=e.length-1;a>=0;a--)(r=e[a])&&(i=(c<3?r(i):c>3?r(t,n,i):r(t,n))||i);return c>3&&i&&Object.defineProperty(t,n,i),i}var _C=d.default.div(Ek||(Ek=Object(Ra.a)(["\n  position: relative;\n  display: flex;\n  align-items: center;\n  padding: 5px;\n"]))),MC=d.default.div(xk||(xk=Object(Ra.a)(["\n  width: 100%;\n  height: 100%;\n  background: ",";\n"])),(function(e){return e.theme.background})),AC=function(e){Object(u.a)(n,e);var t=Object(s.a)(n);function n(e){var o;return Object(a.a)(this,n),(o=t.call(this,e)).setZoomFactor=function(e){o.dragScrollWidget.setZoomFactor(e)},o.onWheel=function(e){if(e.altKey||e.ctrlKey){var t=o.props.controller,n=t.run("getZoomFactor",o.props);(n-=e.nativeEvent.deltaY>0?.1:-.1)<.5&&(n=.5),n>4&&(n=4),t.run("setZoomFactor",Object(m.a)(Object(m.a)({},o.props),{},{zoomFactor:n}))}},o}return Object(l.a)(n,[{key:"renderHotkeys",value:function(){var e=this.props,t=e.controller,n=e.model,r=t.run("customizeHotKeys",e);if(null===r)return null;if(!(r.topicHotKeys instanceof Map&&r.globalHotKeys instanceof Map))throw new TypeError("topicHotKeys and globalHotKeys must be a Map");var c=[];return n.focusMode!==sj&&n.focusMode!==fj||r.topicHotKeys.forEach((function(e,t){c.push(Object(o.createElement)(y.j,Object.assign({key:t},e,{global:!0})))})),r.globalHotKeys.forEach((function(e,t){c.push(Object(o.createElement)(y.j,Object.assign({key:t},e,{global:!0})))})),Object(o.createElement)(y.k,null,c)}},{key:"componentDidMount",value:function(){var e=this.props,t=e.getRef,n=e.model;e.controller.run("addZoomFactorChangeEventListener",Object(m.a)(Object(m.a)({},this.props),{},{listener:this.setZoomFactor}));var o=t(qE(n.editorRootTopicKey)),r=t("node-layer"),c=o.getBoundingClientRect(),i=r.getBoundingClientRect();this.dragScrollWidget.setViewBoxScrollDelta(0,c.top-i.top-this.dragScrollWidget.viewBox.getBoundingClientRect().height/2+c.height),this.layout()}},{key:"componentWillUnmount",value:function(){this.props.controller.run("removeZoomFactorChangeEventListener",Object(m.a)(Object(m.a)({},this.props),{},{listener:this.setZoomFactor}))}},{key:"dragScrollWidget",get:function(){return this.props.getRef(nx)}},{key:"componentDidUpdate",value:function(){this.props.controller.run("fireEvent",Object(m.a)(Object(m.a)({},this.props),{},{key:ix})),this.layout()}},{key:"layout",value:function(){this.props.controller.run("layout",this.props)}},{key:"render",value:function(){var e=this,t=this.props,n=t.saveRef,r=t.model,c=t.controller,i=r.editorRootTopicKey;return Object(o.createElement)(MC,{onWheel:this.onWheel},Object(o.createElement)(dE,Object.assign({},this.state,{enableMouseWheel:!1,zoomFactor:r.zoomFactor,ref:n(nx)}),(function(t,r){var a=Object(m.a)(Object(m.a)({},e.props),{},{topicKey:i,setViewBoxScroll:t,setViewBoxScrollDelta:r});return Object(o.createElement)(_C,{ref:n("node-layer")},c.run("renderRootWidget",a))})))}}]),n}(o.PureComponent);AC=IC([y.l],AC);var NC=d.default.div(Sk||(Sk=Object(Ra.a)(["\n  display: flex;\n  flex-direction: column;\n  width: 100%;\n  height: 100%;\n"]))),FC=d.default.div(Ck||(Ck=Object(Ra.a)(["\n  width: 100%;\n  //height: 100%;\n  overflow: auto;\n  flex-grow: 1;\n  background: ",";\n  position: relative;\n"])),(function(e){return e.theme.background}));function PC(e){var t=e.controller,n=e.saveRef,r=Object(o.useState)(t.run("getInitialDiagramState",e)),c=Object(Ca.a)(r,2),i=c[0],a=c[1],l=Object(m.a)(Object(m.a)({},e),{},{diagramState:i,setDiagramState:a});return Object(o.createElement)(NC,null,t.run("renderToolbar",e),Object(o.createElement)(FC,{ref:n(tx)},Object(o.createElement)(AC,Object.assign({},l)),t.run("renderDiagramCustomize",l)))}var BC=Object(d.default)(EE)(wk||(wk=Object(Ra.a)(["\n  position: absolute;\n  width: 20%;\n  padding: 0 5px;\n  background: white;\n  left: 30px;\n  top: 20px;\n  border-radius: 2px;\n"]))),zC=d.default.div(Kk||(Kk=Object(Ra.a)(["\n  max-width: 600px;\n"]))),VC=d.default.span(Rk||(Rk=Object(Ra.a)([""]))),HC=function(e){Object(u.a)(n,e);var t=Object(s.a)(n);function n(e){var r;return Object(a.a)(this,n),(r=t.call(this,e)).setEditorRootTopicKey=function(e){return function(){var t=r.props,n=t.model,o=t.controller;n.editorRootTopicKey!==e&&o.run("operation",Object(m.a)(Object(m.a)({},r.props),{},{opType:Aj,topicKey:e}))}},r.breadcrumbRenderer=function(e){var t=e.text,n=Object(wa.a)(e,aE),r=t.length>8,c=r?t.substr(0,8)+"...":t,i={content:Object(o.createElement)(zC,null,t),position:y.u.BOTTOM_RIGHT},a=Object(o.createElement)(y.b,Object.assign({},n),Object(o.createElement)(VC,null,c));return r?Object(o.createElement)(y.x,Object.assign({},i),a):a},r}return Object(l.a)(n,[{key:"render",value:function(){var e=this.props,t=e.model,n=e.controller,r=e.zIndex,c=t.editorRootTopicKey;if(c===t.rootTopicKey)return null;for(var i=[],a=t.getTopic(c);null!=a;){var l=n.getValue(ux,Object(m.a)(Object(m.a)({},e),{},{topicKey:a.key}));i.unshift({text:l,onClick:this.setEditorRootTopicKey(a.key)}),a=t.getTopic(a.parentKey)}var u={items:i,breadcrumbRenderer:this.breadcrumbRenderer};return Object(o.createElement)(BC,{zIndex:r},Object(o.createElement)(y.c,Object.assign({},u)))}}]),n}(lE),GC=function(e){Object(u.a)(n,e);var t=Object(s.a)(n);function n(){var e;return Object(a.a)(this,n),(e=t.apply(this,arguments)).handleClose=function(){var t=e.props.controller.run("handleActiveModalClose",e.props);t&&t()},e}return Object(l.a)(n,[{key:"render",value:function(){var e=this.props.controller,t=e.run("renderModal",this.props),n=e.run("getActiveModalProps",this.props);return Object(o.createElement)(y.g,{onClose:this.handleClose,isOpen:null!==t,autoFocus:!0,enforceFocus:!0,usePortal:!0,title:n&&n.title,style:n&&n.style},Object(o.createElement)("div",{className:h.a.DIALOG_BODY,style:{minHeight:0}},t))}}]),n}(lE),WC=d.default.svg(Dk||(Dk=Object(Ra.a)(["\n  width: 100%;\n  height: 100%;\n  position: absolute;\n  left: 0;\n  top: 0;\n  z-index: 1;\n  pointer-events: none;\n"]))),UC=b()("node:root-sub-links"),ZC=function(e){Object(u.a)(n,e);var t=Object(s.a)(n);function n(){var e;return Object(a.a)(this,n),(e=t.apply(this,arguments)).state={curves:[]},e}return Object(l.a)(n,[{key:"layout",value:function(){var e,t,n,r=this.props,c=r.model,i=r.getRef,a=r.topicKey,l=r.zoomFactor,u=r.controller,s=c.getTopic(a),p=i(UE(a)),d=i($E(a)),f=i(nx).bigView,b=XS(p,f,l),y=XS(d,f,l);e={x:(n=b,(n.left+n.right)/2-y.left),y:ZS(b)-y.top};var h=[];s.subKeys.forEach((function(n){var c,a=u.run("getLinkStyle",Object(m.a)(Object(m.a)({},r),{},{topicKey:n})),s=a.lineType,p=XS(i(UE(n)),f,l);if(t={x:(t=p.left>b.right?{x:p.left,y:ZS(p)}:{x:p.right,y:ZS(p)}).x-y.left,y:t.y-y.top},"curve"===s)c="M ".concat(e.x," ").concat(e.y," C ").concat(e.x," ").concat(YS(e,t)," ").concat(JS(e,t)," ").concat(t.y," ").concat(t.x," ").concat(t.y);else if("line"===s)c="M ".concat(e.x," ").concat(e.y," L ").concat(t.x," ").concat(t.y);else if("round"===s){var d=t.y>e.y?1:-1,g=t.x>e.x?1:-1,O=a.lineRadius;if(null==O)throw new Error("link line type is round, but lineRadius is not provided!");c=t.y===e.y?"M ".concat(e.x," ").concat(e.y," H ").concat(t.x):"M ".concat(e.x," ").concat(e.y,"  V ").concat(t.y-d*O," A ").concat(O," ").concat(O," 0 0 ").concat(d*g===1?0:1," ").concat(e.x+O*g," ").concat(t.y," H ").concat(t.x)}h.push(Object(o.createElement)("path",{key:"link-".concat(n),d:c,strokeWidth:a.lineWidth,stroke:a.lineColor,fill:"none"}))})),this.setState({curves:h})}},{key:"render",value:function(){UC("render");var e=this.props,t=e.topicKey,n=e.saveRef;return Object(o.createElement)(WC,{ref:n($E(t))},Object(o.createElement)("g",null,this.state.curves))}}]),n}(lE),JC=b()("RootNode"),YC=d.default.div(Lk||(Lk=Object(Ra.a)(["\n  display: flex;\n  position: relative;\n\n  align-items: ",";\n  flex-direction: column;\n\n  padding: ",";\n"])),(function(e){return e.topicDirection===oj?"flex-end":"flex-start"}),(function(e){return e.topicDirection===oj?"15px 60px 15px 0px":"15px 0px 15px 60px"})),qC=d.default.div(Ik||(Ik=Object(Ra.a)(["\n  display: flex;\n  position: relative;\n  align-items: center;\n  z-index: 3;\n"]))),XC=function(e){Object(u.a)(n,e);var t=Object(s.a)(n);function n(){return Object(a.a)(this,n),t.apply(this,arguments)}return Object(l.a)(n,[{key:"renderPartTopics",value:function(e,t){var n=this.props,r=n.controller,c=n.saveRef,i=r.run("createSubTopics",Object(m.a)(Object(m.a)({},this.props),{},{dir:t,isRoot:!0,topics:e}));if(!i)return null;var a=i.subTopics,l="bm-layer-".concat(t===oj?"left":"right");return Object(o.createElement)(YC,{topicDirection:t,ref:c(l)},a)}},{key:"render",value:function(){JC("render");var e=this.props,t=e.model,n=e.topicKey,r=e.saveRef,c=e.controller,i=c.run("getTopicContentStyle",e),a=t.config,l=c.run("renderTopicContent",Object(m.a)(Object(m.a)({},e),{},{topicStyle:i,dir:cj})),u=c.run("getPartTopics",{layout:a.layoutDir,model:t,topicKey:n}),s=Object(o.createElement)(qC,{ref:r(qE(n))},l),p=c.run("renderRootWidgetOtherChildren",e);switch(a.layoutDir){case tj.LEFT_AND_RIGHT:return Object(o.createElement)(o.Fragment,null,this.renderPartTopics(u.L,"L"),s,this.renderPartTopics(u.R,"R"),p);case tj.LEFT_TO_RIGHT:return Object(o.createElement)(o.Fragment,null,s,this.renderPartTopics(u.R,"R"),p);case tj.RIGHT_TO_LEFT:return Object(o.createElement)(o.Fragment,null,this.renderPartTopics(u.L,"L"),s,p);case tj.TOP_TO_BOTTOM:return Object(o.createElement)(o.Fragment,null,s,this.renderPartTopics(u.B,"B"),p)}return null}}]),n}(o.Component),$C=d.default.div(_k||(_k=Object(Ra.a)(["\n  position: absolute;\n  top: calc(50% - 10px);\n  ",";\n  border-radius: 50%;\n  width: 20px;\n  height: 20px;\n  text-align: center;\n  //@ts-ignore\n  background: ",";\n  cursor: pointer;\n  padding: 0;\n  font-size: 14px;\n  line-height: 20px;\n  border: 0;\n  z-index: 2;\n"])),(function(e){var t=e.dir;return t===rj?Object(d.css)(Mk||(Mk=Object(Ra.a)(["\n        right: -25px;\n      "]))):t===oj?Object(d.css)(Ak||(Ak=Object(Ra.a)(["\n        left: -25px;\n      "]))):void 0}),(function(e){return e.background}));function QC(e){var t=e.model,n=e.topicKey,r=e.topicStyle,c=e.dir,i=e.saveRef,a=e.onClickCollapse,l=t.getTopic(n);return l.subKeys.size>0?Object(o.createElement)($C,{ref:i(QE(n)),onClick:a,background:r.background,dir:c,className:nt()(Object(Sa.a)({icon:!0,iconfont:!0},"bm-".concat(l.collapse?"plus":"minus"),!0))}):null}var ew=b()("node:topic-content2"),tw=d.default.div(Nk||(Nk=Object(Ra.a)(["\n  position: relative;\n"]))),nw=d.default.div(Fk||(Fk=Object(Ra.a)(["\n  position: absolute;\n  left: 0;\n  top: 0;\n  width: auto;\n  z-index: 10;\n  color: black;\n"]))),ow=function(e){ew("cancelEvent"),e.preventDefault(),e.stopPropagation()};function rw(e){var t,n=e.controller,r=e.model,c=e.topicKey,i=e.getRef,a=r.editingContentKey!==c,l=n.run("renderTopicContentEditor",Object(m.a)(Object(m.a)({},e),{},{readOnly:a}));if(a)t=l;else{var u,s={width:50,height:40},d=i("content-editor-".concat(c));d&&(s=d.getBoundingClientRect());var f=new p.a((function(e,t){var n=e[0].contentRect;u.style.left=(s.width-n.width)/2+"px",u.style.top=(s.height-n.height)/2+"px"}));ew(s),t=Object(o.createElement)(o.Fragment,null,Object(o.createElement)("div",{style:{width:s.width,height:s.height}}),Object(o.createElement)(nw,{ref:function(e){e&&(u=e,f.observe(u))}},l))}return Object(o.createElement)(tw,{onDragEnter:ow,onDragOver:ow},t)}var cw=b()("node:topic-content-widget"),iw=d.default.div(Pk||(Pk=Object(Ra.a)(["\n  display: flex;\n  align-items: center;\n  cursor: pointer;\n  //overflow: hidden;\n  position: relative;\n"]))),aw=d.default.div(Bk||(Bk=Object(Ra.a)(["\n  position: relative;\n"]))),lw=function(e){Object(u.a)(n,e);var t=Object(s.a)(n);function n(e){var o;return Object(a.a)(this,n),(o=t.call(this,e)).onDragStart=function(e){o.run("handleTopicDragStart",Object(m.a)(Object(m.a)({},o.props),{},{ev:e}))},o.onDragOver=function(e){e.preventDefault()},o.onDragEnter=function(e){cw("onDragEnter",o.props.topicKey),o.run("handleTopicDragEnter",Object(m.a)(Object(m.a)({},o.props),{},{ev:e,dropDir:"in"}))},o.onDragLeave=function(e){o.run("handleTopicDragLeave",Object(m.a)(Object(m.a)({},o.props),{},{ev:e,dropDir:"in"}))},o.onDrop=function(e){cw("onDrop"),o.run("handleTopicDrop",Object(m.a)(Object(m.a)({},o.props),{},{ev:e,dropDir:"in"}))},o.onClick=function(e){var t=o.props.controller;o.handleTopicClickTimeout=setTimeout((function(){t.run("handleTopicClick",Object(m.a)(Object(m.a)({},o.props),{},{ev:e}))}),200)},o.onDoubleClick=function(e){clearTimeout(o.handleTopicClickTimeout),o.props.controller.run("handleTopicDoubleClick",Object(m.a)(Object(m.a)({},o.props),{},{ev:e}))},o.needRelocation=!1,o.onClickCollapse=function(e){e.stopPropagation();var t=o.props,n=t.topicKey,r=t.getRef;o.needRelocation=!0;var c=r(QE(n)).getBoundingClientRect();cw("oldRect",c),o.oldCollapseIconVector=[c.left+c.width/2,c.top+c.height/2],cw("oldCollapseIconVector",o.oldCollapseIconVector),o.operation(Oj,o.props)},o.state={dragEnter:!1},o}return Object(l.a)(n,[{key:"renderContextMenu",value:function(){var e=this.props.controller;if(e.getValue(lx,Object(m.a)({},this.props)))return this.operation(Sj,Object(m.a)(Object(m.a)({},this.props),{},{focusMode:fj})),e.run("renderTopicContextMenu",this.props)}},{key:"onContextMenuClose",value:function(){}},{key:"componentDidUpdate",value:function(){if(this.needRelocation){var e=this.props,t=e.getRef,n=e.topicKey,o=e.setViewBoxScrollDelta,r=t(QE(n)).getBoundingClientRect(),c=[r.left+r.width/2,r.top+r.height/2];cw("newVector:",c),cw("oldVector:",this.oldCollapseIconVector);var i=[c[0]-this.oldCollapseIconVector[0],c[1]-this.oldCollapseIconVector[1]];cw("vector",i),o(i[0],i[1]),this.needRelocation=!1}}},{key:"render",value:function(){var e=this.props,t=e.saveRef,n=e.topicKey,r=e.model,c=e.controller,i=e.topicStyle,a=e.dir;cw("render",n,r.focusMode);var l=c.run("isOperationEnabled",e)&&r.editingContentKey!==n,u=c.run("renderTopicCollapseIcon",Object(m.a)(Object(m.a)({},e),{},{onClickCollapse:this.onClickCollapse.bind(this)})),s=c.run("renderTopicDropArea",Object(m.a)(Object(m.a)({},e),{},{dropDir:"prev"})),p=c.run("renderTopicDropArea",Object(m.a)(Object(m.a)({},e),{},{dropDir:"next"})),d={onDragEnter:this.onDragEnter,onDragLeave:this.onDragLeave,onDragOver:this.onDragOver,onDrop:this.onDrop};return Object(o.createElement)(aw,null,s,Object(o.createElement)(iw,Object.assign({style:i,draggable:l,ref:t(UE(n)),onDragStart:this.onDragStart,onClick:this.onClick,onDoubleClick:this.onDoubleClick},d),c.run("renderTopicBlocks",e),c.run("renderTopicContentOthers",e)),p,a!==cj&&u)}}]),n}(lE);lw=IC([y.f],lw);var uw=b()("node:topic-desc"),sw=d.default.div(zk||(zk=Object(Ra.a)(["\n  overflow: auto;\n"])));function pw(e){var t=e.controller,n=e.model,r=e.topicKey,c=e.getRef,i=n.editingDescKey===r;uw("isEditing",i);var a=n.getTopic(r).getBlock(uj);if(!i&&t.run("isBlockEmpty",Object(m.a)(Object(m.a)({},e),{},{block:a.block})))return null;var l=t.run("renderTopicDescEditor",e),u=c(tx),s={maxWidth:"800px",maxHeight:"600px"};if(u){var p=u.getBoundingClientRect();s.maxWidth="".concat(.6*p.width,"px"),s.maxHeight="".concat(.8*p.height,"px")}var d={autoFocus:!1,content:Object(o.createElement)(sw,{onClick:HS,classname:h.a.POPOVER_DISMISS,style:s},l),target:Object(o.createElement)(kE,{onClick:function(n){n.stopPropagation(),t.run("operation",Object(m.a)(Object(m.a)({},e),{},{opType:_j}))},className:GE(NE),tabIndex:-1}),interactionKind:y.t.HOVER,hoverOpenDelay:500};return a.block&&Object(o.createElement)(y.s,Object.assign({},d))}var dw=d.default.svg(Vk||(Vk=Object(Ra.a)(["\n  width: 100%;\n  height: 100%;\n  position: absolute;\n  left: 0;\n  top: 0;\n  z-index: 2;\n  pointer-events: none;\n"]))),fw=function(e){Object(u.a)(n,e);var t=Object(s.a)(n);function n(){var e;return Object(a.a)(this,n),(e=t.apply(this,arguments)).state={content:null},e}return Object(l.a)(n,[{key:"layout",value:function(){var e=this.props,t=e.getRef,n=e.model,r=e.zoomFactor,c=n.focusKey,i=n.focusMode;if(c&&i!==pj){var a=t(UE(c)),l=t(nx).bigView,u=t(ox),s=XS(a,l,r),p=XS(u,l,r),d=s.left-p.left-3,f=s.top-p.top-3,b=s.width+6,y=s.height+6;this.setState({content:Object(o.createElement)("rect",{x:d,y:f,width:b,height:y,fill:"none",stroke:n.config.theme.highlightColor,strokeWidth:2})})}else this.setState({content:null})}},{key:"render",value:function(){var e=this.props.saveRef;return Object(o.createElement)(dw,{ref:e(ox)},this.state.content)}}]),n}(lE),bw=d.default.svg(Hk||(Hk=Object(Ra.a)(["\n  width: 100%;\n  height: 100%;\n  position: absolute;\n  left: 0;\n  top: 0;\n  z-index: 1;\n  pointer-events: none;\n"]))),yw=b()("node:topic-sub-links"),hw=function(e){Object(u.a)(n,e);var t=Object(s.a)(n);function n(){var e;return Object(a.a)(this,n),(e=t.apply(this,arguments)).state={curves:[]},e}return Object(l.a)(n,[{key:"layout",value:function(){var e,t,n,r=this.props,c=r.model,i=r.getRef,a=r.topicKey,l=r.dir,u=r.controller,s=u.run("getZoomFactor",r),p=c.getTopic(a),d=i(UE(a)),f=i($E(a)),b=i(QE(a)),y=i(nx).bigView,h=XS(f,y,s),g=XS(b,y,s),O=XS(d,y,s);yw(a),yw("svgRect",h),yw("collapseRect",g),yw("contentRect",O),l===rj?(e={x:0,y:ZS(O)-h.top},t={x:g.right-h.left+10,y:e.y}):l===oj&&(e={x:h.right-h.left,y:ZS(O)-h.top},t={x:g.left-h.left-10,y:e.y});var v=[];p.subKeys.forEach((function(c){var a,d=u.run("getLinkStyle",Object(m.a)(Object(m.a)({},r),{},{topicKey:c})),f=i(UE(c));if(f){var b=XS(f,y,s);l===rj&&(n={x:b.left-h.left,y:ZS(b)-h.top}),l===oj&&(n={x:b.right-h.left,y:ZS(b)-h.top});var g=d.lineType;if("curve"===g)a="M ".concat(e.x," ").concat(e.y," L ").concat(t.x," ").concat(t.y," C ").concat(t.x," ").concat(YS(t,n)," ").concat(JS(t,n)," ").concat(n.y," ").concat(n.x," ").concat(n.y);else if("round"===g){var O=n.y>e.y?1:-1,T=n.x>e.x?1:-1,j=d.lineRadius;a=1===p.subKeys.size||Math.abs(n.y-e.y)<=1?"M ".concat(e.x," ").concat(e.y," L ").concat(n.x," ").concat(n.y):"M ".concat(e.x," ").concat(e.y," H ").concat(t.x," V ").concat(n.y-O*j," A ").concat(j," ").concat(j," 0 0 ").concat(O*T===1?0:1," ").concat(t.x+j*T," ").concat(n.y," H ").concat(n.x)}else"line"===g&&(a="M ".concat(e.x," ").concat(e.y," H ").concat(t.x," L ").concat(n.x," ").concat(n.y));v.push(Object(o.createElement)("path",{key:"link-".concat(c),d:a,strokeWidth:d.lineWidth,stroke:d.lineColor,fill:"none"}))}})),this.setState({curves:v})}},{key:"render",value:function(){var e=this.props,t=e.topicKey,n=e.saveRef;return Object(o.createElement)(bw,{ref:n($E(t))},Object(o.createElement)("g",null,this.state.curves))}}]),n}(lE),gw=b()("node:topic-widget"),mw=d.default.div(Gk||(Gk=Object(Ra.a)(["\n  display: flex;\n  align-items: center;\n  flex-direction: ",";\n"])),(function(e){return e.topicDirection===rj?"row":"row-reverse"})),Ow=d.default.div(Wk||(Wk=Object(Ra.a)(["\n  position: relative;\n  padding: ",";\n"])),(function(e){return e.dir===rj?"0 0 0 ".concat(e.marginH,"px"):"0 ".concat(e.marginH,"px 0 0")})),vw=d.default.div(Uk||(Uk=Object(Ra.a)(["\n  display: flex;\n  position: relative;\n  align-items: center;\n\n  flex-direction: ",";\n"])),(function(e){return e.topicDirection===rj?"row":"row-reverse"})),Tw=function(e){Object(u.a)(n,e);var t=Object(s.a)(n);function n(){return Object(a.a)(this,n),t.apply(this,arguments)}return Object(l.a)(n,[{key:"renderSubTopics",value:function(){var e=this.props,t=e.controller,n=e.model,r=e.topicKey,c=e.dir,i=n.getTopic(r).subKeys.toArray(),a=t.run("createSubTopics",Object(m.a)(Object(m.a)({},e),{},{topics:i}));if(!a)return null;var l=a.subTopics,u=t.run("renderSubLinks",e);return Object(o.createElement)(Ow,{dir:c,marginH:n.config.theme.marginH},l," ",u)}},{key:"layoutLinks",value:function(){var e=this.props,t=e.getRef,n=e.topicKey,o=e.model.getTopic(n);if(0!==o.subKeys.size&&!o.collapse){gw("layoutLinks",n);var r=t(XE(n));r&&r.layout()}}},{key:"render",value:function(){var e=this.props,t=e.controller,n=e.topicKey,r=e.dir,c=e.saveRef;gw("render",n);var i=t.run("getTopicContentStyle",e),a=Object(m.a)(Object(m.a)({},e),{},{topicStyle:i}),l=t.run("renderTopicContent",a);return Object(o.createElement)(mw,{topicDirection:r},Object(o.createElement)(vw,{topicDirection:r,ref:c(qE(n))},l),this.renderSubTopics())}}]),n}(o.Component),jw=b()("node:view-port-viewer"),kw=Object(d.default)(EE)(Zk||(Zk=Object(Ra.a)(["\n  position: absolute;\n  background: white;\n  right: 30px;\n  bottom: 20px;\n  border-radius: 2px;\n  display: flex;\n  flex-direction: row;\n  user-select: none;\n"]))),Ew=Object(d.default)(OE)(Jk||(Jk=Object(Ra.a)(["\n  margin: 10px;\n"]))),xw=d.default.span(Yk||(Yk=Object(Ra.a)(["\n  display: inline-block;\n  width: 80px;\n  height: 18px;\n"]))),Sw=function(e){return Object(o.createElement)(y.x,{content:e.tooltip,position:g.a.TOP,className:h.a.ICON},Object(o.createElement)(Ew,{onClick:e.onClick,tabIndex:-1},e.children))},Cw=function(e){Object(u.a)(n,e);var t=Object(s.a)(n);function n(e){var o;return Object(a.a)(this,n),(o=t.call(this,e)).zoomFactorChange=function(e){jw("zoomFactorChange",e),o.setState({zoomFactor:e})},o.onClickResetZoom=function(e){var t=o.props;t.controller.run("setZoomFactor",Object(m.a)(Object(m.a)({},t),{},{zoomFactor:1}))},o.onClickAddZoom=function(e){var t=o.props,n=t.controller,r=n.run("getZoomFactor",t);n.run("setZoomFactor",Object(m.a)(Object(m.a)({},t),{},{zoomFactor:r+.1}))},o.onClickMinusZoom=function(e){var t=o.props,n=t.controller,r=n.run("getZoomFactor",t);n.run("setZoomFactor",Object(m.a)(Object(m.a)({},t),{},{zoomFactor:r-.1}))},o.onClickCollapseAll=function(e){var t=o.props,n=t.controller;n.run("addEventListener",Object(m.a)(Object(m.a)({},t),{},{key:ix,listener:o.centerRootTopic,once:!0})),n.run("operation",Object(m.a)(Object(m.a)({},t),{},{opType:vj}))},o.onClickExpandAll=function(e){var t=o.props,n=t.controller;n.run("addEventListener",Object(m.a)(Object(m.a)({},t),{},{key:ix,listener:o.centerRootTopic,once:!0})),n.run("operation",Object(m.a)(Object(m.a)({},t),{},{opType:Tj}))},o.centerRootTopic=function(){var e=o.props,t=e.model;e.controller.run("moveTopicToCenter",Object(m.a)(Object(m.a)({},o.props),{},{topicKey:t.editorRootTopicKey}))},o}return Object(l.a)(n,[{key:"componentDidMount",value:function(){var e=this.props;e.controller.run("addZoomFactorChangeEventListener",Object(m.a)(Object(m.a)({},e),{},{listener:this.zoomFactorChange}))}},{key:"componentWillUnmount",value:function(){var e=this.props;e.controller.run("removeZoomFactorChangeEventListener",Object(m.a)(Object(m.a)({},e),{},{listener:this.zoomFactorChange}))}},{key:"render",value:function(){jw("render");var e=this.props,t=e.controller,n=e.zIndex,r=t.run("getZoomFactor",e);return Object(o.createElement)(kw,{zIndex:n},Object(o.createElement)(Sw,{onClick:this.onClickCollapseAll,tooltip:US(e,jS)},WE(BE)),Object(o.createElement)(Sw,{onClick:this.onClickExpandAll,tooltip:US(e,kS)},WE(zE)),Object(o.createElement)(Sw,{onClick:this.centerRootTopic,tooltip:US(e,ES)},WE(VE)),Object(o.createElement)(Sw,{onClick:this.onClickMinusZoom,tooltip:US(e,SS)},WE(PE)),Object(o.createElement)(Sw,{onClick:this.onClickResetZoom,tooltip:US(e,wS)},Object(o.createElement)(xw,null,"".concat(US(e,xS),":").concat(Math.floor(100*r),"%"))),Object(o.createElement)(Sw,{onClick:this.onClickAddZoom,tooltip:US(e,CS)},WE(FE)))}}]),n}(lE),ww=d.default.div(qk||(qk=Object(Ra.a)(["\n  overflow: auto;\n  padding: 0px 0px 0px 20px;\n  background: #88888850;\n"])));function Kw(e){var t=e.controller,n=e.model,r=e.topicKey;if(n.focusMode===dj){var c=t.run("renderTopicDescEditor",e);return Object(o.createElement)(y.i,{key:"drawer",title:US(e,kx),icon:WE("note"),isOpen:!0,hasBackdrop:!0,backdropProps:{onMouseDown:HS},isCloseButtonShown:!1,onClose:function(n){n.stopPropagation();var o="topic-desc-data-".concat(r),c=t.run("deleteTempValue",{key:o});t.run("operation",Object(m.a)(Object(m.a)({},e),{},{opType:Dj,topicKey:r,blockType:uj,data:c,focusMode:sj}))},size:"70%"},Object(o.createElement)(ww,null,c))}}function Rw(e){var t=e.theme,n=e.children;return Object(o.createElement)(d.ThemeProvider,{theme:t},Object(o.createElement)(o.Fragment,null,n))}var Dw=b()("plugin:rendering");function Lw(){var e;return{getDiagramProps:function(){return e},renderDiagram:function(t){var n=t.model;return Object(o.createElement)(bE,null,(function(r,c,i){return e=Object(m.a)(Object(m.a)({},t),{},{saveRef:r,getRef:c,deleteRef:i}),Dw("renderDiagram",n),Object(o.createElement)(Rw,{theme:n.config.theme},Object(o.createElement)(PC,e))}))},renderDrawer:Kw,getInitialDiagramState:function(e){return{rightTopPanel:{isOpen:!1,selectedTabId:"topic-style"}}},renderDiagramCustomize:function(e){var t=e.controller,n=e.model,o=t.getValue(ax),r=Object(m.a)(Object(m.a)({},e),{},{zIndex:o,topicKey:n.focusKey});return[t.run("renderEditorRootBreadcrumbs",r),t.run("renderRightTopPanel",r),t.run("renderModals",Object(m.a)(Object(m.a)({},r),{},{zIndex:o+1})),t.run("renderDrawer",Object(m.a)(Object(m.a)({},r),{},{zIndex:o+1})),t.run("renderViewPortViewer",r)]},renderEditorRootBreadcrumbs:function(e){return Object(o.createElement)(HC,Object.assign({key:"EditorRootBreadcrumbs"},e))},renderModals:function(e){return Object(o.createElement)(GC,Object.assign({key:"modals"},e))},renderModal:function(e){return null},getActiveModalProps:function(e){return null},renderDoc:function(e){return e.children},renderRootWidget:function(e){return Object(o.createElement)(XC,Object.assign({},e))},renderTopicWidget:function(e){return Object(o.createElement)(Tw,Object.assign({},e))},renderTopicContent:function(e){return Object(o.createElement)(lw,Object.assign({},e))},renderTopicCollapseIcon:function(e){return Object(o.createElement)(QC,Object.assign({},e))},renderTopicContentOthers:function(e){return[]},renderTopicBlocks:function(e){var t=e.model,n=e.topicKey,r=e.controller,c=t.getTopic(n).blocks,i=[],a=0;return c.forEach((function(t){var n=r.run("renderTopicBlock",Object(m.a)(Object(m.a)({},e),{},{block:t,blockKey:"block-".concat(a)}));n&&(i.push(Object(o.createElement)(o.Fragment,{key:"block-".concat(a)},n)),a++)})),i},renderTopicBlock:function(e){var t=e.controller;switch(e.block.type){case lj:return t.run("renderTopicBlockContent",e);case uj:return t.run("renderTopicBlockDesc",e)}return null},renderTopicBlockContent:function(e){return Object(o.createElement)(rw,Object.assign({},e))},renderTopicBlockDesc:function(e){return Object(o.createElement)(pw,Object.assign({},e))},renderSubLinks:function(e){var t=e.saveRef,n=e.topicKey,r=e.model.getTopic(n);return 0===r.subKeys.size||r.collapse?null:Object(o.createElement)(hw,Object.assign({ref:t(XE(n))},e))},renderRootSubLinks:function(e){var t=e.saveRef,n=e.topicKey;return Object(o.createElement)(ZC,Object.assign({ref:t(XE(n))},e))},renderFocusItemHighlight:function(e){var t=e.saveRef;return Object(o.createElement)(fw,Object.assign({ref:t(rx)},e))},renderRootWidgetOtherChildren:function(e){var t=e.controller,n=t.run("getZoomFactor",e);return e=Object(m.a)(Object(m.a)({},e),{},{zoomFactor:n}),Object(o.createElement)(o.Fragment,null,t.run("renderRootSubLinks",e),t.run("renderFocusItemHighlight",e),t.run("renderDragAndDropEffect",e))},renderViewPortViewer:function(e){return Object(o.createElement)(Cw,Object.assign({key:"view-port-viewer"},e))}}}var Iw=Object(d.default)(EE)(Xk||(Xk=Object(Ra.a)(["\n  position: absolute;\n  background: white;\n  right: 30px;\n  top: 20px;\n  border-radius: 2px;\n  user-select: none;\n"]))),_w=Object(d.default)(y.w)($k||($k=Object(Ra.a)(["\n  padding: 0px 10px;\n"])));function Mw(e){var t=e.controller,n=e.zIndex,r=e.diagramState,c=e.setDiagramState,i=r.rightTopPanel,a=i.isOpen,l=i.selectedTabId,u=function(e){c(Object(m.a)(Object(m.a)({},r),{},{rightTopPanel:Object(m.a)(Object(m.a)({},i),e)}))};if(!a)return Object(o.createElement)(Iw,{zIndex:n},Object(o.createElement)(mE,{onClick:function(){u({isOpen:!0})}},Object(o.createElement)(gE,{className:GE(_E)})));return Object(o.createElement)(Iw,{zIndex:n},Object(o.createElement)(jE,null,Object(o.createElement)(TE,{className:GE(ME),onClick:function(){u({isOpen:!1})}})),Object(o.createElement)(_w,{id:"tabs",selectedTabId:l,onChange:function(e){u({selectedTabId:e})}},t.run("renderRightTopPanelTabs",e)))}var Aw=Object(v.a)(Array(7).keys()),Nw=[0,5,10,15,20,25,30,35],Fw=["none","solid","dotted","dashed","double"];function Pw(e){var t=e.contentStyle,n=e.setContentStyle;return Object(o.createElement)(QS,null,Object(o.createElement)(CE,null,US(e,rS)),Object(o.createElement)(DE,null,Object(o.createElement)(rC,{text:"".concat(US(e,cS),": ").concat(t.borderWidth?t.borderWidth:US(e,yx)),items:Aw,itemRenderer:cC("px"),onItemSelect:function(e){n({borderWidth:"".concat(e,"px")})}}),Object(o.createElement)(rC,{text:"".concat(US(e,Kx),": ").concat(t.borderStyle?US(e,t.borderStyle):US(e,bS)),items:Fw,itemRenderer:iC(e),onItemSelect:function(e){n({borderStyle:e})}}),Object(o.createElement)(rC,{text:"".concat(US(e,iS),": ").concat(t.borderRadius),items:Nw,itemRenderer:cC("px"),onItemSelect:function(e){n({borderRadius:"".concat(e,"px")})}}),Object(o.createElement)(eC,{color:t.borderColor,handleColorChange:function(e){n({borderColor:e})}})))}var Bw=["curve","round","line"];function zw(e){var t=e.showLinkStyle,n=void 0===t||t,r=e.showSubLinkStyle,c=void 0===r||r,i=e.linkStyle,a=void 0===i?{}:i,l=e.subLinkStyle,u=void 0===l?{}:l,s=e.setLinkStyle,p=e.setSubLinkStyle;return Object(o.createElement)(QS,null,Object(o.createElement)(CE,null,US(e,Dx)),n&&Object(o.createElement)(DE,{alignItems:"center"},Object(o.createElement)(hE,{margin:"0 5px 0 0"},US(e,Lx)+":"," "),Object(o.createElement)(rC,{text:"".concat(US(e,cS),": ").concat(a?a.lineWidth:"0px"),items:aC,itemRenderer:cC("px"),onItemSelect:function(e){s({lineWidth:"".concat(e,"px")})}}),Object(o.createElement)(rC,{text:"".concat(US(e,Fx),": ").concat(US(e,a.lineType)),items:Bw,itemRenderer:iC(e),onItemSelect:function(e){s({lineType:e})}}),Object(o.createElement)(eC,{color:a.lineColor,handleColorChange:function(e){s({lineColor:e})}})),c&&Object(o.createElement)(DE,{alignItems:"center"},Object(o.createElement)(hE,{margin:"0 5px 0 0"},US(e,Ix)+": "),Object(o.createElement)(rC,{text:"".concat(US(e,cS),": ").concat(u?u.lineWidth:"0px"),items:aC,itemRenderer:cC("px"),onItemSelect:function(e){p({lineWidth:"".concat(e,"px")})}}),Object(o.createElement)(rC,{text:"".concat(US(e,Fx),": ").concat(US(e,u.lineType)),items:Bw,itemRenderer:iC(e),onItemSelect:function(e){p({lineType:e})}}),Object(o.createElement)(eC,{color:u.lineColor,handleColorChange:function(e){p({lineColor:e})}})))}function Vw(e){var t=e.contentStyle,n=e.setContentStyle,r={title:"".concat(US(e,aS),":"),min:12,max:100,value:parseInt(t.fontSize),style:{width:50},onValueChange:function(e){n({fontSize:e})}},c={title:"".concat(US(e,lS),":"),style:{width:50},value:t.lineHeight||"",onChange:function(e){n({lineHeight:e.target.value})}};return Object(o.createElement)(QS,null,Object(o.createElement)(CE,null,US(e,Rx)),Object(o.createElement)(yE,null,Object(o.createElement)(nC,Object.assign({},r)),Object(o.createElement)(oC,Object.assign({},c)),Object(o.createElement)(eC,{color:t.color,handleColorChange:function(e){n({color:e})}})))}var Hw,Gw=b()("node:style-editor");function Ww(e){var t=e.controller,n=e.model,r=e.topicKey,c=n.getTopic(r),i=function(n){t.run("setTopicContentStyle",Object(m.a)(Object(m.a)({},e),{},{style:n}))};if(!n.focusKey)return null;var a=t.run("getTopicContentStyle",e),l=t.run("getLinkStyle",e),u=t.run("getSubLinkStyle",e),s=Object(m.a)(Object(m.a)({},e),{},{linkStyle:l,subLinkStyle:u,setLinkStyle:function(n){t.run("setLinkStyle",Object(m.a)(Object(m.a)({},e),{},{linkStyle:n}))},setSubLinkStyle:function(n){t.run("setSubLinkStyle",Object(m.a)(Object(m.a)({},e),{},{subLinkStyle:n}))}}),p=Object(m.a)(Object(m.a)({},e),{},{contentStyle:a,setContentStyle:i});return Object(o.createElement)(xE,null,Object(o.createElement)(Pw,Object.assign({},p)),Object(o.createElement)(Vw,Object.assign({},p)),Object(o.createElement)(QS,null,Object(o.createElement)(CE,null,US(e,nS)),Object(o.createElement)(eC,{color:a.background,handleColorChange:function(e){i({background:e})}})),Object(o.createElement)(zw,Object.assign({},s)),Object(o.createElement)(QS,null,Object(o.createElement)(tC,{title:US(e,Ax),onClick:function(){c.style&&t.run("operation",Object(m.a)(Object(m.a)({},e),{},{opType:wj,style:null}))}}),Object(o.createElement)(tC,{title:US(e,_x),onClick:function(){Hw=t.run("getTopicStyle",e),Gw(Hw)}}),Object(o.createElement)(tC,{title:US(e,Mx),onClick:function(){Hw&&t.run("operation",Object(m.a)(Object(m.a)({},e),{},{opType:wj,style:JSON.stringify(Hw)}))}})),function(e){var t=e.controller;return Object(o.createElement)(QS,null,Object(o.createElement)(wE,null,Object(o.createElement)(y.d,{onClick:function(n){t.run("operation",Object(m.a)(Object(m.a)({},e),{},{opType:Kj}))}},US(e,Nx))))}(e))}var Uw=n(109);function Zw(e){var t=e.contentStyle,n=e.setContentStyle,r=Uw("padding",t.padding||"0"),c={layout:"v",min:0,max:99,style:{width:38}},i=parseInt(r["padding-top"]),a=parseInt(r["padding-right"]),l=parseInt(r["padding-bottom"]),u=parseInt(r["padding-left"]),s={top:i,right:a,bottom:l,left:u},p=function(e){return function(t){n({padding:WS(Object(m.a)(Object(m.a)({},s),{},Object(Sa.a)({},e,t)))})}},d=Object(m.a)(Object(m.a)({},c),{},{title:US(e,sS),value:i,onValueChange:p("top")}),f=Object(m.a)(Object(m.a)({},c),{},{title:US(e,fS),value:a,onValueChange:p("right")}),b=Object(m.a)(Object(m.a)({},c),{},{title:US(e,pS),value:l,onValueChange:p("bottom")}),y=Object(m.a)(Object(m.a)({},c),{},{title:US(e,dS),value:u,onValueChange:p("left")});return Object(o.createElement)(QS,null,Object(o.createElement)(CE,null,US(e,uS)),Object(o.createElement)(DE,null,Object(o.createElement)(nC,Object.assign({},d)),Object(o.createElement)(nC,Object.assign({},f)),Object(o.createElement)(nC,Object.assign({},b)),Object(o.createElement)(nC,Object.assign({},y))))}var Jw=d.default.div(Qk||(Qk=Object(Ra.a)(["\n  height: 250px;\n  overflow: auto;\n"])));function Yw(e){var t=e.topicStyle,n=e.setTopicStyle,r=t.contentStyle,c=void 0===r?{}:r,i=t.linkStyle,a=void 0===i?{}:i,l=t.subLinkStyle,u=void 0===l?{}:l,s=function(e){n({contentStyle:e})},p=Object(m.a)(Object(m.a)({},e),{},{contentStyle:c,setContentStyle:s}),d=Object(m.a)(Object(m.a)({},e),{},{showLinkStyle:!1,linkStyle:a,subLinkStyle:u,setLinkStyle:function(e){n({linkStyle:e})},setSubLinkStyle:function(e){n({subLinkStyle:e})}});return Object(o.createElement)(Jw,null,Object(o.createElement)(Pw,Object.assign({},p)),Object(o.createElement)(Zw,Object.assign({},p)),Object(o.createElement)(Vw,Object.assign({},p)),Object(o.createElement)(QS,null,Object(o.createElement)(CE,null,US(e,nS)),Object(o.createElement)(eC,{color:c.background,handleColorChange:function(e){s({background:e})}})),Object(o.createElement)(zw,Object.assign({},d)))}b()("node:theme-editor");var qw="normal";function Xw(e){var t,n=Object(o.useState)(!1),r=Object(Ca.a)(n,2),c=r[0],i=r[1],a=e.model,l=e.controller,u=Object(ct.cloneDeep)(a.config.theme),s=l.run("getThemeOfTopic",Object(m.a)(Object(m.a)({},e),{},{isClone:!0})),p=s.rootTopic,d=s.primaryTopic,f=s.normalTopic,b=function(t){l.run("operation",Object(m.a)(Object(m.a)({},e),{},{opType:Rj,theme:t}))},h=(t=function(e){b(Object(ct.merge)(u,{randomColor:e}))},function(e){return t(e.target.checked)}),g=Object(m.a)(Object(m.a)({},e),{},{topicStyle:p,setTopicStyle:function(e){b(Object(ct.merge)(u,{rootTopic:e}))}}),O=Object(o.createElement)(Yw,Object.assign({},g)),v=Object(m.a)(Object(m.a)({},e),{},{topicStyle:d,setTopicStyle:function(e){b(Object(ct.merge)(u,{primaryTopic:e}))}}),T=Object(o.createElement)(Yw,Object.assign({},v)),j=Object(m.a)(Object(m.a)({},e),{},{topicStyle:f,setTopicStyle:function(e){b(Object(ct.merge)(u,{normalTopic:e}))}}),k=Object(o.createElement)(Yw,Object.assign({},j)),E={id:qw,handleTabIdChange:function(e){qw=e}},x=Object(o.createElement)(KE,null,Object(o.createElement)(y.w,Object.assign({},E),Object(o.createElement)(y.v,{id:"normal",title:US(e,Hx),panel:k}),Object(o.createElement)(y.v,{id:"primary",title:US(e,Gx),panel:T}),Object(o.createElement)(y.v,{id:"root",title:US(e,Wx),panel:O}))),S={isOpen:c,onClose:function(e){i(!1)}},C=Object(o.createElement)(y.a,Object.assign({},S),Object(o.createElement)("p",null,"File format error"));return Object(o.createElement)(xE,null,Object(o.createElement)(QS,null,Object(o.createElement)(CE,null,US(e,Bx)),Object(o.createElement)(DE,null,Object(o.createElement)(RE,null,US(e,nS)+":"),Object(o.createElement)(eC,{color:u.background,handleColorChange:function(e){b(Object(ct.merge)(u,{background:e}))}}),Object(o.createElement)(RE,null,US(e,zx)+":"),Object(o.createElement)(eC,{color:u.highlightColor,handleColorChange:function(e){b(Object(ct.merge)(u,{highlightColor:e}))}}),Object(o.createElement)(RE,null,US(e,Vx)+":"),Object(o.createElement)(vE,{checked:u.randomColor,onChange:h}))),x,Object(o.createElement)(QS,null,Object(o.createElement)(tC,{title:US(e,Ux),onClick:function(e){GS(JSON.stringify(u),"blink-mind-theme.json")}}),Object(o.createElement)(tC,{title:US(e,Zx),onClick:function(e){(function(e){var t=document.createElement("input");return t.type="file",t.accept=e,new Promise((function(e,n){t.addEventListener("change",(function(t){var o=t.target.files[0],r=new FileReader;r.onload=function(t){var n=t.target.result;e(n)},r.onerror=function(e){n(e.target.error)},r.readAsText(o)})),t.click()}))})(".json,.txt").then((function(e){var t,n=JSON.parse(e);null!=(t=n).name&&null!=t.background&&null!=t.highlightColor?b(n):i(!0)}))}})),C)}function $w(){return{renderRightTopPanel:function(e){var t=Object(m.a)(Object(m.a)({},e),{},{key:"right-top-panel"});return Object(o.createElement)(Mw,Object.assign({},t))},renderRightTopPanelTabs:function(e){var t=e.controller;return[t.run("renderTopicStyleEditor",e),t.run("renderThemeEditor",e)]},renderTopicStyleEditor:function(e){var t={id:"topic-style",key:"topic-style",title:US(e,wx),panel:Object(o.createElement)(Ww,Object.assign({},e))};return Object(o.createElement)(y.v,Object.assign({},t))},renderThemeEditor:function(e){var t={id:"theme-editor",key:"theme-editor",title:US(e,Px),panel:Object(o.createElement)(Xw,Object.assign({},e))};return Object(o.createElement)(y.v,Object.assign({},t))}}}var Qw=d.default.div(eE||(eE=Object(Ra.a)(["\n  box-shadow: rgb(170, 170, 170) 0 0 2px;\n  background: white;\n  .iconfont {\n    font-size: 28px !important;\n  }\n"])));function eK(e){var t=e.controller;return Object(o.createElement)(Qw,null,t.run("renderToolbarItems",e))}function tK(e){var t=[[tj.LEFT_AND_RIGHT,US(e,gx),"layout-left-and-right"],[tj.LEFT_TO_RIGHT,US(e,Ox),"layout-right"],[tj.RIGHT_TO_LEFT,US(e,mx),"layout-left"]];return Object(o.createElement)(uC,Object.assign({className:GE(HE)},e),Object(o.createElement)(y.s,{enforceFocus:!1},Object(o.createElement)(SE,null),Object(o.createElement)(y.n,null,t.map((function(t){return Object(o.createElement)(y.p,{key:t[1],icon:WE(t[2]),text:t[1],onClick:(n=t[0],function(t){e.controller.run("operation",Object(m.a)(Object(m.a)({},e),{},{opType:Nj,layoutDir:n}))})});var n})))))}function nK(){return{renderToolbar:function(e){return Object(o.createElement)(eK,Object.assign({},e))},renderToolbarItems:function(e){var t=e.controller.run("customizeToolbar",e);return t.sort((function(e,t){return e.order-t.order})),t.map((function(t){return Object(o.createElement)(t.element,Object(m.a)(Object(m.a)({},e),{},{key:t.order.toString()}))}))},customizeToolbar:function(e){return[{order:100,element:tK}]}}}var oK=b()("plugin:utils");function rK(){var e=new Map,t=new Map;return{addTempValueChangeListener:function(e){var n=e.key,o=e.listener;t.has(n)||t.set(n,[]),t.get(n).push(o)},removeTempValueChangeListener:function(e){var n=e.key,o=e.listener;t.has(n)&&(t[n]=t.get(n).filter((function(e){return e!==o})))},getTempValue:function(t){var n=t.key;return oK("getTempValue",n),e.get(n)},setTempValue:function(n){var o=n.key,r=n.value;if(oK("setTempValue",o),e.set(o,r),t.has(o)){var c,i=t.get(o),a=Object(O.a)(i);try{for(a.s();!(c=a.n()).done;){(0,c.value)(r)}}catch(l){a.e(l)}finally{a.f()}}},deleteTempValue:function(t){var n=t.key;oK("deleteTempValue",n);var o=e.get(n);return e.delete(n),o}}}function cK(){return[Lw(),rK(),SC(),$w(),nK(),LC()]}var iK=b()("node:text-editor"),aK=d.default.div(tE||(tE=Object(Ra.a)(["\n  padding: 6px;\n  background-color: ",";\n  cursor: ",";\n  min-width: 50px;\n"])),(function(e){return e.readOnly?null:"white"}),(function(e){return e.readOnly?"pointer":"text"})),lK=function(e){Object(u.a)(n,e);var t=Object(s.a)(n);function n(e){var o;return Object(a.a)(this,n),(o=t.call(this,e)).state={content:null},o.onMouseDown=function(e){e.stopPropagation()},o.onMouseMove=function(e){},o.onKeyDown=function(e){},o._handleClick=function(e){!o.root.contains(e.target)&&o.onClickOutSide(e)},o.rootRef=function(e){return function(t){e(t),o.root=t}},o.initState(),o}return Object(l.a)(n,[{key:"onChange",value:function(e){var t=e.value;iK("onChange",t),this.setState({content:t})}},{key:"componentDidMount",value:function(){this.props.readOnly||document.addEventListener("click",this._handleClick)}},{key:"componentWillUnmount",value:function(){this.props.readOnly||document.removeEventListener("click",this._handleClick)}},{key:"onClickOutSide",value:function(e){}},{key:"getCustomizeProps",value:function(){return null}},{key:"getContent",value:function(){var e=this.getCustomizeProps().block.data;return null==e?null:("string"===typeof e&&(e=Ne.a.deserialize(e)),e)}},{key:"initState",value:function(){var e=this.getContent();this.state={content:e}}},{key:"render",value:function(){var e=this.props,t=e.topicKey,n=e.saveRef,r=this.getCustomizeProps(),c=r.readOnly,i=r.getRefKeyFunc,a=r.placeholder,l=r.style;iK(c);var u=i(t),s=c?this.getContent():this.state.content,p=this.onMouseDown,d=this.onMouseMove,f=this.onKeyDown,b={value:s,readOnly:c,onChange:this.onChange.bind(this),placeholder:a,style:l},y={key:u,readOnly:c,ref:this.rootRef(n(u)),onMouseDown:p,onMouseMove:d,onKeyDown:f};return Object(o.createElement)(aK,Object.assign({},y),Object(o.createElement)(Fe.Editor,Object.assign({},b,{autoFocus:!0})))}}]),n}(o.PureComponent),uK=b()("node:topic-content-editor");function sK(e){return"content-editor-".concat(e)}var pK=function(e){Object(u.a)(n,e);var t=Object(s.a)(n);function n(e){var o;return Object(a.a)(this,n),(o=t.call(this,e)).onKeyDown=function(e){e.nativeEvent.ctrlKey&&"Enter"===e.nativeEvent.code&&o.save()},o}return Object(l.a)(n,[{key:"getCustomizeProps",value:function(){var e=this.props,t=e.model,n=e.topicKey,o=e.readOnly;return{block:t.getTopic(n).getBlock(lj).block,readOnly:o,getRefKeyFunc:sK,placeholder:"new",style:{whiteSpace:"pre"}}}},{key:"onClickOutSide",value:function(e){uK("onClickOutSide"),this.save()}},{key:"save",value:function(){var e=this.props,t=e.model,n=e.topicKey;t.editingContentKey!==n||this.props.controller.run("operation",Object(m.a)(Object(m.a)({},this.props),{},{opType:Dj,blockType:lj,data:this.state.content,focusMode:sj}))}}]),n}(lK),dK=b()("node:topic-desc-editor");function fK(e){return"desc-editor-".concat(e)}var bK=function(e){Object(u.a)(n,e);var t=Object(s.a)(n);function n(e){var o;return Object(a.a)(this,n),o=t.call(this,e),dK("constructor"),o}return Object(l.a)(n,[{key:"initState",value:function(){Object(Ea.a)(Object(xa.a)(n.prototype),"initState",this).call(this);var e=this.props,t=e.controller,o=e.topicKey,r="topic-desc-data-".concat(o),c=this.state.content;t.run("setTempValue",{key:r,value:c})}},{key:"getCustomizeProps",value:function(){var e=this.props,t=e.model,n=e.topicKey;return{block:t.getTopic(n).getBlock(uj).block,readOnly:t.editingDescKey!==n,getRefKeyFunc:fK,placeholder:"write topic notes here"}}},{key:"onChange",value:function(e){var t=e.value;dK("onChange");var n=this.props,o=n.controller,r=n.topicKey;if(!(n.model.editingDescKey!==r)){var c="topic-desc-data-".concat(r);o.run("setTempValue",{key:c,value:t}),this.setState({content:t})}}}]),n}(lK);var yK=b()("plugin:StylePlugin");function hK(){var e=new Map,t=0;return{getTopicStyle:function(e){var t=e.controller;return{contentStyle:t.run("getTopicContentStyle",e),linkStyle:t.run("getLinkStyle",e),subLinkStyle:t.run("getSubLinkStyle",e)}},getTopicContentStyle:function(e){var t=e.topicKey,n=e.model,o=e.controller;yK("getTopicContentStyle:",t,n);var r,c=n.getTopicVisualLevel(t),i=n.config.theme;if(r=c===ij?i.rootTopic:c===aj?i.primaryTopic:i.normalTopic,r=Object(m.a)(Object(m.a)({},i.contentStyle),r.contentStyle),i.randomColor){var a=o.run("getRandomColor",e);r=Object(m.a)(Object(m.a)({},r),{},{background:a,borderColor:a,subLinkStyle:Object(m.a)(Object(m.a)({},r.subLinkStyle),{},{lineColor:a})})}var l=n.getTopic(t);if(!l.style)return r;var u=JSON.parse(l.style);return Object(m.a)(Object(m.a)({},r),u.contentStyle)},getLinkStyle:function(e){var t=e.topicKey,n=e.model,o=e.controller;yK("getLinkStyle",t);var r,c=n.getTopicVisualLevel(t),i=n.config.theme,a=i.linkStyle;r=c===ij?i.rootTopic.linkStyle:c===aj?i.primaryTopic.linkStyle:i.normalTopic.linkStyle,a=Object(m.a)(Object(m.a)({},a),r);var l=n.getTopic(t);if(null!=l.parentKey){var u=o.run("getSubLinkStyle",Object(m.a)(Object(m.a)({},e),{},{topicKey:l.parentKey}));a=Object(m.a)(Object(m.a)({},a),u)}if(!l.style)return a;var s=JSON.parse(l.style);return Object(m.a)(Object(m.a)({},a),s.linkStyle)},getSubLinkStyle:function(e){var t=e.topicKey,n=e.model,o=e.controller;yK("getLinkStyle",t);var r,c=n.getTopicVisualLevel(t),i=n.config.theme,a=i.linkStyle;r=c===ij?i.rootTopic.subLinkStyle:c===aj?i.primaryTopic.subLinkStyle:i.normalTopic.subLinkStyle,a=Object(m.a)(Object(m.a)({},a),r);var l=n.getTopic(t);if(i.randomColor){var u=o.run("getRandomColor",e);yK(u),a=Object(m.a)(Object(m.a)({},a),{},{lineColor:u})}if(!l.style)return a;var s=JSON.parse(l.style);return Object(m.a)(Object(m.a)({},a),s.subLinkStyle)},setTopicContentStyle:function(e){var t=e.topicKey,n=e.controller,o=e.style,r=e.model.getTopic(t).style,c=r?JSON.parse(r):{},i=Object(m.a)(Object(m.a)({},c),{},{contentStyle:Object(m.a)(Object(m.a)({},c.contentStyle),o)});if(!Object(ct.isEqual)(c,i)){var a=JSON.stringify(i);n.run("operation",Object(m.a)(Object(m.a)({},e),{},{opType:wj,style:a}))}},setLinkStyle:function(e){var t=e.topicKey,n=e.controller,o=e.linkStyle,r=e.model.getTopic(t).style,c=r?JSON.parse(r):{},i=Object(m.a)(Object(m.a)({},c),{},{linkStyle:Object(m.a)(Object(m.a)({},c.linkStyle),o)});if(!Object(ct.isEqual)(c,i)){var a=JSON.stringify(i);n.run("operation",Object(m.a)(Object(m.a)({},e),{},{opType:wj,style:a}))}},setSubLinkStyle:function(e){var t=e.topicKey,n=e.controller,o=e.subLinkStyle,r=e.model.getTopic(t).style,c=r?JSON.parse(r):{},i=Object(m.a)(Object(m.a)({},c),{},{subLinkStyle:Object(m.a)(Object(m.a)({},c.subLinkStyle),o)});if(!Object(ct.isEqual)(c,i)){var a=JSON.stringify(i);n.run("operation",Object(m.a)(Object(m.a)({},e),{},{opType:wj,style:a}))}},getTopicThemeStyle:function(e){var t=e.topicKey,n=e.model,o=n.getTopicVisualLevel(t),r=n.config.theme;return o===ij?r.rootTopic:o===aj?r.primaryTopic:r.normalTopic},getRandomColor:function(n){var o=n.topicKey;if(e.has(o))return e.get(o);var r=["#00CC99","#FFEE88","#A167A5","#E5F993","#F5C396","#DB995A","#83BCFF","#ED7B84","#739E82","#D3BCC0","#FFA0FD","#EFD3D7","#C6878F"],c=r[++t%r.length];return e.set(o,c),yK("getRandomColor",o,c),c}}}function gK(){return[cK(),{getPartTopics:function(e){var t=e.layout,n=e.model,o=e.topicKey,r=n.getTopic(o),c=r.subKeys.size,i=r.subKeys.toArray();switch(t){case tj.LEFT_TO_RIGHT:return{R:i};case tj.RIGHT_TO_LEFT:return{L:i};case tj.LEFT_AND_RIGHT:return{L:i.slice(Math.ceil(c/2),c),R:i.slice(0,Math.ceil(c/2))};case tj.TOP_TO_BOTTOM:return{B:i}}},createSubTopics:function(e){var t=e.model,n=e.topicKey,o=e.controller,r=e.topics,c=e.saveRef,i=t.getTopic(n);if(0===r.size||i.collapse)return null;var a=[];return r.forEach((function(t){var n=Object(m.a)(Object(m.a)({},e),{},{topicKey:t,key:t,ref:c(YE(t))});a.push(o.run("renderTopicWidget",n))})),{subTopics:a}},layout:function(e){var t=e.getRef,n=e.model,o=t(XE(n.editorRootTopicKey)),r=t(rx),c=t(cx);o&&o.layout(),r&&r.layout(),c&&c.layout(),function e(o){if(o.key!==n.editorRootTopicKey){var r=t(YE(o.key));r&&r.layoutLinks()}if(!o.collapse){var c,i=Object(O.a)(o.subKeys);try{for(i.s();!(c=i.n()).done;){var a=c.value;e(n.getTopic(a))}}catch(l){i.e(l)}finally{i.f()}}}(n.getTopic(n.editorRootTopicKey))},getRelativeRect:function(e){var t=e.element,n=e.controller,o=e.getRef,r=n.run("getZoomFactor",e);return XS(t,o(nx).bigView,r)},getRelativeRectFromViewPort:function(e){var t=e.element,n=e.controller,o=e.getRef,r=n.run("getZoomFactor",e);return XS(t,o(nx).viewBox,r)},getRelativeVectorFromViewPort:function(e){return $S(e.element,(0,e.getRef)(nx).viewBox)},addZoomFactorChangeEventListener:function(e){e.controller.run("addTempValueChangeListener",Object(m.a)({key:"ZoomFactor"},e))},removeZoomFactorChangeEventListener:function(e){e.controller.run("removeTempValueChangeListener",Object(m.a)({key:"ZoomFactor"},e))},setZoomFactor:function(e){var t=e.controller,n=e.zoomFactor;return t.run("setTempValue",{key:"ZoomFactor",value:n})},getZoomFactor:function(e){return e.controller.run("getTempValue",{key:"ZoomFactor"})||1},moveTopicToCenter:function(e){var t=e.getRef,n=e.topicKey,o=e.model,r=e.moveDir,c=void 0===r?OC:r;if(o.editorRootTopicKey!==n&&Gj(o,n,o.editorRootTopicKey)!==hj)throw new Error("moveTopicToCenter error: topicKey ".concat(n," is not the DESCENDANT of editor root topic"));var i=t(qE(n)),a=t(nx),l=a.viewBox;if(!i||!l)throw new Error("moveTopicToCenter error: topic or viewBox is null");var u=$S(i,l);if(c===mC)a.setViewBoxScrollDelta(u[0],u[1]);else if(c===OC){var s=l.getBoundingClientRect(),p=i.getBoundingClientRect(),d=(s.width-p.width)/2;a.setViewBoxScrollDelta(u[0]+d-200,u[1])}},focusTopicAndMoveToCenter:function(e){var t=e.controller,n=e.topicKey;t.run("operation",Object(m.a)(Object(m.a)({},e),{},{opArray:[{opType:Sj,topicKey:n,focusMode:sj},{opType:jj,topicKey:n}],allowUndo:!1,callback:function(o){return function(){t.run("moveTopicToCenter",Object(m.a)(Object(m.a)({},e),{},{model:o,topicKey:n}))}}}))}},kC(),hK(),pC(),vC(),{getValue:function(e,t){var n=e.propKey,o=e.controller,r=e.diagramState;switch(n){case ax:return 3;case lx:case dx:return o.run("isOperationEnabled",e);case ux:return o.run("getTopicTitle",e);case sx:return r.dragDrop;case px:return r.rightTopPanel}return t()}},{getTopicTitle:function(e){var t=e.model,n=e.controller,o=e.topicKey,r=e.maxLength,c=t.getTopic(o).getBlock(lj).block,i=n.run("serializeBlockData",Object(m.a)(Object(m.a)({},e),{},{block:c}));return null!=r&&(i=i.length>r?i.substr(0,r)+"...":i),i},renderTopicContentEditor:function(e){return Object(o.createElement)(pK,Object.assign({},e))},renderTopicDescEditor:function(e){return Object(o.createElement)(bK,Object.assign({},e))},isBlockEmpty:function(e,t){var n=e.block,o=e.controller;return n.type===lj||n.type===uj?null==n.data||""===o.run("serializeBlockData",e):t()},serializeBlockData:function(e,t){var n=e.block;return n.type===lj||n.type===uj?"string"===typeof n.data?n.data:Ne.a.serialize(n.data):t()}},{createNewModel:function(e){return Yj.createEmpty()}},{getThemeOfTopic:function(e){var t=e.model.config.theme,n=t.contentStyle,o=t.rootTopic,r=t.primaryTopic,c=t.normalTopic;return{rootTopic:Object(m.a)(Object(m.a)({},o),{},{contentStyle:Object(m.a)(Object(m.a)({},n),o.contentStyle)}),primaryTopic:Object(m.a)(Object(m.a)({},r),{},{contentStyle:Object(m.a)(Object(m.a)({},n),r.contentStyle)}),normalTopic:Object(m.a)(Object(m.a)({},c),{},{contentStyle:Object(m.a)(Object(m.a)({},n),c.contentStyle)})}}},TC()]}b()("node:Diagram"),o.Component;var mK=n(879),OK=function(e,t){return(OK=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(e,t)};function vK(e,t){function n(){this.constructor=e}OK(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}var TK=function(){return(TK=Object.assign||function(e){for(var t,n=1,o=arguments.length;n<o;n++)for(var r in t=arguments[n])Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r]);return e}).apply(this,arguments)};function jK(e,t){var n="function"===typeof Symbol&&e[Symbol.iterator];if(!n)return e;var o,r,c=n.call(e),i=[];try{for(;(void 0===t||t-- >0)&&!(o=c.next()).done;)i.push(o.value)}catch(a){r={error:a}}finally{try{o&&!o.done&&(n=c.return)&&n.call(c)}finally{if(r)throw r.error}}return i}function kK(e,t){return Object.defineProperty?Object.defineProperty(e,"raw",{value:t}):e.raw=t,e}var EK,xK,SK=Object(d.default)(EE)(EK||(EK=kK(["\n  position: absolute;\n  left: calc(50% - 150px);\n  top: 30px;\n  width: 300px;\n  background: white;\n  padding: 10px;\n  user-select: none;\n"],["\n  position: absolute;\n  left: calc(50% - 150px);\n  top: 30px;\n  width: 300px;\n  background: white;\n  padding: 10px;\n  user-select: none;\n"]))),CK=d.default.div(xK||(xK=kK(["\n  margin-bottom: 10px;\n"],["\n  margin-bottom: 10px;\n"])));function wK(e){var t=e.zIndex,n=e.controller,r=e.topicKey;return Object(o.createElement)(SK,{zIndex:t},Object(o.createElement)(CK,null,"Please select the topics you want to reference. After selection, click the confirm button."),Object(o.createElement)(yE,{justifyContent:"space-around"},Object(o.createElement)(y.d,{onClick:function(t){var o=n.run("getSelectedReferenceKeys",e);n.run("enableOperation",e),n.run("operation",TK(TK({},e),{opArray:[{opType:"OP_TYPE_SET_REFERENCE_TOPICS",topicKey:r,referenceKeys:o},{opType:Sj,topicKey:r,focusMode:sj}]})),n.run("clearSelectedReferenceKeys",e)}},"Confirm"),Object(o.createElement)(y.d,{onClick:function(t){n.run("clearSelectedReferenceKeys",e),n.run("enableOperation",e),n.run("operation",TK(TK({},e),{opType:Cj,focusMode:sj}))}},"Cancel")))}var KK={keyList:Object(T.List)(),dataMap:Object(T.Map)()},RK=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return vK(t,e),Object.defineProperty(t.prototype,"keyList",{get:function(){return this.get("keyList")},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"dataMap",{get:function(){return this.get("dataMap")},enumerable:!0,configurable:!0}),t}(Object(T.Record)(KK)),DK={reference:Object(T.Map)()},LK=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return vK(t,e),Object.defineProperty(t.prototype,"reference",{get:function(){return this.get("reference")},enumerable:!0,configurable:!0}),t.prototype.getReferenceKeys=function(e){return this.reference.has(e)?this.reference.get(e).keyList.toArray():[]},t.prototype.getReferencedKeys=function(e){var t=[];return this.reference.forEach((function(n,o){n.keyList.includes(e)&&t.push(o)})),t},t}(Object(T.Record)(DK));function IK(e){var t=e.model,n=e.topicKey,o=e.referenceKeys,r=t.getExtDataItem("TOPIC_REFERENCE",LK),c=r.reference.get(n)||new RK;return c=c.set("keyList",Object(T.List)(o)),r=r.setIn(["reference",n],c),t=t.setIn(["extData","TOPIC_REFERENCE"],r)}var _K,MK,AK,NK=d.default.div(_K||(_K=kK(["\n  display: flex;\n  width: 380px;\n  margin: 10px;\n  justify-content: center;\n  align-items: center;\n"],["\n  display: flex;\n  width: 380px;\n  margin: 10px;\n  justify-content: center;\n  align-items: center;\n"]))),FK=d.default.div(MK||(MK=kK(["\n  width: 300px;\n  text-decoration: underline;\n  cursor: pointer;\n"],["\n  width: 300px;\n  text-decoration: underline;\n  cursor: pointer;\n"]))),PK=d.default.div(AK||(AK=kK(["\n  width: 80px;\n"],["\n  width: 80px;\n"])));function BK(e){var t=e.controller,n=e.refKey,r=e.refType,c=e.removeHandler,i=jK(Object(o.useState)(!1),2),a=i[0],l=i[1],u=t.getValue(ux,TK(TK({},e),{topicKey:n,maxLength:100})),s={isOpen:a,cancelButtonText:"cancel",onConfirm:function(e){c(e)},onCancel:function(e){l(!1)},onClose:function(e){l(!1)}};return Object(o.createElement)(NK,null,Object(o.createElement)(FK,{onClick:function(o){o.stopPropagation(),t.run("focusTopicAndMoveToCenter",TK(TK({},e),{topicKey:n}))}},u),Object(o.createElement)(PK,null,"reference"===r&&Object(o.createElement)(o.Fragment,null,Object(o.createElement)(y.d,{onClick:function(e){l(!0)}},"Remove"),Object(o.createElement)(y.a,TK({},s),Object(o.createElement)("p",null,"Are you confirm to remove this reference?")))))}var zK,VK,HK,GK,WK,UK=d.default.div(zK||(zK=kK([""],[""]))),ZK=d.default.div(VK||(VK=kK(["\n  padding: 10px;\n"],["\n  padding: 10px;\n"]))),JK=d.default.div(HK||(HK=kK(["\n  max-height: 200px;\n  overflow: auto;\n"],["\n  max-height: 200px;\n  overflow: auto;\n"]))),YK=d.default.div(GK||(GK=kK(["\n  font-size: 20px;\n  color: #106ba3;\n"],["\n  font-size: 20px;\n  color: #106ba3;\n"]))),qK=d.default.div(WK||(WK=kK(["\n  text-decoration: underline;\n  color: #106ba3;\n  cursor: pointer;\n"],["\n  text-decoration: underline;\n  color: #106ba3;\n  cursor: pointer;\n"])));function XK(e){var t=e.topicKey,n=e.controller,r=e.model,c=r.extData.get("TOPIC_REFERENCE"),i=c.getReferenceKeys(t),a=0===i.length?null:Object(o.createElement)(ZK,null,Object(o.createElement)(YK,null,"Reference Topics:"),Object(o.createElement)(JK,null,i.map((function(r){var i,a=TK(TK({},e),{key:r,refKey:r,refType:"reference",removeHandler:(i=r,function(o){o.stopPropagation();var r=c.reference.get(t).keyList;n.run("operation",TK(TK({},e),{opArray:[{opType:"OP_TYPE_SET_REFERENCE_TOPICS",topicKey:t,focusMode:sj,referenceKeys:r.delete(r.indexOf(i)).toArray()}]}))})});return Object(o.createElement)(BK,TK({},a))})))),l=c.getReferencedKeys(t),u=0===l.length?null:Object(o.createElement)(ZK,null,Object(o.createElement)(YK,null,"Referenced Topics:"),Object(o.createElement)(JK,null,l.map((function(t){var n=TK(TK({},e),{key:t,refKey:t,refType:"referenced"});return Object(o.createElement)(BK,TK({},n))})))),s=r.focusKey!==t&&Object(o.createElement)(ZK,null,Object(o.createElement)(qK,{onClick:function(t){t.stopPropagation(),n.run("focusTopicAndMoveToCenter",e)}},"Goto Origin Topic"));return Object(o.createElement)(UK,{onMouseDown:HS},a,u,s)}function $K(e){var t=e.model,n=e.topicKey,r=t.extData.get("TOPIC_REFERENCE")||new LK,c=r.reference.get(n),i=[];if(r.reference.forEach((function(e,t){e.keyList.includes(n)&&i.push(t)})),(null==c||0===c.keyList.size)&&0===i.length)return null;var a={className:GE("reference"),tabIndex:-1},l=Object(o.createElement)(kE,TK({},a)),u={autoFocus:!1,content:Object(o.createElement)(XK,TK({},e)),target:l,interactionKind:y.t.CLICK,hoverOpenDelay:500};return Object(o.createElement)(y.s,TK({},u))}function QK(e){var t=e.topicKey,n=e.selectedTopicKeys,r=n.has(t),c=jK(Object(o.useState)(r),2),i=c[0],a=c[1],l={checked:i,onChange:function(){n.has(t)?n.delete(t):n.add(t),a(!i)}};return Object(o.createElement)(vE,TK({},l))}var eR,tR,nR,oR,rR,cR=mK.a.ofType(),iR=Object(d.default)(cR)(eR||(eR=kK(["\n  top: 20%;\n  left: 25% !important;\n  width: 50% !important;\n"],["\n  top: 20%;\n  left: 25% !important;\n  width: 50% !important;\n"]))),aR=d.default.div(tR||(tR=kK(["\n  margin: 0 5px;\n  padding: 10px 5px;\n  width: 100%;\n  font-size: 16px;\n  cursor: pointer;\n  &:hover {\n    background: #e3e8ec;\n  }\n"],["\n  margin: 0 5px;\n  padding: 10px 5px;\n  width: 100%;\n  font-size: 16px;\n  cursor: pointer;\n  &:hover {\n    background: #e3e8ec;\n  }\n"]))),lR=Object(d.default)(y.s)(nR||(nR=kK(["\n  display: block;\n"],["\n  display: block;\n"]))),uR=d.default.div(oR||(oR=kK(["\n  padding: 10px;\n  font-size: 16px;\n  //max-width: 800px;\n  //max-height: 600px;\n  overflow: auto;\n"],["\n  padding: 10px;\n  font-size: 16px;\n  //max-width: 800px;\n  //max-height: 600px;\n  overflow: auto;\n"]))),sR=d.default.div(rR||(rR=kK(["\n  white-space: break-spaces;\n"],["\n  white-space: break-spaces;\n"]))),pR={placeholder:"Search"};function dR(e){var t=e.model,n=(e.setSearchWord,e.controller),r=function(t){return function(o){n.run("focusTopicAndMoveToCenter",TK(TK({},e),{topicKey:t}))}},c=function(){var o=[];return t.topics.forEach((function(t,r){o.push({key:r,title:n.run("getTopicTitle",TK(TK({},e),{topicKey:r}))})})),o}();return Object(o.createElement)(iR,{inputProps:pR,itemListPredicate:function(e,t){return t.filter((function(t){return t.title.toLowerCase().includes(e.toLowerCase())}))},isOpen:!0,items:c,itemRenderer:function(e,t){var n=e.key,c=e.title,i=c.length>100,a=i?c.substr(0,100)+"...":c,l={key:n,onClick:r(n)},u=Object(o.createElement)(aR,TK({},l),a),s={key:n,target:u,content:Object(o.createElement)(uR,null,Object(o.createElement)(sR,null,c)),fill:!0,interactionKind:y.t.HOVER_TARGET_ONLY,hoverOpenDelay:1e3};return i?Object(o.createElement)(lR,TK({},s)):u},onClose:function(){n.run("operation",TK(TK({},e),{opType:Cj,focusMode:sj}))},resetOnSelect:!0})}n(869);function fR(e){return r.a.createElement("div",{className:"bm-toolbar-item ".concat(rn("openfile")),onClick:function(t){var n=e.diagram,o=n.getDiagramProps().controller;Cn(".json,.blinkmind,.bm").then((function(e){var t=JSON.parse(e),r=o.run("deserializeModel",{controller:o,obj:t});n.openNewModel(r)}))}})}function bR(e){return!0===(null!=(t=e)&&"object"===typeof t&&!1===Array.isArray(t))&&"[object Object]"===Object.prototype.toString.call(e);var t}var yR=function(e){var t,n;return!1!==bR(e)&&("function"===typeof(t=e.constructor)&&(!1!==bR(n=t.prototype)&&!1!==n.hasOwnProperty("isPrototypeOf")))},hR=function(e,t){return(hR=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(e,t)};function gR(e,t){function n(){this.constructor=e}hR(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}var mR=function(){return(mR=Object.assign||function(e){for(var t,n=1,o=arguments.length;n<o;n++)for(var r in t=arguments[n])Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r]);return e}).apply(this,arguments)};function OR(e,t){var n="function"===typeof Symbol&&e[Symbol.iterator];if(!n)return e;var o,r,c=n.call(e),i=[];try{for(;(void 0===t||t-- >0)&&!(o=c.next()).done;)i.push(o.value)}catch(a){r={error:a}}finally{try{o&&!o.done&&(n=c.return)&&n.call(c)}finally{if(r)throw r.error}}return i}function vR(){for(var e=[],t=0;t<arguments.length;t++)e=e.concat(OR(arguments[t]));return e}b()("core:controller");function TR(e){var t,n;if(!Array.isArray(e))throw new TypeError("Middleware stack must be an array!");try{for(var o=function(e){var t="function"===typeof Symbol&&e[Symbol.iterator],n=0;return t?t.call(e):{next:function(){return e&&n>=e.length&&(e=void 0),{value:e&&e[n++],done:!e}}}}(e),r=o.next();!r.done;r=o.next()){if("function"!==typeof r.value)throw new TypeError("Middleware must be composed of functions!")}}catch(c){t={error:c}}finally{try{r&&!r.done&&(n=o.return)&&n.call(o)}finally{if(t)throw t.error}}return function(t,n){var o=-1;return function r(c){if(c<=o)throw new Error("next() called multiple times");o=c;var i=e[c];c===e.length&&(i=n);if(!i)return null;try{return i(t,r.bind(null,c+1))}catch(a){throw a}}(0)}}var jR;!function(){function e(e){void 0===e&&(e={});var t=e.plugins,n=void 0===t?[]:t,o=e.onChange,r=e.readOnly;this.readOnly=r,this.onChange=o,this.middleware=new Map,function e(t,n){if(Array.isArray(n))n.forEach((function(n){return e(t,n)}));else if(null!=n)for(var o in n){var r=n[o];t.middleware[o]=t.middleware[o]||[],t.middleware[o].push(r)}}(this,function(e){void 0===e&&(e={});var t=e.plugins;return vR(void 0===t?[]:t)}({plugins:n}))}e.prototype.run=function(e){for(var t=[],n=1;n<arguments.length;n++)t[n-1]=arguments[n];var o=this.middleware,r=o[e]||[];Object(Ee.a)(0!==r.length,"the middleware function "+e+" is not found!");var c=Object(E.a)(TR)(r);return c.apply(void 0,vR(t))},e.prototype.getValue=function(e,t){return this.run("getValue",mR(mR({},t),{propKey:e}))},e.prototype.change=function(e,t){this.onChange(e,t),this.currentModel=e}}();!function(e){e[e.LEFT_TO_RIGHT=0]="LEFT_TO_RIGHT",e[e.RIGHT_TO_LEFT=1]="RIGHT_TO_LEFT",e[e.LEFT_AND_RIGHT=2]="LEFT_AND_RIGHT",e[e.TOP_TO_BOTTOM=3]="TOP_TO_BOTTOM"}(jR||(jR={}));var kR="CONTENT",ER="NORMAL",xR="EDITING_CONTENT",SR="EDITING_DESC",CR="SET_FOCUS_MODE";function wR(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,(function(e){var t=16*Math.random()|0;return("x"===e?t:3&t|8).toString(16)}))}var KR=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return gR(t,e),Object.defineProperty(t.prototype,"data",{get:function(){return this.get("data")},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"type",{get:function(){return this.get("type")},enumerable:!0,configurable:!0}),t.create=function(e){return new t(e)},t.createList=function(e){if(T.List.isList(e)||Array.isArray(e))return Object(T.List)(e.map(t.create));throw new Error("Block.createList only accepts Array or List, but you passed it: "+e)},t}(Object(T.Record)({type:null,key:null,data:null})),RR=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return gR(t,e),Object.defineProperty(t.prototype,"key",{get:function(){return this.get("key")},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"parentKey",{get:function(){return this.get("parentKey")},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"collapse",{get:function(){return this.get("collapse")},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"subKeys",{get:function(){return this.get("subKeys")},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"blocks",{get:function(){return this.get("blocks")},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"relations",{get:function(){return this.get("relations")},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"style",{get:function(){return this.get("style")},enumerable:!0,configurable:!0}),t.prototype.getBlock=function(e){var t=this.blocks.findIndex((function(t){return t.type===e}));return-1===t?{index:t,block:null}:{index:t,block:this.blocks.get(t)}},t.fromJSON=function(e){var n=e.key,o=e.parentKey,r=void 0===o?null:o,c=e.blocks,i=e.subKeys,a=void 0===i?[]:i,l=e.collapse;return new t({key:n,parentKey:r,collapse:void 0!==l&&l,subKeys:Object(T.List)(a),blocks:KR.createList(c)})},t.create=function(e){var n=e.key,o=e.parentKey,r=void 0===o?null:o,c=e.content,i=void 0===c?"":c,a=e.subKeys,l=void 0===a?[]:a,u=e.collapse,s=void 0!==u&&u,p=KR.create({type:kR,data:i,key:null});return new t({key:n,parentKey:r,blocks:Object(T.List)([p]),subKeys:Object(T.List)(l),collapse:s})},t}(Object(T.Record)({key:null,parentKey:null,collapse:!1,subKeys:null,blocks:null,relations:null,style:null}));b()("modifier");var DR={readOnly:!1,allowUndo:!0,layoutDir:jR.LEFT_AND_RIGHT,theme:{name:"default",randomColor:!0,background:"rgb(57,60,65)",highlightColor:"#50C9CE",marginH:60,marginV:20,contentStyle:{lineHeight:"1.5"},linkStyle:{lineRadius:5,lineType:"curve",lineWidth:"3px"},rootTopic:{contentStyle:{fontSize:"34px",borderRadius:"35px",padding:"16px 18px 16px 18px"},subLinkStyle:{lineType:"curve",lineWidth:"3px",lineColor:"rgb(113, 203, 45)"}},primaryTopic:{contentStyle:{borderWidth:"1px",borderStyle:"solid",borderRadius:"20px",fontSize:"17px",padding:"10px 15px 10px 15px"},subLinkStyle:{lineType:"curve",lineWidth:"3px",lineColor:"rgb(113, 203, 45)"}},normalTopic:{contentStyle:{border:"1px solid #e8eaec",borderRadius:"20px",fontSize:"17px",padding:"4px 10px"},subLinkStyle:{lineType:"curve",lineWidth:"3px",lineColor:"white"}}}},LR=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return gR(t,e),Object.defineProperty(t.prototype,"layoutDir",{get:function(){return this.get("layoutDir")},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"readOnly",{get:function(){return this.get("readOnly")},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"allowUndo",{get:function(){return this.get("allowUndo")},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"theme",{get:function(){return this.get("theme")},enumerable:!0,configurable:!0}),t.fromJSON=function(e){return new t(e)},t}(Object(T.Record)(DR)),IR={topics:Object(T.Map)(),extData:Object(T.Map)(),config:null,rootTopicKey:null,editorRootTopicKey:null,focusKey:null,focusMode:null,formatVersion:null,zoomFactor:1},_R=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return gR(t,e),t.isModel=function(e){return e instanceof t},t.create=function(e){if(void 0===e&&(e=null),null==e)return t.createEmpty();var n;if(t.isModel(e)&&(n=e),yR(e)&&(n=t.fromJSON(e)),n)return null==n.focusKey&&(n=n.set("focusKey",n.rootTopicKey)),null==n.focusMode&&(n=n.set("focusMode",ER)),n;throw new Error("`Value.create` only accepts objects or values, but you passed it: "+e)},t.createEmpty=function(){var e=new t,n=RR.create({key:wR()});return e.update("topics",(function(e){return e.set(n.key,n)})).set("rootTopicKey",n.key).set("focusKey",n.key).set("focusMode",ER)},t.fromJSON=function(e){var n=new t,o=e.topics,r=void 0===o?[]:o,c=e.config,i=void 0===c?{}:c,a=e.rootTopicKey,l=e.editorRootTopicKey;return void 0===l&&(l=a),n=(n=n.merge({rootTopicKey:a,editorRootTopicKey:l})).withMutations((function(e){r.forEach((function(t){e.update("topics",(function(e){return e.set(t.key,RR.fromJSON(t))}))})),e.set("config",LR.fromJSON(i))}))},t.prototype.toJS=function(){return{rootTopicKey:this.rootTopicKey,topics:Object.values(this.topics.toJS()),config:this.config,extData:this.extData,zoomFactor:this.zoomFactor}},Object.defineProperty(t.prototype,"extData",{get:function(){return this.get("extData")},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"topics",{get:function(){return this.get("topics")},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"config",{get:function(){return this.get("config")},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"formatVersion",{get:function(){return this.get("formatVersion")},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"rootTopicKey",{get:function(){return this.get("rootTopicKey")},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"editorRootTopicKey",{get:function(){return this.get("editorRootTopicKey")},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"focusKey",{get:function(){return this.get("focusKey")},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"focusMode",{get:function(){return this.get("focusMode")},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"editingContentKey",{get:function(){return this.focusMode===xR?this.focusKey:null},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"editingDescKey",{get:function(){return this.focusMode===SR?this.focusKey:null},enumerable:!0,configurable:!0}),t.prototype.getTopic=function(e){return this.topics.get(e)},t.prototype.getExtDataItem=function(e,t){return this.extData.get(e)||new t},t.prototype.getParentTopic=function(e){var t=this.getTopic(e);return t.parentKey?this.getTopic(t.parentKey):null},t.prototype.getTopicVisualLevel=function(e){for(var t=this.getTopic(e),n=0;t&&t.key!==this.editorRootTopicKey;)n++,t=this.getParentTopic(t.key);return n},Object.defineProperty(t.prototype,"rootTopic",{get:function(){return this.getTopic(this.rootTopicKey)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"zoomFactor",{get:function(){return this.get("zoomFactor")},enumerable:!0,configurable:!0}),t}(Object(T.Record)(IR));function MR(e){var t=[[jR.LEFT_AND_RIGHT,"Left And Right","layout-left-and-right"],[jR.LEFT_TO_RIGHT,"Only Right","layout-right"],[jR.RIGHT_TO_LEFT,"Only Left","layout-left"]];return r.a.createElement("div",{className:nt()("bm-toolbar-item",rn("layout-left-and-right"))},r.a.createElement(y.s,{enforceFocus:!1},r.a.createElement("div",{className:"bm-toolbar-popover-target"}),r.a.createElement(y.n,null,t.map((function(t){return r.a.createElement(y.p,{key:t[1],icon:cn(t[2]),text:t[1],onClick:(n=t[0],function(t){var o=e.diagram.getDiagramProps();o.controller.run("setLayoutDir",Object(m.a)(Object(m.a)({},o),{},{layoutDir:n}))})});var n})))))}var AR=n(300),NR=n.n(AR),FR=n(301),PR=n.n(FR),BR=n(302),zR=n.n(BR),VR=n(303),HR=n.n(VR),GR=n(304),WR=n.n(GR);function UR(e){var t=[["default",NR.a],["theme1",PR.a],["theme2",zR.a],["theme3",HR.a],["theme4",WR.a]];return r.a.createElement("div",{className:nt()("bm-toolbar-item",rn("theme"))},r.a.createElement(y.s,{enforceFocus:!1},r.a.createElement("div",{className:"bm-toolbar-popover-target"}),r.a.createElement("div",{className:"bm-popover-theme"},t.map((function(t){return r.a.createElement("div",{key:t[0],className:"bm-theme-item",onClick:(n=t[0],function(t){var o=e.diagram.getDiagramProps();o.controller.run("setTheme",Object(m.a)(Object(m.a)({},o),{},{themeKey:n}))})},r.a.createElement("img",{className:"bm-theme-img",src:t[1],alt:t[0]}));var n})))))}function ZR(e){return r.a.createElement("div",{className:nt()("bm-toolbar-item",rn("export"))},r.a.createElement(y.s,{enforceFocus:!1},r.a.createElement("div",{className:"bm-toolbar-popover-target"}),r.a.createElement(y.n,null,r.a.createElement(y.p,{text:"JSON(.json)",onClick:function(t){var n=e.diagram.getDiagramProps(),o=n.controller,r=n.model,c=o.run("serializeModel",n),i=JSON.stringify(c),a="data:text/plain,".concat(encodeURIComponent(i)),l=o.run("getTopicTitle",Object(m.a)(Object(m.a)({},n),{},{topicKey:r.rootTopicKey}));!function(e,t){var n=document.createElement("a");n.href=e,n.download=t,n.click()}(a,"".concat(l,".blinkmind"))}}),r.a.createElement(y.o,null))))}function JR(e){return r.a.createElement("div",{className:"bm-toolbar-item ".concat(rn(on)),onClick:function(t){var n=e.diagram.getDiagramProps();n.controller.run("operation",Object(m.a)(Object(m.a)({},n),{},{opType:CR,focusMode:"FOCUS_MODE_SEARCH"}))}})}var YR=function(e){Object(u.a)(n,e);var t=Object(s.a)(n);function n(){return Object(a.a)(this,n),t.apply(this,arguments)}return Object(l.a)(n,[{key:"render",value:function(){var e=this.props,t=e.onClickUndo,n=e.onClickRedo,o=e.canUndo,c=e.canRedo;return r.a.createElement("div",{className:"bm-toolbar"},r.a.createElement(fR,e),r.a.createElement(ZR,e),r.a.createElement(UR,e),r.a.createElement(MR,e),r.a.createElement(JR,e),r.a.createElement("div",{className:nt()("bm-toolbar-item",rn("undo"),{"bm-toolbar-item-disabled":!o}),onClick:t}),r.a.createElement("div",{className:nt()("bm-toolbar-item",rn("redo"),{"bm-toolbar-item-disabled":!c}),onClick:n}))}}]),n}(r.a.PureComponent),qR=(n(870),b()("app"),[rf(),function(){var e=new Map([["default",_f],["random-color-square",Gf],["theme1",Wf],["theme2",Uf],["theme3",Zf],["theme4",Jf]]);return{getAllThemes:function(t){return e},setTheme:function(e){var t=e.model,n=e.controller,o=e.themeKey,r=n.run("getAllThemes",e);if(!r.has(o))throw new Error("setTheme: the theme key is not correct!");var c=r.get(o),i=Vf.setTheme({model:t,theme:c});n.change(i)}}}(),function(){var e=new Set;function t(t){var n=t.model,o=t.topicKey,r=n.getExtDataItem("TOPIC_REFERENCE",LK);return e=new Set(r.getReferenceKeys(o)),n=Zj.focusTopic({model:n,topicKey:o,focusMode:"FOCUS_MODE_SET_REFERENCE_TOPICS"})}return{customizeTopicContextMenu:function(e,t){var n=e.controller;return Object(o.createElement)(o.Fragment,null,t(),Object(o.createElement)(y.o,null),Object(o.createElement)(y.p,{key:"EXT_KEY_TOPIC_REFERENCE",icon:WE("reference"),text:"Set Reference Topics",onClick:function(t){n.run("operation",TK(TK({},e),{opType:"OP_TYPE_START_SET_REFERENCE_TOPICS"})),n.run("disableOperation",TK(TK({},e),{whiteList:[Oj]}))}}))},getOpMap:function(e,n){var o=n();return o.set("OP_TYPE_START_SET_REFERENCE_TOPICS",t),o.set("OP_TYPE_SET_REFERENCE_TOPICS",IK),o},beforeOpFunction:function(e,t){var n=t(),o=e.opType,r=e.topicKey;if(o===xj&&r!==n.editorRootTopicKey){var c=Hj(n,r);c.push(r);var i=n.getExtDataItem("TOPIC_REFERENCE",LK),a=i.reference;c.forEach((function(e){var t=i.getReferencedKeys(e);(a=a.withMutations((function(n){t.forEach((function(t){n.updateIn([t,"keyList"],(function(t){return t.delete(t.indexOf(e))}))}))}))).has(e)&&(a=a.delete(e))})),i=i.set("reference",a),n=n.setIn(["extData","TOPIC_REFERENCE"],i)}return n},renderDiagramCustomize:function(e,t){var n=e.model,r=e.controller.getValue(ax)+2,c=t();if("FOCUS_MODE_SET_REFERENCE_TOPICS"===n.focusMode){var i=TK(TK({},e),{zIndex:r,topicKey:n.focusKey,key:"AddReferenceTopicPanel"});c.push(Object(o.createElement)(wK,TK({},i)))}return c},renderTopicContentOthers:function(t,n){var r=t.model,c=t.topicKey,i=t.controller,a=n();if(a.push(i.run("renderTopicExtReference",TK(TK({},t),{key:"EXT_KEY_TOPIC_REFERENCE-icon"}))),"FOCUS_MODE_SET_REFERENCE_TOPICS"===r.focusMode&&r.focusKey!==c){var l=TK(TK({},t),{key:"checkbox",selectedTopicKeys:e}),u=Object(o.createElement)(QK,TK({},l));a.push(u)}return a},renderTopicExtReference:function(e,t){return Object(o.createElement)($K,TK({},e))},clearSelectedReferenceKeys:function(){e.clear()},getSelectedReferenceKeys:function(){return Array.from(e)},deserializeExtDataItem:function(e,t){var n=e.extDataKey,o=e.extDataItem;if("TOPIC_REFERENCE"===n){var r=new LK,c=function(e){var t=o.reference[e],n=new RK({keyList:Object(T.List)(t.keyList),dataMap:Object(T.Map)(t.dataMap)});r=r.update("reference",(function(t){return t.set(e,n)}))};for(var i in o.reference)c(i);return r}return t()}}}(),function(){var e=function(e){};return{customizeHotKeys:function(e,t){var n=e.controller,o=e.model,r=t();return r.globalHotKeys.set("DEFAULT_SEARCH",{label:"search",combo:"ctrl + f",onKeyDown:function(){n.run("operation",TK(TK({},e),{opType:Sj,topicKey:o.focusKey,focusMode:"FOCUS_MODE_SEARCH"}))}}),r},renderDiagramCustomize:function(t,n){var r=n();if("FOCUS_MODE_SEARCH"===t.model.focusMode){var c=TK(TK({key:"search-panel"},t),{setSearchWorld:e});r.push(Object(o.createElement)(dR,TK({},c)))}return r}}}(),$T(),{serializeModel:function(e,t){var n=t();if(null!=n)return n;var o=e.model,r=e.controller;return{rootTopicKey:o.rootTopicKey,editorRootTopicKey:o.editorRootTopicKey,focusKey:o.focusKey,extData:r.run("serializeExtData",vf(vf({},e),{extData:o.extData})),topics:o.topics.valueSeq().toArray().map((function(t){return r.run("serializeTopic",vf(vf({},e),{topic:t}))})),config:r.run("serializeConfig",vf(vf({},e),{config:o.config})),formatVersion:o.formatVersion}},deserializeModel:function(e,t){var n=t();if(null!=n)return n;var o=e.obj,r=e.controller;null==o.formatVersion&&(o.formatVersion="0.0");var c=o.rootTopicKey,i=o.editorRootTopicKey,a=o.focusKey,l=o.topics,u=o.config,s=o.extData,p=o.formatVersion,d=new Of;return null==(d=d.merge({rootTopicKey:c,editorRootTopicKey:null==i?c:i,focusKey:a,extData:r.run("deserializeExtData",vf(vf({},e),{extData:s,formatVersion:p})),config:r.run("deserializeConfig",vf(vf({},e),{config:u,formatVersion:p})),topics:r.run("deserializeTopics",vf(vf({},e),{topics:l,formatVersion:p})),formatVersion:o.formatVersion})).focusKey&&(d=d.set("focusKey",d.rootTopicKey)),null==d.focusMode&&(d=d.set("focusMode",sf)),Tf("deserializeModel",d),d},serializeExtData:function(e,t){var n=t();if(null!=n)return n;var o=e.extData,r=e.controller,c={};return o.forEach((function(t,n){c[n]=r.run("serializeExtDataItem",{props:e,extDataKey:n,extDataItem:t})})),c},deserializeExtData:function(e,t){var n=t();if(null!=n)return n;var o=e.extData,r=e.controller,c=Object(T.Map)();for(var i in o)c=c.set(i,r.run("deserializeExtDataItem",vf(vf({},e),{extDataKey:i,extDataItem:o[i]})));return c},serializeExtDataItem:function(e,t){var n=t();if(null!=n)return n;var o=e.extDataItem;return Object(T.isImmutable)(o)?o.toJS():o},deserializeExtDataItem:function(e,t){var n=t();return null!=n?n:e.extDataItem},serializeConfig:function(e,t){var n=t();return null!=n?n:e.config.toJS()},deserializeConfig:function(e,t){var n=t();if(null!=n)return n;var o=e.config;return new yf(o)},serializeTopic:function(e,t){var n=t();if(null!=n)return n;var o=e.topic,r=e.controller;return{key:o.key,parentKey:o.parentKey,subKeys:o.subKeys.toArray(),collapse:o.collapse,style:o.style,blocks:o.blocks.map((function(t){return r.run("serializeBlock",vf(vf({},e),{block:t}))}))}},deserializeTopic:function(e,t){var n=t();if(null!=n)return n;var o=e.topic,r=e.controller,c=o.key,i=o.parentKey,a=o.subKeys,l=o.blocks,u=o.style,s=o.collapse,p=new gf;return p=p.merge({key:c,parentKey:i,subKeys:Object(T.List)(a),style:u,collapse:s,blocks:r.run("deserializeBlocks",vf(vf({},e),{blocks:l}))})},deserializeTopics:function(e,t){var n=t();if(null!=n)return n;var o=e.topics,r=e.controller,c=Object(T.Map)();return c=c.withMutations((function(t){o.forEach((function(n){return t.set(n.key,r.run("deserializeTopic",vf(vf({},e),{topic:n})))}))}))},serializeBlock:function(e,t){var n=t();if(null!=n)return n;var o=e.block,r=e.controller;return{type:o.type,data:r.run("serializeBlockData",vf({},e))}},serializeBlockData:function(e,t){var n=t();return null!=n?n:e.block.data},deserializeBlock:function(e,t){var n=t();if(null!=n)return n;var o=e.block,r=e.controller,c=o.type;return new ff({type:c,data:r.run("deserializeBlockData",vf(vf({},e),{block:o}))})},deserializeBlockData:function(e,t){var n=t();return null!=n?n:e.block.data},deserializeBlocks:function(e,t){var n=t();if(null!=n)return n;var o=e.blocks,r=e.controller,c=Object(T.List)();return c=c.withMutations((function(t){o.forEach((function(n){return t.push(r.run("deserializeBlock",vf(vf({},e),{block:n})))}))}))}}]),XR=function(e){Object(u.a)(n,e);var t=Object(s.a)(n);function n(e){var o;return Object(a.a)(this,n),(o=t.call(this,e)).diagramRef=function(e){o.diagram=e,o.setState({})},o.onClickUndo=function(e){var t=o.diagram.getDiagramProps();t.controller.run("undo",t)},o.onClickRedo=function(e){var t=o.diagram.getDiagramProps();t.controller.run("redo",t)},o.onChange=function(e,t){o.setState({model:e},t)},o.initModel(),o}return Object(l.a)(n,[{key:"initModel",value:function(){var e=_R.create({rootTopicKey:"7b11654a-e9d3-45ba-a1aa-afca29ff5f18",editorRootTopicKey:"7b11654a-e9d3-45ba-a1aa-afca29ff5f18",focusKey:"69e69b35-9400-4fb3-aa5e-e9315b4a6eba",extData:{TOPIC_REFERENCE:{reference:{}}},topics:[{key:"4567082c-b57b-45f4-8c04-168f9a2f123f",parentKey:"06067a6c-cfd1-4faf-8aa6-5eb827f3d020",subKeys:["f548ba3e-55f6-484d-8289-858f8fd28289"],collapse:!0,style:null,blocks:[{type:"CONTENT",data:"Boolean"},{type:"DESC",data:'The boolean type has only two values: **true** and **false**\n\n```\nconsole.log(typeof(true)); // "boolean"\n\n```\n\n```\nlet nameFieldChecked = true; // yes, name field is checked\nlet ageFieldChecked = false; // no, age field is not checked\n\n```\n'}]},{key:"a1649782-ec29-4030-bb2d-d6044103cf10",parentKey:"f8750599-32db-4fb3-829e-0673887df2c2",subKeys:["dfb39c55-dfce-4d5a-88a7-5fd066288121"],collapse:!0,style:null,blocks:[{type:"CONTENT",data:"Function\nexpression"},{type:"DESC",data:'A **function expression** is determined by a function keyword, followed by an optional function name \\(anonymous\\), a list of parameters in a pair of parenthesis \\(para1, ..., paramN\\) and a pair of curly braces \\{ ... \\} that delimits the body code.\n\n**example 1: named function**\n* Naming a function is always a good idea, it can be seen in stack traces, call stacks. Useful when debugging.\n\n```\nconst count = function arrayLength(array) {\n  return array.length;\n}\n\ncount([5, 7, 8]); // output: "3"\n\n```\n\n**example 2: anonymous function**\n* anonymous functions are harder to debug as it does not have the name, so finding the function that causes problem will be difficult.\n\n```\nconst count = function(array) {\n  return array.length;\n}\n\ncount([5, 7, 8]); // output: "3"\n\n```\n'}]},{key:"9677e53a-05a4-4bd6-9010-f10826426bb6",parentKey:"3854fdd8-7de4-429c-b73d-2519cbf63781",subKeys:[],collapse:!1,style:null,blocks:[{type:"CONTENT",data:"else If Statement"},{type:"DESC",data:'**if** statement can be extended with an **else if** statement, which adds another conditional with its own block, it is a way to chain on extra choices/outcomes.\n\n**Syntax:**\n\n```\nif (condition) {\n     // condition is true this block will be executed\n     // no futher conditions will be checked\n} else if (condition) {\n      // when a previous block condition has been failed\n      // this(else if) block condition is evaluted\n      // when a condition passed this block will be executed\n} else {\n      //when all condition has been failed this block will be executed\n}\n\n```\n\n**example:**\n\n```\nif (false) {\n      console.log("if blocked executed");\n} else if (2 < 5 && 3 < 5 ) {\n      console.log("else if blocked executed");\n} else {\n      console.log("else blocked executed");\n}\n\n```\n'}]},{key:"7662833c-7ece-4668-a37b-4e11820503b4",parentKey:"08aaf5bf-5222-4d4c-bd8d-2267d2f81433",subKeys:["9c9627b1-6bba-4135-955e-608e6a937ed1"],collapse:!0,style:null,blocks:[{type:"CONTENT",data:"Function scope"},{type:"DESC",data:"A function in JavaScript defines a scope for variables declared using **var**, **let** and **const**.\n\n```\nExample 1:\n\nfunction run() {\n  // \"run\" function scope\n  var message = 'Run, Forrest, Run!';\n  console.log(message); // 'Run, Forrest, Run!'\n}\n\nrun();\nconsole.log(message); // throws ReferenceError\n\n```\n\n**run\\(\\)** function body creates a scope. The variable message is accessible inside of the function scope, but inaccessible outside.\n\n```\nfunction run() {\n  // \"run\" function scope\n  const two = 2;\n  let count = 0;\n  function run2() {}\n\n  console.log(two);   // 2\n  console.log(count); // 0\n  console.log(run2);  // function\n}\n\nrun();\nconsole.log(two);   // throws ReferenceError\nconsole.log(count); // throws ReferenceError\nconsole.log(run2);  // throws ReferenceError\n\n```\n"}]},{key:"c1e621c4-ae65-40d0-ad48-650368d181d0",parentKey:"29f23365-fcf6-4f8f-8060-811df84e4770",subKeys:[],collapse:!1,style:null,blocks:[{type:"CONTENT",data:""}]},{key:"d40f6cf0-dcae-4162-8b2f-d89edd7e3212",parentKey:"7b11654a-e9d3-45ba-a1aa-afca29ff5f18",subKeys:["d4cb9863-ba6c-4ea6-903e-44accf4a5b7b","29f23365-fcf6-4f8f-8060-811df84e4770","a3055667-8217-484e-aae8-728cab93135c","65199906-ca55-4ae8-bd9f-a4a08cbc2432","a70b7d9d-ea0f-49c3-a488-ddbceebe85d8"],collapse:!1,style:null,blocks:[{type:"CONTENT",data:"Loops"},{type:"DESC",data:""}]},{key:"dbc9a664-bff0-4263-811c-cb91470ce277",parentKey:"2c6ddd66-98a5-4410-b7f2-dbd42aaa7e01",subKeys:[],collapse:!1,style:null,blocks:[{type:"CONTENT",data:"Object"},{type:"DESC",data:'**Object** : typeof instance === "object". It is used to store collections of data and more complex entities.\n\n```\nconsole.log(typeof({})); // "object"\nconsole.log(typeof([])); // "object" Arrays aren\u2019t primitive, they are objects\nconsole.log(typeof(new Map())); // "object"\nconsole.log(typeof(new Date())); // "object"\n\n```\n\nSpecial non\\-data but Structural type for any constructed object instance also used as data structures: \n\n1. new Object, \n1. new Array, \n1. new Map, \n1. new Set, \n1. new WeakMap, \n1. new WeakSet, \n1. new Date and almost everything made with **new** keyword;\n\n\n**Indexed collections**: Arrays and typed Arrays\n\n**Keyed collections**: Maps, Sets, WeakMaps, WeakSets'}]},{key:"220e873a-0a0b-4820-9434-42d0727eead5",parentKey:"f8750599-32db-4fb3-829e-0673887df2c2",subKeys:[],collapse:!1,style:null,blocks:[{type:"CONTENT",data:"Shorthand\nfunction"},{type:"DESC",data:"_**Shorthand**_ method definition can be used in a method declaration on object literals and ES2015 classes. You can define them using a function name, followed by a list of parameters in a pair of parenthesis \\(para1, ..., paramN\\) and a pair of curly braces \\{ ... \\} that delimits the body statements.\n\n```\nconst collection = {\n  items: [],\n  add(...items) {\n    this.items.push(...items);\n  },\n  get(index) {\n    return this.items[index];\n  }\n};\ncollection.add('C', 'Js', 'PHP', 'Java');\ncollection.get(1) //output: \"Js\"\n\n```\n\n_**add\\(\\)**_ and _**get\\(\\)**_ methods in _**collection**_ object are defined using short method definition. These methods are called as usual: _**collection\\.add\\(...\\)**_ and _**collection\\.get\\(...\\)**_."}]},{key:"a70b7d9d-ea0f-49c3-a488-ddbceebe85d8",parentKey:"d40f6cf0-dcae-4162-8b2f-d89edd7e3212",subKeys:[],collapse:!1,style:null,blocks:[{type:"CONTENT",data:"do while"},{type:"DESC",data:'**do\\-while** loop will always be executed at least once, even if the condition is false, because the code block is executed before the condition is checked.\n\n```\nlet i = 10;\ndo {\n  console.log("The number is " + i);\n  i++;\n}\nwhile (i < 5);\n\n// output: "The number is 10"\n\n```\n'}]},{key:"d4cb9863-ba6c-4ea6-903e-44accf4a5b7b",parentKey:"d40f6cf0-dcae-4162-8b2f-d89edd7e3212",subKeys:[],collapse:!1,style:null,blocks:[{type:"CONTENT",data:"for"},{type:"DESC",data:'The **for** loop repeats a block of code as long as a certain condition is met. It is typically used to execute a block of code for certain number of times.\n\n**Syntax:**\n\n```\nfor(initialization; condition; final-expression) {\n    // Code to be executed\n}\n\n```\n\n* **initialization** \u2014 it is used to initialize the counter variables, and evaluated once unconditionally before the first execution of the body of the loop.\n* **condition** \u2014 it is evaluated at the beginning of each iteration. If it evaluates to true, the loop statements execute. If it evaluates to false, the execution of the loop ends.\n* **final\\-expression** \u2014 this is always evaluated \\(or run\\) each time the loop has gone through a full iteration. It usually serves to increment \\(or in some cases decrement\\) the counter variable.\n\n\n**example 1**:\n\n```\nfor (let i = 0; i < 10; i++) {\n  console.log("The number is " + i);\n}\n\n// Output:\n// "The number is 0"\n// "The number is 1"\n// "The number is 2"\n// "The number is 3"\n// "The number is 4"\n// "The number is 5"\n// "The number is 6"\n// "The number is 7"\n// "The number is 8"\n// "The number is 9"\n\n```\n\n**example 2: **skipping current execution of loop using **continue** statement\n\n```\nfor (let i = 0; i < 10; i++) {\n  if(i%2===0){\n    continue;\n  }\n  console.log("The number is " + i);\n}\n\n// Output:\n// "The number is 1"\n// "The number is 3"\n// "The number is 5"\n// "The number is 7"\n// "The number is 9"\n\n```\n\n**example 3**: terminating current execution flow of the loop using **break** statement\n\n```\nfor (let i = 0; i < 10; i++) {\n  if(i===5){\n    break;\n  }\n  console.log("The number is " + i);\n}\n\n// Output:\n// "The number is 0"\n// "The number is 1"\n// "The number is 2"\n// "The number is 3"\n// "The number is 4"\n\n```\n'}]},{key:"7b11654a-e9d3-45ba-a1aa-afca29ff5f18",parentKey:null,subKeys:["44213600-22aa-4972-aa99-eec27b840064","252c6937-bd93-4233-90cb-333938667c72","08aaf5bf-5222-4d4c-bd8d-2267d2f81433","3854fdd8-7de4-429c-b73d-2519cbf63781","d40f6cf0-dcae-4162-8b2f-d89edd7e3212","f8750599-32db-4fb3-829e-0673887df2c2"],collapse:!1,style:'{"contentStyle":{"background":"#f8e71c"}}',blocks:[{type:"CONTENT",data:"Js"}]},{key:"a37aef6c-b62c-423c-8124-c18edc14142b",parentKey:"f8750599-32db-4fb3-829e-0673887df2c2",subKeys:["24a0e9fa-2a33-4e0d-8736-ec434151a6d0"],collapse:!0,style:null,blocks:[{type:"CONTENT",data:"Generator\nfunction"},{type:"DESC",data:"A _**generator**_ is a function that can stop midway and then continue from where it stopped. In short, a generator appears to be a function but it behaves like an iterator.\n\n**example 1:** function declaration form _**function\\* <name\\>\\(\\)**_\n\n```\nfunction * generatorFunction() {\n  console.log('This will be executed first.');\n  yield 'Hello, ';\n  console.log('I will be printed after the pause');  \n  yield 'World!';\n}\nconst generatorObject = generatorFunction();\n\nconsole.log(generatorObject.next().value);\n// output:\n// This will be executed first.\n// Hello, \nconsole.log(generatorObject.next().value);\n// output:\n// I will be printed after the pause\n// World!\nconsole.log(generatorObject.next().value);\n// output:\n// undefined\n\n```\n\n**example 2: **function expression form _**function\\* \\(\\)**_\n\n```\nconst indexGenerator = function* () {\n  let index = 0;\n  while(true) {\n    yield index++;\n  }\n};\nconst g = indexGenerator();\nconsole.log(g.next().value); // => 0\nconsole.log(g.next().value); // => 1\n\n```\n\n**example 3: **Shorthand method definition form _**\\*<name\\>\\(\\)**_\n\n```\nconst obj = {\n  *indexGenerator() {\n    var index = 0;\n    while(true) {\n      yield index++;\n    }\n  }\n}\nconst g = obj.indexGenerator();\nconsole.log(g.next().value); // => 0\nconsole.log(g.next().value); // => 1\n\n```\n"}]},{key:"9c9627b1-6bba-4135-955e-608e6a937ed1",parentKey:"7662833c-7ece-4668-a37b-4e11820503b4",subKeys:[],collapse:!1,style:null,blocks:[{type:"CONTENT",data:""}]},{key:"d3f7bd55-fe91-45b2-b13e-ea98bb7710d9",parentKey:"10d9744a-f521-4bdf-8933-9c3fb1cfb2c8",subKeys:[],collapse:!1,style:null,blocks:[{type:"CONTENT",data:""}]},{key:"fc11e9b2-fb2a-4f5d-934e-65c172bb61fa",parentKey:"2c6ddd66-98a5-4410-b7f2-dbd42aaa7e01",subKeys:[],collapse:!1,style:null,blocks:[{type:"CONTENT",data:"Function"},{type:"DESC",data:'A function is a code snippet that can be called by other code or by itself, or a variable that refers to the function. When a function is called, arguments are passed to the function as input, and the function can optionally return a value. \n\nA function in JavaScript is also an **object**.\n\n```\nconsole.log(typeof(x => x * 2)); // "function"\nconsole.log(typeof(function(){})); // "function"\n\n```\n'}]},{key:"b31ac6cb-b3c3-4dd2-83a1-6b5b7466d048",parentKey:"06067a6c-cfd1-4faf-8aa6-5eb827f3d020",subKeys:[],collapse:!1,style:null,blocks:[{type:"CONTENT",data:"Null"},{type:"DESC",data:'The special **null** value does not belong to any of the types described above.\n\n```\nconsole.log(typeof(null)); // "object"\n// This is a bug and one that unfortunately can\u2019t be fixed, because it would break existing code.\n// https://2ality.com/2013/10/typeof-null.html\n\n```\n\nIt forms a separate type of its own which contains only the null value:\n\n```\nlet age = null;\n\n```\n\nIn JavaScript, null is **not** a \u201creference to a non\\-existing object\u201d or a \u201cnull pointer\u201d like in some other languages.\n\nIt\u2019s just a special value which represents \u201c**nothing**\u201d, \u201c**empty**\u201d or \u201c**value unknown**\u201d.\n\nThe code above states that age is unknown\n'}]},{key:"24a0e9fa-2a33-4e0d-8736-ec434151a6d0",parentKey:"a37aef6c-b62c-423c-8124-c18edc14142b",subKeys:[],collapse:!1,style:null,blocks:[{type:"CONTENT",data:""}]},{key:"05c8bbd0-fe13-4906-92cf-8507b33954da",parentKey:"252c6937-bd93-4233-90cb-333938667c72",subKeys:[],collapse:!1,style:null,blocks:[{type:"CONTENT",data:"Var"},{type:"DESC",data:"It it\u2019s functional\\-scoped, and value stored in it can be reassigned.\n\nTo declare or create a varaible\n\n```\nvar message;\n\n```\n\nAssign a data into it by using the assignment operator =:\n\n```\nmessage = 'Hello';\n\n```\n\nCombine the variable _declaration_ and _assignment_ into a single line\n\n```\nvar message = 'Hello!';\n\n```\n\nDeclare multiple variables in one line\n\n```\nvar user = 'John', age = 25, message = 'Hello';\n\n```\n\nReassigning a value\n\n```\nvar userName = \"Bruce\"\nuserName = \"Wayne\"\n\n```\n\nVar is **functional\\-scoped**\n\n```\nvar fullMoon = true;\n\n// Use var to initialize a variable\nvar species = \"human\";\n\nif (fullMoon) {\n  // Attempt to create a new variable in a block\n  var species = \"werewolf\";\n  console.log(`${species}.`); // werewolf\n}\n\nconsole.log(`${species}.`); // werewolf\n\n```\n\nBoth the **global variable** and the **block\\-scoped variable** end up with the same value, **werewolf**. This is because instead of creating a new local variable with var, it is reassigning the same variable in the same scope."}]},{key:"a44085f3-06c0-4910-9787-af5b20c0709b",parentKey:"08aaf5bf-5222-4d4c-bd8d-2267d2f81433",subKeys:[],collapse:!1,style:'{"contentStyle":{"background":"#9b9b9b"}}',blocks:[{type:"CONTENT",data:"Module scope"},{type:"DESC",data:"A module is just a file. One script is one module. Modules can load each other and use special directives export and import to interchange functionality, call functions of one module from another one:\n\n* **export** keyword labels variables and functions that should be accessible from outside the current module.\n* **import** allows the import of functionality from other modules.\n\n\nBefore modules, a variable declared outside any function was a global variable. In modules, a variable declared outside any function is hidden and not available to other modules unless it is explicitly exported.\n\n**Example 1:**\n\nFor instance, if we have a file** sayHi\\.js** exporting a function:\n\n```\n// \ud83d\udcc1 sayHi.js\nexport function sayHi(user) {\n  alert(`Hello, ${user}!`);\n}\n\n```\n\n\u2026Then another file may import and use it:\n\n```\n// \ud83d\udcc1 main.js\nimport {sayHi} from './sayHi.js';\n\nalert(sayHi); // function...\nsayHi('John'); // Hello, John!\n\n```\n\n**Example 2:**\n\n**circle\\.js**\n\n```\n// \"circle\" module scope\nconst pi = 3.14159;\n\nconsole.log(pi); // 3.14159\n\n// Usage of pi\n\n```\n\n**main\\.js**\n\n```\nimport './circle';\n\nconsole.log(pi); // throws ReferenceError\n\n```\n\nThe variable pi is **not accessible** outside of circle module \\(unless explicitly exported using export\\)."}]},{key:"a3055667-8217-484e-aae8-728cab93135c",parentKey:"d40f6cf0-dcae-4162-8b2f-d89edd7e3212",subKeys:[],collapse:!1,style:null,blocks:[{type:"CONTENT",data:"for .. of"},{type:"DESC",data:"The for\\-of loop is similar to the for\\-in loop because it loops over an object\u2019s elements one by one. Compared to the for\\-in loop, it is newer and automatically uses an iterator.\n\n```\nfor (let i of object) {\n    console.log(i);\n}\n\n```\n\nIf the object is an array, the for\\-of loop will **print out the values** of the array\u2019s indexes in order.\n\n**example 1:**\n\n```\nlet arr = [3, 5, 7];\n    \nfor (let i of arr) {\n  console.log(i);\n}\n\n// output:\n// 3\n// 5\n// 7\n\n```\n\n**example 2:**\n\n```\nconst items = {\n  'first': new Date(),\n  'second': 2,\n  'third': 'test'\n}\n\nfor (let i of items) {\n  console.log(i);\n}\n\n// Output: TypeError: items is not iterable\n\n```\n"}]},{key:"a9f8d9be-7d66-4b3e-941d-429c02913ec5",parentKey:"f8750599-32db-4fb3-829e-0673887df2c2",subKeys:[],collapse:!1,style:null,blocks:[{type:"CONTENT",data:"Arrow\nfunction"},{type:"DESC",data:'An _**arrow function**_ is defined using a pair of parenthesis that contains the list of parameters \\(param1, param2, ..., paramN\\), followed by a fat arrow =\\> and a pair of curly braces \\{...\\} that delimits the body statements.\n\n**example 1:**\n\n```\nconst square = (value) => {\n  return value * value\n}\nsquare(10); // output: "100"\n\n```\n\n**example 2:**\n* When the arrow function has only one parameter, the pair of parentheses can be omitted. When it contains a single statement, the curly braces can be omitted too.\n\n```\nconst square = value => value * value;\nsquare(10); // output: "100"\n\n```\n\n**example 3:**\n* when it takes no parameters\n\n```\nconst currentDate = () => console.log(new Date().toString().slice(0,15));\ncurrentDate(); // output: "Wed Jul 21 2021"\n\nconst currentTime = _ => console.log(new Date().toTimeString().slice(0, 8));\ncurrentTime(); // output: "19:08:58"\n\n```\n'}]},{key:"265fb26e-4629-437b-8e64-aa7ce30ae47a",parentKey:"252c6937-bd93-4233-90cb-333938667c72",subKeys:[],collapse:!1,style:null,blocks:[{type:"CONTENT",data:"let"},{type:"DESC",data:'It it\u2019s block\\-scoped, and value stored in it can be reassigned.\n\nTo declare or create a varaible\n\n```\nlet message;\n\n```\n\nAssign a data into it by using the assignment operator =:\n\n```\nmessage = \'Hello\';\n\n```\n\nCombine the variable _declaration_ and _assignment_ into a single line\n\n```\nlet message = \'Hello!\';\n\n```\n\nDeclare multiple variables in one line\n\n```\nlet user = \'John\', age = 25, message = \'Hello\';\n\n```\n\nReassigning a value\n\n```\nlet userName = "Bruce"\nuserName = "Wayne"\n\n```\n\nLet is **block\\-scoped**\n\n```\nlet fullMoon = true;\n\n// Initialize a global variable\nlet species = "human";\n\nif (fullMoon) {\n  // Initialize a block-scoped variable\n  let species = "werewolf";\n  console.log(`${species}`); // "werewolf"\n}\n\nconsole.log(`${species}`); // "human"\n\n```\n'}]},{key:"06067a6c-cfd1-4faf-8aa6-5eb827f3d020",parentKey:"44213600-22aa-4972-aa99-eec27b840064",subKeys:["c92fd58b-57a4-4c72-897a-d1c394f9a8aa","1590d94a-ef69-4f89-9e2d-a3de018ca2d4","5c6ad5d4-eb49-479c-be03-0b8d8e805cee","4567082c-b57b-45f4-8c04-168f9a2f123f","b31ac6cb-b3c3-4dd2-83a1-6b5b7466d048","b5c8a0d0-01e6-4922-a8f0-132d5442bb1d","e784d8b5-f79b-469c-8fa4-e7305d4405b3"],collapse:!1,style:null,blocks:[{type:"CONTENT",data:"Primitive"},{type:"DESC",data:'All primitive values are immutable, means \u201c**unchangeable**\u201d. Read\\-only. \n\n```\nExample 1:\n\nlet str = \'hello\';\nconsole.log(str[0]); // "h"\nstr[0] = \'j\';\nconsole.log(str); // "hello"\n\n```\n\n```\nExample 2: https://github.com/getify/You-Dont-Know-JS/blob/2nd-ed/get-started/apA.md\n\nlet myName = "Kyle";\nlet yourName = myName;\nmyName = "Frank";\nconsole.log(myName); // "Frank"\nconsole.log(yourName); // "Kyle"\n\n```\n\n**yourName** wasn\'t affected by the re\\-assignment of **myName** to "Frank"? That\'s because each variable holds its own copy of the value.'}]},{key:"1590d94a-ef69-4f89-9e2d-a3de018ca2d4",parentKey:"06067a6c-cfd1-4faf-8aa6-5eb827f3d020",subKeys:[],collapse:!1,style:null,blocks:[{type:"CONTENT",data:"BigInt"},{type:"DESC",data:'In JavaScript, the \u201cnumber\u201d type cannot represent integer values larger than \\(253\\-1\\) \\(that\u2019s 9007199254740991\\), or less than \\-\\(253\\-1\\) for negatives. It\u2019s a technical limitation caused by their internal representation.\n\n```\nconsole.log(typeof(22234234n)); // "bigint"\n\n```\n\nA BigInt value is created by appending n to the end of an integer:\n\n// the "n" at the end means it\'s a BigInt\n```\nconst bigInt = 1234567890123456789012345678901234567890n;\n\n```\n\nBigInt numbers are rarely needed'}]},{key:"65199906-ca55-4ae8-bd9f-a4a08cbc2432",parentKey:"d40f6cf0-dcae-4162-8b2f-d89edd7e3212",subKeys:[],collapse:!1,style:null,blocks:[{type:"CONTENT",data:"while"},{type:"DESC",data:'The **while** loop loops through a block of code as long as the specified condition evaluates to true. As soon as the condition fails, the loop is stopped.\n\n**Syntax:**\n\n```\nwhile(condition) {\n    // as long as the condition is true\n    // code in this block will be executed\n}\n\n```\n\n**example 1:**\n\n```\nlet count = 1;\nwhile(count <= 5) {    \n    console.log("The number is " + count);\n    count++;\n}\n\n// Output:\n// The number is 1\n// The number is 2\n// The number is 3\n// The number is 4\n// The number is 5\n\n```\n\n**example 2: **skipping current execution of loop using **continue** statement\n\n```\nlet count = 1;\nwhile(count <= 10) {\n    if(count%2===0){\n        count++;\n        continue;\n    }    \n    console.log("The number is " + count);\n    count++;\n}\n\n// Output:\n// "The number is 1"\n// "The number is 3"\n// "The number is 5"\n// "The number is 7"\n// "The number is 9"\n\n```\n\n**example 3**: terminating current execution flow of the loop using **break** statement\n\n```\nlet count = 1;\nwhile(true) {\n    if(count===10){\n        break;\n    }    \n    console.log("The number is " + count);\n    count++;\n}\n\n// Output:\n// "The number is 1"\n// "The number is 2"\n// "The number is 3"\n// "The number is 4"\n// "The number is 5"\n// "The number is 6"\n// "The number is 7"\n// "The number is 8"\n// "The number is 9"\n\n```\n'}]},{key:"f548ba3e-55f6-484d-8289-858f8fd28289",parentKey:"4567082c-b57b-45f4-8c04-168f9a2f123f",subKeys:[],collapse:!1,style:null,blocks:[{type:"CONTENT",data:""}]},{key:"35cf3ece-a21e-4a8e-a8f8-d2b24a2b742d",parentKey:"08aaf5bf-5222-4d4c-bd8d-2267d2f81433",subKeys:[],collapse:!1,style:null,blocks:[{type:"CONTENT",data:"Global scope"},{type:"DESC",data:'Variables defined outside any function, block, or module scope have global scope. Variables in global scope can be accessed from everywhere in the application. When there is no module system in place, it is a lot easier to create global variables. A variable declared outside any function, in any file, is a global variable.\n\nIn a browser environment, the topmost scope of JavaScript file loaded using <script\\> tag is a global scope:\n\n```\n<script src="myScript.js"><\/script>\n\n```\n\n```\n// myScript.js\n\n// "global" scope\nlet counter = 1;\n\n```\n\nThe global scope is a mechanism that lets the host of JavaScript \\(browser, Node\\) supply applications with host\\-specific functions as global variables.\n\n**Note: window** and **document**, for example, are global variables supplied by the **browser**. In a **Node** environment, you can access **global** object as a global variable.'}]},{key:"5499f8cd-26d8-4796-acc9-b138109bcea0",parentKey:"e784d8b5-f79b-469c-8fa4-e7305d4405b3",subKeys:[],collapse:!1,style:null,blocks:[{type:"CONTENT",data:""}]},{key:"5c6ad5d4-eb49-479c-be03-0b8d8e805cee",parentKey:"06067a6c-cfd1-4faf-8aa6-5eb827f3d020",subKeys:[],collapse:!1,style:null,blocks:[{type:"CONTENT",data:"String"},{type:"DESC",data:'A string in JavaScript must be surrounded by quotes.\n\n```\nconsole.log(typeof("hello")); // "string"\n\n```\n\n```\nlet str = "Hello";\nlet str2 = \'Single quotes are ok too\';\nlet phrase = `can embed another ${str}`;\n\n```\n\nIn JavaScript, there are 3 types of quotes.\n```\nDouble quotes: "Hello".\nSingle quotes: \'Hello\'.\nBackticks: `Hello`.\n\n```\n'}]},{key:"c92fd58b-57a4-4c72-897a-d1c394f9a8aa",parentKey:"06067a6c-cfd1-4faf-8aa6-5eb827f3d020",subKeys:[],collapse:!1,style:null,blocks:[{type:"CONTENT",data:"Number"},{type:"DESC",data:'The number type represents both integer and floating point numbers.\n\n```\nconsole.log(typeof(2)); // "number"\nconsole.log(typeof(100.554)); // "number"\n\n```\n\n```\nlet age = 35\nconst gravity = 9.81  // const for non-changing values\nlet mass = 72         // mass in Kilogram\nconst PI = 3.14       // pi a geometrical constant\n\n```\n\n\n// More Examples\n```\nconst boilingPoint = 100 // temperature in oC, boiling point of water which is a constant\nconst bodyTemp = 37      // oC average human body temperature, which is a constant\n\n```\n\n// finally printing the values\n```\nconsole.log(age, gravity, mass, PI, boilingPoint, bodyTemp)\n\n```\n'}]},{key:"69e69b35-9400-4fb3-aa5e-e9315b4a6eba",parentKey:"08aaf5bf-5222-4d4c-bd8d-2267d2f81433",subKeys:[],collapse:!1,style:null,blocks:[{type:"CONTENT",data:"Closure"},{type:"DESC",data:"A **closure** is the combination of a function bundled together \\(enclosed\\) with references to its surrounding state \\(the lexical environment\\). In other words, a closure gives you access to an outer function\u2019s scope from an inner function. In JavaScript, closures are created every time a function is created, at function creation time.\n\nThe closure **captures** variables from lexical environment.\n\n```\nfunction outerFunc() {\n  let outerVar = 'I am outside!';\n\n  function innerFunc() {\n    console.log(outerVar); // => logs \"I am outside!\"\n  }\n\n  return innerFunc; // Even though this function is being returned it still remembers lexical environment\n}\n\nconst myInnerFunc = outerFunc();\nmyInnerFunc();\n\n```\n\nNow **innerFunc\\(\\)** is executed outside of its lexical scope. And what\u2019s important:\n\n**innerFunc\\(\\)** still has access to **outerVar** from its **lexical scope**, _even being executed outside of its lexical scope_.\n\nIn other words, **innerFunc\\(\\) **closes over \\(a.k.a. captures, remembers\\) the variable outerVar from its lexical scope.\n\nFor more info \\- [https://www.youtube.com/watch?v=qikxEIxsXco](https://www.youtube.com/watch?v=qikxEIxsXco)"}]},{key:"6a4344e6-1374-47f1-973b-74ea51bcc3b1",parentKey:"08aaf5bf-5222-4d4c-bd8d-2267d2f81433",subKeys:[],collapse:!1,style:null,blocks:[{type:"CONTENT",data:"Lexical scope"},{type:"DESC",data:'Lexical scope means that in a nested group of functions, **the inner functions have access to the variables and other resources of their parent scope. **Lexical scope is sometimes also referred to as **static scope**.\n\n```\nconst myGlobal = 0;\n\nfunction func() {\n  const myVar = 1;\n  console.log(myGlobal); // logs "0"\n  function innerOfFunc() {\n    const myInnerVar = 2;\n    console.log(myVar, myGlobal); // logs "1 0"\n    function innerOfInnerOfFunc() {\n      console.log(myInnerVar, myVar, myGlobal); // logs "2 1 0"\n    }\n    innerOfInnerOfFunc();\n  }\n  innerOfFunc();\n}\n\nfunc();\n\n```\n\nThe lexical scope of **innerOfInnerOfFunc\\(\\)** consits of scopes of **innerOfFunc\\(\\)**, **func\\(\\)** and global scope \\(the outermost scope\\). Within **innerOfInnerOfFunc\\(\\)** you can access the lexical scope variables **myInnerVar, myVar **and** myGlobal**.\n\nThe lexical scope of **innerFunc\\(\\)** consists of **func\\(\\)** and global scope. Within **innerOfFunc\\(\\)** you can access the lexical scope variables **myVar** and **myGlobal**.\n\nFinally, the lexical scope of **func\\(\\)** consists of only the global scope. Within **func\\(\\)** you can access the lexical scope variable **myGlobal**.\n\nFor more info \\- [https://www.youtube.com/watch?v=uH\\-tVP8MUs8](https://www.youtube.com/watch?v=uH-tVP8MUs8)'}]},{key:"50256453-3cf5-4adf-85c0-562970b46468",parentKey:"08aaf5bf-5222-4d4c-bd8d-2267d2f81433",subKeys:["c007d461-f421-48fd-9566-ac88d298bbb8"],collapse:!0,style:null,blocks:[{type:"CONTENT",data:"Block scope"},{type:"DESC",data:"A code block in JavaScript defines a scope for variables declared using **let** and **const **within a curly brace **\\{\\}. **it can be accessed only within that curly brace.\n\n```\nif (true) {\n  // \"if\" block scope\n  const message = 'Hello';\n  console.log(message); // 'Hello'\n}\nconsole.log(message); // throws ReferenceError\n\n```\n\n\n### var is not block scoped\n\n```\nif (true) {\n  // \"if\" block scope\n  var count = 0;\n  console.log(count); // 0\n}\nconsole.log(count); // 0\n\n```\n\nA code block does not create a scope for var variables, but a function body does."}]},{key:"08aaf5bf-5222-4d4c-bd8d-2267d2f81433",parentKey:"7b11654a-e9d3-45ba-a1aa-afca29ff5f18",subKeys:["50256453-3cf5-4adf-85c0-562970b46468","7662833c-7ece-4668-a37b-4e11820503b4","a44085f3-06c0-4910-9787-af5b20c0709b","4c35fca7-ac9c-4475-99ab-d77f97120360","35cf3ece-a21e-4a8e-a8f8-d2b24a2b742d","6a4344e6-1374-47f1-973b-74ea51bcc3b1","84650864-61f6-4e20-b87d-ed779ffa7d20","69e69b35-9400-4fb3-aa5e-e9315b4a6eba"],collapse:!1,style:null,blocks:[{type:"CONTENT",data:"Scopes & \nClosure"},{type:"DESC",data:"Scope in JavaScript refers to the current context of code, which determines the **accessibility of variables**.\n\n**Reference** \n* [https://dmitripavlutin.com/javascript\\-scope/](https://dmitripavlutin.com/javascript-scope/)\n* [https://www.freecodecamp.org/news/an\\-introduction\\-to\\-scope\\-in\\-javascript\\-cbd957022652/](https://www.freecodecamp.org/news/an-introduction-to-scope-in-javascript-cbd957022652/)\n* [https://blog.bitsrc.io/understanding\\-scope\\-and\\-scope\\-chain\\-in\\-javascript\\-f6637978cf53](https://blog.bitsrc.io/understanding-scope-and-scope-chain-in-javascript-f6637978cf53)\n\n"}]},{key:"10d9744a-f521-4bdf-8933-9c3fb1cfb2c8",parentKey:"3854fdd8-7de4-429c-b73d-2519cbf63781",subKeys:["d3f7bd55-fe91-45b2-b13e-ea98bb7710d9"],collapse:!0,style:null,blocks:[{type:"CONTENT",data:"else Statement"},{type:"DESC",data:'**if** statement can be extended with an **else** statement, which adds another block to run when the **if** condition doesn\u2019t pass.\n\n**Syntax:**\n\n```\nif (condition) {\n      //condition is true this block will be executed\n      // no futher conditions will be checked\n} else {\n      //when a condition is false/failed this block will be executed\n}\n\n```\n\n**example:**\n\n```\nif ("cat" === "dog") {\n      console.log("if block executed");\n} else {\n      console.log("else block executed");\n}\n\n```\n'}]},{key:"3854fdd8-7de4-429c-b73d-2519cbf63781",parentKey:"7b11654a-e9d3-45ba-a1aa-afca29ff5f18",subKeys:["ffcc44e2-dc44-4241-8c15-ee2ab8c71588","10d9744a-f521-4bdf-8933-9c3fb1cfb2c8","9677e53a-05a4-4bd6-9010-f10826426bb6","62136ee4-f92e-49fb-b4de-03911ffe1da1"],collapse:!1,style:null,blocks:[{type:"CONTENT",data:"Conditional\nStatements"},{type:"DESC",data:'Conditional statements controls behavior in JavaScript and determine whether or not a piece of code can run.\n\n\n## Truthy\n\nIn JavaScript, a truthy value is a value that is considered true when encountered in a Boolean context. All values are truthy unless they are defined as falsy \\(i.e., except for false, 0, \\-0, 0n, "", null, undefined, and NaN\\).\n\n**Examples of truthy values** in JavaScript \\(which will be coerced to true in boolean contexts, and thus execute the if block\\)\n\n```\nif (true)\nif ({})\nif ([])\nif (42)\nif ("0")\nif ("false")\nif (new Date())\nif (-42)\nif (12n)\nif (3.14)\nif (-3.14)\nif (Infinity)\nif (-Infinity)\n\n```\n\n\n## Falsy\n\nA falsy \\(sometimes written falsey\\) value is a value that is considered false when encountered in a Boolean context.\n\n**Complete list of JavaScript falsy values**\n| false | The keyword false. |\n|:--- |:--- |\n| 0 | The Number zero \\(so, also 0.0, etc., and 0x0\\). |\n| \\-0 | The Number negative zero \\(so, also \\-0.0, etc., and \\-0x0\\). |\n| 0n | The BigInt zero \\(so, also 0x0n\\). Note that there is no BigInt negative zero \u2014 the negation of 0n is 0n. |\n| "", | \'\', \\`\\` Empty string value. |\n| null | null \u2014 the absence of any value. |\n| undefined | undefined \u2014 the primitive value. |\n| NaN | NaN \u2014 not a number. |\n| document\\.all | Objects are falsy if and only if they have the \\[\\[IsHTMLDDA\\]\\] internal slot.That slot only exists in document.all and cannot be set using JavaScript. |\n'}]},{key:"4c35fca7-ac9c-4475-99ab-d77f97120360",parentKey:"08aaf5bf-5222-4d4c-bd8d-2267d2f81433",subKeys:["75e32173-5b17-4d07-b761-2003054bf186"],collapse:!0,style:null,blocks:[{type:"CONTENT",data:"Scope chain"},{type:"DESC",data:"When a variable is used in JavaScript, the JavaScript engine will try to find the variable\u2019s value in the current scope. If it could not find the variable, it will look into the outer scope and will continue to do so until it finds the variable or reaches global scope.\n\nIf it\u2019s still could not find the variable, it will either implicitly declare the variable in the global scope \\(if not in strict mode\\) or return an error.\n\nExample 1:\n\n```\nfunction run() {\n  // \"run\" function scope\n  const message = 'Run, Forrest, Run!';\n\n  if (true) {\n    // \"if\" code block scope\n    const friend = 'Bubba';\n    console.log(message); // 'Run, Forrest, Run!'\n  }\n\n  console.log(friend); // throws ReferenceError\n}\n\nrun();\n\n```\n\nThe scope contained within another scope is named **_inner scope_**. In the example, if code block scope is an inner scope of run\\(\\) function scope.\nThe scope that wraps another scope is named **_outer scope_**. In the example, run\\(\\) function scope is an outer scope to if code block scope."}]},{key:"84650864-61f6-4e20-b87d-ed779ffa7d20",parentKey:"08aaf5bf-5222-4d4c-bd8d-2267d2f81433",subKeys:[],collapse:!1,style:null,blocks:[{type:"CONTENT",data:"Hoisting"},{type:"DESC",data:'Hoisting is a JavaScript mechanism where variables and function declarations are **moved to the top of their scope** before code execution.\n\nWhen you execute a piece of JavaScript code, the JavaScript engine creates the **global execution context**. The global execution context has two phases: _creation_ and **execution**. During the creation phase, the JavaScript engine moves the variable and function declarations to the top of your code. This feature is known as hoisting in JavaScript.\n\nRefference \n* [https://www.javascripttutorial.net/javascript\\-hoisting/](https://www.javascripttutorial.net/javascript-hoisting/)\n* [https://www.youtube.com/watch?v=Fnlnw8uY6jo](https://www.youtube.com/watch?v=Fnlnw8uY6jo)\n\n\n## Variable hoisting\n\n* using **var**\n\n\n```\nconsole.log(counter); // undefined\nvar counter = 1;\n\n```\n\n* using **let**\n\n\n```\nconsole.log(counter); // "ReferenceError: Cannot access \'counter\' before initialization\nlet counter = 1;\n\n```\n\n\n## Function hoisting\n\n```\nlet x = 20,\n    y = 10;\n\nlet result = add(x,y);\n\n// this prints actual copy of the whole function\nconsole.log(add) // \u0192 add(a, b){\n                 //  return a + b;\n                 //  }\n\nconsole.log(result); // 30\n\nfunction add(a, b){\nreturn a + b;\n}\n\n```\n\n\n## Function expressions\n\n```\nlet x = 20,\n    y = 10;\n\nlet result = add(x,y);\nconsole.log(result); // "TypeError: add is not a function\n\nvar add = function(x, y) {\nreturn x + y;\n}\n\n```\n\n```\nlet x = 20,\n    y = 10;\n\nlet result = add(x,y);\nconsole.log(result); // "TypeError: add is not a function\n\nvar add = (x, y) => x + y;\n\n```\n\nDuring the creation phase of the **global execution context**, the JavaScript Engine creates the **add** variable in the memory and initializes its value to **undefined**. When executing the following code, the add is undefined, hence, it isn\u2019t a function.'}]},{key:"85ee6b37-5053-4f78-b25d-53d1bf11d87b",parentKey:"252c6937-bd93-4233-90cb-333938667c72",subKeys:[],collapse:!1,style:null,blocks:[{type:"CONTENT",data:"const"},{type:"DESC",data:"The keyword const is an abbreviation for constant. Similar to let, it\u2019s block\\-scoped, however, you can\u2019t reassigned it."}]},{key:"62136ee4-f92e-49fb-b4de-03911ffe1da1",parentKey:"3854fdd8-7de4-429c-b73d-2519cbf63781",subKeys:[],collapse:!1,style:null,blocks:[{type:"CONTENT",data:"switch"},{type:"DESC",data:"The **switch** statement evaluates an expression, matching the expression's value to a case clause, and executes statements associated with that case, as well as statements in cases that follow the matching case.\n\n**Example 1:** expression matches a case\n\nThe **break** statement terminates the current flow of execution\n\n```\nconst expr = 'Papayas';\nswitch (expr) {\n  case 'Oranges':\n    console.log('Oranges are $0.59 a pound.');\n    break;\n  case 'Mangoes':\n  case 'Papayas':\n    console.log('Mangoes and papayas are $2.79 a pound.');\n    break;\n  default:\n    console.log(`Sorry, we are out of ${expr}.`);\n}\n\n// output: \"Mangoes and papayas are $2.79 a pound.\"\n\n```\n\n**Example 2:** expression did not match any cases\n\n```\nconst expr = 'Onion';\nswitch (expr) {\n  case 'Oranges':\n    console.log('Oranges are $0.59 a pound.');\n    break;\n  case 'Mangoes':\n  case 'Papayas':\n    console.log('Mangoes and papayas are $2.79 a pound.');\n    break;\n  default:\n    console.log(`Sorry, we are out of ${expr}.`);\n}\n\n// output: \"Sorry, we are out of Onion.\"\n\n```\n\n**Example 3:** expression matches a case but break statement is not specified\n\nIf you forget a **_break_** then the script will run from the case where the criterion is met and will run the cases after that **_regardless if a criterion was met_**.\n\n```\nconst expr = 'Oranges';\nswitch (expr) {\n  case 'Oranges':\n    console.log('Oranges are $0.59 a pound.');\n  case 'Mangoes':\n  case 'Papayas':\n    console.log('Mangoes and papayas are $2.79 a pound.');\n  default:\n    console.log(`Sorry, we are out of ${expr}.`);\n}\n\n// Output:\n// Oranges are $0.59 a pound.\n// Mangoes and papayas are $2.79 a pound.\n// Sorry, we are out of Oranges.\n\n```\n"}]},{key:"2c6ddd66-98a5-4410-b7f2-dbd42aaa7e01",parentKey:"44213600-22aa-4972-aa99-eec27b840064",subKeys:["dbc9a664-bff0-4263-811c-cb91470ce277","fc11e9b2-fb2a-4f5d-934e-65c172bb61fa"],collapse:!1,style:null,blocks:[{type:"CONTENT",data:"Non-primitive"},{type:"DESC",data:'Non\\-primitive are mutuable means \'**changeable**\'.  Only object values \\(arrays, objects, functions, etc.\\) are treated as references\n\n```\nExmaple 1:\n\nlet arr = [212, 8, 506];\nconsole.log(arr[0]); // 212\narr[0] = 420;\nconsole.log(arr); // [420, 8, 506]\n\n```\n\n```\nExample 2: https://github.com/getify/You-Dont-Know-JS/blob/2nd-ed/get-started/apA.md\n\nlet myAddress = {\n    street: "123 JS Blvd",\n    city: "Austin",\n    state: "TX"\n};\n\nlet yourAddress = myAddress;\n\nmyAddress.street = "456 TS Ave";\n\nconsole.log(yourAddress.street); // 456 TS Ave\nconsole.log(myAddress.street) // 456 TS Ave\n\n```\n\nValue assigned to **myAddress** is an object, it\'s held/assigned by reference, and thus the assignment to the **yourAddress** variable is a copy of the reference, not the object value itself. That\'s why the updated value assigned to the myAddress.street is reflected when we access yourAddress.street. myAddress and yourAddress have copies of the **reference to the single shared object**, so an update to one is an update to both.\n'}]},{key:"44213600-22aa-4972-aa99-eec27b840064",parentKey:"7b11654a-e9d3-45ba-a1aa-afca29ff5f18",subKeys:["06067a6c-cfd1-4faf-8aa6-5eb827f3d020","2c6ddd66-98a5-4410-b7f2-dbd42aaa7e01"],collapse:!1,style:null,blocks:[{type:"CONTENT",data:"Data types"},{type:"DESC",data:"1. [https://javascript.info/types](https://javascript.info/types)\n1. [https://developer.mozilla.org/en\\-US/docs/Web/JavaScript/Data\\_structures](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures)\n1. [https://github.com/getify/You\\-Dont\\-Know\\-JS/blob/1st\\-ed/types%20%26%20grammar/ch1.md](https://github.com/getify/You-Dont-Know-JS/blob/1st-ed/types%20&%20grammar/ch1.md)\n\n"}]},{key:"ffcc44e2-dc44-4241-8c15-ee2ab8c71588",parentKey:"3854fdd8-7de4-429c-b73d-2519cbf63781",subKeys:[],collapse:!1,style:null,blocks:[{type:"CONTENT",data:"If Statement"},{type:"DESC",data:'**If** statement only runs if the condition enclosed in parentheses \\(\\) is truthy\n\n**Syntax:**\n\n```\nif (condition) {\n    //condition is true this block will be executed\n}\n\n```\n\n**example**:\n\n```\nif (10 > 5) {\n    console.log("if blocked executed");\n}\n\n```\n'}]},{key:"75e32173-5b17-4d07-b761-2003054bf186",parentKey:"4c35fca7-ac9c-4475-99ab-d77f97120360",subKeys:[],collapse:!1,style:null,blocks:[{type:"CONTENT",data:""}]},{key:"252c6937-bd93-4233-90cb-333938667c72",parentKey:"7b11654a-e9d3-45ba-a1aa-afca29ff5f18",subKeys:["05c8bbd0-fe13-4906-92cf-8507b33954da","265fb26e-4629-437b-8e64-aa7ce30ae47a","85ee6b37-5053-4f78-b25d-53d1bf11d87b"],collapse:!1,style:null,blocks:[{type:"CONTENT",data:"Variables"},{type:"DESC",data:'A variable is a \u201cnamed storage\u201d for data. We can use variables to store goodies, visitors, and other data.\n\n* **Global variables** are those declared outside of a block\n* **Local variables** are those declared inside of a block\n\n\n```\nlet species = "human"; // global variable\n\nif(fullmoon){\n   let species = "werewolf"; // local variable\n}\n\n```\n\nDifference Between **var**, **let**, and **const**\n\n```\n| Keyword |     Scope      | Hoisting | Can Be Reassigned | Can Be Redeclared |\n| :-----: | :------------: | :------: | :---------------: | :---------------: |\n|   var   | Function scope |   Yes    |        Yes        |        Yes        |\n|   let   |  Block scope   |    No    |        Yes        |        No         |\n|  const  |  Block scope   |    No    |        No         |        No         |\n\n\n```\n\n\n## Var VS let\n\n* [https://www.javascripttutorial.net/es6/difference\\-between\\-var\\-and\\-let/](https://www.javascripttutorial.net/es6/difference-between-var-and-let/)\n\n'}]},{key:"0341d846-c3f3-4915-a4b3-0c11b3643a9d",parentKey:"f8750599-32db-4fb3-829e-0673887df2c2",subKeys:[],collapse:!1,style:null,blocks:[{type:"CONTENT",data:"Function\ndeclarations"},{type:"DESC",data:'A **function** definition \\(also called a function declaration, or function statement\\) consists of the function keyword, followed by:\n* The name of the function.\n* A list of parameters to the function, enclosed in parentheses and separated by commas.\n* The JavaScript statements that define the function, enclosed in curly brackets, \\{...\\}.\n\n\n**Syntax:**\n\n```\nfunction validFunctionName(parameter1, parameter2) {\n  return statement;\n}\n\n```\n\n**example 1: which takes no parameters and returns nothing \\(void\\)**\n\n```\nfunction currentTime() {\n  console.log(new Date().toTimeString().slice(0, 8));\n}\n\ncurrentTime() // output: "18:35:36"\n\n```\n\n**example 2: which takes parameters and returns a value**\n\nThe **return** statement ends function execution and specifies a value to be returned to the function caller.\n```\nfunction sum(a, b) {\n  return a + b;\n}\nconst result = sum(5, 6);\n\nconsole.log(result); // output: "11"\n\n```\n\n**example 3**: **default parameters** \n\n```\nfunction showMessage(from, text = "no text given") {\n  console.log( from + ": " + text );\n}\n\nshowMessage("Ann"); // output: "Ann: no text given"\nshowMessage("Ann", "Hello, world!"); // output: "Ann: Hello, world!"\n\n```\n'}]},{key:"b5c8a0d0-01e6-4922-a8f0-132d5442bb1d",parentKey:"06067a6c-cfd1-4faf-8aa6-5eb827f3d020",subKeys:[],collapse:!1,style:'{"contentStyle":{"background":"#50e3c2"}}',blocks:[{type:"CONTENT",data:"Undefined"},{type:"DESC",data:'The special value undefined also stands apart. It makes a type of its own, just like null.\n\n```\nconsole.log(typeof(undefined)); // "undefined"\n\n```\n\nThe meaning of undefined is \u201c**value is not assigned**\u201d.\n\nIf a **variable is declared, but not assigned**, then its value is undefined:\n\n```\nlet age;\nconsole.log(age); // shows "undefined"\n\n```\n\nTechnically, it is possible to explicitly assign undefined to a variable:\n\n```\nlet age = 100;\n\n// change the value to undefined\nage = undefined;\n\nconsole.log(age); // shows "undefined"\n\n```\n'}]},{key:"dfb39c55-dfce-4d5a-88a7-5fd066288121",parentKey:"a1649782-ec29-4030-bb2d-d6044103cf10",subKeys:[],collapse:!1,style:null,blocks:[{type:"CONTENT",data:""}]},{key:"e784d8b5-f79b-469c-8fa4-e7305d4405b3",parentKey:"06067a6c-cfd1-4faf-8aa6-5eb827f3d020",subKeys:["5499f8cd-26d8-4796-acc9-b138109bcea0"],collapse:!0,style:null,blocks:[{type:"CONTENT",data:"Symbol"},{type:"DESC",data:"The JavaScript **ES6** introduced a new primitive data type called Symbol. A Symbol is a unique and immutable primitive value and may be used as the key of an Object property.\n\n```\nconsole.log(typeof(Symbol())); // \"symbol\"\n\n```\n\n```\n// two symbols with the same description\n\nconst value1 = Symbol('hello');\nconst value2 = Symbol('hello');\n\nconsole.log(value1 === value2); // false\n\n```\n"}]},{key:"c007d461-f421-48fd-9566-ac88d298bbb8",parentKey:"50256453-3cf5-4adf-85c0-562970b46468",subKeys:[],collapse:!1,style:null,blocks:[{type:"CONTENT",data:""}]},{key:"29f23365-fcf6-4f8f-8060-811df84e4770",parentKey:"d40f6cf0-dcae-4162-8b2f-d89edd7e3212",subKeys:["c1e621c4-ae65-40d0-ad48-650368d181d0"],collapse:!0,style:null,blocks:[{type:"CONTENT",data:"for .. in"},{type:"DESC",data:'The for\\-in loop always loops over an object\u2019s elements one by one. These names can be array indexes or key\\-value pairs. \n_**Iterates over all enumerable property keys of an object.**_\n\n**Syntax:**\n\n```\nfor (let i in object) {\n    console.log(object[i]);\n}\n\n```\n\nIf the object is an array, the for\\-in loop will **print out the array indexes in order**. If the object contains key\\-value pairs, the for\\-in loop will **print out each key that exists**. The for\\-in loop does not guarantee that keys within key\\-value pairs will always be accessed in the same order.\n\n**example 1:**\n\n```\nlet arr = [3, 5, 7];\narr.foo = "hello";\n    \nfor (let i in arr) {\n  console.log(i); // by default it print outs the indexes and key\n}\n\n// output:\n// 0\n// 1\n// 2\n// foo\n\n```\n\n**example 2:**\n\n```\nlet arr = [3, 5, 7];\narr.foo = "hello";\n    \nfor (let i in arr) {\n  console.log(arr[i]);\n}\n\n// output:\n// 3\n// 5\n// 7\n// hello\n\n```\n'}]},{key:"f8750599-32db-4fb3-829e-0673887df2c2",parentKey:"7b11654a-e9d3-45ba-a1aa-afca29ff5f18",subKeys:["0341d846-c3f3-4915-a4b3-0c11b3643a9d","a1649782-ec29-4030-bb2d-d6044103cf10","a9f8d9be-7d66-4b3e-941d-429c02913ec5","220e873a-0a0b-4820-9434-42d0727eead5","a37aef6c-b62c-423c-8124-c18edc14142b"],collapse:!1,style:'{"contentStyle":{"background":"#9eff88"}}',blocks:[{type:"CONTENT",data:"Functions"},{type:"DESC",data:"Functions are the main \u201cbuilding blocks\u201d of the program. They allow the code to be called many times without repetition. A function is executed when \u201csomething\u201d invokes it \\(calls it\\).\n\n**Referrence:**\n* [https://dmitripavlutin.com/6\\-ways\\-to\\-declare\\-javascript\\-functions/](https://dmitripavlutin.com/6-ways-to-declare-javascript-functions/)\n* [https://codeburst.io/understanding\\-generators\\-in\\-es6\\-javascript\\-with\\-examples\\-6728834016d5](https://codeburst.io/understanding-generators-in-es6-javascript-with-examples-6728834016d5)\n\n"}]}],config:{readOnly:!1,allowUndo:!0,layoutDir:2,theme:{name:"default",randomColor:!0,background:"rgb(57,60,65)",highlightColor:"#50C9CE",marginH:60,marginV:20,contentStyle:{lineHeight:"1.5",fontSize:"16px"},linkStyle:{lineRadius:5,lineType:"curve",lineWidth:"3px"},rootTopic:{contentStyle:{fontSize:"36px"},subLinkStyle:{lineType:"curve",lineWidth:"3px"}},primaryTopic:{contentStyle:{fontSize:"24px"},subLinkStyle:{lineType:"curve",lineWidth:"3px"}},normalTopic:{subLinkStyle:{lineType:"curve",lineWidth:"3px"}}}},formatVersion:"0.0"});this.state={model:e}}},{key:"renderDiagram",value:function(){return r.a.createElement(Oc,{ref:this.diagramRef,model:this.state.model,onChange:this.onChange,plugins:qR})}},{key:"renderToolbar",value:function(){var e=this.diagram.getDiagramProps(),t=e.controller,n=t.run("canUndo",e),o=t.run("canRedo",e),c={diagram:this.diagram,onClickUndo:this.onClickUndo,onClickRedo:this.onClickRedo,canUndo:n,canRedo:o};return r.a.createElement(YR,c)}},{key:"render",value:function(){return r.a.createElement("div",{className:"mindmap"},this.diagram&&this.renderToolbar(),this.renderDiagram())}}]),n}(r.a.Component);n(871);var $R=function(){return r.a.createElement(XR,null)};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));localStorage.debug=["app","plugin:layout"].join(","),i.a.render(r.a.createElement($R,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()}))}}]);
//# sourceMappingURL=chunk-blinkmind.f4841ac7.chunk.js.map